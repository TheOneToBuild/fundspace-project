function W8(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function Uc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Y8(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),s}var pb={exports:{}},Xd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function K8(){if(L_)return Xd;L_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Xd.Fragment=e,Xd.jsx=s,Xd.jsxs=s,Xd}var $_;function J8(){return $_||($_=1,pb.exports=K8()),pb.exports}var n=J8(),gb={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function X8(){if(F_)return dt;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function g(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,N={};function j(U,K,J){this.props=U,this.context=K,this.refs=N,this.updater=J||b}j.prototype.isReactComponent={},j.prototype.setState=function(U,K){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,K,"setState")},j.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function w(){}w.prototype=j.prototype;function _(U,K,J){this.props=U,this.context=K,this.refs=N,this.updater=J||b}var k=_.prototype=new w;k.constructor=_,v(k,j.prototype),k.isPureReactComponent=!0;var C=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function M(U,K,J,W,ee,ne){return J=ne.ref,{$$typeof:t,type:U,key:K,ref:J!==void 0?J:null,props:ne}}function R(U,K){return M(U.type,K,void 0,void 0,void 0,U.props)}function D(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function L(U){var K={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(J){return K[J]})}var B=/\/+/g;function O(U,K){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):K.toString(36)}function P(){}function z(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(K){U.status==="pending"&&(U.status="fulfilled",U.value=K)},function(K){U.status==="pending"&&(U.status="rejected",U.reason=K)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,K,J,W,ee){var ne=typeof U;(ne==="undefined"||ne==="boolean")&&(U=null);var X=!1;if(U===null)X=!0;else switch(ne){case"bigint":case"string":case"number":X=!0;break;case"object":switch(U.$$typeof){case t:case e:X=!0;break;case m:return X=U._init,q(X(U._payload),K,J,W,ee)}}if(X)return ee=ee(U),X=W===""?"."+O(U,0):W,C(ee)?(J="",X!=null&&(J=X.replace(B,"$&/")+"/"),q(ee,K,J,"",function(ve){return ve})):ee!=null&&(D(ee)&&(ee=R(ee,J+(ee.key==null||U&&U.key===ee.key?"":(""+ee.key).replace(B,"$&/")+"/")+X)),K.push(ee)),1;X=0;var Q=W===""?".":W+":";if(C(U))for(var de=0;de<U.length;de++)W=U[de],ne=Q+O(W,de),X+=q(W,K,J,ne,ee);else if(de=g(U),typeof de=="function")for(U=de.call(U),de=0;!(W=U.next()).done;)W=W.value,ne=Q+O(W,de++),X+=q(W,K,J,ne,ee);else if(ne==="object"){if(typeof U.then=="function")return q(z(U),K,J,W,ee);throw K=String(U),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return X}function I(U,K,J){if(U==null)return U;var W=[],ee=0;return q(U,W,"","",function(ne){return K.call(J,ne,ee++)}),W}function V(U){if(U._status===-1){var K=U._result;K=K(),K.then(function(J){(U._status===0||U._status===-1)&&(U._status=1,U._result=J)},function(J){(U._status===0||U._status===-1)&&(U._status=2,U._result=J)}),U._status===-1&&(U._status=0,U._result=K)}if(U._status===1)return U._result.default;throw U._result}var H=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Y(){}return dt.Children={map:I,forEach:function(U,K,J){I(U,function(){K.apply(this,arguments)},J)},count:function(U){var K=0;return I(U,function(){K++}),K},toArray:function(U){return I(U,function(K){return K})||[]},only:function(U){if(!D(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},dt.Component=j,dt.Fragment=s,dt.Profiler=a,dt.PureComponent=_,dt.StrictMode=r,dt.Suspense=d,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,dt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return E.H.useMemoCache(U)}},dt.cache=function(U){return function(){return U.apply(null,arguments)}},dt.cloneElement=function(U,K,J){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var W=v({},U.props),ee=U.key,ne=void 0;if(K!=null)for(X in K.ref!==void 0&&(ne=void 0),K.key!==void 0&&(ee=""+K.key),K)!A.call(K,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&K.ref===void 0||(W[X]=K[X]);var X=arguments.length-2;if(X===1)W.children=J;else if(1<X){for(var Q=Array(X),de=0;de<X;de++)Q[de]=arguments[de+2];W.children=Q}return M(U.type,ee,void 0,void 0,ne,W)},dt.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:i,_context:U},U},dt.createElement=function(U,K,J){var W,ee={},ne=null;if(K!=null)for(W in K.key!==void 0&&(ne=""+K.key),K)A.call(K,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ee[W]=K[W]);var X=arguments.length-2;if(X===1)ee.children=J;else if(1<X){for(var Q=Array(X),de=0;de<X;de++)Q[de]=arguments[de+2];ee.children=Q}if(U&&U.defaultProps)for(W in X=U.defaultProps,X)ee[W]===void 0&&(ee[W]=X[W]);return M(U,ne,void 0,void 0,null,ee)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(U){return{$$typeof:c,render:U}},dt.isValidElement=D,dt.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:V}},dt.memo=function(U,K){return{$$typeof:h,type:U,compare:K===void 0?null:K}},dt.startTransition=function(U){var K=E.T,J={};E.T=J;try{var W=U(),ee=E.S;ee!==null&&ee(J,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(Y,H)}catch(ne){H(ne)}finally{E.T=K}},dt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},dt.use=function(U){return E.H.use(U)},dt.useActionState=function(U,K,J){return E.H.useActionState(U,K,J)},dt.useCallback=function(U,K){return E.H.useCallback(U,K)},dt.useContext=function(U){return E.H.useContext(U)},dt.useDebugValue=function(){},dt.useDeferredValue=function(U,K){return E.H.useDeferredValue(U,K)},dt.useEffect=function(U,K,J){var W=E.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(U,K)},dt.useId=function(){return E.H.useId()},dt.useImperativeHandle=function(U,K,J){return E.H.useImperativeHandle(U,K,J)},dt.useInsertionEffect=function(U,K){return E.H.useInsertionEffect(U,K)},dt.useLayoutEffect=function(U,K){return E.H.useLayoutEffect(U,K)},dt.useMemo=function(U,K){return E.H.useMemo(U,K)},dt.useOptimistic=function(U,K){return E.H.useOptimistic(U,K)},dt.useReducer=function(U,K,J){return E.H.useReducer(U,K,J)},dt.useRef=function(U){return E.H.useRef(U)},dt.useState=function(U){return E.H.useState(U)},dt.useSyncExternalStore=function(U,K,J){return E.H.useSyncExternalStore(U,K,J)},dt.useTransition=function(){return E.H.useTransition()},dt.version="19.1.0",dt}var I_;function bh(){return I_||(I_=1,gb.exports=X8()),gb.exports}var y=bh();const Ps=Uc(y),B_=W8({__proto__:null,default:Ps},[y]);var xb={exports:{}},Qd={},bb={exports:{}},vb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function Q8(){return U_||(U_=1,function(t){function e(I,V){var H=I.length;I.push(V);e:for(;0<H;){var Y=H-1>>>1,U=I[Y];if(0<a(U,V))I[Y]=V,I[H]=U,H=Y;else break e}}function s(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var V=I[0],H=I.pop();if(H!==V){I[0]=H;e:for(var Y=0,U=I.length,K=U>>>1;Y<K;){var J=2*(Y+1)-1,W=I[J],ee=J+1,ne=I[ee];if(0>a(W,H))ee<U&&0>a(ne,W)?(I[Y]=ne,I[ee]=H,Y=ee):(I[Y]=W,I[J]=H,Y=J);else if(ee<U&&0>a(ne,H))I[Y]=ne,I[ee]=H,Y=ee;else break e}}return V}function a(I,V){var H=I.sortIndex-V.sortIndex;return H!==0?H:I.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,p=null,g=3,b=!1,v=!1,N=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function C(I){for(var V=s(h);V!==null;){if(V.callback===null)r(h);else if(V.startTime<=I)r(h),V.sortIndex=V.expirationTime,e(d,V);else break;V=s(h)}}function E(I){if(N=!1,C(I),!v)if(s(d)!==null)v=!0,A||(A=!0,O());else{var V=s(h);V!==null&&q(E,V.startTime-I)}}var A=!1,M=-1,R=5,D=-1;function L(){return j?!0:!(t.unstable_now()-D<R)}function B(){if(j=!1,A){var I=t.unstable_now();D=I;var V=!0;try{e:{v=!1,N&&(N=!1,_(M),M=-1),b=!0;var H=g;try{t:{for(C(I),p=s(d);p!==null&&!(p.expirationTime>I&&L());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,g=p.priorityLevel;var U=Y(p.expirationTime<=I);if(I=t.unstable_now(),typeof U=="function"){p.callback=U,C(I),V=!0;break t}p===s(d)&&r(d),C(I)}else r(d);p=s(d)}if(p!==null)V=!0;else{var K=s(h);K!==null&&q(E,K.startTime-I),V=!1}}break e}finally{p=null,g=H,b=!1}V=void 0}}finally{V?O():A=!1}}}var O;if(typeof k=="function")O=function(){k(B)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,z=P.port2;P.port1.onmessage=B,O=function(){z.postMessage(null)}}else O=function(){w(B,0)};function q(I,V){M=w(function(){I(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(I){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var H=g;g=V;try{return I()}finally{g=H}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=g;g=I;try{return V()}finally{g=H}},t.unstable_scheduleCallback=function(I,V,H){var Y=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Y+H:Y):H=Y,I){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=H+U,I={id:m++,callback:V,priorityLevel:I,startTime:H,expirationTime:U,sortIndex:-1},H>Y?(I.sortIndex=H,e(h,I),s(d)===null&&I===s(h)&&(N?(_(M),M=-1):N=!0,q(E,H-Y))):(I.sortIndex=U,e(d,I),v||b||(v=!0,A||(A=!0,O()))),I},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(I){var V=g;return function(){var H=g;g=V;try{return I.apply(this,arguments)}finally{g=H}}}}(vb)),vb}var V_;function Z8(){return V_||(V_=1,bb.exports=Q8()),bb.exports}var yb={exports:{}},Qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function eP(){if(q_)return Qs;q_=1;var t=bh();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qs.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,m)},Qs.flushSync=function(d){var h=o.T,m=r.p;try{if(o.T=null,r.p=2,d)return d()}finally{o.T=h,r.p=m,r.d.f()}},Qs.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Qs.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Qs.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:b}):m==="script"&&r.d.X(d,{crossOrigin:p,integrity:g,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qs.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Qs.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qs.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Qs.requestFormReset=function(d){r.d.r(d)},Qs.unstable_batchedUpdates=function(d,h){return d(h)},Qs.useFormState=function(d,h,m){return o.H.useFormState(d,h,m)},Qs.useFormStatus=function(){return o.H.useHostTransitionStatus()},Qs.version="19.1.0",Qs}var H_;function U4(){if(H_)return yb.exports;H_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yb.exports=eP(),yb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function tP(){if(G_)return Qd;G_=1;var t=Z8(),e=bh(),s=U4();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(i(l)!==l)throw Error(r(188))}function d(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(r(188));return u!==l?null:l}for(var f=l,x=u;;){var S=f.return;if(S===null)break;var T=S.alternate;if(T===null){if(x=S.return,x!==null){f=x;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===f)return c(S),l;if(T===x)return c(S),u;T=T.sibling}throw Error(r(188))}if(f.return!==x.return)f=S,x=T;else{for(var F=!1,G=S.child;G;){if(G===f){F=!0,f=S,x=T;break}if(G===x){F=!0,x=S,f=T;break}G=G.sibling}if(!F){for(G=T.child;G;){if(G===f){F=!0,f=T,x=S;break}if(G===x){F=!0,x=T,f=S;break}G=G.sibling}if(!F)throw Error(r(189))}}if(f.alternate!==x)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function O(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var P=Symbol.for("react.client.reference");function z(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===P?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case j:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case k:return(l.displayName||"Context")+".Provider";case _:return(l._context.displayName||"Context")+".Consumer";case C:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return u=l.displayName||null,u!==null?u:z(l.type)||"Memo";case R:u=l._payload,l=l._init;try{return z(l(u))}catch{}}return null}var q=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Y=[],U=-1;function K(l){return{current:l}}function J(l){0>U||(l.current=Y[U],Y[U]=null,U--)}function W(l,u){U++,Y[U]=l.current,l.current=u}var ee=K(null),ne=K(null),X=K(null),Q=K(null);function de(l,u){switch(W(X,u),W(ne,l),W(ee,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?u_(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=u_(u),l=h_(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}J(ee),W(ee,l)}function ve(){J(ee),J(ne),J(X)}function Pe(l){l.memoizedState!==null&&W(Q,l);var u=ee.current,f=h_(u,l.type);u!==f&&(W(ne,l),W(ee,f))}function He(l){ne.current===l&&(J(ee),J(ne)),Q.current===l&&(J(Q),Gd._currentValue=H)}var Qe=Object.prototype.hasOwnProperty,be=t.unstable_scheduleCallback,se=t.unstable_cancelCallback,le=t.unstable_shouldYield,ge=t.unstable_requestPaint,te=t.unstable_now,xe=t.unstable_getCurrentPriorityLevel,De=t.unstable_ImmediatePriority,Ee=t.unstable_UserBlockingPriority,ce=t.unstable_NormalPriority,ye=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Me=t.log,it=t.unstable_setDisableYieldValue,ft=null,Te=null;function ze(l){if(typeof Me=="function"&&it(l),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(ft,l)}catch{}}var ae=Math.clz32?Math.clz32:$e,_e=Math.log,Fe=Math.LN2;function $e(l){return l>>>=0,l===0?32:31-(_e(l)/Fe|0)|0}var Ce=256,me=4194304;function Re(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Be(l,u,f){var x=l.pendingLanes;if(x===0)return 0;var S=0,T=l.suspendedLanes,F=l.pingedLanes;l=l.warmLanes;var G=x&134217727;return G!==0?(x=G&~T,x!==0?S=Re(x):(F&=G,F!==0?S=Re(F):f||(f=G&~l,f!==0&&(S=Re(f))))):(G=x&~T,G!==0?S=Re(G):F!==0?S=Re(F):f||(f=x&~l,f!==0&&(S=Re(f)))),S===0?0:u!==0&&u!==S&&(u&T)===0&&(T=S&-S,f=u&-u,T>=f||T===32&&(f&4194048)!==0)?u:S}function pt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function gt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ls(){var l=Ce;return Ce<<=1,(Ce&4194048)===0&&(Ce=256),l}function ks(){var l=me;return me<<=1,(me&62914560)===0&&(me=4194304),l}function Fs(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function sr(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Fn(l,u,f,x,S,T){var F=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var G=l.entanglements,Z=l.expirationTimes,he=l.hiddenUpdates;for(f=F&~f;0<f;){var we=31-ae(f),Se=1<<we;G[we]=0,Z[we]=-1;var fe=he[we];if(fe!==null)for(he[we]=null,we=0;we<fe.length;we++){var pe=fe[we];pe!==null&&(pe.lane&=-536870913)}f&=~Se}x!==0&&al(l,x,0),T!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=T&~(F&~u))}function al(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var x=31-ae(u);l.entangledLanes|=u,l.entanglements[x]=l.entanglements[x]|1073741824|f&4194090}function Qi(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var x=31-ae(f),S=1<<x;S&u|l[x]&u&&(l[x]|=u),f&=~S}}function Ur(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function sd(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function il(){var l=V.p;return l!==0?l:(l=window.event,l===void 0?32:M_(l.type))}function ol(l,u){var f=V.p;try{return V.p=l,u()}finally{V.p=f}}var Wa=Math.random().toString(36).slice(2),Js="__reactFiber$"+Wa,wn="__reactProps$"+Wa,ll="__reactContainer$"+Wa,og="__reactEvents$"+Wa,LR="__reactListeners$"+Wa,$R="__reactHandles$"+Wa,Zj="__reactResources$"+Wa,nd="__reactMarker$"+Wa;function lg(l){delete l[Js],delete l[wn],delete l[og],delete l[LR],delete l[$R]}function cl(l){var u=l[Js];if(u)return u;for(var f=l.parentNode;f;){if(u=f[ll]||f[Js]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=g_(l);l!==null;){if(f=l[Js])return f;l=g_(l)}return u}l=f,f=l.parentNode}return null}function dl(l){if(l=l[Js]||l[ll]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function rd(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function ul(l){var u=l[Zj];return u||(u=l[Zj]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Es(l){l[nd]=!0}var eN=new Set,tN={};function Zi(l,u){hl(l,u),hl(l+"Capture",u)}function hl(l,u){for(tN[l]=u,l=0;l<u.length;l++)eN.add(u[l])}var FR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sN={},nN={};function IR(l){return Qe.call(nN,l)?!0:Qe.call(sN,l)?!1:FR.test(l)?nN[l]=!0:(sN[l]=!0,!1)}function zh(l,u,f){if(IR(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var x=u.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function Lh(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function ua(l,u,f,x){if(x===null)l.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+x)}}var cg,rN;function ml(l){if(cg===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);cg=u&&u[1]||"",rN=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cg+l+rN}var dg=!1;function ug(l,u){if(!l||dg)return"";dg=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(u){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(pe){var fe=pe}Reflect.construct(l,[],Se)}else{try{Se.call()}catch(pe){fe=pe}l.call(Se.prototype)}}else{try{throw Error()}catch(pe){fe=pe}(Se=l())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(pe){if(pe&&fe&&typeof pe.stack=="string")return[pe.stack,fe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=x.DetermineComponentFrameRoot(),F=T[0],G=T[1];if(F&&G){var Z=F.split(`
`),he=G.split(`
`);for(S=x=0;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;for(;S<he.length&&!he[S].includes("DetermineComponentFrameRoot");)S++;if(x===Z.length||S===he.length)for(x=Z.length-1,S=he.length-1;1<=x&&0<=S&&Z[x]!==he[S];)S--;for(;1<=x&&0<=S;x--,S--)if(Z[x]!==he[S]){if(x!==1||S!==1)do if(x--,S--,0>S||Z[x]!==he[S]){var we=`
`+Z[x].replace(" at new "," at ");return l.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",l.displayName)),we}while(1<=x&&0<=S);break}}}finally{dg=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?ml(f):""}function BR(l){switch(l.tag){case 26:case 27:case 5:return ml(l.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 15:return ug(l.type,!1);case 11:return ug(l.type.render,!1);case 1:return ug(l.type,!0);case 31:return ml("Activity");default:return""}}function aN(l){try{var u="";do u+=BR(l),l=l.return;while(l);return u}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function nr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function iN(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function UR(l){var u=iN(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),x=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,T=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return S.call(this)},set:function(F){x=""+F,T.call(this,F)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(F){x=""+F},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function $h(l){l._valueTracker||(l._valueTracker=UR(l))}function oN(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),x="";return l&&(x=iN(l)?l.checked?"true":"false":l.value),l=x,l!==f?(u.setValue(l),!0):!1}function Fh(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var VR=/[\n"\\]/g;function rr(l){return l.replace(VR,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function hg(l,u,f,x,S,T,F,G){l.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?l.type=F:l.removeAttribute("type"),u!=null?F==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+nr(u)):l.value!==""+nr(u)&&(l.value=""+nr(u)):F!=="submit"&&F!=="reset"||l.removeAttribute("value"),u!=null?mg(l,F,nr(u)):f!=null?mg(l,F,nr(f)):x!=null&&l.removeAttribute("value"),S==null&&T!=null&&(l.defaultChecked=!!T),S!=null&&(l.checked=S&&typeof S!="function"&&typeof S!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?l.name=""+nr(G):l.removeAttribute("name")}function lN(l,u,f,x,S,T,F,G){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),u!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||u!=null))return;f=f!=null?""+nr(f):"",u=u!=null?""+nr(u):f,G||u===l.value||(l.value=u),l.defaultValue=u}x=x??S,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=G?l.checked:!!x,l.defaultChecked=!!x,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.name=F)}function mg(l,u,f){u==="number"&&Fh(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function fl(l,u,f,x){if(l=l.options,u){u={};for(var S=0;S<f.length;S++)u["$"+f[S]]=!0;for(f=0;f<l.length;f++)S=u.hasOwnProperty("$"+l[f].value),l[f].selected!==S&&(l[f].selected=S),S&&x&&(l[f].defaultSelected=!0)}else{for(f=""+nr(f),u=null,S=0;S<l.length;S++){if(l[S].value===f){l[S].selected=!0,x&&(l[S].defaultSelected=!0);return}u!==null||l[S].disabled||(u=l[S])}u!==null&&(u.selected=!0)}}function cN(l,u,f){if(u!=null&&(u=""+nr(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+nr(f):""}function dN(l,u,f,x){if(u==null){if(x!=null){if(f!=null)throw Error(r(92));if(q(x)){if(1<x.length)throw Error(r(93));x=x[0]}f=x}f==null&&(f=""),u=f}f=nr(u),l.defaultValue=f,x=l.textContent,x===f&&x!==""&&x!==null&&(l.value=x)}function pl(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var qR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uN(l,u,f){var x=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":x?l.setProperty(u,f):typeof f!="number"||f===0||qR.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function hN(l,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||u!=null&&u.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var S in u)x=u[S],u.hasOwnProperty(S)&&f[S]!==x&&uN(l,S,x)}else for(var T in u)u.hasOwnProperty(T)&&uN(l,T,u[T])}function fg(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ih(l){return GR.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var pg=null;function gg(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var gl=null,xl=null;function mN(l){var u=dl(l);if(u&&(l=u.stateNode)){var f=l[wn]||null;e:switch(l=u.stateNode,u.type){case"input":if(hg(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+rr(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var x=f[u];if(x!==l&&x.form===l.form){var S=x[wn]||null;if(!S)throw Error(r(90));hg(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<f.length;u++)x=f[u],x.form===l.form&&oN(x)}break e;case"textarea":cN(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&fl(l,!!f.multiple,u,!1)}}}var xg=!1;function fN(l,u,f){if(xg)return l(u,f);xg=!0;try{var x=l(u);return x}finally{if(xg=!1,(gl!==null||xl!==null)&&(_m(),gl&&(u=gl,l=xl,xl=gl=null,mN(u),l)))for(u=0;u<l.length;u++)mN(l[u])}}function ad(l,u){var f=l.stateNode;if(f===null)return null;var x=f[wn]||null;if(x===null)return null;f=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bg=!1;if(ha)try{var id={};Object.defineProperty(id,"passive",{get:function(){bg=!0}}),window.addEventListener("test",id,id),window.removeEventListener("test",id,id)}catch{bg=!1}var Ya=null,vg=null,Bh=null;function pN(){if(Bh)return Bh;var l,u=vg,f=u.length,x,S="value"in Ya?Ya.value:Ya.textContent,T=S.length;for(l=0;l<f&&u[l]===S[l];l++);var F=f-l;for(x=1;x<=F&&u[f-x]===S[T-x];x++);return Bh=S.slice(l,1<x?1-x:void 0)}function Uh(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Vh(){return!0}function gN(){return!1}function jn(l){function u(f,x,S,T,F){this._reactName=f,this._targetInst=S,this.type=x,this.nativeEvent=T,this.target=F,this.currentTarget=null;for(var G in l)l.hasOwnProperty(G)&&(f=l[G],this[G]=f?f(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Vh:gN,this.isPropagationStopped=gN,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Vh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Vh)},persist:function(){},isPersistent:Vh}),u}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qh=jn(eo),od=m({},eo,{view:0,detail:0}),WR=jn(od),yg,wg,ld,Hh=m({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ng,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ld&&(ld&&l.type==="mousemove"?(yg=l.screenX-ld.screenX,wg=l.screenY-ld.screenY):wg=yg=0,ld=l),yg)},movementY:function(l){return"movementY"in l?l.movementY:wg}}),xN=jn(Hh),YR=m({},Hh,{dataTransfer:0}),KR=jn(YR),JR=m({},od,{relatedTarget:0}),jg=jn(JR),XR=m({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),QR=jn(XR),ZR=m({},eo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),eD=jn(ZR),tD=m({},eo,{data:0}),bN=jn(tD),sD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aD(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=rD[l])?!!u[l]:!1}function Ng(){return aD}var iD=m({},od,{key:function(l){if(l.key){var u=sD[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Uh(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?nD[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ng,charCode:function(l){return l.type==="keypress"?Uh(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Uh(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),oD=jn(iD),lD=m({},Hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vN=jn(lD),cD=m({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ng}),dD=jn(cD),uD=m({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hD=jn(uD),mD=m({},Hh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),fD=jn(mD),pD=m({},eo,{newState:0,oldState:0}),gD=jn(pD),xD=[9,13,27,32],Sg=ha&&"CompositionEvent"in window,cd=null;ha&&"documentMode"in document&&(cd=document.documentMode);var bD=ha&&"TextEvent"in window&&!cd,yN=ha&&(!Sg||cd&&8<cd&&11>=cd),wN=" ",jN=!1;function NN(l,u){switch(l){case"keyup":return xD.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SN(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var bl=!1;function vD(l,u){switch(l){case"compositionend":return SN(u);case"keypress":return u.which!==32?null:(jN=!0,wN);case"textInput":return l=u.data,l===wN&&jN?null:l;default:return null}}function yD(l,u){if(bl)return l==="compositionend"||!Sg&&NN(l,u)?(l=pN(),Bh=vg=Ya=null,bl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return yN&&u.locale!=="ko"?null:u.data;default:return null}}var wD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _N(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!wD[l.type]:u==="textarea"}function CN(l,u,f,x){gl?xl?xl.push(x):xl=[x]:gl=x,u=Mm(u,"onChange"),0<u.length&&(f=new qh("onChange","change",null,f,x),l.push({event:f,listeners:u}))}var dd=null,ud=null;function jD(l){i_(l,0)}function Gh(l){var u=rd(l);if(oN(u))return l}function kN(l,u){if(l==="change")return u}var EN=!1;if(ha){var _g;if(ha){var Cg="oninput"in document;if(!Cg){var AN=document.createElement("div");AN.setAttribute("oninput","return;"),Cg=typeof AN.oninput=="function"}_g=Cg}else _g=!1;EN=_g&&(!document.documentMode||9<document.documentMode)}function TN(){dd&&(dd.detachEvent("onpropertychange",MN),ud=dd=null)}function MN(l){if(l.propertyName==="value"&&Gh(ud)){var u=[];CN(u,ud,l,gg(l)),fN(jD,u)}}function ND(l,u,f){l==="focusin"?(TN(),dd=u,ud=f,dd.attachEvent("onpropertychange",MN)):l==="focusout"&&TN()}function SD(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Gh(ud)}function _D(l,u){if(l==="click")return Gh(u)}function CD(l,u){if(l==="input"||l==="change")return Gh(u)}function kD(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var In=typeof Object.is=="function"?Object.is:kD;function hd(l,u){if(In(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),x=Object.keys(u);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var S=f[x];if(!Qe.call(u,S)||!In(l[S],u[S]))return!1}return!0}function ON(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function RN(l,u){var f=ON(l);l=0;for(var x;f;){if(f.nodeType===3){if(x=l+f.textContent.length,l<=u&&x>=u)return{node:f,offset:u-l};l=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=ON(f)}}function DN(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?DN(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function PN(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Fh(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=Fh(l.document)}return u}function kg(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var ED=ha&&"documentMode"in document&&11>=document.documentMode,vl=null,Eg=null,md=null,Ag=!1;function zN(l,u,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Ag||vl==null||vl!==Fh(x)||(x=vl,"selectionStart"in x&&kg(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),md&&hd(md,x)||(md=x,x=Mm(Eg,"onSelect"),0<x.length&&(u=new qh("onSelect","select",null,u,f),l.push({event:u,listeners:x}),u.target=vl)))}function to(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var yl={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},Tg={},LN={};ha&&(LN=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function so(l){if(Tg[l])return Tg[l];if(!yl[l])return l;var u=yl[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in LN)return Tg[l]=u[f];return l}var $N=so("animationend"),FN=so("animationiteration"),IN=so("animationstart"),AD=so("transitionrun"),TD=so("transitionstart"),MD=so("transitioncancel"),BN=so("transitionend"),UN=new Map,Mg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mg.push("scrollEnd");function Er(l,u){UN.set(l,u),Zi(u,[l])}var VN=new WeakMap;function ar(l,u){if(typeof l=="object"&&l!==null){var f=VN.get(l);return f!==void 0?f:(u={value:l,source:u,stack:aN(u)},VN.set(l,u),u)}return{value:l,source:u,stack:aN(u)}}var ir=[],wl=0,Og=0;function Wh(){for(var l=wl,u=Og=wl=0;u<l;){var f=ir[u];ir[u++]=null;var x=ir[u];ir[u++]=null;var S=ir[u];ir[u++]=null;var T=ir[u];if(ir[u++]=null,x!==null&&S!==null){var F=x.pending;F===null?S.next=S:(S.next=F.next,F.next=S),x.pending=S}T!==0&&qN(f,S,T)}}function Yh(l,u,f,x){ir[wl++]=l,ir[wl++]=u,ir[wl++]=f,ir[wl++]=x,Og|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function Rg(l,u,f,x){return Yh(l,u,f,x),Kh(l)}function jl(l,u){return Yh(l,null,null,u),Kh(l)}function qN(l,u,f){l.lanes|=f;var x=l.alternate;x!==null&&(x.lanes|=f);for(var S=!1,T=l.return;T!==null;)T.childLanes|=f,x=T.alternate,x!==null&&(x.childLanes|=f),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(S=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,S&&u!==null&&(S=31-ae(f),l=T.hiddenUpdates,x=l[S],x===null?l[S]=[u]:x.push(u),u.lane=f|536870912),T):null}function Kh(l){if(50<$d)throw $d=0,Fx=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Nl={};function OD(l,u,f,x){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(l,u,f,x){return new OD(l,u,f,x)}function Dg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ma(l,u){var f=l.alternate;return f===null?(f=Bn(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function HN(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Jh(l,u,f,x,S,T){var F=0;if(x=l,typeof l=="function")Dg(l)&&(F=1);else if(typeof l=="string")F=D8(l,f,ee.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case D:return l=Bn(31,f,u,S),l.elementType=D,l.lanes=T,l;case v:return no(f.children,S,T,u);case N:F=8,S|=24;break;case j:return l=Bn(12,f,u,S|2),l.elementType=j,l.lanes=T,l;case E:return l=Bn(13,f,u,S),l.elementType=E,l.lanes=T,l;case A:return l=Bn(19,f,u,S),l.elementType=A,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case w:case k:F=10;break e;case _:F=9;break e;case C:F=11;break e;case M:F=14;break e;case R:F=16,x=null;break e}F=29,f=Error(r(130,l===null?"null":typeof l,"")),x=null}return u=Bn(F,f,u,S),u.elementType=l,u.type=x,u.lanes=T,u}function no(l,u,f,x){return l=Bn(7,l,x,u),l.lanes=f,l}function Pg(l,u,f){return l=Bn(6,l,null,u),l.lanes=f,l}function zg(l,u,f){return u=Bn(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Sl=[],_l=0,Xh=null,Qh=0,or=[],lr=0,ro=null,fa=1,pa="";function ao(l,u){Sl[_l++]=Qh,Sl[_l++]=Xh,Xh=l,Qh=u}function GN(l,u,f){or[lr++]=fa,or[lr++]=pa,or[lr++]=ro,ro=l;var x=fa;l=pa;var S=32-ae(x)-1;x&=~(1<<S),f+=1;var T=32-ae(u)+S;if(30<T){var F=S-S%5;T=(x&(1<<F)-1).toString(32),x>>=F,S-=F,fa=1<<32-ae(u)+S|f<<S|x,pa=T+l}else fa=1<<T|f<<S|x,pa=l}function Lg(l){l.return!==null&&(ao(l,1),GN(l,1,0))}function $g(l){for(;l===Xh;)Xh=Sl[--_l],Sl[_l]=null,Qh=Sl[--_l],Sl[_l]=null;for(;l===ro;)ro=or[--lr],or[lr]=null,pa=or[--lr],or[lr]=null,fa=or[--lr],or[lr]=null}var ln=null,Zt=null,kt=!1,io=null,Vr=!1,Fg=Error(r(519));function oo(l){var u=Error(r(418,""));throw gd(ar(u,l)),Fg}function WN(l){var u=l.stateNode,f=l.type,x=l.memoizedProps;switch(u[Js]=l,u[wn]=x,f){case"dialog":yt("cancel",u),yt("close",u);break;case"iframe":case"object":case"embed":yt("load",u);break;case"video":case"audio":for(f=0;f<Id.length;f++)yt(Id[f],u);break;case"source":yt("error",u);break;case"img":case"image":case"link":yt("error",u),yt("load",u);break;case"details":yt("toggle",u);break;case"input":yt("invalid",u),lN(u,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),$h(u);break;case"select":yt("invalid",u);break;case"textarea":yt("invalid",u),dN(u,x.value,x.defaultValue,x.children),$h(u)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||x.suppressHydrationWarning===!0||d_(u.textContent,f)?(x.popover!=null&&(yt("beforetoggle",u),yt("toggle",u)),x.onScroll!=null&&yt("scroll",u),x.onScrollEnd!=null&&yt("scrollend",u),x.onClick!=null&&(u.onclick=Om),u=!0):u=!1,u||oo(l)}function YN(l){for(ln=l.return;ln;)switch(ln.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:ln=ln.return}}function fd(l){if(l!==ln)return!1;if(!kt)return YN(l),kt=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||tb(l.type,l.memoizedProps)),f=!f),f&&Zt&&oo(l),YN(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(f=l.data,f==="/$"){if(u===0){Zt=Tr(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++;l=l.nextSibling}Zt=null}}else u===27?(u=Zt,di(l.type)?(l=ab,ab=null,Zt=l):Zt=u):Zt=ln?Tr(l.stateNode.nextSibling):null;return!0}function pd(){Zt=ln=null,kt=!1}function KN(){var l=io;return l!==null&&(_n===null?_n=l:_n.push.apply(_n,l),io=null),l}function gd(l){io===null?io=[l]:io.push(l)}var Ig=K(null),lo=null,ga=null;function Ka(l,u,f){W(Ig,u._currentValue),u._currentValue=f}function xa(l){l._currentValue=Ig.current,J(Ig)}function Bg(l,u,f){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===f)break;l=l.return}}function Ug(l,u,f,x){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var T=S.dependencies;if(T!==null){var F=S.child;T=T.firstContext;e:for(;T!==null;){var G=T;T=S;for(var Z=0;Z<u.length;Z++)if(G.context===u[Z]){T.lanes|=f,G=T.alternate,G!==null&&(G.lanes|=f),Bg(T.return,f,l),x||(F=null);break e}T=G.next}}else if(S.tag===18){if(F=S.return,F===null)throw Error(r(341));F.lanes|=f,T=F.alternate,T!==null&&(T.lanes|=f),Bg(F,f,l),F=null}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===l){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}}function xd(l,u,f,x){l=null;for(var S=u,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var F=S.alternate;if(F===null)throw Error(r(387));if(F=F.memoizedProps,F!==null){var G=S.type;In(S.pendingProps.value,F.value)||(l!==null?l.push(G):l=[G])}}else if(S===Q.current){if(F=S.alternate,F===null)throw Error(r(387));F.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Gd):l=[Gd])}S=S.return}l!==null&&Ug(u,l,f,x),u.flags|=262144}function Zh(l){for(l=l.firstContext;l!==null;){if(!In(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function co(l){lo=l,ga=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Xs(l){return JN(lo,l)}function em(l,u){return lo===null&&co(l),JN(l,u)}function JN(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ga===null){if(l===null)throw Error(r(308));ga=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ga=ga.next=u;return f}var RD=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,x){l.push(x)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},DD=t.unstable_scheduleCallback,PD=t.unstable_NormalPriority,js={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vg(){return{controller:new RD,data:new Map,refCount:0}}function bd(l){l.refCount--,l.refCount===0&&DD(PD,function(){l.controller.abort()})}var vd=null,qg=0,Cl=0,kl=null;function zD(l,u){if(vd===null){var f=vd=[];qg=0,Cl=Gx(),kl={status:"pending",value:void 0,then:function(x){f.push(x)}}}return qg++,u.then(XN,XN),u}function XN(){if(--qg===0&&vd!==null){kl!==null&&(kl.status="fulfilled");var l=vd;vd=null,Cl=0,kl=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function LD(l,u){var f=[],x={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return l.then(function(){x.status="fulfilled",x.value=u;for(var S=0;S<f.length;S++)(0,f[S])(u)},function(S){for(x.status="rejected",x.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),x}var QN=I.S;I.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&zD(l,u),QN!==null&&QN(l,u)};var uo=K(null);function Hg(){var l=uo.current;return l!==null?l:It.pooledCache}function tm(l,u){u===null?W(uo,uo.current):W(uo,u.pool)}function ZN(){var l=Hg();return l===null?null:{parent:js._currentValue,pool:l}}var yd=Error(r(460)),e2=Error(r(474)),sm=Error(r(542)),Gg={then:function(){}};function t2(l){return l=l.status,l==="fulfilled"||l==="rejected"}function nm(){}function s2(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(nm,nm),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,r2(l),l;default:if(typeof u.status=="string")u.then(nm,nm);else{if(l=It,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(x){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=x}},function(x){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=x}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,r2(l),l}throw wd=u,yd}}var wd=null;function n2(){if(wd===null)throw Error(r(459));var l=wd;return wd=null,l}function r2(l){if(l===yd||l===sm)throw Error(r(483))}var Ja=!1;function Wg(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yg(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Xa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Qa(l,u,f){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(Mt&2)!==0){var S=x.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),x.pending=u,u=Kh(l),qN(l,null,f),u}return Yh(l,x,u,f),Kh(l)}function jd(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,Qi(l,f)}}function Kg(l,u){var f=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var S=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var F={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?S=T=F:T=T.next=F,f=f.next}while(f!==null);T===null?S=T=u:T=T.next=u}else S=T=u;f={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:x.shared,callbacks:x.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var Jg=!1;function Nd(){if(Jg){var l=kl;if(l!==null)throw l}}function Sd(l,u,f,x){Jg=!1;var S=l.updateQueue;Ja=!1;var T=S.firstBaseUpdate,F=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var Z=G,he=Z.next;Z.next=null,F===null?T=he:F.next=he,F=Z;var we=l.alternate;we!==null&&(we=we.updateQueue,G=we.lastBaseUpdate,G!==F&&(G===null?we.firstBaseUpdate=he:G.next=he,we.lastBaseUpdate=Z))}if(T!==null){var Se=S.baseState;F=0,we=he=Z=null,G=T;do{var fe=G.lane&-536870913,pe=fe!==G.lane;if(pe?(St&fe)===fe:(x&fe)===fe){fe!==0&&fe===Cl&&(Jg=!0),we!==null&&(we=we.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var nt=l,Ze=G;fe=u;var zt=f;switch(Ze.tag){case 1:if(nt=Ze.payload,typeof nt=="function"){Se=nt.call(zt,Se,fe);break e}Se=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=Ze.payload,fe=typeof nt=="function"?nt.call(zt,Se,fe):nt,fe==null)break e;Se=m({},Se,fe);break e;case 2:Ja=!0}}fe=G.callback,fe!==null&&(l.flags|=64,pe&&(l.flags|=8192),pe=S.callbacks,pe===null?S.callbacks=[fe]:pe.push(fe))}else pe={lane:fe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},we===null?(he=we=pe,Z=Se):we=we.next=pe,F|=fe;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;pe=G,G=pe.next,pe.next=null,S.lastBaseUpdate=pe,S.shared.pending=null}}while(!0);we===null&&(Z=Se),S.baseState=Z,S.firstBaseUpdate=he,S.lastBaseUpdate=we,T===null&&(S.shared.lanes=0),ii|=F,l.lanes=F,l.memoizedState=Se}}function a2(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function i2(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)a2(f[l],u)}var El=K(null),rm=K(0);function o2(l,u){l=Sa,W(rm,l),W(El,u),Sa=l|u.baseLanes}function Xg(){W(rm,Sa),W(El,El.current)}function Qg(){Sa=rm.current,J(El),J(rm)}var Za=0,mt=null,Dt=null,ms=null,am=!1,Al=!1,ho=!1,im=0,_d=0,Tl=null,$D=0;function cs(){throw Error(r(321))}function Zg(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!In(l[f],u[f]))return!1;return!0}function ex(l,u,f,x,S,T){return Za=T,mt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,I.H=l===null||l.memoizedState===null?q2:H2,ho=!1,T=f(x,S),ho=!1,Al&&(T=c2(u,f,x,S)),l2(l),T}function l2(l){I.H=hm;var u=Dt!==null&&Dt.next!==null;if(Za=0,ms=Dt=mt=null,am=!1,_d=0,Tl=null,u)throw Error(r(300));l===null||As||(l=l.dependencies,l!==null&&Zh(l)&&(As=!0))}function c2(l,u,f,x){mt=l;var S=0;do{if(Al&&(Tl=null),_d=0,Al=!1,25<=S)throw Error(r(301));if(S+=1,ms=Dt=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}I.H=HD,T=u(f,x)}while(Al);return T}function FD(){var l=I.H,u=l.useState()[0];return u=typeof u.then=="function"?Cd(u):u,l=l.useState()[0],(Dt!==null?Dt.memoizedState:null)!==l&&(mt.flags|=1024),u}function tx(){var l=im!==0;return im=0,l}function sx(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function nx(l){if(am){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}am=!1}Za=0,ms=Dt=mt=null,Al=!1,_d=im=0,Tl=null}function Nn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ms===null?mt.memoizedState=ms=l:ms=ms.next=l,ms}function fs(){if(Dt===null){var l=mt.alternate;l=l!==null?l.memoizedState:null}else l=Dt.next;var u=ms===null?mt.memoizedState:ms.next;if(u!==null)ms=u,Dt=l;else{if(l===null)throw mt.alternate===null?Error(r(467)):Error(r(310));Dt=l,l={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},ms===null?mt.memoizedState=ms=l:ms=ms.next=l}return ms}function rx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cd(l){var u=_d;return _d+=1,Tl===null&&(Tl=[]),l=s2(Tl,l,u),u=mt,(ms===null?u.memoizedState:ms.next)===null&&(u=u.alternate,I.H=u===null||u.memoizedState===null?q2:H2),l}function om(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Cd(l);if(l.$$typeof===k)return Xs(l)}throw Error(r(438,String(l)))}function ax(l){var u=null,f=mt.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var x=mt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(u={data:x.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=rx(),mt.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),x=0;x<l;x++)f[x]=L;return u.index++,f}function ba(l,u){return typeof u=="function"?u(l):u}function lm(l){var u=fs();return ix(u,Dt,l)}function ix(l,u,f){var x=l.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var S=l.baseQueue,T=x.pending;if(T!==null){if(S!==null){var F=S.next;S.next=T.next,T.next=F}u.baseQueue=S=T,x.pending=null}if(T=l.baseState,S===null)l.memoizedState=T;else{u=S.next;var G=F=null,Z=null,he=u,we=!1;do{var Se=he.lane&-536870913;if(Se!==he.lane?(St&Se)===Se:(Za&Se)===Se){var fe=he.revertLane;if(fe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Se===Cl&&(we=!0);else if((Za&fe)===fe){he=he.next,fe===Cl&&(we=!0);continue}else Se={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(G=Z=Se,F=T):Z=Z.next=Se,mt.lanes|=fe,ii|=fe;Se=he.action,ho&&f(T,Se),T=he.hasEagerState?he.eagerState:f(T,Se)}else fe={lane:Se,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(G=Z=fe,F=T):Z=Z.next=fe,mt.lanes|=Se,ii|=Se;he=he.next}while(he!==null&&he!==u);if(Z===null?F=T:Z.next=G,!In(T,l.memoizedState)&&(As=!0,we&&(f=kl,f!==null)))throw f;l.memoizedState=T,l.baseState=F,l.baseQueue=Z,x.lastRenderedState=T}return S===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function ox(l){var u=fs(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var x=f.dispatch,S=f.pending,T=u.memoizedState;if(S!==null){f.pending=null;var F=S=S.next;do T=l(T,F.action),F=F.next;while(F!==S);In(T,u.memoizedState)||(As=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),f.lastRenderedState=T}return[T,x]}function d2(l,u,f){var x=mt,S=fs(),T=kt;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=u();var F=!In((Dt||S).memoizedState,f);F&&(S.memoizedState=f,As=!0),S=S.queue;var G=m2.bind(null,x,S,l);if(kd(2048,8,G,[l]),S.getSnapshot!==u||F||ms!==null&&ms.memoizedState.tag&1){if(x.flags|=2048,Ml(9,cm(),h2.bind(null,x,S,f,u),null),It===null)throw Error(r(349));T||(Za&124)!==0||u2(x,u,f)}return f}function u2(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=mt.updateQueue,u===null?(u=rx(),mt.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function h2(l,u,f,x){u.value=f,u.getSnapshot=x,f2(u)&&p2(l)}function m2(l,u,f){return f(function(){f2(u)&&p2(l)})}function f2(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!In(l,f)}catch{return!0}}function p2(l){var u=jl(l,2);u!==null&&Gn(u,l,2)}function lx(l){var u=Nn();if(typeof l=="function"){var f=l;if(l=f(),ho){ze(!0);try{f()}finally{ze(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:l},u}function g2(l,u,f,x){return l.baseState=f,ix(l,Dt,typeof x=="function"?x:ba)}function ID(l,u,f,x,S){if(um(l))throw Error(r(485));if(l=u.action,l!==null){var T={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){T.listeners.push(F)}};I.T!==null?f(!0):T.isTransition=!1,x(T),f=u.pending,f===null?(T.next=u.pending=T,x2(u,T)):(T.next=f.next,u.pending=f.next=T)}}function x2(l,u){var f=u.action,x=u.payload,S=l.state;if(u.isTransition){var T=I.T,F={};I.T=F;try{var G=f(S,x),Z=I.S;Z!==null&&Z(F,G),b2(l,u,G)}catch(he){cx(l,u,he)}finally{I.T=T}}else try{T=f(S,x),b2(l,u,T)}catch(he){cx(l,u,he)}}function b2(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){v2(l,u,x)},function(x){return cx(l,u,x)}):v2(l,u,f)}function v2(l,u,f){u.status="fulfilled",u.value=f,y2(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,x2(l,f)))}function cx(l,u,f){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do u.status="rejected",u.reason=f,y2(u),u=u.next;while(u!==x)}l.action=null}function y2(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function w2(l,u){return u}function j2(l,u){if(kt){var f=It.formState;if(f!==null){e:{var x=mt;if(kt){if(Zt){t:{for(var S=Zt,T=Vr;S.nodeType!==8;){if(!T){S=null;break t}if(S=Tr(S.nextSibling),S===null){S=null;break t}}T=S.data,S=T==="F!"||T==="F"?S:null}if(S){Zt=Tr(S.nextSibling),x=S.data==="F!";break e}}oo(x)}x=!1}x&&(u=f[0])}}return f=Nn(),f.memoizedState=f.baseState=u,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w2,lastRenderedState:u},f.queue=x,f=B2.bind(null,mt,x),x.dispatch=f,x=lx(!1),T=fx.bind(null,mt,!1,x.queue),x=Nn(),S={state:u,dispatch:null,action:l,pending:null},x.queue=S,f=ID.bind(null,mt,S,T,f),S.dispatch=f,x.memoizedState=l,[u,f,!1]}function N2(l){var u=fs();return S2(u,Dt,l)}function S2(l,u,f){if(u=ix(l,u,w2)[0],l=lm(ba)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var x=Cd(u)}catch(F){throw F===yd?sm:F}else x=u;u=fs();var S=u.queue,T=S.dispatch;return f!==u.memoizedState&&(mt.flags|=2048,Ml(9,cm(),BD.bind(null,S,f),null)),[x,T,l]}function BD(l,u){l.action=u}function _2(l){var u=fs(),f=Dt;if(f!==null)return S2(u,f,l);fs(),u=u.memoizedState,f=fs();var x=f.queue.dispatch;return f.memoizedState=l,[u,x,!1]}function Ml(l,u,f,x){return l={tag:l,create:f,deps:x,inst:u,next:null},u=mt.updateQueue,u===null&&(u=rx(),mt.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(x=f.next,f.next=l,l.next=x,u.lastEffect=l),l}function cm(){return{destroy:void 0,resource:void 0}}function C2(){return fs().memoizedState}function dm(l,u,f,x){var S=Nn();x=x===void 0?null:x,mt.flags|=l,S.memoizedState=Ml(1|u,cm(),f,x)}function kd(l,u,f,x){var S=fs();x=x===void 0?null:x;var T=S.memoizedState.inst;Dt!==null&&x!==null&&Zg(x,Dt.memoizedState.deps)?S.memoizedState=Ml(u,T,f,x):(mt.flags|=l,S.memoizedState=Ml(1|u,T,f,x))}function k2(l,u){dm(8390656,8,l,u)}function E2(l,u){kd(2048,8,l,u)}function A2(l,u){return kd(4,2,l,u)}function T2(l,u){return kd(4,4,l,u)}function M2(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function O2(l,u,f){f=f!=null?f.concat([l]):null,kd(4,4,M2.bind(null,u,l),f)}function dx(){}function R2(l,u){var f=fs();u=u===void 0?null:u;var x=f.memoizedState;return u!==null&&Zg(u,x[1])?x[0]:(f.memoizedState=[l,u],l)}function D2(l,u){var f=fs();u=u===void 0?null:u;var x=f.memoizedState;if(u!==null&&Zg(u,x[1]))return x[0];if(x=l(),ho){ze(!0);try{l()}finally{ze(!1)}}return f.memoizedState=[x,u],x}function ux(l,u,f){return f===void 0||(Za&1073741824)!==0?l.memoizedState=u:(l.memoizedState=f,l=LS(),mt.lanes|=l,ii|=l,f)}function P2(l,u,f,x){return In(f,u)?f:El.current!==null?(l=ux(l,f,x),In(l,u)||(As=!0),l):(Za&42)===0?(As=!0,l.memoizedState=f):(l=LS(),mt.lanes|=l,ii|=l,u)}function z2(l,u,f,x,S){var T=V.p;V.p=T!==0&&8>T?T:8;var F=I.T,G={};I.T=G,fx(l,!1,u,f);try{var Z=S(),he=I.S;if(he!==null&&he(G,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var we=LD(Z,x);Ed(l,u,we,Hn(l))}else Ed(l,u,x,Hn(l))}catch(Se){Ed(l,u,{then:function(){},status:"rejected",reason:Se},Hn())}finally{V.p=T,I.T=F}}function UD(){}function hx(l,u,f,x){if(l.tag!==5)throw Error(r(476));var S=L2(l).queue;z2(l,S,u,H,f===null?UD:function(){return $2(l),f(x)})}function L2(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:H},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function $2(l){var u=L2(l).next.queue;Ed(l,u,{},Hn())}function mx(){return Xs(Gd)}function F2(){return fs().memoizedState}function I2(){return fs().memoizedState}function VD(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=Hn();l=Xa(f);var x=Qa(u,l,f);x!==null&&(Gn(x,u,f),jd(x,u,f)),u={cache:Vg()},l.payload=u;return}u=u.return}}function qD(l,u,f){var x=Hn();f={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},um(l)?U2(u,f):(f=Rg(l,u,f,x),f!==null&&(Gn(f,l,x),V2(f,u,x)))}function B2(l,u,f){var x=Hn();Ed(l,u,f,x)}function Ed(l,u,f,x){var S={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(um(l))U2(u,S);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var F=u.lastRenderedState,G=T(F,f);if(S.hasEagerState=!0,S.eagerState=G,In(G,F))return Yh(l,u,S,0),It===null&&Wh(),!1}catch{}finally{}if(f=Rg(l,u,S,x),f!==null)return Gn(f,l,x),V2(f,u,x),!0}return!1}function fx(l,u,f,x){if(x={lane:2,revertLane:Gx(),action:x,hasEagerState:!1,eagerState:null,next:null},um(l)){if(u)throw Error(r(479))}else u=Rg(l,f,x,2),u!==null&&Gn(u,l,2)}function um(l){var u=l.alternate;return l===mt||u!==null&&u===mt}function U2(l,u){Al=am=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function V2(l,u,f){if((f&4194048)!==0){var x=u.lanes;x&=l.pendingLanes,f|=x,u.lanes=f,Qi(l,f)}}var hm={readContext:Xs,use:om,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useInsertionEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useSyncExternalStore:cs,useId:cs,useHostTransitionStatus:cs,useFormState:cs,useActionState:cs,useOptimistic:cs,useMemoCache:cs,useCacheRefresh:cs},q2={readContext:Xs,use:om,useCallback:function(l,u){return Nn().memoizedState=[l,u===void 0?null:u],l},useContext:Xs,useEffect:k2,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,dm(4194308,4,M2.bind(null,u,l),f)},useLayoutEffect:function(l,u){return dm(4194308,4,l,u)},useInsertionEffect:function(l,u){dm(4,2,l,u)},useMemo:function(l,u){var f=Nn();u=u===void 0?null:u;var x=l();if(ho){ze(!0);try{l()}finally{ze(!1)}}return f.memoizedState=[x,u],x},useReducer:function(l,u,f){var x=Nn();if(f!==void 0){var S=f(u);if(ho){ze(!0);try{f(u)}finally{ze(!1)}}}else S=u;return x.memoizedState=x.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},x.queue=l,l=l.dispatch=qD.bind(null,mt,l),[x.memoizedState,l]},useRef:function(l){var u=Nn();return l={current:l},u.memoizedState=l},useState:function(l){l=lx(l);var u=l.queue,f=B2.bind(null,mt,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:dx,useDeferredValue:function(l,u){var f=Nn();return ux(f,l,u)},useTransition:function(){var l=lx(!1);return l=z2.bind(null,mt,l.queue,!0,!1),Nn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var x=mt,S=Nn();if(kt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),It===null)throw Error(r(349));(St&124)!==0||u2(x,u,f)}S.memoizedState=f;var T={value:f,getSnapshot:u};return S.queue=T,k2(m2.bind(null,x,T,l),[l]),x.flags|=2048,Ml(9,cm(),h2.bind(null,x,T,f,u),null),f},useId:function(){var l=Nn(),u=It.identifierPrefix;if(kt){var f=pa,x=fa;f=(x&~(1<<32-ae(x)-1)).toString(32)+f,u="«"+u+"R"+f,f=im++,0<f&&(u+="H"+f.toString(32)),u+="»"}else f=$D++,u="«"+u+"r"+f.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:mx,useFormState:j2,useActionState:j2,useOptimistic:function(l){var u=Nn();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=fx.bind(null,mt,!0,f),f.dispatch=u,[l,u]},useMemoCache:ax,useCacheRefresh:function(){return Nn().memoizedState=VD.bind(null,mt)}},H2={readContext:Xs,use:om,useCallback:R2,useContext:Xs,useEffect:E2,useImperativeHandle:O2,useInsertionEffect:A2,useLayoutEffect:T2,useMemo:D2,useReducer:lm,useRef:C2,useState:function(){return lm(ba)},useDebugValue:dx,useDeferredValue:function(l,u){var f=fs();return P2(f,Dt.memoizedState,l,u)},useTransition:function(){var l=lm(ba)[0],u=fs().memoizedState;return[typeof l=="boolean"?l:Cd(l),u]},useSyncExternalStore:d2,useId:F2,useHostTransitionStatus:mx,useFormState:N2,useActionState:N2,useOptimistic:function(l,u){var f=fs();return g2(f,Dt,l,u)},useMemoCache:ax,useCacheRefresh:I2},HD={readContext:Xs,use:om,useCallback:R2,useContext:Xs,useEffect:E2,useImperativeHandle:O2,useInsertionEffect:A2,useLayoutEffect:T2,useMemo:D2,useReducer:ox,useRef:C2,useState:function(){return ox(ba)},useDebugValue:dx,useDeferredValue:function(l,u){var f=fs();return Dt===null?ux(f,l,u):P2(f,Dt.memoizedState,l,u)},useTransition:function(){var l=ox(ba)[0],u=fs().memoizedState;return[typeof l=="boolean"?l:Cd(l),u]},useSyncExternalStore:d2,useId:F2,useHostTransitionStatus:mx,useFormState:_2,useActionState:_2,useOptimistic:function(l,u){var f=fs();return Dt!==null?g2(f,Dt,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:ax,useCacheRefresh:I2},Ol=null,Ad=0;function mm(l){var u=Ad;return Ad+=1,Ol===null&&(Ol=[]),s2(Ol,l,u)}function Td(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function fm(l,u){throw u.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function G2(l){var u=l._init;return u(l._payload)}function W2(l){function u(ie,re){if(l){var ue=ie.deletions;ue===null?(ie.deletions=[re],ie.flags|=16):ue.push(re)}}function f(ie,re){if(!l)return null;for(;re!==null;)u(ie,re),re=re.sibling;return null}function x(ie){for(var re=new Map;ie!==null;)ie.key!==null?re.set(ie.key,ie):re.set(ie.index,ie),ie=ie.sibling;return re}function S(ie,re){return ie=ma(ie,re),ie.index=0,ie.sibling=null,ie}function T(ie,re,ue){return ie.index=ue,l?(ue=ie.alternate,ue!==null?(ue=ue.index,ue<re?(ie.flags|=67108866,re):ue):(ie.flags|=67108866,re)):(ie.flags|=1048576,re)}function F(ie){return l&&ie.alternate===null&&(ie.flags|=67108866),ie}function G(ie,re,ue,Ne){return re===null||re.tag!==6?(re=Pg(ue,ie.mode,Ne),re.return=ie,re):(re=S(re,ue),re.return=ie,re)}function Z(ie,re,ue,Ne){var Ie=ue.type;return Ie===v?we(ie,re,ue.props.children,Ne,ue.key):re!==null&&(re.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&G2(Ie)===re.type)?(re=S(re,ue.props),Td(re,ue),re.return=ie,re):(re=Jh(ue.type,ue.key,ue.props,null,ie.mode,Ne),Td(re,ue),re.return=ie,re)}function he(ie,re,ue,Ne){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=zg(ue,ie.mode,Ne),re.return=ie,re):(re=S(re,ue.children||[]),re.return=ie,re)}function we(ie,re,ue,Ne,Ie){return re===null||re.tag!==7?(re=no(ue,ie.mode,Ne,Ie),re.return=ie,re):(re=S(re,ue),re.return=ie,re)}function Se(ie,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Pg(""+re,ie.mode,ue),re.return=ie,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case g:return ue=Jh(re.type,re.key,re.props,null,ie.mode,ue),Td(ue,re),ue.return=ie,ue;case b:return re=zg(re,ie.mode,ue),re.return=ie,re;case R:var Ne=re._init;return re=Ne(re._payload),Se(ie,re,ue)}if(q(re)||O(re))return re=no(re,ie.mode,ue,null),re.return=ie,re;if(typeof re.then=="function")return Se(ie,mm(re),ue);if(re.$$typeof===k)return Se(ie,em(ie,re),ue);fm(ie,re)}return null}function fe(ie,re,ue,Ne){var Ie=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Ie!==null?null:G(ie,re,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case g:return ue.key===Ie?Z(ie,re,ue,Ne):null;case b:return ue.key===Ie?he(ie,re,ue,Ne):null;case R:return Ie=ue._init,ue=Ie(ue._payload),fe(ie,re,ue,Ne)}if(q(ue)||O(ue))return Ie!==null?null:we(ie,re,ue,Ne,null);if(typeof ue.then=="function")return fe(ie,re,mm(ue),Ne);if(ue.$$typeof===k)return fe(ie,re,em(ie,ue),Ne);fm(ie,ue)}return null}function pe(ie,re,ue,Ne,Ie){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ie=ie.get(ue)||null,G(re,ie,""+Ne,Ie);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case g:return ie=ie.get(Ne.key===null?ue:Ne.key)||null,Z(re,ie,Ne,Ie);case b:return ie=ie.get(Ne.key===null?ue:Ne.key)||null,he(re,ie,Ne,Ie);case R:var xt=Ne._init;return Ne=xt(Ne._payload),pe(ie,re,ue,Ne,Ie)}if(q(Ne)||O(Ne))return ie=ie.get(ue)||null,we(re,ie,Ne,Ie,null);if(typeof Ne.then=="function")return pe(ie,re,ue,mm(Ne),Ie);if(Ne.$$typeof===k)return pe(ie,re,ue,em(re,Ne),Ie);fm(re,Ne)}return null}function nt(ie,re,ue,Ne){for(var Ie=null,xt=null,Ve=re,et=re=0,Ms=null;Ve!==null&&et<ue.length;et++){Ve.index>et?(Ms=Ve,Ve=null):Ms=Ve.sibling;var Ct=fe(ie,Ve,ue[et],Ne);if(Ct===null){Ve===null&&(Ve=Ms);break}l&&Ve&&Ct.alternate===null&&u(ie,Ve),re=T(Ct,re,et),xt===null?Ie=Ct:xt.sibling=Ct,xt=Ct,Ve=Ms}if(et===ue.length)return f(ie,Ve),kt&&ao(ie,et),Ie;if(Ve===null){for(;et<ue.length;et++)Ve=Se(ie,ue[et],Ne),Ve!==null&&(re=T(Ve,re,et),xt===null?Ie=Ve:xt.sibling=Ve,xt=Ve);return kt&&ao(ie,et),Ie}for(Ve=x(Ve);et<ue.length;et++)Ms=pe(Ve,ie,et,ue[et],Ne),Ms!==null&&(l&&Ms.alternate!==null&&Ve.delete(Ms.key===null?et:Ms.key),re=T(Ms,re,et),xt===null?Ie=Ms:xt.sibling=Ms,xt=Ms);return l&&Ve.forEach(function(pi){return u(ie,pi)}),kt&&ao(ie,et),Ie}function Ze(ie,re,ue,Ne){if(ue==null)throw Error(r(151));for(var Ie=null,xt=null,Ve=re,et=re=0,Ms=null,Ct=ue.next();Ve!==null&&!Ct.done;et++,Ct=ue.next()){Ve.index>et?(Ms=Ve,Ve=null):Ms=Ve.sibling;var pi=fe(ie,Ve,Ct.value,Ne);if(pi===null){Ve===null&&(Ve=Ms);break}l&&Ve&&pi.alternate===null&&u(ie,Ve),re=T(pi,re,et),xt===null?Ie=pi:xt.sibling=pi,xt=pi,Ve=Ms}if(Ct.done)return f(ie,Ve),kt&&ao(ie,et),Ie;if(Ve===null){for(;!Ct.done;et++,Ct=ue.next())Ct=Se(ie,Ct.value,Ne),Ct!==null&&(re=T(Ct,re,et),xt===null?Ie=Ct:xt.sibling=Ct,xt=Ct);return kt&&ao(ie,et),Ie}for(Ve=x(Ve);!Ct.done;et++,Ct=ue.next())Ct=pe(Ve,ie,et,Ct.value,Ne),Ct!==null&&(l&&Ct.alternate!==null&&Ve.delete(Ct.key===null?et:Ct.key),re=T(Ct,re,et),xt===null?Ie=Ct:xt.sibling=Ct,xt=Ct);return l&&Ve.forEach(function(G8){return u(ie,G8)}),kt&&ao(ie,et),Ie}function zt(ie,re,ue,Ne){if(typeof ue=="object"&&ue!==null&&ue.type===v&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case g:e:{for(var Ie=ue.key;re!==null;){if(re.key===Ie){if(Ie=ue.type,Ie===v){if(re.tag===7){f(ie,re.sibling),Ne=S(re,ue.props.children),Ne.return=ie,ie=Ne;break e}}else if(re.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&G2(Ie)===re.type){f(ie,re.sibling),Ne=S(re,ue.props),Td(Ne,ue),Ne.return=ie,ie=Ne;break e}f(ie,re);break}else u(ie,re);re=re.sibling}ue.type===v?(Ne=no(ue.props.children,ie.mode,Ne,ue.key),Ne.return=ie,ie=Ne):(Ne=Jh(ue.type,ue.key,ue.props,null,ie.mode,Ne),Td(Ne,ue),Ne.return=ie,ie=Ne)}return F(ie);case b:e:{for(Ie=ue.key;re!==null;){if(re.key===Ie)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){f(ie,re.sibling),Ne=S(re,ue.children||[]),Ne.return=ie,ie=Ne;break e}else{f(ie,re);break}else u(ie,re);re=re.sibling}Ne=zg(ue,ie.mode,Ne),Ne.return=ie,ie=Ne}return F(ie);case R:return Ie=ue._init,ue=Ie(ue._payload),zt(ie,re,ue,Ne)}if(q(ue))return nt(ie,re,ue,Ne);if(O(ue)){if(Ie=O(ue),typeof Ie!="function")throw Error(r(150));return ue=Ie.call(ue),Ze(ie,re,ue,Ne)}if(typeof ue.then=="function")return zt(ie,re,mm(ue),Ne);if(ue.$$typeof===k)return zt(ie,re,em(ie,ue),Ne);fm(ie,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(f(ie,re.sibling),Ne=S(re,ue),Ne.return=ie,ie=Ne):(f(ie,re),Ne=Pg(ue,ie.mode,Ne),Ne.return=ie,ie=Ne),F(ie)):f(ie,re)}return function(ie,re,ue,Ne){try{Ad=0;var Ie=zt(ie,re,ue,Ne);return Ol=null,Ie}catch(Ve){if(Ve===yd||Ve===sm)throw Ve;var xt=Bn(29,Ve,null,ie.mode);return xt.lanes=Ne,xt.return=ie,xt}finally{}}}var Rl=W2(!0),Y2=W2(!1),cr=K(null),qr=null;function ei(l){var u=l.alternate;W(Ns,Ns.current&1),W(cr,l),qr===null&&(u===null||El.current!==null||u.memoizedState!==null)&&(qr=l)}function K2(l){if(l.tag===22){if(W(Ns,Ns.current),W(cr,l),qr===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(qr=l)}}else ti()}function ti(){W(Ns,Ns.current),W(cr,cr.current)}function va(l){J(cr),qr===l&&(qr=null),J(Ns)}var Ns=K(0);function pm(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||rb(f)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function px(l,u,f,x){u=l.memoizedState,f=f(x,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var gx={enqueueSetState:function(l,u,f){l=l._reactInternals;var x=Hn(),S=Xa(x);S.payload=u,f!=null&&(S.callback=f),u=Qa(l,S,x),u!==null&&(Gn(u,l,x),jd(u,l,x))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var x=Hn(),S=Xa(x);S.tag=1,S.payload=u,f!=null&&(S.callback=f),u=Qa(l,S,x),u!==null&&(Gn(u,l,x),jd(u,l,x))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=Hn(),x=Xa(f);x.tag=2,u!=null&&(x.callback=u),u=Qa(l,x,f),u!==null&&(Gn(u,l,f),jd(u,l,f))}};function J2(l,u,f,x,S,T,F){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,T,F):u.prototype&&u.prototype.isPureReactComponent?!hd(f,x)||!hd(S,T):!0}function X2(l,u,f,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,x),u.state!==l&&gx.enqueueReplaceState(u,u.state,null)}function mo(l,u){var f=u;if("ref"in u){f={};for(var x in u)x!=="ref"&&(f[x]=u[x])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var S in l)f[S]===void 0&&(f[S]=l[S])}return f}var gm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Q2(l){gm(l)}function Z2(l){console.error(l)}function eS(l){gm(l)}function xm(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(x){setTimeout(function(){throw x})}}function tS(l,u,f){try{var x=l.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function xx(l,u,f){return f=Xa(f),f.tag=3,f.payload={element:null},f.callback=function(){xm(l,u)},f}function sS(l){return l=Xa(l),l.tag=3,l}function nS(l,u,f,x){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var T=x.value;l.payload=function(){return S(T)},l.callback=function(){tS(u,f,x)}}var F=f.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(l.callback=function(){tS(u,f,x),typeof S!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var G=x.stack;this.componentDidCatch(x.value,{componentStack:G!==null?G:""})})}function GD(l,u,f,x,S){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(u=f.alternate,u!==null&&xd(u,f,S,!0),f=cr.current,f!==null){switch(f.tag){case 13:return qr===null?Bx():f.alternate===null&&es===0&&(es=3),f.flags&=-257,f.flags|=65536,f.lanes=S,x===Gg?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([x]):u.add(x),Vx(l,x,S)),!1;case 22:return f.flags|=65536,x===Gg?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([x]):f.add(x)),Vx(l,x,S)),!1}throw Error(r(435,f.tag))}return Vx(l,x,S),Bx(),!1}if(kt)return u=cr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,x!==Fg&&(l=Error(r(422),{cause:x}),gd(ar(l,f)))):(x!==Fg&&(u=Error(r(423),{cause:x}),gd(ar(u,f))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,x=ar(x,f),S=xx(l.stateNode,x,S),Kg(l,S),es!==4&&(es=2)),!1;var T=Error(r(520),{cause:x});if(T=ar(T,f),Ld===null?Ld=[T]:Ld.push(T),es!==4&&(es=2),u===null)return!0;x=ar(x,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=S&-S,f.lanes|=l,l=xx(f.stateNode,x,l),Kg(f,l),!1;case 1:if(u=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(oi===null||!oi.has(T))))return f.flags|=65536,S&=-S,f.lanes|=S,S=sS(S),nS(S,l,f,x),Kg(f,S),!1}f=f.return}while(f!==null);return!1}var rS=Error(r(461)),As=!1;function Is(l,u,f,x){u.child=l===null?Y2(u,null,f,x):Rl(u,l.child,f,x)}function aS(l,u,f,x,S){f=f.render;var T=u.ref;if("ref"in x){var F={};for(var G in x)G!=="ref"&&(F[G]=x[G])}else F=x;return co(u),x=ex(l,u,f,F,T,S),G=tx(),l!==null&&!As?(sx(l,u,S),ya(l,u,S)):(kt&&G&&Lg(u),u.flags|=1,Is(l,u,x,S),u.child)}function iS(l,u,f,x,S){if(l===null){var T=f.type;return typeof T=="function"&&!Dg(T)&&T.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=T,oS(l,u,T,x,S)):(l=Jh(f.type,null,x,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(T=l.child,!_x(l,S)){var F=T.memoizedProps;if(f=f.compare,f=f!==null?f:hd,f(F,x)&&l.ref===u.ref)return ya(l,u,S)}return u.flags|=1,l=ma(T,x),l.ref=u.ref,l.return=u,u.child=l}function oS(l,u,f,x,S){if(l!==null){var T=l.memoizedProps;if(hd(T,x)&&l.ref===u.ref)if(As=!1,u.pendingProps=x=T,_x(l,S))(l.flags&131072)!==0&&(As=!0);else return u.lanes=l.lanes,ya(l,u,S)}return bx(l,u,f,x,S)}function lS(l,u,f){var x=u.pendingProps,S=x.children,T=l!==null?l.memoizedState:null;if(x.mode==="hidden"){if((u.flags&128)!==0){if(x=T!==null?T.baseLanes|f:f,l!==null){for(S=u.child=l.child,T=0;S!==null;)T=T|S.lanes|S.childLanes,S=S.sibling;u.childLanes=T&~x}else u.childLanes=0,u.child=null;return cS(l,u,x,f)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&tm(u,T!==null?T.cachePool:null),T!==null?o2(u,T):Xg(),K2(u);else return u.lanes=u.childLanes=536870912,cS(l,u,T!==null?T.baseLanes|f:f,f)}else T!==null?(tm(u,T.cachePool),o2(u,T),ti(),u.memoizedState=null):(l!==null&&tm(u,null),Xg(),ti());return Is(l,u,S,f),u.child}function cS(l,u,f,x){var S=Hg();return S=S===null?null:{parent:js._currentValue,pool:S},u.memoizedState={baseLanes:f,cachePool:S},l!==null&&tm(u,null),Xg(),K2(u),l!==null&&xd(l,u,x,!0),null}function bm(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function bx(l,u,f,x,S){return co(u),f=ex(l,u,f,x,void 0,S),x=tx(),l!==null&&!As?(sx(l,u,S),ya(l,u,S)):(kt&&x&&Lg(u),u.flags|=1,Is(l,u,f,S),u.child)}function dS(l,u,f,x,S,T){return co(u),u.updateQueue=null,f=c2(u,x,f,S),l2(l),x=tx(),l!==null&&!As?(sx(l,u,T),ya(l,u,T)):(kt&&x&&Lg(u),u.flags|=1,Is(l,u,f,T),u.child)}function uS(l,u,f,x,S){if(co(u),u.stateNode===null){var T=Nl,F=f.contextType;typeof F=="object"&&F!==null&&(T=Xs(F)),T=new f(x,T),u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=gx,u.stateNode=T,T._reactInternals=u,T=u.stateNode,T.props=x,T.state=u.memoizedState,T.refs={},Wg(u),F=f.contextType,T.context=typeof F=="object"&&F!==null?Xs(F):Nl,T.state=u.memoizedState,F=f.getDerivedStateFromProps,typeof F=="function"&&(px(u,f,F,x),T.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(F=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),F!==T.state&&gx.enqueueReplaceState(T,T.state,null),Sd(u,x,T,S),Nd(),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308),x=!0}else if(l===null){T=u.stateNode;var G=u.memoizedProps,Z=mo(f,G);T.props=Z;var he=T.context,we=f.contextType;F=Nl,typeof we=="object"&&we!==null&&(F=Xs(we));var Se=f.getDerivedStateFromProps;we=typeof Se=="function"||typeof T.getSnapshotBeforeUpdate=="function",G=u.pendingProps!==G,we||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(G||he!==F)&&X2(u,T,x,F),Ja=!1;var fe=u.memoizedState;T.state=fe,Sd(u,x,T,S),Nd(),he=u.memoizedState,G||fe!==he||Ja?(typeof Se=="function"&&(px(u,f,Se,x),he=u.memoizedState),(Z=Ja||J2(u,f,Z,x,fe,he,F))?(we||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(u.flags|=4194308)):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=he),T.props=x,T.state=he,T.context=F,x=Z):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{T=u.stateNode,Yg(l,u),F=u.memoizedProps,we=mo(f,F),T.props=we,Se=u.pendingProps,fe=T.context,he=f.contextType,Z=Nl,typeof he=="object"&&he!==null&&(Z=Xs(he)),G=f.getDerivedStateFromProps,(he=typeof G=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==Se||fe!==Z)&&X2(u,T,x,Z),Ja=!1,fe=u.memoizedState,T.state=fe,Sd(u,x,T,S),Nd();var pe=u.memoizedState;F!==Se||fe!==pe||Ja||l!==null&&l.dependencies!==null&&Zh(l.dependencies)?(typeof G=="function"&&(px(u,f,G,x),pe=u.memoizedState),(we=Ja||J2(u,f,we,x,fe,pe,Z)||l!==null&&l.dependencies!==null&&Zh(l.dependencies))?(he||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(x,pe,Z),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(x,pe,Z)),typeof T.componentDidUpdate=="function"&&(u.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof T.componentDidUpdate!="function"||F===l.memoizedProps&&fe===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=pe),T.props=x,T.state=pe,T.context=Z,x=we):(typeof T.componentDidUpdate!="function"||F===l.memoizedProps&&fe===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===l.memoizedProps&&fe===l.memoizedState||(u.flags|=1024),x=!1)}return T=x,bm(l,u),x=(u.flags&128)!==0,T||x?(T=u.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:T.render(),u.flags|=1,l!==null&&x?(u.child=Rl(u,l.child,null,S),u.child=Rl(u,null,f,S)):Is(l,u,f,S),u.memoizedState=T.state,l=u.child):l=ya(l,u,S),l}function hS(l,u,f,x){return pd(),u.flags|=256,Is(l,u,f,x),u.child}var vx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yx(l){return{baseLanes:l,cachePool:ZN()}}function wx(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=dr),l}function mS(l,u,f){var x=u.pendingProps,S=!1,T=(u.flags&128)!==0,F;if((F=T)||(F=l!==null&&l.memoizedState===null?!1:(Ns.current&2)!==0),F&&(S=!0,u.flags&=-129),F=(u.flags&32)!==0,u.flags&=-33,l===null){if(kt){if(S?ei(u):ti(),kt){var G=Zt,Z;if(Z=G){e:{for(Z=G,G=Vr;Z.nodeType!==8;){if(!G){G=null;break e}if(Z=Tr(Z.nextSibling),Z===null){G=null;break e}}G=Z}G!==null?(u.memoizedState={dehydrated:G,treeContext:ro!==null?{id:fa,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},Z=Bn(18,null,null,0),Z.stateNode=G,Z.return=u,u.child=Z,ln=u,Zt=null,Z=!0):Z=!1}Z||oo(u)}if(G=u.memoizedState,G!==null&&(G=G.dehydrated,G!==null))return rb(G)?u.lanes=32:u.lanes=536870912,null;va(u)}return G=x.children,x=x.fallback,S?(ti(),S=u.mode,G=vm({mode:"hidden",children:G},S),x=no(x,S,f,null),G.return=u,x.return=u,G.sibling=x,u.child=G,S=u.child,S.memoizedState=yx(f),S.childLanes=wx(l,F,f),u.memoizedState=vx,x):(ei(u),jx(u,G))}if(Z=l.memoizedState,Z!==null&&(G=Z.dehydrated,G!==null)){if(T)u.flags&256?(ei(u),u.flags&=-257,u=Nx(l,u,f)):u.memoizedState!==null?(ti(),u.child=l.child,u.flags|=128,u=null):(ti(),S=x.fallback,G=u.mode,x=vm({mode:"visible",children:x.children},G),S=no(S,G,f,null),S.flags|=2,x.return=u,S.return=u,x.sibling=S,u.child=x,Rl(u,l.child,null,f),x=u.child,x.memoizedState=yx(f),x.childLanes=wx(l,F,f),u.memoizedState=vx,u=S);else if(ei(u),rb(G)){if(F=G.nextSibling&&G.nextSibling.dataset,F)var he=F.dgst;F=he,x=Error(r(419)),x.stack="",x.digest=F,gd({value:x,source:null,stack:null}),u=Nx(l,u,f)}else if(As||xd(l,u,f,!1),F=(f&l.childLanes)!==0,As||F){if(F=It,F!==null&&(x=f&-f,x=(x&42)!==0?1:Ur(x),x=(x&(F.suspendedLanes|f))!==0?0:x,x!==0&&x!==Z.retryLane))throw Z.retryLane=x,jl(l,x),Gn(F,l,x),rS;G.data==="$?"||Bx(),u=Nx(l,u,f)}else G.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=Z.treeContext,Zt=Tr(G.nextSibling),ln=u,kt=!0,io=null,Vr=!1,l!==null&&(or[lr++]=fa,or[lr++]=pa,or[lr++]=ro,fa=l.id,pa=l.overflow,ro=u),u=jx(u,x.children),u.flags|=4096);return u}return S?(ti(),S=x.fallback,G=u.mode,Z=l.child,he=Z.sibling,x=ma(Z,{mode:"hidden",children:x.children}),x.subtreeFlags=Z.subtreeFlags&65011712,he!==null?S=ma(he,S):(S=no(S,G,f,null),S.flags|=2),S.return=u,x.return=u,x.sibling=S,u.child=x,x=S,S=u.child,G=l.child.memoizedState,G===null?G=yx(f):(Z=G.cachePool,Z!==null?(he=js._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=ZN(),G={baseLanes:G.baseLanes|f,cachePool:Z}),S.memoizedState=G,S.childLanes=wx(l,F,f),u.memoizedState=vx,x):(ei(u),f=l.child,l=f.sibling,f=ma(f,{mode:"visible",children:x.children}),f.return=u,f.sibling=null,l!==null&&(F=u.deletions,F===null?(u.deletions=[l],u.flags|=16):F.push(l)),u.child=f,u.memoizedState=null,f)}function jx(l,u){return u=vm({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function vm(l,u){return l=Bn(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Nx(l,u,f){return Rl(u,l.child,null,f),l=jx(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function fS(l,u,f){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),Bg(l.return,u,f)}function Sx(l,u,f,x,S){var T=l.memoizedState;T===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:S}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=x,T.tail=f,T.tailMode=S)}function pS(l,u,f){var x=u.pendingProps,S=x.revealOrder,T=x.tail;if(Is(l,u,x.children,f),x=Ns.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fS(l,f,u);else if(l.tag===19)fS(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}switch(W(Ns,x),S){case"forwards":for(f=u.child,S=null;f!==null;)l=f.alternate,l!==null&&pm(l)===null&&(S=f),f=f.sibling;f=S,f===null?(S=u.child,u.child=null):(S=f.sibling,f.sibling=null),Sx(u,!1,S,f,T);break;case"backwards":for(f=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&pm(l)===null){u.child=S;break}l=S.sibling,S.sibling=f,f=S,S=l}Sx(u,!0,f,null,T);break;case"together":Sx(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ya(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),ii|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(xd(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,f=ma(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=ma(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function _x(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Zh(l)))}function WD(l,u,f){switch(u.tag){case 3:de(u,u.stateNode.containerInfo),Ka(u,js,l.memoizedState.cache),pd();break;case 27:case 5:Pe(u);break;case 4:de(u,u.stateNode.containerInfo);break;case 10:Ka(u,u.type,u.memoizedProps.value);break;case 13:var x=u.memoizedState;if(x!==null)return x.dehydrated!==null?(ei(u),u.flags|=128,null):(f&u.child.childLanes)!==0?mS(l,u,f):(ei(u),l=ya(l,u,f),l!==null?l.sibling:null);ei(u);break;case 19:var S=(l.flags&128)!==0;if(x=(f&u.childLanes)!==0,x||(xd(l,u,f,!1),x=(f&u.childLanes)!==0),S){if(x)return pS(l,u,f);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),W(Ns,Ns.current),x)break;return null;case 22:case 23:return u.lanes=0,lS(l,u,f);case 24:Ka(u,js,l.memoizedState.cache)}return ya(l,u,f)}function gS(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)As=!0;else{if(!_x(l,f)&&(u.flags&128)===0)return As=!1,WD(l,u,f);As=(l.flags&131072)!==0}else As=!1,kt&&(u.flags&1048576)!==0&&GN(u,Qh,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var x=u.elementType,S=x._init;if(x=S(x._payload),u.type=x,typeof x=="function")Dg(x)?(l=mo(x,l),u.tag=1,u=uS(null,u,x,l,f)):(u.tag=0,u=bx(null,u,x,l,f));else{if(x!=null){if(S=x.$$typeof,S===C){u.tag=11,u=aS(null,u,x,l,f);break e}else if(S===M){u.tag=14,u=iS(null,u,x,l,f);break e}}throw u=z(x)||x,Error(r(306,u,""))}}return u;case 0:return bx(l,u,u.type,u.pendingProps,f);case 1:return x=u.type,S=mo(x,u.pendingProps),uS(l,u,x,S,f);case 3:e:{if(de(u,u.stateNode.containerInfo),l===null)throw Error(r(387));x=u.pendingProps;var T=u.memoizedState;S=T.element,Yg(l,u),Sd(u,x,null,f);var F=u.memoizedState;if(x=F.cache,Ka(u,js,x),x!==T.cache&&Ug(u,[js],f,!0),Nd(),x=F.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:F.cache},u.updateQueue.baseState=T,u.memoizedState=T,u.flags&256){u=hS(l,u,x,f);break e}else if(x!==S){S=ar(Error(r(424)),u),gd(S),u=hS(l,u,x,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Zt=Tr(l.firstChild),ln=u,kt=!0,io=null,Vr=!0,f=Y2(u,null,x,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(pd(),x===S){u=ya(l,u,f);break e}Is(l,u,x,f)}u=u.child}return u;case 26:return bm(l,u),l===null?(f=y_(u.type,null,u.pendingProps,null))?u.memoizedState=f:kt||(f=u.type,l=u.pendingProps,x=Rm(X.current).createElement(f),x[Js]=u,x[wn]=l,Us(x,f,l),Es(x),u.stateNode=x):u.memoizedState=y_(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Pe(u),l===null&&kt&&(x=u.stateNode=x_(u.type,u.pendingProps,X.current),ln=u,Vr=!0,S=Zt,di(u.type)?(ab=S,Zt=Tr(x.firstChild)):Zt=S),Is(l,u,u.pendingProps.children,f),bm(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&kt&&((S=x=Zt)&&(x=w8(x,u.type,u.pendingProps,Vr),x!==null?(u.stateNode=x,ln=u,Zt=Tr(x.firstChild),Vr=!1,S=!0):S=!1),S||oo(u)),Pe(u),S=u.type,T=u.pendingProps,F=l!==null?l.memoizedProps:null,x=T.children,tb(S,T)?x=null:F!==null&&tb(S,F)&&(u.flags|=32),u.memoizedState!==null&&(S=ex(l,u,FD,null,null,f),Gd._currentValue=S),bm(l,u),Is(l,u,x,f),u.child;case 6:return l===null&&kt&&((l=f=Zt)&&(f=j8(f,u.pendingProps,Vr),f!==null?(u.stateNode=f,ln=u,Zt=null,l=!0):l=!1),l||oo(u)),null;case 13:return mS(l,u,f);case 4:return de(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=Rl(u,null,x,f):Is(l,u,x,f),u.child;case 11:return aS(l,u,u.type,u.pendingProps,f);case 7:return Is(l,u,u.pendingProps,f),u.child;case 8:return Is(l,u,u.pendingProps.children,f),u.child;case 12:return Is(l,u,u.pendingProps.children,f),u.child;case 10:return x=u.pendingProps,Ka(u,u.type,x.value),Is(l,u,x.children,f),u.child;case 9:return S=u.type._context,x=u.pendingProps.children,co(u),S=Xs(S),x=x(S),u.flags|=1,Is(l,u,x,f),u.child;case 14:return iS(l,u,u.type,u.pendingProps,f);case 15:return oS(l,u,u.type,u.pendingProps,f);case 19:return pS(l,u,f);case 31:return x=u.pendingProps,f=u.mode,x={mode:x.mode,children:x.children},l===null?(f=vm(x,f),f.ref=u.ref,u.child=f,f.return=u,u=f):(f=ma(l.child,x),f.ref=u.ref,u.child=f,f.return=u,u=f),u;case 22:return lS(l,u,f);case 24:return co(u),x=Xs(js),l===null?(S=Hg(),S===null&&(S=It,T=Vg(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=f),S=T),u.memoizedState={parent:x,cache:S},Wg(u),Ka(u,js,S)):((l.lanes&f)!==0&&(Yg(l,u),Sd(u,null,null,f),Nd()),S=l.memoizedState,T=u.memoizedState,S.parent!==x?(S={parent:x,cache:x},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),Ka(u,js,x)):(x=T.cache,Ka(u,js,x),x!==S.cache&&Ug(u,[js],f,!0))),Is(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function wa(l){l.flags|=4}function xS(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!__(u)){if(u=cr.current,u!==null&&((St&4194048)===St?qr!==null:(St&62914560)!==St&&(St&536870912)===0||u!==qr))throw wd=Gg,e2;l.flags|=8192}}function ym(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?ks():536870912,l.lanes|=u,Ll|=u)}function Md(l,u){if(!kt)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Yt(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,x=0;if(u)for(var S=l.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags&65011712,x|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=x,l.childLanes=f,u}function YD(l,u,f){var x=u.pendingProps;switch($g(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(u),null;case 1:return Yt(u),null;case 3:return f=u.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),xa(js),ve(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(fd(u)?wa(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,KN())),Yt(u),null;case 26:return f=u.memoizedState,l===null?(wa(u),f!==null?(Yt(u),xS(u,f)):(Yt(u),u.flags&=-16777217)):f?f!==l.memoizedState?(wa(u),Yt(u),xS(u,f)):(Yt(u),u.flags&=-16777217):(l.memoizedProps!==x&&wa(u),Yt(u),u.flags&=-16777217),null;case 27:He(u),f=X.current;var S=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==x&&wa(u);else{if(!x){if(u.stateNode===null)throw Error(r(166));return Yt(u),null}l=ee.current,fd(u)?WN(u):(l=x_(S,x,f),u.stateNode=l,wa(u))}return Yt(u),null;case 5:if(He(u),f=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==x&&wa(u);else{if(!x){if(u.stateNode===null)throw Error(r(166));return Yt(u),null}if(l=ee.current,fd(u))WN(u);else{switch(S=Rm(X.current),l){case 1:l=S.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:l=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":l=S.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":l=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":l=S.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof x.is=="string"?S.createElement("select",{is:x.is}):S.createElement("select"),x.multiple?l.multiple=!0:x.size&&(l.size=x.size);break;default:l=typeof x.is=="string"?S.createElement(f,{is:x.is}):S.createElement(f)}}l[Js]=u,l[wn]=x;e:for(S=u.child;S!==null;){if(S.tag===5||S.tag===6)l.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===u)break e;for(;S.sibling===null;){if(S.return===null||S.return===u)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}u.stateNode=l;e:switch(Us(l,f,x),f){case"button":case"input":case"select":case"textarea":l=!!x.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&wa(u)}}return Yt(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==x&&wa(u);else{if(typeof x!="string"&&u.stateNode===null)throw Error(r(166));if(l=X.current,fd(u)){if(l=u.stateNode,f=u.memoizedProps,x=null,S=ln,S!==null)switch(S.tag){case 27:case 5:x=S.memoizedProps}l[Js]=u,l=!!(l.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||d_(l.nodeValue,f)),l||oo(u)}else l=Rm(l).createTextNode(x),l[Js]=u,u.stateNode=l}return Yt(u),null;case 13:if(x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=fd(u),x!==null&&x.dehydrated!==null){if(l===null){if(!S)throw Error(r(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[Js]=u}else pd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yt(u),S=!1}else S=KN(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(va(u),u):(va(u),null)}if(va(u),(u.flags&128)!==0)return u.lanes=f,u;if(f=x!==null,l=l!==null&&l.memoizedState!==null,f){x=u.child,S=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(S=x.alternate.memoizedState.cachePool.pool);var T=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(T=x.memoizedState.cachePool.pool),T!==S&&(x.flags|=2048)}return f!==l&&f&&(u.child.flags|=8192),ym(u,u.updateQueue),Yt(u),null;case 4:return ve(),l===null&&Jx(u.stateNode.containerInfo),Yt(u),null;case 10:return xa(u.type),Yt(u),null;case 19:if(J(Ns),S=u.memoizedState,S===null)return Yt(u),null;if(x=(u.flags&128)!==0,T=S.rendering,T===null)if(x)Md(S,!1);else{if(es!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(T=pm(l),T!==null){for(u.flags|=128,Md(S,!1),l=T.updateQueue,u.updateQueue=l,ym(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)HN(f,l),f=f.sibling;return W(Ns,Ns.current&1|2),u.child}l=l.sibling}S.tail!==null&&te()>Nm&&(u.flags|=128,x=!0,Md(S,!1),u.lanes=4194304)}else{if(!x)if(l=pm(T),l!==null){if(u.flags|=128,x=!0,l=l.updateQueue,u.updateQueue=l,ym(u,l),Md(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!kt)return Yt(u),null}else 2*te()-S.renderingStartTime>Nm&&f!==536870912&&(u.flags|=128,x=!0,Md(S,!1),u.lanes=4194304);S.isBackwards?(T.sibling=u.child,u.child=T):(l=S.last,l!==null?l.sibling=T:u.child=T,S.last=T)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=te(),u.sibling=null,l=Ns.current,W(Ns,x?l&1|2:l&1),u):(Yt(u),null);case 22:case 23:return va(u),Qg(),x=u.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(u.flags|=8192):x&&(u.flags|=8192),x?(f&536870912)!==0&&(u.flags&128)===0&&(Yt(u),u.subtreeFlags&6&&(u.flags|=8192)):Yt(u),f=u.updateQueue,f!==null&&ym(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==f&&(u.flags|=2048),l!==null&&J(uo),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),xa(js),Yt(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function KD(l,u){switch($g(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return xa(js),ve(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return He(u),null;case 13:if(va(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));pd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return J(Ns),null;case 4:return ve(),null;case 10:return xa(u.type),null;case 22:case 23:return va(u),Qg(),l!==null&&J(uo),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return xa(js),null;case 25:return null;default:return null}}function bS(l,u){switch($g(u),u.tag){case 3:xa(js),ve();break;case 26:case 27:case 5:He(u);break;case 4:ve();break;case 13:va(u);break;case 19:J(Ns);break;case 10:xa(u.type);break;case 22:case 23:va(u),Qg(),l!==null&&J(uo);break;case 24:xa(js)}}function Od(l,u){try{var f=u.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var S=x.next;f=S;do{if((f.tag&l)===l){x=void 0;var T=f.create,F=f.inst;x=T(),F.destroy=x}f=f.next}while(f!==S)}}catch(G){$t(u,u.return,G)}}function si(l,u,f){try{var x=u.updateQueue,S=x!==null?x.lastEffect:null;if(S!==null){var T=S.next;x=T;do{if((x.tag&l)===l){var F=x.inst,G=F.destroy;if(G!==void 0){F.destroy=void 0,S=u;var Z=f,he=G;try{he()}catch(we){$t(S,Z,we)}}}x=x.next}while(x!==T)}}catch(we){$t(u,u.return,we)}}function vS(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{i2(u,f)}catch(x){$t(l,l.return,x)}}}function yS(l,u,f){f.props=mo(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(x){$t(l,u,x)}}function Rd(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof f=="function"?l.refCleanup=f(x):f.current=x}}catch(S){$t(l,u,S)}}function Hr(l,u){var f=l.ref,x=l.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(S){$t(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){$t(l,u,S)}else f.current=null}function wS(l){var u=l.type,f=l.memoizedProps,x=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(S){$t(l,l.return,S)}}function Cx(l,u,f){try{var x=l.stateNode;g8(x,l.type,f,u),x[wn]=u}catch(S){$t(l,l.return,S)}}function jS(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&di(l.type)||l.tag===4}function kx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||jS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&di(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ex(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Om));else if(x!==4&&(x===27&&di(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(Ex(l,u,f),l=l.sibling;l!==null;)Ex(l,u,f),l=l.sibling}function wm(l,u,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(x!==4&&(x===27&&di(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(wm(l,u,f),l=l.sibling;l!==null;)wm(l,u,f),l=l.sibling}function NS(l){var u=l.stateNode,f=l.memoizedProps;try{for(var x=l.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);Us(u,x,f),u[Js]=l,u[wn]=f}catch(T){$t(l,l.return,T)}}var ja=!1,ds=!1,Ax=!1,SS=typeof WeakSet=="function"?WeakSet:Set,Ts=null;function JD(l,u){if(l=l.containerInfo,Zx=Fm,l=PN(l),kg(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var S=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var F=0,G=-1,Z=-1,he=0,we=0,Se=l,fe=null;t:for(;;){for(var pe;Se!==f||S!==0&&Se.nodeType!==3||(G=F+S),Se!==T||x!==0&&Se.nodeType!==3||(Z=F+x),Se.nodeType===3&&(F+=Se.nodeValue.length),(pe=Se.firstChild)!==null;)fe=Se,Se=pe;for(;;){if(Se===l)break t;if(fe===f&&++he===S&&(G=F),fe===T&&++we===x&&(Z=F),(pe=Se.nextSibling)!==null)break;Se=fe,fe=Se.parentNode}Se=pe}f=G===-1||Z===-1?null:{start:G,end:Z}}else f=null}f=f||{start:0,end:0}}else f=null;for(eb={focusedElem:l,selectionRange:f},Fm=!1,Ts=u;Ts!==null;)if(u=Ts,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Ts=l;else for(;Ts!==null;){switch(u=Ts,T=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,f=u,S=T.memoizedProps,T=T.memoizedState,x=f.stateNode;try{var nt=mo(f.type,S,f.elementType===f.type);l=x.getSnapshotBeforeUpdate(nt,T),x.__reactInternalSnapshotBeforeUpdate=l}catch(Ze){$t(f,f.return,Ze)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)nb(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":nb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Ts=l;break}Ts=u.return}}function _S(l,u,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:ni(l,f),x&4&&Od(5,f);break;case 1:if(ni(l,f),x&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(F){$t(f,f.return,F)}else{var S=mo(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(F){$t(f,f.return,F)}}x&64&&vS(f),x&512&&Rd(f,f.return);break;case 3:if(ni(l,f),x&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{i2(l,u)}catch(F){$t(f,f.return,F)}}break;case 27:u===null&&x&4&&NS(f);case 26:case 5:ni(l,f),u===null&&x&4&&wS(f),x&512&&Rd(f,f.return);break;case 12:ni(l,f);break;case 13:ni(l,f),x&4&&ES(l,f),x&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=a8.bind(null,f),N8(l,f))));break;case 22:if(x=f.memoizedState!==null||ja,!x){u=u!==null&&u.memoizedState!==null||ds,S=ja;var T=ds;ja=x,(ds=u)&&!T?ri(l,f,(f.subtreeFlags&8772)!==0):ni(l,f),ja=S,ds=T}break;case 30:break;default:ni(l,f)}}function CS(l){var u=l.alternate;u!==null&&(l.alternate=null,CS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&lg(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var qt=null,Sn=!1;function Na(l,u,f){for(f=f.child;f!==null;)kS(l,u,f),f=f.sibling}function kS(l,u,f){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(ft,f)}catch{}switch(f.tag){case 26:ds||Hr(f,u),Na(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ds||Hr(f,u);var x=qt,S=Sn;di(f.type)&&(qt=f.stateNode,Sn=!1),Na(l,u,f),Ud(f.stateNode),qt=x,Sn=S;break;case 5:ds||Hr(f,u);case 6:if(x=qt,S=Sn,qt=null,Na(l,u,f),qt=x,Sn=S,qt!==null)if(Sn)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(f.stateNode)}catch(T){$t(f,u,T)}else try{qt.removeChild(f.stateNode)}catch(T){$t(f,u,T)}break;case 18:qt!==null&&(Sn?(l=qt,p_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Jd(l)):p_(qt,f.stateNode));break;case 4:x=qt,S=Sn,qt=f.stateNode.containerInfo,Sn=!0,Na(l,u,f),qt=x,Sn=S;break;case 0:case 11:case 14:case 15:ds||si(2,f,u),ds||si(4,f,u),Na(l,u,f);break;case 1:ds||(Hr(f,u),x=f.stateNode,typeof x.componentWillUnmount=="function"&&yS(f,u,x)),Na(l,u,f);break;case 21:Na(l,u,f);break;case 22:ds=(x=ds)||f.memoizedState!==null,Na(l,u,f),ds=x;break;default:Na(l,u,f)}}function ES(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Jd(l)}catch(f){$t(u,u.return,f)}}function XD(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new SS),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new SS),u;default:throw Error(r(435,l.tag))}}function Tx(l,u){var f=XD(l);u.forEach(function(x){var S=i8.bind(null,l,x);f.has(x)||(f.add(x),x.then(S,S))})}function Un(l,u){var f=u.deletions;if(f!==null)for(var x=0;x<f.length;x++){var S=f[x],T=l,F=u,G=F;e:for(;G!==null;){switch(G.tag){case 27:if(di(G.type)){qt=G.stateNode,Sn=!1;break e}break;case 5:qt=G.stateNode,Sn=!1;break e;case 3:case 4:qt=G.stateNode.containerInfo,Sn=!0;break e}G=G.return}if(qt===null)throw Error(r(160));kS(T,F,S),qt=null,Sn=!1,T=S.alternate,T!==null&&(T.return=null),S.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)AS(u,l),u=u.sibling}var Ar=null;function AS(l,u){var f=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Un(u,l),Vn(l),x&4&&(si(3,l,l.return),Od(3,l),si(5,l,l.return));break;case 1:Un(u,l),Vn(l),x&512&&(ds||f===null||Hr(f,f.return)),x&64&&ja&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var S=Ar;if(Un(u,l),Vn(l),x&512&&(ds||f===null||Hr(f,f.return)),x&4){var T=f!==null?f.memoizedState:null;if(x=l.memoizedState,f===null)if(x===null)if(l.stateNode===null){e:{x=l.type,f=l.memoizedProps,S=S.ownerDocument||S;t:switch(x){case"title":T=S.getElementsByTagName("title")[0],(!T||T[nd]||T[Js]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=S.createElement(x),S.head.insertBefore(T,S.querySelector("head > title"))),Us(T,x,f),T[Js]=l,Es(T),x=T;break e;case"link":var F=N_("link","href",S).get(x+(f.href||""));if(F){for(var G=0;G<F.length;G++)if(T=F[G],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){F.splice(G,1);break t}}T=S.createElement(x),Us(T,x,f),S.head.appendChild(T);break;case"meta":if(F=N_("meta","content",S).get(x+(f.content||""))){for(G=0;G<F.length;G++)if(T=F[G],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){F.splice(G,1);break t}}T=S.createElement(x),Us(T,x,f),S.head.appendChild(T);break;default:throw Error(r(468,x))}T[Js]=l,Es(T),x=T}l.stateNode=x}else S_(S,l.type,l.stateNode);else l.stateNode=j_(S,x,l.memoizedProps);else T!==x?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,x===null?S_(S,l.type,l.stateNode):j_(S,x,l.memoizedProps)):x===null&&l.stateNode!==null&&Cx(l,l.memoizedProps,f.memoizedProps)}break;case 27:Un(u,l),Vn(l),x&512&&(ds||f===null||Hr(f,f.return)),f!==null&&x&4&&Cx(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Un(u,l),Vn(l),x&512&&(ds||f===null||Hr(f,f.return)),l.flags&32){S=l.stateNode;try{pl(S,"")}catch(pe){$t(l,l.return,pe)}}x&4&&l.stateNode!=null&&(S=l.memoizedProps,Cx(l,S,f!==null?f.memoizedProps:S)),x&1024&&(Ax=!0);break;case 6:if(Un(u,l),Vn(l),x&4){if(l.stateNode===null)throw Error(r(162));x=l.memoizedProps,f=l.stateNode;try{f.nodeValue=x}catch(pe){$t(l,l.return,pe)}}break;case 3:if(zm=null,S=Ar,Ar=Dm(u.containerInfo),Un(u,l),Ar=S,Vn(l),x&4&&f!==null&&f.memoizedState.isDehydrated)try{Jd(u.containerInfo)}catch(pe){$t(l,l.return,pe)}Ax&&(Ax=!1,TS(l));break;case 4:x=Ar,Ar=Dm(l.stateNode.containerInfo),Un(u,l),Vn(l),Ar=x;break;case 12:Un(u,l),Vn(l);break;case 13:Un(u,l),Vn(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(zx=te()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Tx(l,x)));break;case 22:S=l.memoizedState!==null;var Z=f!==null&&f.memoizedState!==null,he=ja,we=ds;if(ja=he||S,ds=we||Z,Un(u,l),ds=we,ja=he,Vn(l),x&8192)e:for(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(f===null||Z||ja||ds||fo(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){Z=f=u;try{if(T=Z.stateNode,S)F=T.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{G=Z.stateNode;var Se=Z.memoizedProps.style,fe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;G.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(pe){$t(Z,Z.return,pe)}}}else if(u.tag===6){if(f===null){Z=u;try{Z.stateNode.nodeValue=S?"":Z.memoizedProps}catch(pe){$t(Z,Z.return,pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}x&4&&(x=l.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,Tx(l,f))));break;case 19:Un(u,l),Vn(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Tx(l,x)));break;case 30:break;case 21:break;default:Un(u,l),Vn(l)}}function Vn(l){var u=l.flags;if(u&2){try{for(var f,x=l.return;x!==null;){if(jS(x)){f=x;break}x=x.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var S=f.stateNode,T=kx(l);wm(l,T,S);break;case 5:var F=f.stateNode;f.flags&32&&(pl(F,""),f.flags&=-33);var G=kx(l);wm(l,G,F);break;case 3:case 4:var Z=f.stateNode.containerInfo,he=kx(l);Ex(l,he,Z);break;default:throw Error(r(161))}}catch(we){$t(l,l.return,we)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function TS(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;TS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function ni(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)_S(l,u.alternate,u),u=u.sibling}function fo(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:si(4,u,u.return),fo(u);break;case 1:Hr(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&yS(u,u.return,f),fo(u);break;case 27:Ud(u.stateNode);case 26:case 5:Hr(u,u.return),fo(u);break;case 22:u.memoizedState===null&&fo(u);break;case 30:fo(u);break;default:fo(u)}l=l.sibling}}function ri(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var x=u.alternate,S=l,T=u,F=T.flags;switch(T.tag){case 0:case 11:case 15:ri(S,T,f),Od(4,T);break;case 1:if(ri(S,T,f),x=T,S=x.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(he){$t(x,x.return,he)}if(x=T,S=x.updateQueue,S!==null){var G=x.stateNode;try{var Z=S.shared.hiddenCallbacks;if(Z!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Z.length;S++)a2(Z[S],G)}catch(he){$t(x,x.return,he)}}f&&F&64&&vS(T),Rd(T,T.return);break;case 27:NS(T);case 26:case 5:ri(S,T,f),f&&x===null&&F&4&&wS(T),Rd(T,T.return);break;case 12:ri(S,T,f);break;case 13:ri(S,T,f),f&&F&4&&ES(S,T);break;case 22:T.memoizedState===null&&ri(S,T,f),Rd(T,T.return);break;case 30:break;default:ri(S,T,f)}u=u.sibling}}function Mx(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&bd(f))}function Ox(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&bd(l))}function Gr(l,u,f,x){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)MS(l,u,f,x),u=u.sibling}function MS(l,u,f,x){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Gr(l,u,f,x),S&2048&&Od(9,u);break;case 1:Gr(l,u,f,x);break;case 3:Gr(l,u,f,x),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&bd(l)));break;case 12:if(S&2048){Gr(l,u,f,x),l=u.stateNode;try{var T=u.memoizedProps,F=T.id,G=T.onPostCommit;typeof G=="function"&&G(F,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Z){$t(u,u.return,Z)}}else Gr(l,u,f,x);break;case 13:Gr(l,u,f,x);break;case 23:break;case 22:T=u.stateNode,F=u.alternate,u.memoizedState!==null?T._visibility&2?Gr(l,u,f,x):Dd(l,u):T._visibility&2?Gr(l,u,f,x):(T._visibility|=2,Dl(l,u,f,x,(u.subtreeFlags&10256)!==0)),S&2048&&Mx(F,u);break;case 24:Gr(l,u,f,x),S&2048&&Ox(u.alternate,u);break;default:Gr(l,u,f,x)}}function Dl(l,u,f,x,S){for(S=S&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var T=l,F=u,G=f,Z=x,he=F.flags;switch(F.tag){case 0:case 11:case 15:Dl(T,F,G,Z,S),Od(8,F);break;case 23:break;case 22:var we=F.stateNode;F.memoizedState!==null?we._visibility&2?Dl(T,F,G,Z,S):Dd(T,F):(we._visibility|=2,Dl(T,F,G,Z,S)),S&&he&2048&&Mx(F.alternate,F);break;case 24:Dl(T,F,G,Z,S),S&&he&2048&&Ox(F.alternate,F);break;default:Dl(T,F,G,Z,S)}u=u.sibling}}function Dd(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,x=u,S=x.flags;switch(x.tag){case 22:Dd(f,x),S&2048&&Mx(x.alternate,x);break;case 24:Dd(f,x),S&2048&&Ox(x.alternate,x);break;default:Dd(f,x)}u=u.sibling}}var Pd=8192;function Pl(l){if(l.subtreeFlags&Pd)for(l=l.child;l!==null;)OS(l),l=l.sibling}function OS(l){switch(l.tag){case 26:Pl(l),l.flags&Pd&&l.memoizedState!==null&&z8(Ar,l.memoizedState,l.memoizedProps);break;case 5:Pl(l);break;case 3:case 4:var u=Ar;Ar=Dm(l.stateNode.containerInfo),Pl(l),Ar=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Pd,Pd=16777216,Pl(l),Pd=u):Pl(l));break;default:Pl(l)}}function RS(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function zd(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var x=u[f];Ts=x,PS(x,l)}RS(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)DS(l),l=l.sibling}function DS(l){switch(l.tag){case 0:case 11:case 15:zd(l),l.flags&2048&&si(9,l,l.return);break;case 3:zd(l);break;case 12:zd(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,jm(l)):zd(l);break;default:zd(l)}}function jm(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var x=u[f];Ts=x,PS(x,l)}RS(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:si(8,u,u.return),jm(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,jm(u));break;default:jm(u)}l=l.sibling}}function PS(l,u){for(;Ts!==null;){var f=Ts;switch(f.tag){case 0:case 11:case 15:si(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:bd(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,Ts=x;else e:for(f=l;Ts!==null;){x=Ts;var S=x.sibling,T=x.return;if(CS(x),x===f){Ts=null;break e}if(S!==null){S.return=T,Ts=S;break e}Ts=T}}}var QD={getCacheForType:function(l){var u=Xs(js),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f}},ZD=typeof WeakMap=="function"?WeakMap:Map,Mt=0,It=null,vt=null,St=0,Ot=0,qn=null,ai=!1,zl=!1,Rx=!1,Sa=0,es=0,ii=0,po=0,Dx=0,dr=0,Ll=0,Ld=null,_n=null,Px=!1,zx=0,Nm=1/0,Sm=null,oi=null,Bs=0,li=null,$l=null,Fl=0,Lx=0,$x=null,zS=null,$d=0,Fx=null;function Hn(){if((Mt&2)!==0&&St!==0)return St&-St;if(I.T!==null){var l=Cl;return l!==0?l:Gx()}return il()}function LS(){dr===0&&(dr=(St&536870912)===0||kt?ls():536870912);var l=cr.current;return l!==null&&(l.flags|=32),dr}function Gn(l,u,f){(l===It&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)&&(Il(l,0),ci(l,St,dr,!1)),sr(l,f),((Mt&2)===0||l!==It)&&(l===It&&((Mt&2)===0&&(po|=f),es===4&&ci(l,St,dr,!1)),Wr(l))}function $S(l,u,f){if((Mt&6)!==0)throw Error(r(327));var x=!f&&(u&124)===0&&(u&l.expiredLanes)===0||pt(l,u),S=x?s8(l,u):Ux(l,u,!0),T=x;do{if(S===0){zl&&!x&&ci(l,u,0,!1);break}else{if(f=l.current.alternate,T&&!e8(f)){S=Ux(l,u,!1),T=!1;continue}if(S===2){if(T=u,l.errorRecoveryDisabledLanes&T)var F=0;else F=l.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){u=F;e:{var G=l;S=Ld;var Z=G.current.memoizedState.isDehydrated;if(Z&&(Il(G,F).flags|=256),F=Ux(G,F,!1),F!==2){if(Rx&&!Z){G.errorRecoveryDisabledLanes|=T,po|=T,S=4;break e}T=_n,_n=S,T!==null&&(_n===null?_n=T:_n.push.apply(_n,T))}S=F}if(T=!1,S!==2)continue}}if(S===1){Il(l,0),ci(l,u,0,!0);break}e:{switch(x=l,T=S,T){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ci(x,u,dr,!ai);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(S=zx+300-te(),10<S)){if(ci(x,u,dr,!ai),Be(x,0,!0)!==0)break e;x.timeoutHandle=m_(FS.bind(null,x,f,_n,Sm,Px,u,dr,po,Ll,ai,T,2,-0,0),S);break e}FS(x,f,_n,Sm,Px,u,dr,po,Ll,ai,T,0,-0,0)}}break}while(!0);Wr(l)}function FS(l,u,f,x,S,T,F,G,Z,he,we,Se,fe,pe){if(l.timeoutHandle=-1,Se=u.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(Hd={stylesheets:null,count:0,unsuspend:P8},OS(u),Se=L8(),Se!==null)){l.cancelPendingCommit=Se(GS.bind(null,l,u,T,f,x,S,F,G,Z,we,1,fe,pe)),ci(l,T,F,!he);return}GS(l,u,T,f,x,S,F,G,Z)}function e8(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var S=f[x],T=S.getSnapshot;S=S.value;try{if(!In(T(),S))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ci(l,u,f,x){u&=~Dx,u&=~po,l.suspendedLanes|=u,l.pingedLanes&=~u,x&&(l.warmLanes|=u),x=l.expirationTimes;for(var S=u;0<S;){var T=31-ae(S),F=1<<T;x[T]=-1,S&=~F}f!==0&&al(l,f,u)}function _m(){return(Mt&6)===0?(Fd(0),!1):!0}function Ix(){if(vt!==null){if(Ot===0)var l=vt.return;else l=vt,ga=lo=null,nx(l),Ol=null,Ad=0,l=vt;for(;l!==null;)bS(l.alternate,l),l=l.return;vt=null}}function Il(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,b8(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Ix(),It=l,vt=f=ma(l.current,null),St=u,Ot=0,qn=null,ai=!1,zl=pt(l,u),Rx=!1,Ll=dr=Dx=po=ii=es=0,_n=Ld=null,Px=!1,(u&8)!==0&&(u|=u&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=u;0<x;){var S=31-ae(x),T=1<<S;u|=l[S],x&=~T}return Sa=u,Wh(),f}function IS(l,u){mt=null,I.H=hm,u===yd||u===sm?(u=n2(),Ot=3):u===e2?(u=n2(),Ot=4):Ot=u===rS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,qn=u,vt===null&&(es=1,xm(l,ar(u,l.current)))}function BS(){var l=I.H;return I.H=hm,l===null?hm:l}function US(){var l=I.A;return I.A=QD,l}function Bx(){es=4,ai||(St&4194048)!==St&&cr.current!==null||(zl=!0),(ii&134217727)===0&&(po&134217727)===0||It===null||ci(It,St,dr,!1)}function Ux(l,u,f){var x=Mt;Mt|=2;var S=BS(),T=US();(It!==l||St!==u)&&(Sm=null,Il(l,u)),u=!1;var F=es;e:do try{if(Ot!==0&&vt!==null){var G=vt,Z=qn;switch(Ot){case 8:Ix(),F=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(u=!0);var he=Ot;if(Ot=0,qn=null,Bl(l,G,Z,he),f&&zl){F=0;break e}break;default:he=Ot,Ot=0,qn=null,Bl(l,G,Z,he)}}t8(),F=es;break}catch(we){IS(l,we)}while(!0);return u&&l.shellSuspendCounter++,ga=lo=null,Mt=x,I.H=S,I.A=T,vt===null&&(It=null,St=0,Wh()),F}function t8(){for(;vt!==null;)VS(vt)}function s8(l,u){var f=Mt;Mt|=2;var x=BS(),S=US();It!==l||St!==u?(Sm=null,Nm=te()+500,Il(l,u)):zl=pt(l,u);e:do try{if(Ot!==0&&vt!==null){u=vt;var T=qn;t:switch(Ot){case 1:Ot=0,qn=null,Bl(l,u,T,1);break;case 2:case 9:if(t2(T)){Ot=0,qn=null,qS(u);break}u=function(){Ot!==2&&Ot!==9||It!==l||(Ot=7),Wr(l)},T.then(u,u);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:t2(T)?(Ot=0,qn=null,qS(u)):(Ot=0,qn=null,Bl(l,u,T,7));break;case 5:var F=null;switch(vt.tag){case 26:F=vt.memoizedState;case 5:case 27:var G=vt;if(!F||__(F)){Ot=0,qn=null;var Z=G.sibling;if(Z!==null)vt=Z;else{var he=G.return;he!==null?(vt=he,Cm(he)):vt=null}break t}}Ot=0,qn=null,Bl(l,u,T,5);break;case 6:Ot=0,qn=null,Bl(l,u,T,6);break;case 8:Ix(),es=6;break e;default:throw Error(r(462))}}n8();break}catch(we){IS(l,we)}while(!0);return ga=lo=null,I.H=x,I.A=S,Mt=f,vt!==null?0:(It=null,St=0,Wh(),es)}function n8(){for(;vt!==null&&!le();)VS(vt)}function VS(l){var u=gS(l.alternate,l,Sa);l.memoizedProps=l.pendingProps,u===null?Cm(l):vt=u}function qS(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=dS(f,u,u.pendingProps,u.type,void 0,St);break;case 11:u=dS(f,u,u.pendingProps,u.type.render,u.ref,St);break;case 5:nx(u);default:bS(f,u),u=vt=HN(u,Sa),u=gS(f,u,Sa)}l.memoizedProps=l.pendingProps,u===null?Cm(l):vt=u}function Bl(l,u,f,x){ga=lo=null,nx(u),Ol=null,Ad=0;var S=u.return;try{if(GD(l,S,u,f,St)){es=1,xm(l,ar(f,l.current)),vt=null;return}}catch(T){if(S!==null)throw vt=S,T;es=1,xm(l,ar(f,l.current)),vt=null;return}u.flags&32768?(kt||x===1?l=!0:zl||(St&536870912)!==0?l=!1:(ai=l=!0,(x===2||x===9||x===3||x===6)&&(x=cr.current,x!==null&&x.tag===13&&(x.flags|=16384))),HS(u,l)):Cm(u)}function Cm(l){var u=l;do{if((u.flags&32768)!==0){HS(u,ai);return}l=u.return;var f=YD(u.alternate,u,Sa);if(f!==null){vt=f;return}if(u=u.sibling,u!==null){vt=u;return}vt=u=l}while(u!==null);es===0&&(es=5)}function HS(l,u){do{var f=KD(l.alternate,l);if(f!==null){f.flags&=32767,vt=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){vt=l;return}vt=l=f}while(l!==null);es=6,vt=null}function GS(l,u,f,x,S,T,F,G,Z){l.cancelPendingCommit=null;do km();while(Bs!==0);if((Mt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(T=u.lanes|u.childLanes,T|=Og,Fn(l,f,T,F,G,Z),l===It&&(vt=It=null,St=0),$l=u,li=l,Fl=f,Lx=T,$x=S,zS=x,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,o8(ce,function(){return XS(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||x){x=I.T,I.T=null,S=V.p,V.p=2,F=Mt,Mt|=4;try{JD(l,u,f)}finally{Mt=F,V.p=S,I.T=x}}Bs=1,WS(),YS(),KS()}}function WS(){if(Bs===1){Bs=0;var l=li,u=$l,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=I.T,I.T=null;var x=V.p;V.p=2;var S=Mt;Mt|=4;try{AS(u,l);var T=eb,F=PN(l.containerInfo),G=T.focusedElem,Z=T.selectionRange;if(F!==G&&G&&G.ownerDocument&&DN(G.ownerDocument.documentElement,G)){if(Z!==null&&kg(G)){var he=Z.start,we=Z.end;if(we===void 0&&(we=he),"selectionStart"in G)G.selectionStart=he,G.selectionEnd=Math.min(we,G.value.length);else{var Se=G.ownerDocument||document,fe=Se&&Se.defaultView||window;if(fe.getSelection){var pe=fe.getSelection(),nt=G.textContent.length,Ze=Math.min(Z.start,nt),zt=Z.end===void 0?Ze:Math.min(Z.end,nt);!pe.extend&&Ze>zt&&(F=zt,zt=Ze,Ze=F);var ie=RN(G,Ze),re=RN(G,zt);if(ie&&re&&(pe.rangeCount!==1||pe.anchorNode!==ie.node||pe.anchorOffset!==ie.offset||pe.focusNode!==re.node||pe.focusOffset!==re.offset)){var ue=Se.createRange();ue.setStart(ie.node,ie.offset),pe.removeAllRanges(),Ze>zt?(pe.addRange(ue),pe.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),pe.addRange(ue))}}}}for(Se=[],pe=G;pe=pe.parentNode;)pe.nodeType===1&&Se.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Se.length;G++){var Ne=Se[G];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Fm=!!Zx,eb=Zx=null}finally{Mt=S,V.p=x,I.T=f}}l.current=u,Bs=2}}function YS(){if(Bs===2){Bs=0;var l=li,u=$l,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=I.T,I.T=null;var x=V.p;V.p=2;var S=Mt;Mt|=4;try{_S(l,u.alternate,u)}finally{Mt=S,V.p=x,I.T=f}}Bs=3}}function KS(){if(Bs===4||Bs===3){Bs=0,ge();var l=li,u=$l,f=Fl,x=zS;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Bs=5:(Bs=0,$l=li=null,JS(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(oi=null),sd(f),u=u.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(ft,u,void 0,(u.current.flags&128)===128)}catch{}if(x!==null){u=I.T,S=V.p,V.p=2,I.T=null;try{for(var T=l.onRecoverableError,F=0;F<x.length;F++){var G=x[F];T(G.value,{componentStack:G.stack})}}finally{I.T=u,V.p=S}}(Fl&3)!==0&&km(),Wr(l),S=l.pendingLanes,(f&4194090)!==0&&(S&42)!==0?l===Fx?$d++:($d=0,Fx=l):$d=0,Fd(0)}}function JS(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,bd(u)))}function km(l){return WS(),YS(),KS(),XS()}function XS(){if(Bs!==5)return!1;var l=li,u=Lx;Lx=0;var f=sd(Fl),x=I.T,S=V.p;try{V.p=32>f?32:f,I.T=null,f=$x,$x=null;var T=li,F=Fl;if(Bs=0,$l=li=null,Fl=0,(Mt&6)!==0)throw Error(r(331));var G=Mt;if(Mt|=4,DS(T.current),MS(T,T.current,F,f),Mt=G,Fd(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(ft,T)}catch{}return!0}finally{V.p=S,I.T=x,JS(l,u)}}function QS(l,u,f){u=ar(f,u),u=xx(l.stateNode,u,2),l=Qa(l,u,2),l!==null&&(sr(l,2),Wr(l))}function $t(l,u,f){if(l.tag===3)QS(l,l,f);else for(;u!==null;){if(u.tag===3){QS(u,l,f);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(oi===null||!oi.has(x))){l=ar(f,l),f=sS(2),x=Qa(u,f,2),x!==null&&(nS(f,x,u,l),sr(x,2),Wr(x));break}}u=u.return}}function Vx(l,u,f){var x=l.pingCache;if(x===null){x=l.pingCache=new ZD;var S=new Set;x.set(u,S)}else S=x.get(u),S===void 0&&(S=new Set,x.set(u,S));S.has(f)||(Rx=!0,S.add(f),l=r8.bind(null,l,u,f),u.then(l,l))}function r8(l,u,f){var x=l.pingCache;x!==null&&x.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,It===l&&(St&f)===f&&(es===4||es===3&&(St&62914560)===St&&300>te()-zx?(Mt&2)===0&&Il(l,0):Dx|=f,Ll===St&&(Ll=0)),Wr(l)}function ZS(l,u){u===0&&(u=ks()),l=jl(l,u),l!==null&&(sr(l,u),Wr(l))}function a8(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),ZS(l,f)}function i8(l,u){var f=0;switch(l.tag){case 13:var x=l.stateNode,S=l.memoizedState;S!==null&&(f=S.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(u),ZS(l,f)}function o8(l,u){return be(l,u)}var Em=null,Ul=null,qx=!1,Am=!1,Hx=!1,go=0;function Wr(l){l!==Ul&&l.next===null&&(Ul===null?Em=Ul=l:Ul=Ul.next=l),Am=!0,qx||(qx=!0,c8())}function Fd(l,u){if(!Hx&&Am){Hx=!0;do for(var f=!1,x=Em;x!==null;){if(l!==0){var S=x.pendingLanes;if(S===0)var T=0;else{var F=x.suspendedLanes,G=x.pingedLanes;T=(1<<31-ae(42|l)+1)-1,T&=S&~(F&~G),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,n_(x,T))}else T=St,T=Be(x,x===It?T:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(T&3)===0||pt(x,T)||(f=!0,n_(x,T));x=x.next}while(f);Hx=!1}}function l8(){e_()}function e_(){Am=qx=!1;var l=0;go!==0&&(x8()&&(l=go),go=0);for(var u=te(),f=null,x=Em;x!==null;){var S=x.next,T=t_(x,u);T===0?(x.next=null,f===null?Em=S:f.next=S,S===null&&(Ul=f)):(f=x,(l!==0||(T&3)!==0)&&(Am=!0)),x=S}Fd(l)}function t_(l,u){for(var f=l.suspendedLanes,x=l.pingedLanes,S=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var F=31-ae(T),G=1<<F,Z=S[F];Z===-1?((G&f)===0||(G&x)!==0)&&(S[F]=gt(G,u)):Z<=u&&(l.expiredLanes|=G),T&=~G}if(u=It,f=St,f=Be(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,f===0||l===u&&(Ot===2||Ot===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&se(x),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||pt(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(x!==null&&se(x),sd(f)){case 2:case 8:f=Ee;break;case 32:f=ce;break;case 268435456:f=Oe;break;default:f=ce}return x=s_.bind(null,l),f=be(f,x),l.callbackPriority=u,l.callbackNode=f,u}return x!==null&&x!==null&&se(x),l.callbackPriority=2,l.callbackNode=null,2}function s_(l,u){if(Bs!==0&&Bs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(km()&&l.callbackNode!==f)return null;var x=St;return x=Be(l,l===It?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:($S(l,x,u),t_(l,te()),l.callbackNode!=null&&l.callbackNode===f?s_.bind(null,l):null)}function n_(l,u){if(km())return null;$S(l,u,!0)}function c8(){v8(function(){(Mt&6)!==0?be(De,l8):e_()})}function Gx(){return go===0&&(go=ls()),go}function r_(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ih(""+l)}function a_(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function d8(l,u,f,x,S){if(u==="submit"&&f&&f.stateNode===S){var T=r_((S[wn]||null).action),F=x.submitter;F&&(u=(u=F[wn]||null)?r_(u.formAction):F.getAttribute("formAction"),u!==null&&(T=u,F=null));var G=new qh("action","action",null,x,S);l.push({event:G,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(go!==0){var Z=F?a_(S,F):new FormData(S);hx(f,{pending:!0,data:Z,method:S.method,action:T},null,Z)}}else typeof T=="function"&&(G.preventDefault(),Z=F?a_(S,F):new FormData(S),hx(f,{pending:!0,data:Z,method:S.method,action:T},T,Z))},currentTarget:S}]})}}for(var Wx=0;Wx<Mg.length;Wx++){var Yx=Mg[Wx],u8=Yx.toLowerCase(),h8=Yx[0].toUpperCase()+Yx.slice(1);Er(u8,"on"+h8)}Er($N,"onAnimationEnd"),Er(FN,"onAnimationIteration"),Er(IN,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(AD,"onTransitionRun"),Er(TD,"onTransitionStart"),Er(MD,"onTransitionCancel"),Er(BN,"onTransitionEnd"),hl("onMouseEnter",["mouseout","mouseover"]),hl("onMouseLeave",["mouseout","mouseover"]),hl("onPointerEnter",["pointerout","pointerover"]),hl("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Id));function i_(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var x=l[f],S=x.event;x=x.listeners;e:{var T=void 0;if(u)for(var F=x.length-1;0<=F;F--){var G=x[F],Z=G.instance,he=G.currentTarget;if(G=G.listener,Z!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=he;try{T(S)}catch(we){gm(we)}S.currentTarget=null,T=Z}else for(F=0;F<x.length;F++){if(G=x[F],Z=G.instance,he=G.currentTarget,G=G.listener,Z!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=he;try{T(S)}catch(we){gm(we)}S.currentTarget=null,T=Z}}}}function yt(l,u){var f=u[og];f===void 0&&(f=u[og]=new Set);var x=l+"__bubble";f.has(x)||(o_(u,l,2,!1),f.add(x))}function Kx(l,u,f){var x=0;u&&(x|=4),o_(f,l,x,u)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Jx(l){if(!l[Tm]){l[Tm]=!0,eN.forEach(function(f){f!=="selectionchange"&&(m8.has(f)||Kx(f,!1,l),Kx(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Tm]||(u[Tm]=!0,Kx("selectionchange",!1,u))}}function o_(l,u,f,x){switch(M_(u)){case 2:var S=I8;break;case 8:S=B8;break;default:S=db}f=S.bind(null,u,f,l),S=void 0,!bg||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),x?S!==void 0?l.addEventListener(u,f,{capture:!0,passive:S}):l.addEventListener(u,f,!0):S!==void 0?l.addEventListener(u,f,{passive:S}):l.addEventListener(u,f,!1)}function Xx(l,u,f,x,S){var T=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var F=x.tag;if(F===3||F===4){var G=x.stateNode.containerInfo;if(G===S)break;if(F===4)for(F=x.return;F!==null;){var Z=F.tag;if((Z===3||Z===4)&&F.stateNode.containerInfo===S)return;F=F.return}for(;G!==null;){if(F=cl(G),F===null)return;if(Z=F.tag,Z===5||Z===6||Z===26||Z===27){x=T=F;continue e}G=G.parentNode}}x=x.return}fN(function(){var he=T,we=gg(f),Se=[];e:{var fe=UN.get(l);if(fe!==void 0){var pe=qh,nt=l;switch(l){case"keypress":if(Uh(f)===0)break e;case"keydown":case"keyup":pe=oD;break;case"focusin":nt="focus",pe=jg;break;case"focusout":nt="blur",pe=jg;break;case"beforeblur":case"afterblur":pe=jg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=xN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=KR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=dD;break;case $N:case FN:case IN:pe=QR;break;case BN:pe=hD;break;case"scroll":case"scrollend":pe=WR;break;case"wheel":pe=fD;break;case"copy":case"cut":case"paste":pe=eD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=vN;break;case"toggle":case"beforetoggle":pe=gD}var Ze=(u&4)!==0,zt=!Ze&&(l==="scroll"||l==="scrollend"),ie=Ze?fe!==null?fe+"Capture":null:fe;Ze=[];for(var re=he,ue;re!==null;){var Ne=re;if(ue=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ue===null||ie===null||(Ne=ad(re,ie),Ne!=null&&Ze.push(Bd(re,Ne,ue))),zt)break;re=re.return}0<Ze.length&&(fe=new pe(fe,nt,null,f,we),Se.push({event:fe,listeners:Ze}))}}if((u&7)===0){e:{if(fe=l==="mouseover"||l==="pointerover",pe=l==="mouseout"||l==="pointerout",fe&&f!==pg&&(nt=f.relatedTarget||f.fromElement)&&(cl(nt)||nt[ll]))break e;if((pe||fe)&&(fe=we.window===we?we:(fe=we.ownerDocument)?fe.defaultView||fe.parentWindow:window,pe?(nt=f.relatedTarget||f.toElement,pe=he,nt=nt?cl(nt):null,nt!==null&&(zt=i(nt),Ze=nt.tag,nt!==zt||Ze!==5&&Ze!==27&&Ze!==6)&&(nt=null)):(pe=null,nt=he),pe!==nt)){if(Ze=xN,Ne="onMouseLeave",ie="onMouseEnter",re="mouse",(l==="pointerout"||l==="pointerover")&&(Ze=vN,Ne="onPointerLeave",ie="onPointerEnter",re="pointer"),zt=pe==null?fe:rd(pe),ue=nt==null?fe:rd(nt),fe=new Ze(Ne,re+"leave",pe,f,we),fe.target=zt,fe.relatedTarget=ue,Ne=null,cl(we)===he&&(Ze=new Ze(ie,re+"enter",nt,f,we),Ze.target=ue,Ze.relatedTarget=zt,Ne=Ze),zt=Ne,pe&&nt)t:{for(Ze=pe,ie=nt,re=0,ue=Ze;ue;ue=Vl(ue))re++;for(ue=0,Ne=ie;Ne;Ne=Vl(Ne))ue++;for(;0<re-ue;)Ze=Vl(Ze),re--;for(;0<ue-re;)ie=Vl(ie),ue--;for(;re--;){if(Ze===ie||ie!==null&&Ze===ie.alternate)break t;Ze=Vl(Ze),ie=Vl(ie)}Ze=null}else Ze=null;pe!==null&&l_(Se,fe,pe,Ze,!1),nt!==null&&zt!==null&&l_(Se,zt,nt,Ze,!0)}}e:{if(fe=he?rd(he):window,pe=fe.nodeName&&fe.nodeName.toLowerCase(),pe==="select"||pe==="input"&&fe.type==="file")var Ie=kN;else if(_N(fe))if(EN)Ie=CD;else{Ie=SD;var xt=ND}else pe=fe.nodeName,!pe||pe.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?he&&fg(he.elementType)&&(Ie=kN):Ie=_D;if(Ie&&(Ie=Ie(l,he))){CN(Se,Ie,f,we);break e}xt&&xt(l,fe,he),l==="focusout"&&he&&fe.type==="number"&&he.memoizedProps.value!=null&&mg(fe,"number",fe.value)}switch(xt=he?rd(he):window,l){case"focusin":(_N(xt)||xt.contentEditable==="true")&&(vl=xt,Eg=he,md=null);break;case"focusout":md=Eg=vl=null;break;case"mousedown":Ag=!0;break;case"contextmenu":case"mouseup":case"dragend":Ag=!1,zN(Se,f,we);break;case"selectionchange":if(ED)break;case"keydown":case"keyup":zN(Se,f,we)}var Ve;if(Sg)e:{switch(l){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else bl?NN(l,f)&&(et="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(et="onCompositionStart");et&&(yN&&f.locale!=="ko"&&(bl||et!=="onCompositionStart"?et==="onCompositionEnd"&&bl&&(Ve=pN()):(Ya=we,vg="value"in Ya?Ya.value:Ya.textContent,bl=!0)),xt=Mm(he,et),0<xt.length&&(et=new bN(et,l,null,f,we),Se.push({event:et,listeners:xt}),Ve?et.data=Ve:(Ve=SN(f),Ve!==null&&(et.data=Ve)))),(Ve=bD?vD(l,f):yD(l,f))&&(et=Mm(he,"onBeforeInput"),0<et.length&&(xt=new bN("onBeforeInput","beforeinput",null,f,we),Se.push({event:xt,listeners:et}),xt.data=Ve)),d8(Se,l,he,f,we)}i_(Se,u)})}function Bd(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Mm(l,u){for(var f=u+"Capture",x=[];l!==null;){var S=l,T=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||T===null||(S=ad(l,f),S!=null&&x.unshift(Bd(l,S,T)),S=ad(l,u),S!=null&&x.push(Bd(l,S,T))),l.tag===3)return x;l=l.return}return[]}function Vl(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function l_(l,u,f,x,S){for(var T=u._reactName,F=[];f!==null&&f!==x;){var G=f,Z=G.alternate,he=G.stateNode;if(G=G.tag,Z!==null&&Z===x)break;G!==5&&G!==26&&G!==27||he===null||(Z=he,S?(he=ad(f,T),he!=null&&F.unshift(Bd(f,he,Z))):S||(he=ad(f,T),he!=null&&F.push(Bd(f,he,Z)))),f=f.return}F.length!==0&&l.push({event:u,listeners:F})}var f8=/\r\n?/g,p8=/\u0000|\uFFFD/g;function c_(l){return(typeof l=="string"?l:""+l).replace(f8,`
`).replace(p8,"")}function d_(l,u){return u=c_(u),c_(l)===u}function Om(){}function Pt(l,u,f,x,S,T){switch(f){case"children":typeof x=="string"?u==="body"||u==="textarea"&&x===""||pl(l,x):(typeof x=="number"||typeof x=="bigint")&&u!=="body"&&pl(l,""+x);break;case"className":Lh(l,"class",x);break;case"tabIndex":Lh(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Lh(l,f,x);break;case"style":hN(l,x,T);break;case"data":if(u!=="object"){Lh(l,"data",x);break}case"src":case"href":if(x===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=Ih(""+x),l.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(u!=="input"&&Pt(l,u,"name",S.name,S,null),Pt(l,u,"formEncType",S.formEncType,S,null),Pt(l,u,"formMethod",S.formMethod,S,null),Pt(l,u,"formTarget",S.formTarget,S,null)):(Pt(l,u,"encType",S.encType,S,null),Pt(l,u,"method",S.method,S,null),Pt(l,u,"target",S.target,S,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=Ih(""+x),l.setAttribute(f,x);break;case"onClick":x!=null&&(l.onclick=Om);break;case"onScroll":x!=null&&yt("scroll",l);break;case"onScrollEnd":x!=null&&yt("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}f=Ih(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""+x):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":x===!0?l.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,x):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(f,x):l.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(f):l.setAttribute(f,x);break;case"popover":yt("beforetoggle",l),yt("toggle",l),zh(l,"popover",x);break;case"xlinkActuate":ua(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ua(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ua(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ua(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ua(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ua(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ua(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ua(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ua(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":zh(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=HR.get(f)||f,zh(l,f,x))}}function Qx(l,u,f,x,S,T){switch(f){case"style":hN(l,x,T);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(S.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof x=="string"?pl(l,x):(typeof x=="number"||typeof x=="bigint")&&pl(l,""+x);break;case"onScroll":x!=null&&yt("scroll",l);break;case"onScrollEnd":x!=null&&yt("scrollend",l);break;case"onClick":x!=null&&(l.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tN.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(S=f.endsWith("Capture"),u=f.slice(2,S?f.length-7:void 0),T=l[wn]||null,T=T!=null?T[f]:null,typeof T=="function"&&l.removeEventListener(u,T,S),typeof x=="function")){typeof T!="function"&&T!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,x,S);break e}f in l?l[f]=x:x===!0?l.setAttribute(f,""):zh(l,f,x)}}}function Us(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",l),yt("load",l);var x=!1,S=!1,T;for(T in f)if(f.hasOwnProperty(T)){var F=f[T];if(F!=null)switch(T){case"src":x=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Pt(l,u,T,F,f,null)}}S&&Pt(l,u,"srcSet",f.srcSet,f,null),x&&Pt(l,u,"src",f.src,f,null);return;case"input":yt("invalid",l);var G=T=F=S=null,Z=null,he=null;for(x in f)if(f.hasOwnProperty(x)){var we=f[x];if(we!=null)switch(x){case"name":S=we;break;case"type":F=we;break;case"checked":Z=we;break;case"defaultChecked":he=we;break;case"value":T=we;break;case"defaultValue":G=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,u));break;default:Pt(l,u,x,we,f,null)}}lN(l,T,G,Z,he,F,S,!1),$h(l);return;case"select":yt("invalid",l),x=F=T=null;for(S in f)if(f.hasOwnProperty(S)&&(G=f[S],G!=null))switch(S){case"value":T=G;break;case"defaultValue":F=G;break;case"multiple":x=G;default:Pt(l,u,S,G,f,null)}u=T,f=F,l.multiple=!!x,u!=null?fl(l,!!x,u,!1):f!=null&&fl(l,!!x,f,!0);return;case"textarea":yt("invalid",l),T=S=x=null;for(F in f)if(f.hasOwnProperty(F)&&(G=f[F],G!=null))switch(F){case"value":x=G;break;case"defaultValue":S=G;break;case"children":T=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:Pt(l,u,F,G,f,null)}dN(l,x,S,T),$h(l);return;case"option":for(Z in f)if(f.hasOwnProperty(Z)&&(x=f[Z],x!=null))switch(Z){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Pt(l,u,Z,x,f,null)}return;case"dialog":yt("beforetoggle",l),yt("toggle",l),yt("cancel",l),yt("close",l);break;case"iframe":case"object":yt("load",l);break;case"video":case"audio":for(x=0;x<Id.length;x++)yt(Id[x],l);break;case"image":yt("error",l),yt("load",l);break;case"details":yt("toggle",l);break;case"embed":case"source":case"link":yt("error",l),yt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in f)if(f.hasOwnProperty(he)&&(x=f[he],x!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Pt(l,u,he,x,f,null)}return;default:if(fg(u)){for(we in f)f.hasOwnProperty(we)&&(x=f[we],x!==void 0&&Qx(l,u,we,x,f,void 0));return}}for(G in f)f.hasOwnProperty(G)&&(x=f[G],x!=null&&Pt(l,u,G,x,f,null))}function g8(l,u,f,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,T=null,F=null,G=null,Z=null,he=null,we=null;for(pe in f){var Se=f[pe];if(f.hasOwnProperty(pe)&&Se!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Z=Se;default:x.hasOwnProperty(pe)||Pt(l,u,pe,null,x,Se)}}for(var fe in x){var pe=x[fe];if(Se=f[fe],x.hasOwnProperty(fe)&&(pe!=null||Se!=null))switch(fe){case"type":T=pe;break;case"name":S=pe;break;case"checked":he=pe;break;case"defaultChecked":we=pe;break;case"value":F=pe;break;case"defaultValue":G=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,u));break;default:pe!==Se&&Pt(l,u,fe,pe,x,Se)}}hg(l,F,G,Z,he,we,T,S);return;case"select":pe=F=G=fe=null;for(T in f)if(Z=f[T],f.hasOwnProperty(T)&&Z!=null)switch(T){case"value":break;case"multiple":pe=Z;default:x.hasOwnProperty(T)||Pt(l,u,T,null,x,Z)}for(S in x)if(T=x[S],Z=f[S],x.hasOwnProperty(S)&&(T!=null||Z!=null))switch(S){case"value":fe=T;break;case"defaultValue":G=T;break;case"multiple":F=T;default:T!==Z&&Pt(l,u,S,T,x,Z)}u=G,f=F,x=pe,fe!=null?fl(l,!!f,fe,!1):!!x!=!!f&&(u!=null?fl(l,!!f,u,!0):fl(l,!!f,f?[]:"",!1));return;case"textarea":pe=fe=null;for(G in f)if(S=f[G],f.hasOwnProperty(G)&&S!=null&&!x.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Pt(l,u,G,null,x,S)}for(F in x)if(S=x[F],T=f[F],x.hasOwnProperty(F)&&(S!=null||T!=null))switch(F){case"value":fe=S;break;case"defaultValue":pe=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==T&&Pt(l,u,F,S,x,T)}cN(l,fe,pe);return;case"option":for(var nt in f)if(fe=f[nt],f.hasOwnProperty(nt)&&fe!=null&&!x.hasOwnProperty(nt))switch(nt){case"selected":l.selected=!1;break;default:Pt(l,u,nt,null,x,fe)}for(Z in x)if(fe=x[Z],pe=f[Z],x.hasOwnProperty(Z)&&fe!==pe&&(fe!=null||pe!=null))switch(Z){case"selected":l.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Pt(l,u,Z,fe,x,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in f)fe=f[Ze],f.hasOwnProperty(Ze)&&fe!=null&&!x.hasOwnProperty(Ze)&&Pt(l,u,Ze,null,x,fe);for(he in x)if(fe=x[he],pe=f[he],x.hasOwnProperty(he)&&fe!==pe&&(fe!=null||pe!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,u));break;default:Pt(l,u,he,fe,x,pe)}return;default:if(fg(u)){for(var zt in f)fe=f[zt],f.hasOwnProperty(zt)&&fe!==void 0&&!x.hasOwnProperty(zt)&&Qx(l,u,zt,void 0,x,fe);for(we in x)fe=x[we],pe=f[we],!x.hasOwnProperty(we)||fe===pe||fe===void 0&&pe===void 0||Qx(l,u,we,fe,x,pe);return}}for(var ie in f)fe=f[ie],f.hasOwnProperty(ie)&&fe!=null&&!x.hasOwnProperty(ie)&&Pt(l,u,ie,null,x,fe);for(Se in x)fe=x[Se],pe=f[Se],!x.hasOwnProperty(Se)||fe===pe||fe==null&&pe==null||Pt(l,u,Se,fe,x,pe)}var Zx=null,eb=null;function Rm(l){return l.nodeType===9?l:l.ownerDocument}function u_(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function tb(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var sb=null;function x8(){var l=window.event;return l&&l.type==="popstate"?l===sb?!1:(sb=l,!0):(sb=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,b8=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,v8=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(l){return f_.resolve(null).then(l).catch(y8)}:m_;function y8(l){setTimeout(function(){throw l})}function di(l){return l==="head"}function p_(l,u){var f=u,x=0,S=0;do{var T=f.nextSibling;if(l.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(0<x&&8>x){f=x;var F=l.ownerDocument;if(f&1&&Ud(F.documentElement),f&2&&Ud(F.body),f&4)for(f=F.head,Ud(f),F=f.firstChild;F;){var G=F.nextSibling,Z=F.nodeName;F[nd]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&F.rel.toLowerCase()==="stylesheet"||f.removeChild(F),F=G}}if(S===0){l.removeChild(T),Jd(u);return}S--}else f==="$"||f==="$?"||f==="$!"?S++:x=f.charCodeAt(0)-48;else x=0;f=T}while(f);Jd(u)}function nb(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":nb(f),lg(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function w8(l,u,f,x){for(;l.nodeType===1;){var S=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[nd])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==S.rel||l.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||l.getAttribute("title")!==(S.title==null?null:S.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(S.src==null?null:S.src)||l.getAttribute("type")!==(S.type==null?null:S.type)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var T=S.name==null?null:""+S.name;if(S.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=Tr(l.nextSibling),l===null)break}return null}function j8(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Tr(l.nextSibling),l===null))return null;return l}function rb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function N8(l,u){var f=l.ownerDocument;if(l.data!=="$?"||f.readyState==="complete")u();else{var x=function(){u(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function Tr(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var ab=null;function g_(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}function x_(l,u,f){switch(u=Rm(f),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Ud(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);lg(l)}var ur=new Map,b_=new Set;function Dm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var _a=V.d;V.d={f:S8,r:_8,D:C8,C:k8,L:E8,m:A8,X:M8,S:T8,M:O8};function S8(){var l=_a.f(),u=_m();return l||u}function _8(l){var u=dl(l);u!==null&&u.tag===5&&u.type==="form"?$2(u):_a.r(l)}var ql=typeof document>"u"?null:document;function v_(l,u,f){var x=ql;if(x&&typeof u=="string"&&u){var S=rr(u);S='link[rel="'+l+'"][href="'+S+'"]',typeof f=="string"&&(S+='[crossorigin="'+f+'"]'),b_.has(S)||(b_.add(S),l={rel:l,crossOrigin:f,href:u},x.querySelector(S)===null&&(u=x.createElement("link"),Us(u,"link",l),Es(u),x.head.appendChild(u)))}}function C8(l){_a.D(l),v_("dns-prefetch",l,null)}function k8(l,u){_a.C(l,u),v_("preconnect",l,u)}function E8(l,u,f){_a.L(l,u,f);var x=ql;if(x&&l&&u){var S='link[rel="preload"][as="'+rr(u)+'"]';u==="image"&&f&&f.imageSrcSet?(S+='[imagesrcset="'+rr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(S+='[imagesizes="'+rr(f.imageSizes)+'"]')):S+='[href="'+rr(l)+'"]';var T=S;switch(u){case"style":T=Hl(l);break;case"script":T=Gl(l)}ur.has(T)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),ur.set(T,l),x.querySelector(S)!==null||u==="style"&&x.querySelector(Vd(T))||u==="script"&&x.querySelector(qd(T))||(u=x.createElement("link"),Us(u,"link",l),Es(u),x.head.appendChild(u)))}}function A8(l,u){_a.m(l,u);var f=ql;if(f&&l){var x=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+rr(x)+'"][href="'+rr(l)+'"]',T=S;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Gl(l)}if(!ur.has(T)&&(l=m({rel:"modulepreload",href:l},u),ur.set(T,l),f.querySelector(S)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(qd(T)))return}x=f.createElement("link"),Us(x,"link",l),Es(x),f.head.appendChild(x)}}}function T8(l,u,f){_a.S(l,u,f);var x=ql;if(x&&l){var S=ul(x).hoistableStyles,T=Hl(l);u=u||"default";var F=S.get(T);if(!F){var G={loading:0,preload:null};if(F=x.querySelector(Vd(T)))G.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=ur.get(T))&&ib(l,f);var Z=F=x.createElement("link");Es(Z),Us(Z,"link",l),Z._p=new Promise(function(he,we){Z.onload=he,Z.onerror=we}),Z.addEventListener("load",function(){G.loading|=1}),Z.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Pm(F,u,x)}F={type:"stylesheet",instance:F,count:1,state:G},S.set(T,F)}}}function M8(l,u){_a.X(l,u);var f=ql;if(f&&l){var x=ul(f).hoistableScripts,S=Gl(l),T=x.get(S);T||(T=f.querySelector(qd(S)),T||(l=m({src:l,async:!0},u),(u=ur.get(S))&&ob(l,u),T=f.createElement("script"),Es(T),Us(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(S,T))}}function O8(l,u){_a.M(l,u);var f=ql;if(f&&l){var x=ul(f).hoistableScripts,S=Gl(l),T=x.get(S);T||(T=f.querySelector(qd(S)),T||(l=m({src:l,async:!0,type:"module"},u),(u=ur.get(S))&&ob(l,u),T=f.createElement("script"),Es(T),Us(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(S,T))}}function y_(l,u,f,x){var S=(S=X.current)?Dm(S):null;if(!S)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Hl(f.href),f=ul(S).hoistableStyles,x=f.get(u),x||(x={type:"style",instance:null,count:0,state:null},f.set(u,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=Hl(f.href);var T=ul(S).hoistableStyles,F=T.get(l);if(F||(S=S.ownerDocument||S,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,F),(T=S.querySelector(Vd(l)))&&!T._p&&(F.instance=T,F.state.loading=5),ur.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ur.set(l,f),T||R8(S,l,f,F.state))),u&&x===null)throw Error(r(528,""));return F}if(u&&x!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Gl(f),f=ul(S).hoistableScripts,x=f.get(u),x||(x={type:"script",instance:null,count:0,state:null},f.set(u,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Hl(l){return'href="'+rr(l)+'"'}function Vd(l){return'link[rel="stylesheet"]['+l+"]"}function w_(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function R8(l,u,f,x){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?x.loading=1:(u=l.createElement("link"),x.preload=u,u.addEventListener("load",function(){return x.loading|=1}),u.addEventListener("error",function(){return x.loading|=2}),Us(u,"link",f),Es(u),l.head.appendChild(u))}function Gl(l){return'[src="'+rr(l)+'"]'}function qd(l){return"script[async]"+l}function j_(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var x=l.querySelector('style[data-href~="'+rr(f.href)+'"]');if(x)return u.instance=x,Es(x),x;var S=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),Es(x),Us(x,"style",S),Pm(x,f.precedence,l),u.instance=x;case"stylesheet":S=Hl(f.href);var T=l.querySelector(Vd(S));if(T)return u.state.loading|=4,u.instance=T,Es(T),T;x=w_(f),(S=ur.get(S))&&ib(x,S),T=(l.ownerDocument||l).createElement("link"),Es(T);var F=T;return F._p=new Promise(function(G,Z){F.onload=G,F.onerror=Z}),Us(T,"link",x),u.state.loading|=4,Pm(T,f.precedence,l),u.instance=T;case"script":return T=Gl(f.src),(S=l.querySelector(qd(T)))?(u.instance=S,Es(S),S):(x=f,(S=ur.get(T))&&(x=m({},f),ob(x,S)),l=l.ownerDocument||l,S=l.createElement("script"),Es(S),Us(S,"link",x),l.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(x=u.instance,u.state.loading|=4,Pm(x,f.precedence,l));return u.instance}function Pm(l,u,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=x.length?x[x.length-1]:null,T=S,F=0;F<x.length;F++){var G=x[F];if(G.dataset.precedence===u)T=G;else if(T!==S)break}T?T.parentNode.insertBefore(l,T.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function ib(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function ob(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var zm=null;function N_(l,u,f){if(zm===null){var x=new Map,S=zm=new Map;S.set(f,x)}else S=zm,x=S.get(f),x||(x=new Map,S.set(f,x));if(x.has(l))return x;for(x.set(l,null),f=f.getElementsByTagName(l),S=0;S<f.length;S++){var T=f[S];if(!(T[nd]||T[Js]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var F=T.getAttribute(u)||"";F=l+F;var G=x.get(F);G?G.push(T):x.set(F,[T])}}return x}function S_(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function D8(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function __(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Hd=null;function P8(){}function z8(l,u,f){if(Hd===null)throw Error(r(475));var x=Hd;if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var S=Hl(f.href),T=l.querySelector(Vd(S));if(T){l=T._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(x.count++,x=Lm.bind(x),l.then(x,x)),u.state.loading|=4,u.instance=T,Es(T);return}T=l.ownerDocument||l,f=w_(f),(S=ur.get(S))&&ib(f,S),T=T.createElement("link"),Es(T);var F=T;F._p=new Promise(function(G,Z){F.onload=G,F.onerror=Z}),Us(T,"link",f),u.instance=T}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(x.count++,u=Lm.bind(x),l.addEventListener("load",u),l.addEventListener("error",u))}}function L8(){if(Hd===null)throw Error(r(475));var l=Hd;return l.stylesheets&&l.count===0&&lb(l,l.stylesheets),0<l.count?function(u){var f=setTimeout(function(){if(l.stylesheets&&lb(l,l.stylesheets),l.unsuspend){var x=l.unsuspend;l.unsuspend=null,x()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(f)}}:null}function Lm(){if(this.count--,this.count===0){if(this.stylesheets)lb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var $m=null;function lb(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,$m=new Map,u.forEach($8,l),$m=null,Lm.call(l))}function $8(l,u){if(!(u.state.loading&4)){var f=$m.get(l);if(f)var x=f.get(null);else{f=new Map,$m.set(l,f);for(var S=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<S.length;T++){var F=S[T];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(f.set(F.dataset.precedence,F),x=F)}x&&f.set(null,x)}S=u.instance,F=S.getAttribute("data-precedence"),T=f.get(F)||x,T===x&&f.set(null,S),f.set(F,S),this.count++,x=Lm.bind(this),S.addEventListener("load",x),S.addEventListener("error",x),T?T.parentNode.insertBefore(S,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(S,l.firstChild)),u.state.loading|=4}}var Gd={$$typeof:k,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function F8(l,u,f,x,S,T,F,G){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.hiddenUpdates=Fs(null),this.identifierPrefix=x,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function C_(l,u,f,x,S,T,F,G,Z,he,we,Se){return l=new F8(l,u,f,F,G,Z,he,Se),u=1,T===!0&&(u|=24),T=Bn(3,null,null,u),l.current=T,T.stateNode=l,u=Vg(),u.refCount++,l.pooledCache=u,u.refCount++,T.memoizedState={element:x,isDehydrated:f,cache:u},Wg(T),l}function k_(l){return l?(l=Nl,l):Nl}function E_(l,u,f,x,S,T){S=k_(S),x.context===null?x.context=S:x.pendingContext=S,x=Xa(u),x.payload={element:f},T=T===void 0?null:T,T!==null&&(x.callback=T),f=Qa(l,x,u),f!==null&&(Gn(f,l,u),jd(f,l,u))}function A_(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function cb(l,u){A_(l,u),(l=l.alternate)&&A_(l,u)}function T_(l){if(l.tag===13){var u=jl(l,67108864);u!==null&&Gn(u,l,67108864),cb(l,67108864)}}var Fm=!0;function I8(l,u,f,x){var S=I.T;I.T=null;var T=V.p;try{V.p=2,db(l,u,f,x)}finally{V.p=T,I.T=S}}function B8(l,u,f,x){var S=I.T;I.T=null;var T=V.p;try{V.p=8,db(l,u,f,x)}finally{V.p=T,I.T=S}}function db(l,u,f,x){if(Fm){var S=ub(x);if(S===null)Xx(l,u,x,Im,f),O_(l,x);else if(V8(S,l,u,f,x))x.stopPropagation();else if(O_(l,x),u&4&&-1<U8.indexOf(l)){for(;S!==null;){var T=dl(S);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var F=Re(T.pendingLanes);if(F!==0){var G=T;for(G.pendingLanes|=2,G.entangledLanes|=2;F;){var Z=1<<31-ae(F);G.entanglements[1]|=Z,F&=~Z}Wr(T),(Mt&6)===0&&(Nm=te()+500,Fd(0))}}break;case 13:G=jl(T,2),G!==null&&Gn(G,T,2),_m(),cb(T,2)}if(T=ub(x),T===null&&Xx(l,u,x,Im,f),T===S)break;S=T}S!==null&&x.stopPropagation()}else Xx(l,u,x,null,f)}}function ub(l){return l=gg(l),hb(l)}var Im=null;function hb(l){if(Im=null,l=cl(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Im=l,null}function M_(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case De:return 2;case Ee:return 8;case ce:case ye:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var mb=!1,ui=null,hi=null,mi=null,Wd=new Map,Yd=new Map,fi=[],U8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(l,u){switch(l){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Wd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yd.delete(u.pointerId)}}function Kd(l,u,f,x,S,T){return l===null||l.nativeEvent!==T?(l={blockedOn:u,domEventName:f,eventSystemFlags:x,nativeEvent:T,targetContainers:[S]},u!==null&&(u=dl(u),u!==null&&T_(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),l)}function V8(l,u,f,x,S){switch(u){case"focusin":return ui=Kd(ui,l,u,f,x,S),!0;case"dragenter":return hi=Kd(hi,l,u,f,x,S),!0;case"mouseover":return mi=Kd(mi,l,u,f,x,S),!0;case"pointerover":var T=S.pointerId;return Wd.set(T,Kd(Wd.get(T)||null,l,u,f,x,S)),!0;case"gotpointercapture":return T=S.pointerId,Yd.set(T,Kd(Yd.get(T)||null,l,u,f,x,S)),!0}return!1}function R_(l){var u=cl(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,ol(l.priority,function(){if(f.tag===13){var x=Hn();x=Ur(x);var S=jl(f,x);S!==null&&Gn(S,f,x),cb(f,x)}});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Bm(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=ub(l.nativeEvent);if(f===null){f=l.nativeEvent;var x=new f.constructor(f.type,f);pg=x,f.target.dispatchEvent(x),pg=null}else return u=dl(f),u!==null&&T_(u),l.blockedOn=f,!1;u.shift()}return!0}function D_(l,u,f){Bm(l)&&f.delete(u)}function q8(){mb=!1,ui!==null&&Bm(ui)&&(ui=null),hi!==null&&Bm(hi)&&(hi=null),mi!==null&&Bm(mi)&&(mi=null),Wd.forEach(D_),Yd.forEach(D_)}function Um(l,u){l.blockedOn===u&&(l.blockedOn=null,mb||(mb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,q8)))}var Vm=null;function P_(l){Vm!==l&&(Vm=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vm===l&&(Vm=null);for(var u=0;u<l.length;u+=3){var f=l[u],x=l[u+1],S=l[u+2];if(typeof x!="function"){if(hb(x||f)===null)continue;break}var T=dl(f);T!==null&&(l.splice(u,3),u-=3,hx(T,{pending:!0,data:S,method:f.method,action:x},x,S))}}))}function Jd(l){function u(Z){return Um(Z,l)}ui!==null&&Um(ui,l),hi!==null&&Um(hi,l),mi!==null&&Um(mi,l),Wd.forEach(u),Yd.forEach(u);for(var f=0;f<fi.length;f++){var x=fi[f];x.blockedOn===l&&(x.blockedOn=null)}for(;0<fi.length&&(f=fi[0],f.blockedOn===null);)R_(f),f.blockedOn===null&&fi.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var S=f[x],T=f[x+1],F=S[wn]||null;if(typeof T=="function")F||P_(f);else if(F){var G=null;if(T&&T.hasAttribute("formAction")){if(S=T,F=T[wn]||null)G=F.formAction;else if(hb(S)!==null)continue}else G=F.action;typeof G=="function"?f[x+1]=G:(f.splice(x,3),x-=3),P_(f)}}}function fb(l){this._internalRoot=l}qm.prototype.render=fb.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,x=Hn();E_(f,x,l,u,null,null)},qm.prototype.unmount=fb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;E_(l.current,2,null,l,null,null),_m(),u[ll]=null}};function qm(l){this._internalRoot=l}qm.prototype.unstable_scheduleHydration=function(l){if(l){var u=il();l={blockedOn:null,target:l,priority:u};for(var f=0;f<fi.length&&u!==0&&u<fi[f].priority;f++);fi.splice(f,0,l),f===0&&R_(l)}};var z_=e.version;if(z_!=="19.1.0")throw Error(r(527,z_,"19.1.0"));V.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=d(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var H8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{ft=Hm.inject(H8),Te=Hm}catch{}}return Qd.createRoot=function(l,u){if(!a(l))throw Error(r(299));var f=!1,x="",S=Q2,T=Z2,F=eS,G=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(G=u.unstable_transitionCallbacks)),u=C_(l,1,!1,null,null,f,x,S,T,F,G,null),l[ll]=u.current,Jx(l),new fb(u)},Qd.hydrateRoot=function(l,u,f){if(!a(l))throw Error(r(299));var x=!1,S="",T=Q2,F=Z2,G=eS,Z=null,he=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(F=f.onCaughtError),f.onRecoverableError!==void 0&&(G=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Z=f.unstable_transitionCallbacks),f.formState!==void 0&&(he=f.formState)),u=C_(l,1,!0,u,f??null,x,S,T,F,G,Z,he),u.context=k_(null),f=u.current,x=Hn(),x=Ur(x),S=Xa(x),S.callback=null,Qa(f,S,x),f=x,u.current.lanes=f,sr(u,f),Wr(u),l[ll]=u.current,Jx(l),new qm(u)},Qd.version="19.1.0",Qd}var W_;function sP(){if(W_)return xb.exports;W_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xb.exports=tP(),xb.exports}var nP=sP();const rP=Uc(nP);var Zd={},Y_;function aP(){if(Y_)return Zd;Y_=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.parse=o,Zd.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,b){const v=new i,N=g.length;if(N<2)return v;const j=(b==null?void 0:b.decode)||m;let w=0;do{const _=g.indexOf("=",w);if(_===-1)break;const k=g.indexOf(";",w),C=k===-1?N:k;if(_>C){w=g.lastIndexOf(";",_-1)+1;continue}const E=c(g,w,_),A=d(g,_,E),M=g.slice(E,A);if(v[M]===void 0){let R=c(g,_+1,C),D=d(g,C,R);const L=j(g.slice(R,D));v[M]=L}w=C+1}while(w<N);return v}function c(g,b,v){do{const N=g.charCodeAt(b);if(N!==32&&N!==9)return b}while(++b<v);return v}function d(g,b,v){for(;b>v;){const N=g.charCodeAt(--b);if(N!==32&&N!==9)return b+1}return v}function h(g,b,v){const N=(v==null?void 0:v.encode)||encodeURIComponent;if(!t.test(g))throw new TypeError(`argument name is invalid: ${g}`);const j=N(b);if(!e.test(j))throw new TypeError(`argument val is invalid: ${b}`);let w=g+"="+j;if(!v)return w;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);w+="; Max-Age="+v.maxAge}if(v.domain){if(!s.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);w+="; Domain="+v.domain}if(v.path){if(!r.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);w+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);w+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(w+="; HttpOnly"),v.secure&&(w+="; Secure"),v.partitioned&&(w+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return w}function m(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function p(g){return a.call(g)==="[object Date]"}return Zd}aP();var K_="popstate";function iP(t={}){function e(r,a){let{pathname:i,search:o,hash:c}=r.location;return Kv("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:Hu(a)}return lP(e,s,null,t)}function Wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oP(){return Math.random().toString(36).substring(2,10)}function J_(t,e){return{usr:t.state,key:t.key,idx:e}}function Kv(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Vc(e):e,state:s,key:e&&e.key||r||oP()}}function Hu({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Vc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function lP(t,e,s,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,c="POP",d=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function p(){c="POP";let j=m(),w=j==null?null:j-h;h=j,d&&d({action:c,location:N.location,delta:w})}function g(j,w){c="PUSH";let _=Kv(N.location,j,w);h=m()+1;let k=J_(_,h),C=N.createHref(_);try{o.pushState(k,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(C)}i&&d&&d({action:c,location:N.location,delta:1})}function b(j,w){c="REPLACE";let _=Kv(N.location,j,w);h=m();let k=J_(_,h),C=N.createHref(_);o.replaceState(k,"",C),i&&d&&d({action:c,location:N.location,delta:0})}function v(j){return cP(j)}let N={get action(){return c},get location(){return t(a,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(K_,p),d=j,()=>{a.removeEventListener(K_,p),d=null}},createHref(j){return e(a,j)},createURL:v,encodeLocation(j){let w=v(j);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:b,go(j){return o.go(j)}};return N}function cP(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Hu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function V4(t,e,s="/"){return dP(t,e,s,!1)}function dP(t,e,s,r){let a=typeof e=="string"?Vc(e):e,i=Ia(a.pathname||"/",s);if(i==null)return null;let o=q4(t);uP(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=jP(i);c=yP(o[d],h,r)}return c}function q4(t,e=[],s=[],r=""){let a=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Wt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=Da([r,d.relativePath]),m=s.concat(d);i.children&&i.children.length>0&&(Wt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),q4(i.children,e,m,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:bP(h,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let d of H4(i.path))a(i,o,d)}),e}function H4(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=H4(r.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function uP(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:vP(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var hP=/^:[\w-]+$/,mP=3,fP=2,pP=1,gP=10,xP=-2,X_=t=>t==="*";function bP(t,e){let s=t.split("/"),r=s.length;return s.some(X_)&&(r+=xP),e&&(r+=fP),s.filter(a=>!X_(a)).reduce((a,i)=>a+(hP.test(i)?mP:i===""?pP:gP),r)}function vP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function yP(t,e,s=!1){let{routesMeta:r}=t,a={},i="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],h=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),g=d.route;if(!p&&h&&s&&!r[r.length-1].route.index&&(p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Da([i,p.pathname]),pathnameBase:CP(Da([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Da([i,p.pathnameBase]))}return o}function Jf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=wP(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:p},g)=>{if(m==="*"){let v=c[g]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=c[g];return p&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function wP(t,e=!1,s=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function jP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ia(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function NP(t,e="/"){let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?Vc(t):t;return{pathname:s?s.startsWith("/")?s:SP(s,e):e,search:kP(r),hash:EP(a)}}function SP(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function wb(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _P(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Sw(t){let e=_P(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function _w(t,e,s,r=!1){let a;typeof t=="string"?a=Vc(t):(a={...t},Wt(!a.pathname||!a.pathname.includes("?"),wb("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),wb("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),wb("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=s;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}c=p>=0?e[p]:"/"}let d=NP(a,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var Da=t=>t.join("/").replace(/\/\/+/g,"/"),CP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var G4=["POST","PUT","PATCH","DELETE"];new Set(G4);var TP=["GET",...G4];new Set(TP);var qc=y.createContext(null);qc.displayName="DataRouter";var u0=y.createContext(null);u0.displayName="DataRouterState";var W4=y.createContext({isTransitioning:!1});W4.displayName="ViewTransition";var MP=y.createContext(new Map);MP.displayName="Fetchers";var OP=y.createContext(null);OP.displayName="Await";var Ir=y.createContext(null);Ir.displayName="Navigation";var vh=y.createContext(null);vh.displayName="Location";var kr=y.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var Cw=y.createContext(null);Cw.displayName="RouteError";function RP(t,{relative:e}={}){Wt(Hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=y.useContext(Ir),{hash:a,pathname:i,search:o}=yh(t,{relative:e}),c=i;return s!=="/"&&(c=i==="/"?s:Da([s,i])),r.createHref({pathname:c,search:o,hash:a})}function Hc(){return y.useContext(vh)!=null}function vn(){return Wt(Hc(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(vh).location}var Y4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function K4(t){y.useContext(Ir).static||y.useLayoutEffect(t)}function bt(){let{isDataRoute:t}=y.useContext(kr);return t?WP():DP()}function DP(){Wt(Hc(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(qc),{basename:e,navigator:s}=y.useContext(Ir),{matches:r}=y.useContext(kr),{pathname:a}=vn(),i=JSON.stringify(Sw(r)),o=y.useRef(!1);return K4(()=>{o.current=!0}),y.useCallback((d,h={})=>{if(jr(o.current,Y4),!o.current)return;if(typeof d=="number"){s.go(d);return}let m=_w(d,JSON.parse(i),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Da([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,i,a,t])}var J4=y.createContext(null);function _t(){return y.useContext(J4)}function PP(t){let e=y.useContext(kr).outlet;return e&&y.createElement(J4.Provider,{value:t},e)}function Gc(){let{matches:t}=y.useContext(kr),e=t[t.length-1];return e?e.params:{}}function yh(t,{relative:e}={}){let{matches:s}=y.useContext(kr),{pathname:r}=vn(),a=JSON.stringify(Sw(s));return y.useMemo(()=>_w(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function zP(t,e){return X4(t,e)}function X4(t,e,s,r){var w;Wt(Hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=y.useContext(Ir),{matches:i}=y.useContext(kr),o=i[i.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let _=m&&m.path||"";Q4(d,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=vn(),g;if(e){let _=typeof e=="string"?Vc(e):e;Wt(h==="/"||((w=_.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=p;let b=g.pathname||"/",v=b;if(h!=="/"){let _=h.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let N=V4(t,{pathname:v});jr(m||N!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),jr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=BP(N&&N.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Da([h,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Da([h,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,s,r);return e&&j?y.createElement(vh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},j):j}function LP(){let t=GP(),e=AP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null,"💿 Hey developer 👋"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),s?y.createElement("pre",{style:a},s):null,o)}var $P=y.createElement(LP,null),FP=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?y.createElement(kr.Provider,{value:this.props.routeContext},y.createElement(Cw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IP({routeContext:t,match:e,children:s}){let r=y.useContext(qc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(kr.Provider,{value:t},s)}function BP(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,i=s==null?void 0:s.errors;if(i!=null){let d=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);Wt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let o=!1,c=-1;if(s)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:p}=s,g=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let p,g=!1,b=null,v=null;s&&(p=i&&h.route.id?i[h.route.id]:void 0,b=h.route.errorElement||$P,o&&(c<0&&m===0?(Q4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===m&&(g=!0,v=h.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,m+1)),j=()=>{let w;return p?w=b:g?w=v:h.route.Component?w=y.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,y.createElement(IP,{match:h,routeContext:{outlet:d,matches:N,isDataRoute:s!=null},children:w})};return s&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?y.createElement(FP,{location:s.location,revalidation:s.revalidation,component:b,error:p,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}function kw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UP(t){let e=y.useContext(qc);return Wt(e,kw(t)),e}function VP(t){let e=y.useContext(u0);return Wt(e,kw(t)),e}function qP(t){let e=y.useContext(kr);return Wt(e,kw(t)),e}function Ew(t){let e=qP(t),s=e.matches[e.matches.length-1];return Wt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function HP(){return Ew("useRouteId")}function GP(){var r;let t=y.useContext(Cw),e=VP("useRouteError"),s=Ew("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function WP(){let{router:t}=UP("useNavigate"),e=Ew("useNavigate"),s=y.useRef(!1);return K4(()=>{s.current=!0}),y.useCallback(async(a,i={})=>{jr(s.current,Y4),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var Q_={};function Q4(t,e,s){!e&&!Q_[t]&&(Q_[t]=!0,jr(!1,s))}y.memo(YP);function YP({routes:t,future:e,state:s}){return X4(t,void 0,s,e)}function Aw({to:t,replace:e,state:s,relative:r}){Wt(Hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=y.useContext(Ir);jr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(kr),{pathname:o}=vn(),c=bt(),d=_w(t,Sw(i),o,r==="path"),h=JSON.stringify(d);return y.useEffect(()=>{c(JSON.parse(h),{replace:e,state:s,relative:r})},[c,h,r,e,s]),null}function Tw(t){return PP(t.context)}function lt(t){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KP({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:a,static:i=!1}){Wt(!Hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof s=="string"&&(s=Vc(s));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:g="default"}=s,b=y.useMemo(()=>{let v=Ia(d,o);return v==null?null:{location:{pathname:v,search:h,hash:m,state:p,key:g},navigationType:r}},[o,d,h,m,p,g,r]);return jr(b!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:y.createElement(Ir.Provider,{value:c},y.createElement(vh.Provider,{children:e,value:b}))}function JP({children:t,location:e}){return zP(Jv(t),e)}function Jv(t,e=[]){let s=[];return y.Children.forEach(t,(r,a)=>{if(!y.isValidElement(r))return;let i=[...e,a];if(r.type===y.Fragment){s.push.apply(s,Jv(r.props.children,i));return}Wt(r.type===lt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Jv(r.props.children,i)),s.push(o)}),s}var Mf="get",Of="application/x-www-form-urlencoded";function h0(t){return t!=null&&typeof t.tagName=="string"}function XP(t){return h0(t)&&t.tagName.toLowerCase()==="button"}function QP(t){return h0(t)&&t.tagName.toLowerCase()==="form"}function ZP(t){return h0(t)&&t.tagName.toLowerCase()==="input"}function ez(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tz(t,e){return t.button===0&&(!e||e==="_self")&&!ez(t)}function Xv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function sz(t,e){let s=Xv(t);return e&&e.forEach((r,a)=>{s.has(a)||e.getAll(a).forEach(i=>{s.append(a,i)})}),s}var Gm=null;function nz(){if(Gm===null)try{new FormData(document.createElement("form"),0),Gm=!1}catch{Gm=!0}return Gm}var rz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jb(t){return t!=null&&!rz.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Of}"`),null):t}function az(t,e){let s,r,a,i,o;if(QP(t)){let c=t.getAttribute("action");r=c?Ia(c,e):null,s=t.getAttribute("method")||Mf,a=jb(t.getAttribute("enctype"))||Of,i=new FormData(t)}else if(XP(t)||ZP(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?Ia(d,e):null,s=t.getAttribute("formmethod")||c.getAttribute("method")||Mf,a=jb(t.getAttribute("formenctype"))||jb(c.getAttribute("enctype"))||Of,i=new FormData(c,t),!nz()){let{name:h,type:m,value:p}=t;if(m==="image"){let g=h?`${h}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else h&&i.append(h,p)}}else{if(h0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Mf,r=null,a=Of,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:i,body:o}}function Mw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function iz(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lz(t,e,s){let r=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await iz(i,s);return o.links?o.links():[]}return[]}));return hz(r.flat(1).filter(oz).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Z_(t,e,s,r,a,i){let o=(d,h)=>s[h]?d.route.id!==s[h].route.id:!0,c=(d,h)=>{var m;return s[h].pathname!==d.pathname||((m=s[h].route.path)==null?void 0:m.endsWith("*"))&&s[h].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,h)=>o(d,h)||c(d,h)):i==="data"?e.filter((d,h)=>{var p;let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(o(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=s[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function cz(t,e,{includeHydrateFallback:s}={}){return dz(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function dz(t){return[...new Set(t)]}function uz(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function hz(t,e){let s=new Set;return new Set(e),t.reduce((r,a)=>{let i=JSON.stringify(uz(a));return s.has(i)||(s.add(i),r.push({key:i,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mz=new Set([100,101,204,205]);function fz(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&Ia(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function Z4(){let t=y.useContext(qc);return Mw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function pz(){let t=y.useContext(u0);return Mw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ow=y.createContext(void 0);Ow.displayName="FrameworkContext";function e3(){let t=y.useContext(Ow);return Mw(t,"You must render this element inside a <HydratedRouter> element"),t}function gz(t,e){let s=y.useContext(Ow),[r,a]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:p}=e,g=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=w=>{w.forEach(_=>{o(_.isIntersecting)})},j=new IntersectionObserver(N,{threshold:.5});return g.current&&j.observe(g.current),()=>{j.disconnect()}}},[t]),y.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let b=()=>{a(!0)},v=()=>{a(!1),o(!1)};return s?t!=="intent"?[i,g,{}]:[i,g,{onFocus:eu(c,b),onBlur:eu(d,v),onMouseEnter:eu(h,b),onMouseLeave:eu(m,v),onTouchStart:eu(p,b)}]:[!1,g,{}]}function eu(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function xz({page:t,...e}){let{router:s}=Z4(),r=y.useMemo(()=>V4(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?y.createElement(vz,{page:t,matches:r,...e}):null}function bz(t){let{manifest:e,routeModules:s}=e3(),[r,a]=y.useState([]);return y.useEffect(()=>{let i=!1;return lz(t,e,s).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,s]),r}function vz({page:t,matches:e,...s}){let r=vn(),{manifest:a,routeModules:i}=e3(),{basename:o}=Z4(),{loaderData:c,matches:d}=pz(),h=y.useMemo(()=>Z_(t,e,d,a,r,"data"),[t,e,d,a,r]),m=y.useMemo(()=>Z_(t,e,d,a,r,"assets"),[t,e,d,a,r]),p=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,N=!1;if(e.forEach(w=>{var k;let _=a.routes[w.route.id];!_||!_.hasLoader||(!h.some(C=>C.route.id===w.route.id)&&w.route.id in c&&((k=i[w.route.id])!=null&&k.shouldRevalidate)||_.hasClientLoader?N=!0:v.add(w.route.id))}),v.size===0)return[];let j=fz(t,o);return N&&v.size>0&&j.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[j.pathname+j.search]},[o,c,r,a,h,e,t,i]),g=y.useMemo(()=>cz(m,a),[m,a]),b=bz(m);return y.createElement(y.Fragment,null,p.map(v=>y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...s})),g.map(v=>y.createElement("link",{key:v,rel:"modulepreload",href:v,...s})),b.map(({key:v,link:N})=>y.createElement("link",{key:v,...N})))}function yz(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var t3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t3&&(window.__reactRouterVersion="7.6.2")}catch{}function wz({basename:t,children:e,window:s}){let r=y.useRef();r.current==null&&(r.current=iP({window:s,v5Compat:!0}));let a=r.current,[i,o]=y.useState({action:a.action,location:a.location}),c=y.useCallback(d=>{y.startTransition(()=>o(d))},[o]);return y.useLayoutEffect(()=>a.listen(c),[a,c]),y.createElement(KP,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var s3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=y.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:c,target:d,to:h,preventScrollReset:m,viewTransition:p,...g},b){let{basename:v}=y.useContext(Ir),N=typeof h=="string"&&s3.test(h),j,w=!1;if(typeof h=="string"&&N&&(j=h,t3))try{let D=new URL(window.location.href),L=h.startsWith("//")?new URL(D.protocol+h):new URL(h),B=Ia(L.pathname,v);L.origin===D.origin&&B!=null?h=B+L.search+L.hash:w=!0}catch{jr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=RP(h,{relative:a}),[k,C,E]=gz(r,g),A=Sz(h,{replace:o,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:p});function M(D){e&&e(D),D.defaultPrevented||A(D)}let R=y.createElement("a",{...g,...E,href:j||_,onClick:w||i?e:M,ref:yz(b,C),target:d,"data-discover":!N&&s==="render"?"true":void 0});return k&&!N?y.createElement(y.Fragment,null,R,y.createElement(xz,{page:_})):R});Ye.displayName="Link";var m0=y.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:c,children:d,...h},m){let p=yh(o,{relative:h.relative}),g=vn(),b=y.useContext(u0),{navigator:v,basename:N}=y.useContext(Ir),j=b!=null&&Az(p)&&c===!0,w=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,_=g.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(_=_.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&N&&(k=Ia(k,N)||k);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let E=_===w||!a&&_.startsWith(w)&&_.charAt(C)==="/",A=k!=null&&(k===w||!a&&k.startsWith(w)&&k.charAt(w.length)==="/"),M={isActive:E,isPending:A,isTransitioning:j},R=E?e:void 0,D;typeof r=="function"?D=r(M):D=[r,E?"active":null,A?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(M):i;return y.createElement(Ye,{...h,"aria-current":R,className:D,ref:m,style:L,to:o,viewTransition:c},typeof d=="function"?d(M):d)});m0.displayName="NavLink";var jz=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:a,state:i,method:o=Mf,action:c,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:p,...g},b)=>{let v=kz(),N=Ez(c,{relative:h}),j=o.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&s3.test(c),_=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let C=k.nativeEvent.submitter,E=(C==null?void 0:C.getAttribute("formmethod"))||o;v(C||k.currentTarget,{fetcherKey:e,method:E,navigate:s,replace:a,state:i,relative:h,preventScrollReset:m,viewTransition:p})};return y.createElement("form",{ref:b,method:j,action:N,onSubmit:r?d:_,...g,"data-discover":!w&&t==="render"?"true":void 0})});jz.displayName="Form";function Nz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n3(t){let e=y.useContext(qc);return Wt(e,Nz(t)),e}function Sz(t,{target:e,replace:s,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let c=bt(),d=vn(),h=yh(t,{relative:i});return y.useCallback(m=>{if(tz(m,e)){m.preventDefault();let p=s!==void 0?s:Hu(d)===Hu(h);c(t,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[d,c,h,s,r,e,t,a,i,o])}function r3(t){jr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=y.useRef(Xv(t)),s=y.useRef(!1),r=vn(),a=y.useMemo(()=>sz(r.search,s.current?null:e.current),[r.search]),i=bt(),o=y.useCallback((c,d)=>{const h=Xv(typeof c=="function"?c(a):c);s.current=!0,i("?"+h,d)},[i,a]);return[a,o]}var _z=0,Cz=()=>`__${String(++_z)}__`;function kz(){let{router:t}=n3("useSubmit"),{basename:e}=y.useContext(Ir),s=HP();return y.useCallback(async(r,a={})=>{let{action:i,method:o,encType:c,formData:d,body:h}=az(r,e);if(a.navigate===!1){let m=a.fetcherKey||Cz();await t.fetch(m,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||o,formEncType:a.encType||c,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||o,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function Ez(t,{relative:e}={}){let{basename:s}=y.useContext(Ir),r=y.useContext(kr);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...yh(t||".",{relative:e})},o=vn();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(m=>m==="")){c.delete("index"),d.filter(p=>p).forEach(p=>c.append("index",p));let m=c.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:Da([s,i.pathname])),Hu(i)}function Az(t,e={}){let s=y.useContext(W4);Wt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=n3("useViewTransitionState"),a=yh(t,{relative:e.relative});if(!s.isTransitioning)return!1;let i=Ia(s.currentLocation.pathname,r)||s.currentLocation.pathname,o=Ia(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Jf(a.pathname,o)!=null||Jf(a.pathname,i)!=null}[...mz];var Rw=U4();const Tz=Uc(Rw),Mz=()=>{const{pathname:t}=vn();return y.useEffect(()=>{window.scrollTo(0,0)},[t]),null},Oz="modulepreload",Rz=function(t){return"/"+t},eC={},Vi=function(e,s,r){let a=Promise.resolve();if(s&&s.length>0){let o=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=o(s.map(h=>{if(h=Rz(h),h in eC)return;eC[h]=!0;const m=h.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":Oz,m||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),m)return new Promise((b,v)=>{g.addEventListener("load",b),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},Dz=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vi(async()=>{const{default:r}=await Promise.resolve().then(()=>Wc);return{default:r}},[]).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Dw extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Pz extends Dw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zz extends Dw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Lz extends Dw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qv;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qv||(Qv={}));var $z=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};class Fz{constructor(e,{headers:s={},customFetch:r,region:a=Qv.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=Dz(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return $z(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let c={},{region:d}=s;d||(d=this.region),d&&d!=="any"&&(c["x-region"]=d);let h;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const m=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:h}).catch(v=>{throw new Pz(v)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new zz(m);if(!m.ok)throw new Lz(m);let g=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield m.json():g==="application/octet-stream"?b=yield m.blob():g==="text/event-stream"?b=m:g==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null}}catch(a){return{data:null,error:a}}})}}var Os={},Wl={},Yl={},Kl={},Jl={},Xl={},Iz=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sc=Iz();const Bz=Sc.fetch,a3=Sc.fetch.bind(Sc),i3=Sc.Headers,Uz=Sc.Request,Vz=Sc.Response,Wc=Object.freeze(Object.defineProperty({__proto__:null,Headers:i3,Request:Uz,Response:Vz,default:a3,fetch:Bz},Symbol.toStringTag,{value:"Module"})),qz=Y8(Wc);var Wm={},tC;function o3(){if(tC)return Wm;tC=1,Object.defineProperty(Wm,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Wm.default=t,Wm}var sC;function l3(){if(sC)return Xl;sC=1;var t=Xl&&Xl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Xl,"__esModule",{value:!0});const e=t(qz),s=t(o3());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,p,g;let b=null,v=null,N=null,j=h.status,w=h.statusText;if(h.ok){if(this.method!=="HEAD"){const E=await h.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=E:v=JSON.parse(E))}const k=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),C=(p=h.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");k&&C&&C.length>1&&(N=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(b={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,N=null,j=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const k=await h.text();try{b=JSON.parse(k),Array.isArray(b)&&h.status===404&&(v=[],b=null,j=200,w="OK")}catch{h.status===404&&k===""?(j=204,w="No Content"):b={message:k}}if(b&&this.isMaybeSingle&&(!((g=b==null?void 0:b.details)===null||g===void 0)&&g.includes("0 rows"))&&(b=null,j=200,w="OK"),b&&this.shouldThrowOnError)throw new s.default(b)}return{error:b,data:v,count:N,status:j,statusText:w}});return this.shouldThrowOnError||(d=d.catch(h=>{var m,p,g;return{error:{message:`${(m=h==null?void 0:h.name)!==null&&m!==void 0?m:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(p=h==null?void 0:h.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=h==null?void 0:h.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,o)}returns(){return this}overrideTypes(){return this}}return Xl.default=r,Xl}var nC;function c3(){if(nC)return Jl;nC=1;var t=Jl&&Jl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jl,"__esModule",{value:!0});const e=t(l3());class s extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"offset":`${c}.offset`,h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(h,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:c=!1,wal:d=!1,format:h="text"}={}){var m;const p=[a?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),g=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${g}"; options=${p};`,h==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jl.default=s,Jl}var rC;function Pw(){if(rC)return Kl;rC=1;var t=Kl&&Kl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kl,"__esModule",{value:!0});const e=t(c3());class s extends e.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${d}fts${h}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return Kl.default=s,Kl}var aC;function d3(){if(aC)return Yl;aC=1;var t=Yl&&Yl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yl,"__esModule",{value:!0});const e=t(Pw());class s{constructor(a,{headers:i={},schema:o,fetch:c}){this.url=a,this.headers=i,this.schema=o,this.fetch=c}select(a,{head:i=!1,count:o}={}){const c=i?"HEAD":"GET";let d=!1;const h=(a??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:o=!0}={}){const c="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),o||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const h=a.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:c,defaultToNull:d=!0}={}){const h="POST",m=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(a)){const p=a.reduce((g,b)=>g.concat(Object.keys(b)),[]);if(p.length>0){const g=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",o=[];return a&&o.push(`count=${a}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Yl.default=s,Yl}var tu={},su={},iC;function Hz(){return iC||(iC=1,Object.defineProperty(su,"__esModule",{value:!0}),su.version=void 0,su.version="0.0.0-automated"),su}var oC;function Gz(){if(oC)return tu;oC=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.DEFAULT_HEADERS=void 0;const t=Hz();return tu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},tu}var lC;function Wz(){if(lC)return Wl;lC=1;var t=Wl&&Wl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wl,"__esModule",{value:!0});const e=t(d3()),s=t(Pw()),r=Gz();class a{constructor(o,{headers:c={},schema:d,fetch:h}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=h}from(o){const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new a(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:h=!1,count:m}={}){let p;const g=new URL(`${this.url}/rpc/${o}`);let b;d||h?(p=d?"HEAD":"GET",Object.entries(c).filter(([N,j])=>j!==void 0).map(([N,j])=>[N,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([N,j])=>{g.searchParams.append(N,j)})):(p="POST",b=c);const v=Object.assign({},this.headers);return m&&(v.Prefer=`count=${m}`),new s.default({method:p,url:g,headers:v,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Wl.default=a,Wl}var cC;function Yz(){if(cC)return Os;cC=1;var t=Os&&Os.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Os,"__esModule",{value:!0}),Os.PostgrestError=Os.PostgrestBuilder=Os.PostgrestTransformBuilder=Os.PostgrestFilterBuilder=Os.PostgrestQueryBuilder=Os.PostgrestClient=void 0;const e=t(Wz());Os.PostgrestClient=e.default;const s=t(d3());Os.PostgrestQueryBuilder=s.default;const r=t(Pw());Os.PostgrestFilterBuilder=r.default;const a=t(c3());Os.PostgrestTransformBuilder=a.default;const i=t(l3());Os.PostgrestBuilder=i.default;const o=t(o3());return Os.PostgrestError=o.default,Os.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},Os}var Kz=Yz();const Jz=Uc(Kz),{PostgrestClient:Xz,PostgrestQueryBuilder:Zoe,PostgrestFilterBuilder:ele,PostgrestTransformBuilder:tle,PostgrestBuilder:sle,PostgrestError:nle}=Jz;let Zv;typeof window>"u"?Zv=require("ws"):Zv=window.WebSocket;const Qz="2.11.10",Zz={"X-Client-Info":`realtime-js/${Qz}`},eL="1.0.0",u3=1e4,tL=1e3;var yc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yc||(yc={}));var dn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(dn||(dn={}));var Dr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dr||(Dr={}));var ey;(function(t){t.websocket="websocket"})(ey||(ey={}));var _o;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_o||(_o={}));class sL{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+a));o=o+a;const d=r.decode(e.slice(o,o+i));o=o+i;const h=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:d,payload:h}}}class h3{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Bt||(Bt={}));const dC=(t,e,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=nL(o,t,e,a),i),{})},nL=(t,e,s,r)=>{const a=e.find(c=>c.name===t),i=a==null?void 0:a.type,o=s[t];return i&&!r.includes(i)?m3(i,o):ty(o)},m3=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return oL(e,s)}switch(t){case Bt.bool:return rL(e);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return aL(e);case Bt.json:case Bt.jsonb:return iL(e);case Bt.timestamp:return lL(e);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return ty(e);default:return ty(e)}},ty=t=>t,rL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},aL=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},iL=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},oL=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>m3(e,c))}return t},lL=t=>typeof t=="string"?t.replace(" ","T"):t,f3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Nb{constructor(e,s,r={},a=u3){this.channel=e,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var uC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(uC||(uC={}));class wu{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wu.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=wu.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=wu.syncDiff(this.state,a,i,o),c())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,a){const i=this.cloneDeep(e),o=this.transformState(s),c={},d={};return this.map(i,(h,m)=>{o[h]||(d[h]=m)}),this.map(o,(h,m)=>{const p=i[h];if(p){const g=m.map(j=>j.presence_ref),b=p.map(j=>j.presence_ref),v=m.filter(j=>b.indexOf(j.presence_ref)<0),N=p.filter(j=>g.indexOf(j.presence_ref)<0);v.length>0&&(c[h]=v),N.length>0&&(d[h]=N)}else c[h]=m}),this.syncDiff(i,{joins:c,leaves:d},r,a)}static syncDiff(e,s,r,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(c,d)=>{var h;const m=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(d),m.length>0){const p=e[c].map(b=>b.presence_ref),g=m.filter(b=>p.indexOf(b.presence_ref)<0);e[c].unshift(...g)}r(c,m,d)}),this.map(o,(c,d)=>{let h=e[c];if(!h)return;const m=d.map(p=>p.presence_ref);h=h.filter(p=>m.indexOf(p.presence_ref)<0),e[c]=h,a(c,h,d),h.length===0&&delete e[c]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const a=e[r];return"metas"in a?s[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hC||(hC={}));var mC;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(mC||(mC={}));var Ma;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ma||(Ma={}));class zw{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Nb(this,Dr.join,this.params,this.timeout),this.rejoinTimer=new h3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dr.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new wu(this),this.broadcastEndpointURL=f3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:c}}=this.params;this._onError(m=>e==null?void 0:e(Ma.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ma.CLOSED));const d={},h={broadcast:i,presence:o,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(Ma.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,v=[];for(let N=0;N<b;N++){const j=g[N],{filter:{event:w,schema:_,table:k,filter:C}}=j,E=m&&m[N];if(E&&E.event===w&&E.schema===_&&E.table===k&&E.filter===C)v.push(Object.assign(Object.assign({},j),{id:E.id}));else{this.unsubscribe(),this.state=dn.errored,e==null||e(Ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ma.SUBSCRIBED);return}}).receive("error",m=>{this.state=dn.errored,e==null||e(Ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,d;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dr.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const a=new Nb(this,Dr.leave,{},e);a.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Nb(this,e,s,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var a,i;const o=e.toLocaleLowerCase(),{close:c,error:d,leave:h,join:m}=Dr;if(r&&[c,d,h,m].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,s,r);if(s&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var v,N,j;return((v=b.filter)===null||v===void 0?void 0:v.event)==="*"||((j=(N=b.filter)===null||N===void 0?void 0:N.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(b=>b.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(b=>{var v,N,j,w,_,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const C=b.id,E=(v=b.filter)===null||v===void 0?void 0:v.event;return C&&((N=s.ids)===null||N===void 0?void 0:N.includes(C))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((j=s.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const C=(_=(w=b==null?void 0:b.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return C==="*"||C===((k=s==null?void 0:s.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:N,table:j,commit_timestamp:w,type:_,errors:k}=v;g=Object.assign(Object.assign({},{schema:N,table:j,commit_timestamp:w,eventType:_,new:{},old:{},errors:k}),this._getPayloadRecords(v))}b.callback(g,r)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&zw.isEqual(a.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dr.close,{},e)}_onError(e){this._on(Dr.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=dC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=dC(e.columns,e.old_record)),s}}const fC=()=>{},cL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dL{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Zz,this.params={},this.timeout=u3,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fC,this.ref=0,this.logger=fC,this.conn=null,this.sendBuffer=[],this.serializer=new sL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...c)=>Vi(async()=>{const{default:d}=await Promise.resolve().then(()=>Wc);return{default:d}},void 0).then(({default:d})=>d(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${ey.websocket}`,this.httpEndpoint=f3(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new h3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Zv),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new uL(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eL}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yc.connecting:return _o.Connecting;case yc.open:return _o.Open;case yc.closing:return _o.Closing;default:return _o.Closed}}isConnected(){return this.connectionState()===_o.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new zw(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:a,ref:i}=e,o=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${s} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Dr.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(tL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:a,payload:i,ref:o}=s;r==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(c=>c(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dr.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${r}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([cL],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class uL{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=yc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Lw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Rs(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hL extends Lw{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sy extends Lw{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var mL=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};const p3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vi(async()=>{const{default:r}=await Promise.resolve().then(()=>Wc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},fL=()=>mL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vi(()=>Promise.resolve().then(()=>Wc),void 0)).Response:Response}),ny=t=>{if(Array.isArray(t))return t.map(s=>ny(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=ny(r)}),e};var el=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};const Sb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pL=(t,e,s)=>el(void 0,void 0,void 0,function*(){const r=yield fL();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(a=>{e(new hL(Sb(a),t.status||500))}).catch(a=>{e(new sy(Sb(a),a))}):e(new sy(Sb(t),t))}),gL=(t,e,s,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),s))};function wh(t,e,s,r,a,i){return el(this,void 0,void 0,function*(){return new Promise((o,c)=>{t(s,gL(e,r,a,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>pL(d,c,r))})})}function Xf(t,e,s,r){return el(this,void 0,void 0,function*(){return wh(t,"GET",e,s,r)})}function wi(t,e,s,r,a){return el(this,void 0,void 0,function*(){return wh(t,"POST",e,r,a,s)})}function xL(t,e,s,r,a){return el(this,void 0,void 0,function*(){return wh(t,"PUT",e,r,a,s)})}function bL(t,e,s,r){return el(this,void 0,void 0,function*(){return wh(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function g3(t,e,s,r,a){return el(this,void 0,void 0,function*(){return wh(t,"DELETE",e,r,a,s)})}var Cn=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};const vL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yL{constructor(e,s={},r,a){this.url=e,this.headers=s,this.bucketId=r,this.fetch=p3(a)}uploadOrUpdate(e,s,r,a){return Cn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},pC),a);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const h=this._removeEmptyFolders(s),m=this._getFinalPath(h),p=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:e,body:i,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield p.json();return p.ok?{data:{path:h,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(Rs(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,a){return Cn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",s);try{let d;const h=Object.assign({upsert:pC.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:d,headers:m}),g=yield p.json();return p.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(d){if(Rs(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,s){return Cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield wi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new Lw("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}update(e,s,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Cn(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}copy(e,s,r){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield wi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,r){return Cn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield wi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,r){return Cn(this,void 0,void 0,function*(){try{const a=yield wi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}download(e,s){return Cn(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Xf(this.fetch,`${this.url}/${a}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Rs(c))return{data:null,error:c};throw c}})}info(e){return Cn(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Xf(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ny(r),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}exists(e){return Cn(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield bL(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Rs(r)&&r instanceof sy){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});d!==""&&a.push(d);let h=a.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${h}`)}}}remove(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield g3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Rs(s))return{data:null,error:s};throw s}})}list(e,s,r){return Cn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},vL),s),{prefix:e||""});return{data:yield wi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const wL="2.7.1",jL={"X-Client-Info":`storage-js/${wL}`};var Ql=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};class NL{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},jL),s),this.fetch=p3(r)}listBuckets(){return Ql(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Rs(e))return{data:null,error:e};throw e}})}getBucket(e){return Ql(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Rs(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ql(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Ql(this,void 0,void 0,function*(){try{return{data:yield xL(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ql(this,void 0,void 0,function*(){try{return{data:yield wi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Rs(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ql(this,void 0,void 0,function*(){try{return{data:yield g3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Rs(s))return{data:null,error:s};throw s}})}}class SL extends NL{constructor(e,s={},r){super(e,s,r)}from(e){return new yL(this.url,this.headers,e,this.fetch)}}const _L="2.50.0";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const CL={"X-Client-Info":`supabase-js-${fu}/${_L}`},kL={headers:CL},EL={schema:"public"},AL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TL={};var ML=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};const OL=t=>{let e;return t?e=t:typeof fetch>"u"?e=a3:e=fetch,(...s)=>e(...s)},RL=()=>typeof Headers>"u"?i3:Headers,DL=(t,e,s)=>{const r=OL(s),a=RL();return(i,o)=>ML(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:t;let h=new a(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},o),{headers:h}))})};var PL=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};function zL(t){return t.endsWith("/")?t:t+"/"}function LL(t,e){var s,r;const{db:a,auth:i,realtime:o,global:c}=t,{db:d,auth:h,realtime:m,global:p}=e,g={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},m),o),global:Object.assign(Object.assign(Object.assign({},p),c),{headers:Object.assign(Object.assign({},(s=p==null?void 0:p.headers)!==null&&s!==void 0?s:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>PL(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const x3="2.70.0",lc=30*1e3,ry=3,_b=ry*lc,$L="http://localhost:9999",FL="supabase.auth.token",IL={"X-Client-Info":`gotrue-js/${x3}`},ay="X-Supabase-Api-Version",b3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UL=6e5;class $w extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ct(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class VL extends $w{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function qL(t){return ct(t)&&t.name==="AuthApiError"}class v3 extends $w{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class qi extends $w{constructor(e,s,r,a){super(e,r,a),this.name=s,this.status=r}}class bi extends qi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HL(t){return ct(t)&&t.name==="AuthSessionMissingError"}class Ym extends qi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Km extends qi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jm extends qi{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GL(t){return ct(t)&&t.name==="AuthImplicitGrantRedirectError"}class gC extends qi{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iy extends qi{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Cb(t){return ct(t)&&t.name==="AuthRetryableFetchError"}class xC extends qi{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ju extends qi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bC=` 	
\r=`.split(""),WL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<bC.length;e+=1)t[bC[e].charCodeAt(0)]=-2;for(let e=0;e<Qf.length;e+=1)t[Qf[e].charCodeAt(0)]=e;return t})();function vC(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Qf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Qf[r]),e.queuedBits-=6}}function y3(t,e,s){const r=WL[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function yC(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{JL(o,r,s)};for(let o=0;o<t.length;o+=1)y3(t.charCodeAt(o),a,i);return e.join("")}function YL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function KL(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}YL(r,e)}}function JL(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function XL(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)y3(t.charCodeAt(a),s,r);return new Uint8Array(e)}function QL(t){const e=[];return KL(t,s=>e.push(s)),new Uint8Array(e)}function ZL(t){const e=[],s={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>vC(a,s,r)),vC(null,s,r),e.join("")}function e7(t){return Math.round(Date.now()/1e3)+t}function t7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Mr=()=>typeof window<"u"&&typeof document<"u",xo={tested:!1,writable:!1},Nu=()=>{if(!Mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xo.tested)return xo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xo.tested=!0,xo.writable=!0}catch{xo.tested=!0,xo.writable=!1}return xo.writable};function s7(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((r,a)=>{e[a]=r}),e}const w3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Vi(async()=>{const{default:r}=await Promise.resolve().then(()=>Wc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},n7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",j3=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Xm=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Qm=async(t,e)=>{await t.removeItem(e)};class f0{constructor(){this.promise=new f0.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}f0.promiseConstructor=Promise;function kb(t){const e=t.split(".");if(e.length!==3)throw new ju("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BL.test(e[r]))throw new ju("JWT not in base64url format");return{header:JSON.parse(yC(e[0])),payload:JSON.parse(yC(e[1])),signature:XL(e[2]),raw:{header:e[0],payload:e[1]}}}async function r7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function a7(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function i7(t){return("0"+t.toString(16)).substr(-2)}function o7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,i7).join("")}async function l7(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function c7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await l7(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zl(t,e,s=!1){const r=o7();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await j3(t,`${e}-code-verifier`,a);const i=await c7(r);return[i,r===i?"plain":"s256"]}const d7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u7(t){const e=t.headers.get(ay);if(!e||!e.match(d7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function h7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function m7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const f7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(t){if(!f7.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var p7=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};const wo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g7=[502,503,504];async function wC(t){var e;if(!n7(t))throw new iy(wo(t),0);if(g7.includes(t.status))throw new iy(wo(t),t.status);let s;try{s=await t.json()}catch(i){throw new v3(wo(i),i)}let r;const a=u7(t);if(a&&a.getTime()>=b3["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new xC(wo(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bi}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new xC(wo(s),t.status,s.weak_password.reasons);throw new VL(wo(s),t.status||500,r)}const x7=(t,e,s,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};async function wt(t,e,s,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[ay]||(i[ay]=b3["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await b7(t,e,s+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function b7(t,e,s,r,a,i){const o=x7(e,r,a,i);let c;try{c=await t(s,Object.assign({},o))}catch(d){throw console.error(d),new iy(wo(d),0)}if(c.ok||await wC(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await wC(d)}}function Aa(t){var e;let s=null;j7(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=e7(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function jC(t){const e=Aa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function v7(t){return{data:t,error:null}}function y7(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i}=t,o=p7(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function w7(t){return t}function j7(t){return t.access_token&&t.refresh_token&&t.expires_in}const Eb=["global","local","others"];var N7=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s};class S7{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=w3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Eb[0]){if(Eb.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eb.join(", ")}`);try{return await wt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await wt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:_i})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=N7(e,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await wt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:y7,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ct(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await wt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_i})}catch(s){if(ct(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,a,i,o,c,d;try{const h={nextPage:null,lastPage:0,total:0},m=await wt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:w7});if(m.error)throw m.error;const p=await m.json(),g=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(v=>{const N=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(v.split(";")[1].split("=")[1]);h[`${j}Page`]=N}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(ct(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){ec(e);try{return await wt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_i})}catch(s){if(ct(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){ec(e);try{return await wt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:_i})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){ec(e);try{return await wt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:_i})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ec(e.userId);try{const{data:s,error:r}=await wt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(ct(s))return{data:null,error:s};throw s}}async _deleteFactor(e){ec(e.userId),ec(e.id);try{return{data:await wt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}}}const _7={getItem:t=>Nu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Nu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Nu()&&globalThis.localStorage.removeItem(t)}};function NC(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function C7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tc={debug:!!(globalThis&&Nu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class k7 extends N3{}async function E7(t,e,s){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),tc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new k7(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(tc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}C7();const A7={url:$L,storageKey:FL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function SC(t,e,s){return await s()}class Gu{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gu.nextInstanceID,Gu.nextInstanceID+=1,this.instanceID>0&&Mr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},A7),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new S7({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=w3(a.fetch),this.lock=a.lock||SC,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Mr()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=E7:this.lock=SC,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Nu()?this.storage=_7:(this.memoryStorage={},this.storage=NC(this.memoryStorage)):(this.memoryStorage={},this.storage=NC(this.memoryStorage)),Mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${x3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=s7(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Mr()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),GL(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ct(s)?{error:s}:{error:new v3("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,a;try{const i=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Aa}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,a;try{let i;if("email"in e){const{email:m,password:p,options:g}=e;let b=null,v=null;this.flowType==="pkce"&&([b,v]=await Zl(this.storage,this.storageKey)),i=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:m,password:p,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:b,code_challenge_method:v},xform:Aa})}else if("phone"in e){const{phone:m,password:p,options:g}=e;i=await wt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(a=g==null?void 0:g.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Aa})}else throw new Km("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:c}=e;s=await wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:jC})}else if("phone"in e){const{phone:i,password:o,options:c}=e;s=await wt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:jC})}else throw new Km("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ym}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,a,i,o,c,d,h,m,p,g,b;let v,N;if("message"in e)v=e.message,N=e.signature;else{const{chain:j,wallet:w,statement:_,options:k}=e;let C;if(Mr())if(typeof w=="object")C=w;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))C=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const E=new URL((s=k==null?void 0:k.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in C&&C.signIn){const A=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),_?{statement:_}:null));let M;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")M=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)M=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)v=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),N=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((p=(m=k==null?void 0:k.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||p===void 0)&&p.length?["Resources",...k.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const A=await C.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=A}}try{const{data:j,error:w}=await wt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:ZL(N)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Aa});if(w)throw w;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ym}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:w})}catch(j){if(ct(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const s=await Xm(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s??"").split("/");try{const{data:i,error:o}=await wt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Aa});if(await Qm(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ym}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(ct(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:a,access_token:i,nonce:o}=e,c=await wt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Aa}),{data:d,error:h}=c;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Ym}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,a,i,o;try{if("email"in e){const{email:c,options:d}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Zl(this.storage,this.storageKey));const{error:p}=await wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:c,options:d}=e,{data:h,error:m}=await wt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m}}throw new Km("You must provide either an email or phone number.")}catch(c){if(ct(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var s,r;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await wt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Aa});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,h=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(a){if(ct(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Zl(this.storage,this.storageKey)),await wt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:v7})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new bi;const{error:a}=await wt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(ct(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:o}=await wt(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:o,error:c}=await wt(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Km("You must provide either an email or phone number and a type")}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Xm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<_b:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,m)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,m))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_i}):await this._useSession(async s=>{var r,a,i;const{data:o,error:c}=s;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bi}:await wt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:_i})})}catch(s){if(ct(s))return HL(s)&&(await this._removeSession(),await Qm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new bi;const o=a.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Zl(this.storage,this.storageKey));const{data:h,error:m}=await wt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:_i});if(m)throw m;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bi;const s=Date.now()/1e3;let r=s,a=!0,i=null;const{payload:o}=kb(e.access_token);if(o.exp&&(r=o.exp,a=r<=s),a){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ct(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:c}=s;if(c)throw c;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bi;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Mr())throw new Jm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new gC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jm("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gC("No code detected.");const{data:_,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:c,expires_at:d,token_type:h}=e;if(!i||!c||!o||!h)throw new Jm("No session defined in URL");const m=Math.round(Date.now()/1e3),p=parseInt(c);let g=m+p;d&&(g=parseInt(d));const b=g-m;b*1e3<=lc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const v=g-p;m-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,m):m-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,m);const{data:N,error:j}=await this._getUser(i);if(j)throw j;const w={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:g,refresh_token:o,token_type:h,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(ct(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Xm(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(qL(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Qm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=t7(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Zl(this.storage,this.storageKey,!0));try{return await wt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:a}=await this._useSession(async i=>{var o,c,d,h,m;const{data:p,error:g}=i;if(g)throw g;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await wt(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return Mr()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ct(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)throw o;return await wt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ct(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await a7(async a=>(a>0&&await r7(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await wt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Aa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Cb(i)&&Date.now()+o-r<lc})}catch(r){if(this._debug(s,"error",r),ct(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Mr()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Xm(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<_b;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${_b}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Cb(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new bi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new f0;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new bi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),ct(i)){const o={session:null,error:i};return Cb(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,s)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await j3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Qm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/lc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${lc}ms, refresh threshold is ${ry} ticks`),a<=ry&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof N3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const a=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Zl(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await wt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ct(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:h}=await wt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(s){if(ct(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:c}=await wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(s){if(ct(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await wt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ct(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kb(a.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+UL>Date.now()))return r;const{data:a,error:i}=await wt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new ju("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),r=a.keys.find(o=>o.kid===e),!r)throw new ju("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:b,error:v}=await this.getSession();if(v||!b.session)return{data:null,error:v};r=b.session.access_token}const{header:a,payload:i,signature:o,raw:{header:c,payload:d}}=kb(r);if(h7(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:i,header:a,signature:o},error:null}}const h=m7(a.alg),m=await this.fetchJwk(a.kid,s),p=await crypto.subtle.importKey("jwk",m,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,QL(`${c}.${d}`)))throw new ju("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}}}Gu.nextInstanceID=0;const T7=Gu;class M7 extends T7{constructor(e){super(e)}}var O7=function(t,e,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function c(m){try{h(r.next(m))}catch(p){o(p)}}function d(m){try{h(r.throw(m))}catch(p){o(p)}}function h(m){m.done?i(m.value):a(m.value).then(c,d)}h((r=r.apply(t,e||[])).next())})};class R7{constructor(e,s,r){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=zL(e),d=new URL(c);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:EL,realtime:TL,auth:Object.assign(Object.assign({},AL),{storageKey:h}),global:kL},p=LL(r??{},m);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=DL(s,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new Xz(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new Fz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new SL(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return O7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:c,debug:d},h,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M7({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:a,flowType:o,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new dL(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const D7=(t,e,s)=>new R7(t,e,s),P7="https://bqiamumgqbezdumzquda.supabase.co",z7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxaWFtdW1ncWJlemR1bXpxdWRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyNDkzNjgsImV4cCI6MjA2NDgyNTM2OH0.etPC9qAaxKAJubKdlcgm2jdiSUz3EAogXlmr7KtF3L4",$=D7(P7,z7),L7=async t=>{try{console.log("🗑️ Clearing all notifications for user:",t);const{error:e}=await $.from("notifications").delete().eq("user_id",t);if(e)throw console.error("❌ Error clearing notifications:",e),e;return console.log("✅ Successfully cleared all notifications"),{success:!0}}catch(e){return console.error("💥 Error in clearAllNotifications:",e),{success:!1,error:e.message}}},oy=t=>{if(!t)return"N/A";const e={year:"numeric",month:"long",day:"numeric"};return new Date(t+"T00:00:00").toLocaleDateString(void 0,e)},Zm=t=>{if(typeof t!="string")return 0;if(t.toLowerCase().includes("significant"))return 1/0;const e=t.match(/\d[\d,.]*/g);if(!e)return 0;const s=e.map(r=>parseFloat(r.replace(/,/g,""))).filter(r=>!isNaN(r));return s.length?Math.min(...s):0},$7=t=>{if(typeof t!="string")return 0;const s=t.toLowerCase().replace("up to","").trim().match(/\d[\d,.]*/g);if(!s||s.length===0)return 0;const r=s.map(a=>parseFloat(a.replace(/,/g,""))).filter(a=>!isNaN(a));return r.length===0?0:Math.min(...r)},Kn=t=>{if(typeof t!="string")return 0;if(t.toLowerCase().includes("significant"))return 1/0;const s=t.toLowerCase().replace("up to","").trim().match(/\d[\d,.]*/g);if(!s)return 0;const r=s.map(a=>parseFloat(a.replace(/,/g,""))).filter(a=>!isNaN(a));return r.length===0?0:Math.max(...r)},F7=({grant:t,formatAmount:e})=>{var c;const s=`/grants?open_grant=${t.id}`,r=t.funder_logo_url||((c=t.organization)==null?void 0:c.image_url),a=t.funder_name||t.foundationName||"Funder",i=a.split(" ").slice(0,2).map(d=>d[0]).join("").toUpperCase(),o=t.grant_type||t.grantType||"Grant";return n.jsxs("a",{href:s,className:"group relative overflow-hidden rounded-2xl bg-white border border-slate-200 p-5 flex flex-col shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-400",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl overflow-hidden ring-2 ring-white shadow-sm flex items-center justify-center bg-white border border-slate-200",children:r?n.jsx("img",{src:r,alt:a+" logo",className:"max-h-full max-w-full object-contain"}):n.jsx("span",{className:"text-[11px] font-semibold text-slate-600",children:i})}),n.jsx("h3",{className:"text-sm font-semibold text-slate-800 leading-snug tracking-tight line-clamp-2 max-w-[12rem] group-hover:text-indigo-600",children:t.title||t.name||"Funding Opportunity"})]}),n.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider px-2 py-1 rounded-full bg-gradient-to-r from-indigo-50 to-blue-50 text-indigo-600 border border-indigo-200",children:o})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed line-clamp-3 mb-4 flex-grow",children:t.short_description||t.summary||t.description||"Learn more about this opportunity."}),n.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-slate-100",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"Up to"}),n.jsx("span",{className:"text-sm font-bold text-emerald-600",children:e(t)})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/0 via-sky-500/0 to-indigo-500/0 opacity-0 group-hover:opacity-100 group-hover:from-indigo-500/5 group-hover:via-sky-500/5 group-hover:to-indigo-500/5 transition-all"})]})},I7=({org:t})=>{var e;return n.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-white border border-slate-200 p-5 flex flex-col shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-400 min-h-[280px]",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx("div",{className:"relative h-12 w-12 rounded-xl overflow-hidden ring-2 ring-white shadow-md flex-shrink-0 bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-sm font-bold items-center justify-center flex",children:t.image_url?n.jsx("img",{src:t.image_url,alt:t.name,className:"h-full w-full object-cover"}):t.name.split(" ").slice(0,2).map(s=>s[0]).join("").toUpperCase()}),n.jsxs("div",{className:"flex flex-col min-w-0",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-800 leading-snug line-clamp-2 group-hover:text-indigo-600 transition-colors",children:t.name}),n.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-blue-50 text-[10px] font-medium text-blue-600 border border-blue-200",children:[n.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-blue-500"}),t.location.split(",")[0]]}),(t.staff_count||t.staffCount)&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-purple-50 text-[10px] font-medium text-purple-600 border border-purple-200",children:[n.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-purple-500"}),t.staff_count||t.staffCount," staff"]})]})]})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed line-clamp-3 mb-3 flex-grow",children:t.description}),((e=t.focus_areas)==null?void 0:e.length)>0&&n.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[t.focus_areas.slice(0,3).map(s=>n.jsx("span",{className:"px-2 py-1 rounded-full text-[10px] font-semibold bg-slate-100 text-slate-600 border border-slate-200",children:s},s)),t.focus_areas.length>3&&n.jsxs("span",{className:"px-2 py-1 rounded-full text-[10px] font-semibold bg-slate-50 text-slate-400 border border-slate-200",children:["+",t.focus_areas.length-3]})]}),n.jsxs("a",{href:`/organizations/${t.slug}`,className:"mt-auto inline-flex items-center justify-center w-full text-[11px] font-semibold px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow hover:shadow-lg hover:from-indigo-700 hover:to-blue-700 transition-all",children:["View ",n.jsx("span",{className:"ml-1",children:"›"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/0 via-sky-500/0 to-indigo-500/0 opacity-0 group-hover:opacity-100 group-hover:from-indigo-500/5 group-hover:via-sky-500/5 group-hover:to-indigo-500/5 transition-all"})]})},B7=()=>n.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
    body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    .tracking-tighter { letter-spacing: -0.05em; }
    .scroller { overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; }
    .scroller::-webkit-scrollbar { display: none; }
    .scroller-inner { display: flex; gap: 1.5rem; animation: scroll 80s linear infinite; width: calc(300px * 18 + 1.5rem * 17); }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(calc(-300px * 9 - 1.5rem * 8)); }
    }
    .scroller:hover .scroller-inner { animation-play-state: paused; }
    .magical-hover { transition: all 0.3s ease; cursor: pointer; }
    .magical-hover:hover { text-shadow: 0 0 20px rgba(255, 255, 255, 0.8); transform: scale(1.05); }
    @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fade-out-up { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-20px); } }
    .fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
    .fade-out-up { animation: fade-out-up 0.5s ease-in forwards; }
    @media (max-width: 768px) {
      .scroller-inner { animation-duration: 60s; }
    }
  `}),ly={Search:t=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("path",{d:"m21 21-4.3-4.3"})]}),ArrowRight:t=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[n.jsx("path",{d:"M5 12h14"}),n.jsx("path",{d:"m12 5 7 7-7 7"})]}),Plus:t=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})},_C=["build","learn","grow","work"],CC=[{type:"image",title:"Mission Economic Development Agency",image:"https://media.licdn.com/dms/image/v2/C561BAQGwhXHEN7fTVg/company-background_10000/company-background_10000/0/1585481344716/mission_economic_development_agency_cover?e=2147483647&v=beta&t=qypVn1yoDmdyZVIuhXoxuGyv7JmMM-NmkuNdv8OPtnI"},{type:"video",title:"",videoSrc:"https://videos.pexels.com/video-files/9363691/9363691-hd_1080_1920_25fps.mp4"},{type:"image",title:"Pacific Islander Community Partnership",image:"https://scontent-sjc3-1.xx.fbcdn.net/v/t39.30808-6/480823688_957226053233118_926561803234476192_n.jpg?stp=cp6_dst-jpg_tt6&_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=aox946v1B-cQ7kNvwE20EdA&_nc_oc=Adkk_cPsfZAJmE81L5KbdGAmSfFbhzwVOQz_tll4VOlxc2cU5yE4wDyg_l7WK17UGoU&_nc_zt=23&_nc_ht=scontent-sjc3-1.xx&_nc_gid=5qjemzmdB3TZWjKjAHNj6Q&oh=00_AfXV00wQzOlwAV79ZcCXqzfmxtcxWP3pipfGqXo68WhIXw&oe=68AE0246"},{type:"image",title:"Future Construction Leaders Silicon Valley",image:"https://images.squarespace-cdn.com/content/v1/64bfe92e203a2c626566aaca/1751316493749-Z5OFLWE8QBDIP9H05ST6/DSC00129.JPG"},{type:"video",title:"",videoSrc:"https://videos.pexels.com/video-files/3191353/3191353-uhd_2732_1440_25fps.mp4"},{type:"image",title:"The RILEY Project",image:"https://scontent-sjc6-1.xx.fbcdn.net/v/t39.30808-6/480182066_674930054891057_6225268670759551493_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=127cfc&_nc_ohc=bBeS_lu6fwYQ7kNvwFhwpux&_nc_oc=AdlxjAr1GRJ3cNfUPDVVn8xruH1vY2_JwDpMeXm7GDAeDAfZ6aPLAtCEpbPOaiaHzXM&_nc_zt=23&_nc_ht=scontent-sjc6-1.xx&_nc_gid=QqwEgyvQYuHiguDY668Dbg&oh=00_AfVirmDp3xJdnb-OQ7VDapsn6c8yzDN_G-s6VuFwAOXqcw&oe=68AB250F"},{type:"image",title:"Pilipino Bayanihan Resource Center",image:"https://static.wixstatic.com/media/de0c33_57840cb972484c00ae6423895af087a2~mv2_d_2048_1365_s_2.jpg/v1/fill/w_640,h_808,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/de0c33_57840cb972484c00ae6423895af087a2~mv2_d_2048_1365_s_2.jpg"},{type:"video",title:"",videoSrc:"https://videos.pexels.com/video-files/6893839/6893839-uhd_2560_1440_25fps.mp4"},{type:"image",title:"Dev/Mission",image:"https://devmission.org/wp-content/uploads/2024/08/53835579331_8a5c917d82_k.jpg"}],U7=[{title:"Fund Your Mission",description:"Discover and access the right funding opportunities to power your vision and drive your mission forward—all in one place.",image:"https://images.unsplash.com/photo-1569292567773-229e2b7521ee?q=80&w=689&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Build Your Capacity",description:"Connect with a supportive community, gain new skills, and access resources to strengthen your organization and team.",image:"https://plus.unsplash.com/premium_photo-1705882849674-e8ecc5e53f6e?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{title:"Scale Your Impact",description:"Grow your reach, amplify your results, and make a bigger difference with tools and connections designed to help you scale.",image:"https://images.unsplash.com/photo-1544928147-79a2dbc1f389?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],V7=[{id:"fallback-1",title:"Community Health Accelerator",grant_type:"Program",max_funding_amount:25e4,funding_amount_text:"$250K",short_description:"Supporting innovative health equity programs improving access & outcomes.",funder_name:"Health Equity Foundation"},{id:"fallback-2",title:"Youth Innovation Seed",grant_type:"Seed",max_funding_amount:5e4,funding_amount_text:"$50K",short_description:"Early-stage support for youth-led social impact and STEM initiatives.",funder_name:"Youth Impact Lab"},{id:"fallback-3",title:"Housing Justice Impact",grant_type:"Impact",max_funding_amount:15e4,funding_amount_text:"$150K",short_description:"Funding collaborative solutions addressing regional housing insecurity.",funder_name:"Housing Justice Fund"}],q7=[{slug:"mission-economic-development-agency",name:"Mission Economic Development Agency",description:"Advancing economic equity for Latino & immigrant families through housing, education, and small business support.",focus_areas:["Community","Housing","Education"],type:"nonprofit",location:"San Francisco, CA",followers_count:182,likes_count:91,staff_count:120,banner_image_url:"https://images.unsplash.com/photo-1509395062183-67c5ad6faff9?q=80&w=1200&auto=format&fit=crop",image_url:"https://devmission.org/wp-content/uploads/2024/08/53835579331_8a5c917d82_k.jpg"},{slug:"pacific-islander-community-partnership",name:"Pacific Islander Community Partnership",description:"Building leadership & cultural resilience across Pacific Islander communities in the Bay Area.",focus_areas:["Culture","Health","Education"],type:"nonprofit",location:"San Mateo County, CA",followers_count:76,likes_count:44,staff_count:18,banner_image_url:"https://images.unsplash.com/photo-1526481280698-8fcc1ddfc1f8?q=80&w=1200&auto=format&fit=crop",image_url:"https://scontent-sjc3-1.xx.fbcdn.net/v/t39.30808-6/480823688_957226053233118_926561803234476192_n.jpg"},{slug:"future-construction-leaders-sv",name:"Future Construction Leaders SV",description:"Empowering young adults with technical skills & pathways to careers in sustainable construction.",focus_areas:["Workforce Development","Technology","Education"],type:"nonprofit",location:"Santa Clara County, CA",followers_count:54,likes_count:21,staff_count:9,banner_image_url:"https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=1200&auto=format&fit=crop",image_url:"https://images.squarespace-cdn.com/content/v1/64bfe92e203a2c626566aaca/1751316493749-Z5OFLWE8QBDIP9H05ST6/DSC00129.JPG"},{slug:"the-riley-project",name:"The RILEY Project",description:"Cultivating youth leadership & innovation through collaborative STEM and community programs.",focus_areas:["Youth","STEM","Community"],type:"nonprofit",location:"Alameda County, CA",followers_count:61,likes_count:27,staff_count:14,banner_image_url:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=1200&auto=format&fit=crop",image_url:"https://images.unsplash.com/photo-1551836022-4c4c79ecde16?q=80&w=400&auto=format&fit=crop"}],H7=[{full_name:"Alicia Gomez"},{full_name:"Marcus Chen"},{full_name:"Priya Patel"},{full_name:"Samira Khalid"},{full_name:"Jordan Lee"},{full_name:"Devon Wright"}],G7=({item:t})=>n.jsxs("div",{className:"relative w-[300px] h-[400px] flex-shrink-0 rounded-2xl overflow-hidden group shadow-lg bg-slate-800",children:[t.type==="video"?n.jsx("video",{src:t.videoSrc,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):n.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),t.title&&n.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:n.jsx("h3",{className:"text-white text-lg font-semibold",children:t.title})})]}),W7=({feature:t})=>n.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-lg h-full min-h-[400px] md:min-h-[600px] group transition-transform duration-300 ease-in-out hover:scale-105",children:[n.jsx("img",{src:t.image,alt:t.title,className:"absolute inset-0 w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-black/10"}),n.jsxs("div",{className:"relative h-full flex flex-col justify-end p-4 md:p-6 text-white",children:[n.jsx("h3",{className:"text-lg md:text-xl font-bold",children:t.title}),n.jsx("p",{className:"mt-2 text-sm md:text-base text-white/90",children:t.description}),n.jsx("div",{className:"absolute top-4 right-4 h-8 w-8 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center group-hover:bg-white transition-colors",children:n.jsx(ly.Plus,{className:"h-5 w-5 text-white group-hover:text-black transition-colors"})})]})]}),ef=({targetValue:t})=>{const[e,s]=y.useState(0),[r,a]=y.useState(!1),i=y.useRef(null);y.useEffect(()=>{const c=()=>a(window.innerWidth<768);return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),y.useEffect(()=>{const c=new IntersectionObserver(([d])=>{if(d.isIntersecting){let h=0;const m=t;let p=2e3,g=null;const b=v=>{g||(g=v);const N=Math.min((v-g)/p,1);s(Math.floor(N*(m-h)+h)),N<1&&requestAnimationFrame(b)};requestAnimationFrame(b),c.unobserve(i.current)}},{threshold:.5});return i.current&&c.observe(i.current),()=>c.disconnect()},[t]);const o=c=>{if(r){if(c>=1e6)return`${(c/1e6).toFixed(1)}M`;if(c>=1e3)return`${(c/1e3).toFixed(0)}K`}return c.toLocaleString()};return n.jsx("span",{ref:i,children:o(e)})};function Y7(){const[t,e]=y.useState("bg-white"),[s,r]=y.useState(0),[a,i]=y.useState("entering"),[o,c]=y.useState(875e5),[d,h]=y.useState({members:0,organizations:0,funders:0}),[m,p]=y.useState(H7),[g,b]=y.useState(V7),v=y.useRef(null);y.useEffect(()=>{(async()=>{try{const{data:_,error:k}=await $.from("grants_with_taxonomy").select("max_funding_amount, funding_amount_text, deadline").order("id",{ascending:!1});if(k)throw k;if(_&&_.length>0){const C=_.filter(E=>!E.deadline||new Date(E.deadline)>=new Date).reduce((E,A)=>{const M=parseFloat(A.max_funding_amount)||Kn(A.funding_amount_text)||0;return E+(isNaN(M)?0:M)},0);c(C||875e5)}}catch(_){console.error("Error fetching grants data:",_.message)}})()},[]),y.useEffect(()=>{let w;return a==="entering"?w=setTimeout(()=>i("leaving"),2e3):w=setTimeout(()=>{r(_=>(_+1)%_C.length),i("entering")},500),()=>clearTimeout(w)},[a,s]),y.useEffect(()=>(e("bg-white"),()=>e("bg-white")),[e]),y.useEffect(()=>{(async()=>{try{const[_,k,C]=await Promise.all([$.from("profiles").select("id",{count:"exact",head:!0}),$.from("organizations").select("id",{count:"exact",head:!0}),$.from("organizations").select("id",{count:"exact",head:!0}).eq("type","foundation")]);h({members:(_==null?void 0:_.count)||0,organizations:(k==null?void 0:k.count)||0,funders:(C==null?void 0:C.count)||Math.round(((k==null?void 0:k.count)||0)*.18)})}catch{h({members:2347,organizations:512,funders:94})}})()},[]),y.useEffect(()=>{(async()=>{try{const{data:_,error:k}=await $.from("profiles").select("id, full_name, avatar_url").order("last_sign_in_at",{ascending:!1}).limit(6);if(k)throw k;_&&_.length&&p(_)}catch{}})()},[]),y.useEffect(()=>{(async()=>{try{const{data:_,error:k}=await $.from("grants_with_taxonomy").select("id,title,grant_type,short_description,summary,max_funding_amount,funding_amount_text,deadline,funder_logo_url,funder_name,funder_slug").order("id",{ascending:!1}).limit(18);if(k)throw k;let C=_||[];const E=C.filter(M=>!M.funder_logo_url&&M.funder_slug).map(M=>M.funder_slug);if(E.length){const M=[...new Set(E)],{data:R}=await $.from("organizations").select("slug,image_url").in("slug",M);R&&(C=C.map(D=>{const L=R.find(B=>B.slug===D.funder_slug);return L&&!D.funder_logo_url?{...D,funder_logo_url:L.image_url}:D}))}const A=C.filter(M=>!M.deadline||new Date(M.deadline)>=new Date);A.sort((M,R)=>{const D=parseFloat(M.max_funding_amount)||Kn(M.funding_amount_text)||0,L=parseFloat(R.max_funding_amount)||Kn(R.funding_amount_text)||0;if(L!==D)return L-D;const B=M.deadline?new Date(M.deadline):new Date("9999-12-31"),O=R.deadline?new Date(R.deadline):new Date("9999-12-31");return B-O}),b((A.length?A:C).slice(0,3))}catch(_){console.warn("Using fallback funds on homepage",_.message)}})()},[]);const N=w=>{const _=parseFloat(w.max_funding_amount)||Kn(w.funding_amount_text)||0;return _>=1e6?`$${(_/1e6).toFixed(1)}M`:_>=1e3?`$${(_/1e3).toFixed(0)}K`:_?`$${_.toLocaleString()}`:w.funding_amount_text||"—"},j=_C[s];return n.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t}`,children:[n.jsx(B7,{}),n.jsxs("main",{children:[n.jsx("section",{className:"relative py-16 sm:py-20 md:py-28 overflow-hidden bg-white",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[n.jsx("div",{className:"order-2 lg:order-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:"https://images.pexels.com/photos/3584437/pexels-photo-3584437.jpeg",alt:"San Francisco Golden Gate Bridge",className:"w-full h-[400px] md:h-[500px] lg:h-[600px] object-cover rounded-2xl shadow-2xl"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-2xl"}),n.jsx("div",{className:"absolute inset-0 flex items-start justify-center pt-16 md:pt-20 lg:pt-24 p-8",children:n.jsxs("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-black text-white text-center leading-tight tracking-tight drop-shadow-lg",children:["Accessible Capital,",n.jsx("br",{}),"Powerful Community"]})})]})}),n.jsxs("div",{className:"order-1 lg:order-2 text-center lg:text-left",children:[n.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-extrabold text-slate-900 mb-4 sm:mb-6 leading-tight tracking-tighter",children:["Where community ",n.jsx("span",{className:"inline-block relative h-[1.2em] w-40 overflow-hidden align-middle",children:n.jsx("span",{className:`absolute inset-0 text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-blue-600 ${a==="entering"?"fade-in-up":"fade-out-up"}`,children:j})})," together."]}),n.jsxs("p",{className:"max-w-lg sm:max-w-xl md:max-w-2xl lg:max-w-none text-base sm:text-lg md:text-xl text-slate-700 mb-8 sm:mb-10 leading-relaxed font-display px-4 sm:px-0 lg:px-0",children:["A space for Bay Area 🌉  changemakers to",n.jsx("span",{className:"text-pink-500 font-semibold animate-bounce-slow",children:" connect "})," 🤝,",n.jsx("span",{className:"text-emerald-500 font-semibold animate-bounce-slow",children:" dream "})," 🫶, and",n.jsx("span",{className:"text-sky-500 font-semibold animate-bounce-slow",children:" build "})," 🏗️ something",n.jsx("span",{className:"magical-hover font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-400 transition-all duration-500 ease-in-out hover:brightness-125 hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]",children:" magical "})," 🌟 together."]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center lg:items-start lg:justify-start justify-center gap-3 sm:gap-4 px-4 sm:px-0 lg:px-0",children:[n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-3.5 font-semibold rounded-full text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 w-full sm:w-auto text-sm sm:text-base",children:["Find Funding ",n.jsx(ly.Search,{className:"ml-2",size:18})]}),n.jsxs("a",{href:"/login?view=signup",className:"inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-3.5 font-semibold rounded-full text-blue-700 bg-blue-100 hover:bg-blue-200/70 transition-colors duration-300 w-full sm:w-auto text-sm sm:text-base",children:["Sign Up ",n.jsx(ly.ArrowRight,{className:"ml-2",size:18})]})]})]})]})})}),n.jsx("section",{className:"py-4 md:py-8 bg-white",children:n.jsx("div",{ref:v,className:"scroller w-full overflow-hidden cursor-grab active:cursor-grabbing",children:n.jsx("div",{className:"scroller-inner",children:[...CC,...CC].map((w,_)=>n.jsx(G7,{item:w},_))})})}),n.jsx("section",{className:"py-12 md:py-20",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12 items-center",children:[n.jsxs("div",{className:"text-center lg:text-left",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-800 leading-tight",children:"Unlock Millions in Funding Opportunities"}),n.jsx("p",{className:"mt-4 text-base md:text-lg text-slate-600 max-w-xl mx-auto lg:mx-0",children:"Our platform aggregates opportunities from across the Bay Area, putting a comprehensive database of funding at your fingertips."})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-5xl md:text-6xl lg:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-teal-500",children:["$",n.jsx(ef,{targetValue:o})]}),n.jsx("p",{className:"mt-2 text-base md:text-lg font-semibold text-slate-600",children:"Total Funding Available"})]})]})})}),n.jsx("section",{className:"relative py-16 md:py-24 overflow-hidden bg-white",children:n.jsx("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid lg:grid-cols-5 gap-10 md:gap-14 items-stretch",children:[n.jsxs("div",{className:"lg:col-span-2 flex flex-col",children:[n.jsxs("h2",{className:"text-3xl md:text-4xl font-extrabold tracking-tight mb-6 leading-tight",children:["The Bay Area Impact ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-emerald-500 to-teal-600",children:"Ecosystem"})," Lives Here"]}),n.jsx("p",{className:"text-slate-600 text-base md:text-lg leading-relaxed mb-8",children:"Fundspace isn't just a database—it is a living network of funders, nonprofits, builders, and innovators. Explore local organizations, active funds, and the humans behind the work."}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-10",children:[n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-slate-200 rounded-2xl p-4 text-center shadow-sm",children:[n.jsx("p",{className:"text-2xl md:text-3xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-indigo-600",children:n.jsx(ef,{targetValue:d.members||0})}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500",children:"Members"})]}),n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-slate-200 rounded-2xl p-4 text-center shadow-sm",children:[n.jsx("p",{className:"text-2xl md:text-3xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 to-teal-600",children:n.jsx(ef,{targetValue:d.organizations||0})}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500",children:"Organizations"})]}),n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm border border-slate-200 rounded-2xl p-4 text-center shadow-sm",children:[n.jsx("p",{className:"text-2xl md:text-3xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600",children:n.jsx(ef,{targetValue:d.funders||0})}),n.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500",children:"Funders"})]})]}),n.jsxs("div",{className:"flex -space-x-4 mb-8",children:[m.slice(0,5).map((w,_)=>n.jsx("div",{className:"relative inline-flex h-12 w-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 p-[2px] shadow-md hover:z-10 transition-transform hover:scale-110",children:n.jsx("div",{className:"h-full w-full rounded-[0.8rem] overflow-hidden bg-slate-100 flex items-center justify-center text-[10px] font-semibold text-slate-600",children:w.avatar_url?n.jsx("img",{src:w.avatar_url,alt:w.full_name,className:"h-full w-full object-cover"}):(w.full_name||"").split(" ").map(k=>k[0]).join("").toUpperCase()})},_)),n.jsxs("div",{className:"h-12 w-12 rounded-2xl bg-slate-800 flex items-center justify-center text-xs font-semibold text-white border-2 border-white",children:["+",Math.max(0,(d.members||0)-m.length)]})]}),n.jsx("p",{className:"text-xs md:text-sm text-slate-500 mb-8",children:"A growing network exchanging knowledge, unlocking capital, and building resilient communities."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("a",{href:"/organizations",className:"inline-flex items-center justify-center px-6 py-3 rounded-full bg-slate-900 text-white text-sm font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Explore Organizations"}),n.jsx("a",{href:"/grants",className:"inline-flex items-center justify-center px-6 py-3 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white text-sm font-semibold shadow-lg hover:from-emerald-600 hover:to-teal-700 hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Browse Funds"})]})]}),n.jsx("div",{className:"lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:q7.map(w=>n.jsx(I7,{org:w},w.slug))}),n.jsx("div",{className:"lg:col-span-1 flex flex-col gap-4",children:g.map(w=>n.jsx(F7,{grant:w,formatAmount:N},w.id))})]})})}),n.jsx("section",{className:"py-12 md:py-20",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[n.jsxs("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-black mb-4 leading-tight",children:[n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-500 drop-shadow-sm",children:"Fund."})," ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600 drop-shadow-sm",children:"Build."})," ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 drop-shadow-sm",children:"Scale."})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto",children:"From funding discovery to community building, we provide the tools and connections to help your organization thrive."})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-6 md:gap-8 h-auto md:h-[600px]",children:U7.map((w,_)=>n.jsx(W7,{feature:w},_))})]})})]})]})}const Su=async t=>{if(!t||t.length===0)return{};try{const{data:e,error:s}=await $.from("saved_grants").select("grant_id").in("grant_id",t);if(s)return console.error("Error fetching bookmark counts:",s),{};const r={};return e&&e.forEach(a=>{r[a.grant_id]=(r[a.grant_id]||0)+1}),r}catch(e){return console.error("Error in refreshGrantBookmarkCounts:",e),{}}};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),kC=t=>{const e=J7(t);return e.charAt(0).toUpperCase()+e.slice(1)},S3=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),X7=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...c},d)=>y.createElement("svg",{ref:d,...Q7,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:S3("lucide",a),...!i&&!X7(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,m])=>y.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const s=y.forwardRef(({className:r,...a},i)=>y.createElement(Z7,{ref:i,iconNode:e,className:S3(`lucide-${K7(kC(t))}`,`lucide-${t}`,r),...a}));return s.displayName=kC(t),s};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]],t$=je("apple",e$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Zn=je("arrow-left",s$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Nr=je("arrow-right",n$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],Fw=je("at-sign",r$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],p0=je("award",a$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],o$=je("badge-check",i$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],c$=je("bell-off",l$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Vo=je("bell",d$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],zi=je("bookmark",u$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],g0=je("bot",h$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],un=je("briefcase",m$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ut=je("building-2",f$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],er=je("building",p$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bs=je("calendar",g$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],hn=je("camera",x$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Pa=je("chart-column",b$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],y$=je("chart-no-axes-column",v$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],j$=je("chart-pie",w$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Iw=je("check",N$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ss=je("chevron-down",S$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tl=je("chevron-left",_$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],da=je("chevron-right",C$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E$=je("chevron-up",k$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],T$=je("chevrons-right",A$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M10 9h4",key:"u4k05v"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M14 22v-4a2 2 0 0 0-4 0v4",key:"1pdhuj"}],["path",{d:"M18 22V5.618a1 1 0 0 0-.553-.894l-4.553-2.277a2 2 0 0 0-1.788 0L6.553 4.724A1 1 0 0 0 6 5.618V22",key:"1rkokr"}],["path",{d:"m18 7 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.618a1 1 0 0 1 .553-.894L6 7",key:"1w6esw"}]],Bw=je("church",M$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cy=je("circle-alert",O$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ks=je("circle-check-big",R$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hi=je("circle-check",D$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],EC=je("circle-help",P$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Zf=je("circle-plus",z$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$$=je("circle-user",L$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sl=je("circle-x",F$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ep=je("clipboard-list",I$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],aa=je("clock",B$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Mi=je("cloud-upload",U$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],q$=je("coffee",V$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_3=je("compass",H$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Wu=je("crown",G$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Y$=je("database",W$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],an=je("dollar-sign",K$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],X$=je("download",J$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],C3=je("ellipsis-vertical",Q$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],x0=je("ellipsis",Z$);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Mn=je("external-link",eF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Yu=je("eye-off",tF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pn=je("eye",sF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],rF=je("facebook",nF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],iF=je("file-check",aF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zn=je("file-text",oF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],k3=je("folder",lF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],jh=je("funnel",cF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Br=je("globe",dF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Uw=je("graduation-cap",uF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],mF=je("grid-3x3",hF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],dy=je("handshake",fF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Nt=je("heart",pF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],tp=je("house",gF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bF=je("info",xF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],yF=je("instagram",vF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],jF=je("layout-dashboard",wF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],E3=je("layout-grid",NF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],b0=je("lightbulb",SF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],A3=je("link",_F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Vw=je("linkedin",CF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]],EF=je("list-filter",kF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],qw=je("list",AF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ab=je("loader-circle",TF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Li=je("loader",MF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sp=je("lock",OF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_c=je("log-out",RF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Yc=je("mail",DF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Lt=je("map-pin",PF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Hw=je("map",zF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],AC=je("maximize-2",LF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],T3=je("menu",$F);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Jn=je("message-circle",FF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],$r=je("message-square",IF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],TC=je("network",BF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],VF=je("palette",UF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],HF=je("paperclip",qF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],Gw=je("party-popper",GF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Gi=je("pen-line",WF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$s=je("plus",YF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],M3=je("reply",KF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rf=je("rocket",JF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tb=je("rotate-ccw",XF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],v0=je("save",QF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ot=je("search",ZF);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Cc=je("send",eI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O3=je("settings",tI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ww=je("share-2",sI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],R3=je("share",nI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],np=je("shield-check",rI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qo=je("shield",aI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],D3=je("sliders-horizontal",iI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],P3=je("smile",oI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Xt=je("sparkles",lI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dI=je("square-check-big",cI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Yw=je("square-pen",uI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mn=je("star",hI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Kw=je("stethoscope",mI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Mb=je("tag",fI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_s=je("target",pI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],y0=je("thumbs-up",gI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],tn=je("trash-2",xI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Cs=je("trending-up",bI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],On=je("triangle-alert",vI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Ro=je("trophy",yI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Jw=je("twitter",wI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],w0=je("upload",jI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],br=je("user-check",NI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rp=je("user-minus",SI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ia=je("user-plus",_I);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],ap=je("user-x",CI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],An=je("user",kI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qe=je("users",EI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ke=je("x",AI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],MI=je("youtube",TI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Nh=je("zap",OI),RI={"nonprofit.501c3":"501(c)(3) Nonprofits","nonprofit.501c4":"501(c)(4) Organizations","nonprofit.501c6":"Business Leagues","education.university":"Universities","education.k12":"K-12 Schools","education.research":"Research Institutions","healthcare.hospital":"Hospitals","healthcare.clinic":"Clinics","government.federal":"Federal Agencies","government.state":"State Agencies","government.local":"Local Government","foundation.family":"Family Foundations","foundation.community":"Community Foundations","foundation.corporate":"Corporate Foundations","forprofit.startup":"Startups","forprofit.socialenterprise":"Social Enterprises","forprofit.socialenterprise.bcorp":"B-Corporations","religious.church":"Religious Organizations"},DI=t=>({Arts:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200",Culture:"bg-gradient-to-r from-fuchsia-100 to-rose-100 text-fuchsia-700 border-fuchsia-200",Education:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 border-blue-200",Health:"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",Healthcare:"bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 border-teal-200",Environment:"bg-gradient-to-r from-green-100 to-lime-100 text-green-700 border-green-200",Housing:"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 border-orange-200",Technology:"bg-gradient-to-r from-cyan-100 to-sky-100 text-cyan-700 border-cyan-200",Innovation:"bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700 border-violet-200",Community:"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 border-rose-200","Community Development":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-200","Community Engagement":"bg-gradient-to-r from-pink-100 to-rose-100 text-pink-700 border-pink-200","Social Impact":"bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-700 border-indigo-200",Research:"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border-slate-200","Medical Research":"bg-gradient-to-r from-zinc-100 to-stone-100 text-zinc-700 border-zinc-200","Mental Health":"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-700 border-purple-200","Health Equity":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border-emerald-200","Chronic Disease Prevention":"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700 border-amber-200","Pediatric Health":"bg-gradient-to-r from-yellow-100 to-lime-100 text-yellow-700 border-yellow-200","Child Health Research":"bg-gradient-to-r from-lime-100 to-green-100 text-lime-700 border-lime-200","Pediatric Education":"bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 border-sky-200","Flood Management":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200","Habitat Restoration":"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200","Climate Justice":"bg-gradient-to-r from-teal-100 to-green-100 text-teal-700 border-teal-200","Climate Change":"bg-gradient-to-r from-sky-100 to-indigo-100 text-sky-700 border-sky-200","Renewable Energy":"bg-gradient-to-r from-yellow-100 to-green-100 text-yellow-700 border-yellow-200",Sustainability:"bg-gradient-to-r from-emerald-100 to-lime-100 text-emerald-700 border-emerald-200",Conservation:"bg-gradient-to-r from-green-100 to-teal-100 text-green-700 border-green-200",Wildlife:"bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 border-teal-200","Food Production Workers' Health and Safety":"bg-gradient-to-r from-orange-100 to-red-100 text-orange-700 border-orange-200","Worker Safety":"bg-gradient-to-r from-red-100 to-orange-100 text-red-700 border-red-200","Labor Rights":"bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 border-purple-200","Workplace Safety":"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border-amber-200",Sports:"bg-gradient-to-r from-orange-100 to-red-100 text-orange-700 border-orange-200",Recreation:"bg-gradient-to-r from-pink-100 to-rose-100 text-pink-700 border-pink-200","Youth Development":"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200","Senior Services":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-700 border-gray-200","Disability Services":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200","Economic Development":"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200","Food Security":"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border-amber-200",Agriculture:"bg-gradient-to-r from-lime-100 to-yellow-100 text-lime-700 border-lime-200","Social Justice":"bg-gradient-to-r from-red-100 to-pink-100 text-red-700 border-red-200","Human Rights":"bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 border-purple-200","Civil Rights":"bg-gradient-to-r from-indigo-100 to-violet-100 text-indigo-700 border-indigo-200",Immigration:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 border-blue-200","Criminal Justice":"bg-gradient-to-r from-slate-100 to-zinc-100 text-slate-700 border-slate-200","International Development":"bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 border-cyan-200","Global Health":"bg-gradient-to-r from-teal-100 to-emerald-100 text-teal-700 border-teal-200","Disaster Relief":"bg-gradient-to-r from-red-100 to-orange-100 text-red-700 border-red-200","Emergency Services":"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 border-orange-200","Public Safety":"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700 border-amber-200"})[t]||"bg-gradient-to-r from-slate-100 to-zinc-100 text-slate-700 border-slate-200",PI=t=>{const e={nonprofit:"bg-gradient-to-r from-rose-100 to-red-100 text-rose-700 border-rose-200",education:"bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-700 border-indigo-200",healthcare:"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",government:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200",foundation:"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-700 border-purple-200",forprofit:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200",religious:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700 border-amber-200",international:"bg-gradient-to-r from-cyan-100 to-teal-100 text-cyan-700 border-cyan-200"},s=t.split(".")[0];return e[s]||"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border-slate-200"},zI=t=>{const e={"San Francisco":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-200","San Francisco County":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-200",Alameda:"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 border-orange-200","Alameda County":"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 border-orange-200","Contra Costa":"bg-gradient-to-r from-yellow-100 to-lime-100 text-yellow-700 border-yellow-200","Contra Costa County":"bg-gradient-to-r from-yellow-100 to-lime-100 text-yellow-700 border-yellow-200","San Mateo":"bg-gradient-to-r from-lime-100 to-green-100 text-lime-700 border-lime-200","San Mateo County":"bg-gradient-to-r from-lime-100 to-green-100 text-lime-700 border-lime-200","Santa Clara":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border-emerald-200","Santa Clara County":"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border-emerald-200",Marin:"bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 border-teal-200","Marin County":"bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 border-teal-200",Sonoma:"bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 border-sky-200","Sonoma County":"bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 border-sky-200",Solano:"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 border-indigo-200","Solano County":"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 border-indigo-200",Napa:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200","Napa County":"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200",Oakland:"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border-amber-200",Berkeley:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 border-blue-200","San Jose":"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200",Fremont:"bg-gradient-to-r from-orange-100 to-red-100 text-orange-700 border-orange-200",Hayward:"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-700 border-yellow-200",Sunnyvale:"bg-gradient-to-r from-cyan-100 to-teal-100 text-cyan-700 border-cyan-200","Santa Clara":"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200","Mountain View":"bg-gradient-to-r from-teal-100 to-emerald-100 text-teal-700 border-teal-200","Palo Alto":"bg-gradient-to-r from-lime-100 to-green-100 text-lime-700 border-lime-200","Redwood City":"bg-gradient-to-r from-green-100 to-lime-100 text-green-700 border-green-200","Bay Area":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200","San Francisco Bay Area":"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200","Northern California":"bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-700 border-indigo-200",California:"bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 border-purple-200","United States":"bg-gradient-to-r from-red-100 to-blue-100 text-slate-700 border-slate-200",National:"bg-gradient-to-r from-slate-100 to-zinc-100 text-slate-700 border-slate-200",International:"bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-700 border-teal-200"};if(e[t])return e[t];const s=t.toLowerCase();for(const[r,a]of Object.entries(e))if(s.includes(r.toLowerCase()))return a;return e[t]||"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border-slate-200"},Xw=({grant:t,onOpenDetailModal:e,onFilterByCategory:s,onSave:r,onUnsave:a,isSaved:i,session:o,userOrganizationType:c=null})=>{var k,C;const d=bt(),[h,m]=y.useState(!1),p=new Date;p.setHours(0,0,0,0);let g=!1,b=null,v=!1;if(t.dueDate){const E=new Date(t.dueDate);b=Math.ceil((E.getTime()-p.getTime())/(1e3*3600*24)),g=b>=0&&b<=14,v=E<p}const N=y.useMemo(()=>!c||!t.eligible_organization_types?!0:t.eligible_organization_types.some(E=>E.startsWith(c)||E===c),[c,t.eligible_organization_types]),j=E=>{if(!E)return"?";const A=E.split(" ");return A.length>1?(A[0][0]+A[1][0]).toUpperCase():E.substring(0,2).toUpperCase()},w=E=>{if(typeof E=="string"&&E.includes("$"))return E;const A=(E==null?void 0:E.toString().replace(/[^0-9]/g,""))||"0",M=parseInt(A);return M>=1e6?`$${(M/1e6).toFixed(1)}M`:M>=1e3?`$${(M/1e3).toFixed(0)}K`:`$${M.toLocaleString()}`},_=E=>{if(E.stopPropagation(),!o){d("/login");return}i?a(t.id):r(t.id)};return n.jsxs("div",{className:`group relative bg-white rounded-xl border border-slate-200 overflow-hidden transition-all duration-300 ease-out transform hover:-translate-y-1 hover:shadow-lg cursor-pointer h-full flex flex-col ${h?"scale-[1.01]":""} ${N?"":"opacity-80"} ${v?"opacity-60":""}`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:()=>e(t),children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-28 bg-gradient-to-br from-slate-100 via-white to-slate-100",children:((k=t.organization)==null?void 0:k.banner_image_url)&&n.jsx("img",{src:t.organization.banner_image_url,alt:`${t.foundationName} banner`,className:"w-full h-full object-cover"})}),n.jsx("div",{className:"absolute bottom-0 left-4 translate-y-1/2 transform transition-transform duration-300 group-hover:scale-105 cursor-pointer",onClick:E=>{E.stopPropagation(),d(`/organizations/${t.funderSlug}`)},children:(C=t.organization)!=null&&C.image_url?n.jsx("img",{src:t.organization.image_url,alt:`${t.foundationName} logo`,className:"h-16 w-16 rounded-xl object-cover border-4 border-white shadow-lg bg-white"}):n.jsx("div",{className:"h-16 w-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-bold text-xl shadow-lg border-4 border-white",children:j(t.foundationName)})})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),n.jsxs("div",{className:"absolute top-3 right-3 z-10 flex flex-col gap-1",children:[!N&&n.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm flex items-center gap-1",children:[n.jsx(np,{size:10}),"Check"]}),v&&n.jsx("div",{className:"bg-gradient-to-r from-slate-400 to-slate-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:"EXPIRED"}),g&&!v&&n.jsx("div",{className:"bg-gradient-to-r from-red-400 to-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:b===1?"DUE TOMORROW":b===0?"DUE TODAY":`${b}d left`}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm flex items-center gap-1",children:[n.jsx(zi,{size:10,fill:"currentColor"}),t.save_count||0]})]}),n.jsxs("div",{className:"p-4 pt-12 relative z-0 flex-grow flex flex-col",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx(Ye,{to:`/organizations/${t.funderSlug}`,className:"font-semibold text-slate-800 text-base hover:text-blue-600 transition-colors duration-300 block truncate",onClick:E=>{v&&E.preventDefault(),E.stopPropagation()},children:t.foundationName}),t.grantType&&n.jsx("span",{className:"inline-block mt-1 text-xs bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 px-2 py-0.5 rounded-full font-medium border border-blue-200",children:t.grantType})]}),n.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300 line-clamp-2 leading-tight",children:t.title}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-3 line-clamp-3 h-[4.25rem]",children:t.description}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-2 rounded-lg border border-green-100 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(an,{size:12,className:"text-green-600"}),n.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Funding"})]}),n.jsx("div",{className:"text-sm font-bold text-green-800",children:w(t.fundingAmount)})]}),n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 p-2 rounded-lg border border-red-100 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(bs,{size:12,className:"text-red-600"}),n.jsx("span",{className:"text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Due"})]}),n.jsx("div",{className:"text-xs font-bold text-red-800",children:t.dueDate?oy(t.dueDate):"Rolling"})]})]}),t.locations&&t.locations.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Lt,{size:12,className:"text-blue-500"}),n.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Location"})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.locations.slice(0,3).map((E,A)=>n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full border transition-all duration-300 ${zI(E.name)}`,children:E.name},A)),t.locations.length>3&&n.jsxs("span",{className:"text-xs text-slate-500 px-2 py-1",children:["+",t.locations.length-3]})]})]}),t.categories&&t.categories.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(_s,{size:12,className:"text-purple-500"}),n.jsx("span",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Focus Areas"})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.categories.slice(0,3).map((E,A)=>{const M=E.name||E;return n.jsx("button",{disabled:v,onClick:R=>{R.stopPropagation(),s(M)},className:`text-xs font-semibold px-2 py-1 rounded-full transition-all duration-300 transform hover:scale-105 active:scale-95 border ${DI(M)} ${v?"cursor-not-allowed opacity-50":"hover:shadow-sm"}`,children:M},E.id||A)}),t.categories.length>3&&n.jsxs("span",{className:"text-xs text-slate-500 px-2 py-1 bg-slate-100 rounded-full font-medium",children:["+",t.categories.length-3]})]})]}),t.eligible_organization_types&&t.eligible_organization_types.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(qe,{size:12,className:"text-emerald-500"}),n.jsx("span",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wide",children:"Eligible"})]}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.eligible_organization_types.slice(0,3).map((E,A)=>{const M=RI[E]||E,R=c&&E.startsWith(c);return n.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full border transition-all duration-300 ${R?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-300":PI(E)}`,children:[R&&"✓ ",M]},A)}),t.eligible_organization_types.length>3&&n.jsxs("span",{className:"text-xs text-slate-500 px-2 py-1 bg-slate-100 rounded-full font-medium",children:["+",t.eligible_organization_types.length-3]})]})]})]}),n.jsxs("div",{className:"px-4 pb-4 flex justify-between items-center relative z-0 mt-auto",children:[n.jsxs("button",{onClick:E=>{E.stopPropagation(),e(t)},disabled:v,className:`group/btn flex items-center gap-2 px-4 py-2 font-semibold rounded-lg shadow-sm transition-all duration-300 transform hover:scale-105 hover:shadow-md disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none flex-1 mr-2 justify-center text-sm ${N&&!v?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":"bg-gradient-to-r from-slate-400 to-slate-500 text-white"}`,children:[n.jsx(Xt,{size:14,className:"group-hover/btn:animate-pulse"}),"Details"]}),n.jsx("button",{onClick:_,disabled:v,className:`p-2 rounded-lg transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${i&&o?"bg-gradient-to-r from-pink-500 to-rose-500 text-white hover:from-pink-600 hover:to-rose-600":"bg-white text-slate-500 border border-slate-200 hover:bg-slate-50 hover:border-slate-300"}`,title:i&&o?"Unsave this grant":"Save this grant",children:n.jsx(zi,{size:16,fill:i&&o?"currentColor":"none"})})]})]})},LI={"nonprofit.501c3":"501(c)(3) Nonprofits","nonprofit.501c4":"501(c)(4) Organizations","nonprofit.501c6":"Business Leagues","education.university":"Universities","education.k12":"K-12 Schools","education.research":"Research Institutions","healthcare.hospital":"Hospitals","healthcare.clinic":"Clinics","government.federal":"Federal Agencies","government.state":"State Agencies","government.local":"Local Government","foundation.family":"Family Foundations","foundation.community":"Community Foundations","foundation.corporate":"Corporate Foundations","forprofit.startup":"Startups","forprofit.socialenterprise":"Social Enterprises","forprofit.socialenterprise.bcorp":"B-Corporations","religious.church":"Religious Organizations"},$I=t=>({Arts:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200",Culture:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 border-purple-200",Education:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 border-blue-200",Health:"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",Healthcare:"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",Environment:"bg-gradient-to-r from-green-100 to-teal-100 text-green-700 border-green-200",Housing:"bg-gradient-to-r from-orange-100 to-amber-100 text-orange-700 border-orange-200",Technology:"bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 border-cyan-200",Innovation:"bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700 border-violet-200",Community:"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 border-rose-200","Community Development":"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 border-rose-200","Social Impact":"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 border-indigo-200",Research:"bg-gradient-to-r from-slate-100 to-blue-100 text-slate-700 border-slate-200"})[t]||"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border-slate-200",FI=t=>{const e={nonprofit:"bg-gradient-to-r from-rose-100 to-red-100 text-rose-700 border-rose-200",education:"bg-gradient-to-r from-indigo-100 to-blue-100 text-indigo-700 border-indigo-200",healthcare:"bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",government:"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border-blue-200",foundation:"bg-gradient-to-r from-purple-100 to-violet-100 text-purple-700 border-purple-200",forprofit:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200",religious:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-700 border-amber-200",international:"bg-gradient-to-r from-cyan-100 to-teal-100 text-cyan-700 border-cyan-200"},s=t.split(".")[0];return e[s]||"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-700 border-slate-200"},Kc=({grant:t,isOpen:e,onClose:s,session:r,isSaved:a,onSave:i,onUnsave:o})=>{var j;const[c,d]=y.useState("overview");if(!e||!t)return null;const h={...t,foundationName:t.foundation_name||t.foundationName,funderLogoUrl:t.funderLogoUrl||null,fundingAmount:t.funding_amount_text||t.fundingAmount||"Not specified",dueDate:t.due_date||t.dueDate,url:t.application_url||t.url,eligibility_criteria:t.eligibility_criteria||t.eligibility},m=w=>{if(!w)return"?";const _=w.split(" ");return _.length>1&&_[0]&&_[1]?(_[0][0]+_[1][0]).toUpperCase():w.substring(0,2).toUpperCase()},p=w=>{if(typeof w=="string"&&w.includes("$"))return w;const _=(w==null?void 0:w.toString().replace(/[^0-9]/g,""))||"0",k=parseInt(_);return k>=1e6?`$${(k/1e6).toFixed(1)}M`:k>=1e3?`$${(k/1e3).toFixed(0)}K`:`$${k.toLocaleString()}`},g=async()=>{if(r)try{a?await o(t.id):await i(t.id)}catch(w){console.error("Error handling bookmark:",w)}},b=h.dueDate&&new Date(h.dueDate)<=new Date(Date.now()+14*24*60*60*1e3),v=h.dueDate&&new Date(h.dueDate)<new Date,N=[{id:"overview",label:"Overview",icon:bF},{id:"eligibility",label:"Eligibility",icon:np},{id:"details",label:"Details",icon:zn}];return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden border border-white/20",children:[n.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 border-b border-slate-200",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/10 to-purple-600/10 rounded-full -translate-y-8 translate-x-8"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-pink-400/10 to-rose-600/10 rounded-full translate-y-4 -translate-x-4"})]}),n.jsxs("div",{className:"relative flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 pr-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[v&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-slate-400 to-slate-500 text-white text-sm font-semibold rounded-full",children:[n.jsx(cy,{size:14}),"Expired"]}),b&&!v&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-red-400 to-orange-500 text-white text-sm font-semibold rounded-full animate-pulse",children:[n.jsx(aa,{size:14}),"Ending Soon"]}),h.grantType&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 text-sm font-semibold rounded-full border border-blue-200",children:[n.jsx(p0,{size:14}),h.grantType]})]}),n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 mb-3 leading-tight",children:h.title}),n.jsxs("div",{className:"flex items-center",children:[h.funderLogoUrl?n.jsx("img",{src:h.funderLogoUrl,alt:`${h.foundationName} logo`,className:"h-10 w-10 mr-3 rounded-xl object-cover border-2 border-white shadow-lg",onError:w=>{w.currentTarget.style.display="none",w.currentTarget.nextSibling.style.display="flex"}}):null,n.jsx("div",{className:`h-10 w-10 mr-3 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-bold text-sm shadow-lg ${h.funderLogoUrl?"hidden":"flex"}`,children:m(h.foundationName)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-semibold text-slate-700",children:h.foundationName}),n.jsx("p",{className:"text-sm text-slate-500",children:"Grant Funder"})]})]})]}),n.jsx("button",{onClick:s,className:"p-2 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white transition-colors shadow-lg border border-white/40","aria-label":"Close modal",children:n.jsx(Ke,{size:24,className:"text-slate-600"})})]})]}),n.jsx("div",{className:"flex border-b border-slate-200 bg-slate-50",children:N.map(w=>{const _=w.icon;return n.jsxs("button",{onClick:()=>d(w.id),className:`flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition-all duration-300 ${c===w.id?"bg-white text-blue-600 border-b-2 border-blue-600 shadow-sm":"text-slate-600 hover:text-slate-800 hover:bg-white/50"}`,children:[n.jsx(_,{size:18}),n.jsx("span",{className:"hidden sm:inline",children:w.label})]},w.id)})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c==="overview"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-2xl border border-green-100",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:n.jsx(an,{size:20,className:"text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Funding Amount"}),n.jsx("p",{className:"text-xl font-bold text-green-800",children:p(h.fundingAmount)})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 p-4 rounded-2xl border border-red-100",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-xl",children:n.jsx(bs,{size:20,className:"text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-red-700",children:"Due Date"}),n.jsx("p",{className:"text-lg font-bold text-red-800",children:h.dueDate?oy(h.dueDate):"Rolling Deadline"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-2xl border border-blue-100",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:n.jsx(Lt,{size:20,className:"text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-blue-700",children:"Location"}),n.jsx("p",{className:"text-sm font-bold text-blue-800",children:((j=h.locations)==null?void 0:j.map(w=>w.name).join(", "))||"Not specified"})]})]})})]}),n.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[n.jsx(zn,{size:20,className:"text-slate-600"}),"Grant Description"]}),n.jsx("p",{className:"text-slate-700 leading-relaxed whitespace-pre-line",children:h.description})]}),h.categories&&h.categories.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(_s,{size:20,className:"text-slate-600"}),"Focus Areas & Categories"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:h.categories.map((w,_)=>{const k=w.name||w;return n.jsx("span",{className:`px-4 py-2 rounded-full font-semibold border transition-all duration-300 hover:scale-105 ${$I(k)}`,children:k},w.id||_)})})]})]}),c==="eligibility"&&n.jsxs("div",{className:"p-6 space-y-6",children:[h.eligible_organization_types&&h.eligible_organization_types.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(qe,{size:20,className:"text-slate-600"}),"Eligible Organization Types"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:h.eligible_organization_types.map((w,_)=>{const k=LI[w]||w;return n.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 hover:scale-105 ${FI(w)}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ks,{size:16,className:"flex-shrink-0"}),n.jsx("span",{className:"font-semibold",children:k})]})},_)})})]}),h.eligibility_criteria&&n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 p-6 rounded-2xl border border-indigo-100",children:[n.jsxs("h3",{className:"text-lg font-semibold text-indigo-800 mb-4 flex items-center gap-2",children:[n.jsx(np,{size:20,className:"text-indigo-600"}),"Detailed Eligibility Requirements"]}),n.jsx("div",{className:"prose prose-indigo max-w-none",children:n.jsx("p",{className:"text-indigo-700 leading-relaxed whitespace-pre-line",children:h.eligibility_criteria})})]}),n.jsxs("div",{className:"bg-amber-50 p-6 rounded-2xl border border-amber-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-amber-800 mb-3 flex items-center gap-2",children:[n.jsx(cy,{size:20,className:"text-amber-600"}),"Important Notes"]}),n.jsxs("ul",{className:"space-y-2 text-amber-700",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ks,{size:16,className:"text-amber-600 mt-0.5 flex-shrink-0"}),"Review all eligibility requirements carefully before applying"]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ks,{size:16,className:"text-amber-600 mt-0.5 flex-shrink-0"}),"Ensure your organization meets the funder's mission alignment"]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ks,{size:16,className:"text-amber-600 mt-0.5 flex-shrink-0"}),"Prepare required documentation in advance"]})]})]})]}),c==="details"&&n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-2xl border border-blue-100",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center gap-2",children:[n.jsx(Mn,{size:20,className:"text-blue-600"}),"Application Information"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/60 rounded-xl",children:[n.jsx("span",{className:"font-medium text-blue-700",children:"Application Deadline"}),n.jsx("span",{className:"font-bold text-blue-800",children:h.dueDate?oy(h.dueDate):"Rolling"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/60 rounded-xl",children:[n.jsx("span",{className:"font-medium text-blue-700",children:"Grant Type"}),n.jsx("span",{className:"font-bold text-blue-800",children:h.grantType||"General Grant"})]})]})]}),n.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Yc,{size:20,className:"text-slate-600"}),"Funder Information"]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl",children:[n.jsx(Ut,{size:18,className:"text-slate-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:h.foundationName}),n.jsx("p",{className:"text-sm text-slate-600",children:"Grant Funder"})]})]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-2xl border border-purple-100",children:[n.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center gap-2",children:[n.jsx(Xt,{size:20,className:"text-purple-600"}),"Next Steps"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/60 rounded-xl",children:[n.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm mt-0.5",children:"1"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-purple-800",children:"Review Requirements"}),n.jsx("p",{className:"text-sm text-purple-600",children:"Ensure your project aligns with the grant criteria"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/60 rounded-xl",children:[n.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm mt-0.5",children:"2"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-purple-800",children:"Prepare Application"}),n.jsx("p",{className:"text-sm text-purple-600",children:"Gather required documents and information"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/60 rounded-xl",children:[n.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm mt-0.5",children:"3"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-purple-800",children:"Submit Application"}),n.jsx("p",{className:"text-sm text-purple-600",children:"Apply through the official grant portal"})]})]})]})]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-200 bg-gradient-to-r from-slate-50 to-slate-100",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:s,className:"px-6 py-3 border border-slate-300 rounded-xl text-slate-700 bg-white hover:bg-slate-50 font-semibold transition-all duration-300 hover:shadow-lg",children:"Close"}),r&&n.jsxs("button",{onClick:g,className:`inline-flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg transform hover:scale-105 ${a?"bg-gradient-to-r from-pink-500 to-rose-500 text-white hover:from-pink-600 hover:to-rose-600":"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50"}`,children:[n.jsx(zi,{size:18,fill:a?"currentColor":"none"}),a?"Saved":"Save Grant"]})]}),h.url&&h.url!=="#"&&n.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 hover:from-blue-700 hover:to-purple-700",children:[n.jsx(Xt,{size:18}),"Apply for Grant",n.jsx(da,{size:18})]})]})})]})})};function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}function II(t,e){if(Ho(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(Ho(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z3(t){var e=II(t,"string");return Ho(e)=="symbol"?e:e+""}function pu(t,e,s){return(e=z3(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function MC(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function Xe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(s),!0).forEach(function(r){pu(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):MC(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function BI(t){if(Array.isArray(t))return t}function UI(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var r,a,i,o,c=[],d=!0,h=!1;try{if(i=(s=s.call(t)).next,e===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(r=i.call(s)).done)&&(c.push(r.value),c.length!==e);d=!0);}catch(m){h=!0,a=m}finally{try{if(!d&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function uy(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}function L3(t,e){if(t){if(typeof t=="string")return uy(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?uy(t,e):void 0}}function VI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function za(t,e){return BI(t)||UI(t,e)||L3(t,e)||VI()}function qI(t,e){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;s[r]=t[r]}return s}function Ha(t,e){if(t==null)return{};var s,r,a=qI(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(a[s]=t[s])}return a}var HI=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function GI(t){var e=t.defaultInputValue,s=e===void 0?"":e,r=t.defaultMenuIsOpen,a=r===void 0?!1:r,i=t.defaultValue,o=i===void 0?null:i,c=t.inputValue,d=t.menuIsOpen,h=t.onChange,m=t.onInputChange,p=t.onMenuClose,g=t.onMenuOpen,b=t.value,v=Ha(t,HI),N=y.useState(c!==void 0?c:s),j=za(N,2),w=j[0],_=j[1],k=y.useState(d!==void 0?d:a),C=za(k,2),E=C[0],A=C[1],M=y.useState(b!==void 0?b:o),R=za(M,2),D=R[0],L=R[1],B=y.useCallback(function(H,Y){typeof h=="function"&&h(H,Y),L(H)},[h]),O=y.useCallback(function(H,Y){var U;typeof m=="function"&&(U=m(H,Y)),_(U!==void 0?U:H)},[m]),P=y.useCallback(function(){typeof g=="function"&&g(),A(!0)},[g]),z=y.useCallback(function(){typeof p=="function"&&p(),A(!1)},[p]),q=c!==void 0?c:w,I=d!==void 0?d:E,V=b!==void 0?b:D;return Xe(Xe({},v),{},{inputValue:q,menuIsOpen:I,onChange:B,onInputChange:O,onMenuClose:z,onMenuOpen:P,value:V})}function tt(){return tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},tt.apply(null,arguments)}function WI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OC(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z3(r.key),r)}}function YI(t,e,s){return e&&OC(t.prototype,e),s&&OC(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function hy(t,e){return hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},hy(t,e)}function KI(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hy(t,e)}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(t)}function $3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($3=function(){return!!t})()}function JI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XI(t,e){if(e&&(Ho(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JI(t)}function QI(t){var e=$3();return function(){var s,r=ip(t);if(e){var a=ip(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return XI(this,s)}}function ZI(t){if(Array.isArray(t))return uy(t)}function eB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qw(t){return ZI(t)||eB(t)||L3(t)||tB()}function sB(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function nB(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var rB=function(){function t(s){var r=this;this._insertTag=function(a){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,i),r.tags.push(a)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(nB(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=sB(a);try{i.insertRule(r,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Zs="-ms-",op="-moz-",Et="-webkit-",F3="comm",Zw="rule",e1="decl",aB="@import",I3="@keyframes",iB="@layer",oB=Math.abs,j0=String.fromCharCode,lB=Object.assign;function cB(t,e){return Gs(t,0)^45?(((e<<2^Gs(t,0))<<2^Gs(t,1))<<2^Gs(t,2))<<2^Gs(t,3):0}function B3(t){return t.trim()}function dB(t,e){return(t=e.exec(t))?t[0]:t}function At(t,e,s){return t.replace(e,s)}function my(t,e){return t.indexOf(e)}function Gs(t,e){return t.charCodeAt(e)|0}function Ku(t,e,s){return t.slice(e,s)}function Xr(t){return t.length}function t1(t){return t.length}function tf(t,e){return e.push(t),t}function uB(t,e){return t.map(e).join("")}var N0=1,kc=1,U3=0,Ln=0,gs=0,Jc="";function S0(t,e,s,r,a,i,o){return{value:t,root:e,parent:s,type:r,props:a,children:i,line:N0,column:kc,length:o,return:""}}function nu(t,e){return lB(S0("",null,null,"",null,null,0),t,{length:-t.length},e)}function hB(){return gs}function mB(){return gs=Ln>0?Gs(Jc,--Ln):0,kc--,gs===10&&(kc=1,N0--),gs}function Xn(){return gs=Ln<U3?Gs(Jc,Ln++):0,kc++,gs===10&&(kc=1,N0++),gs}function ea(){return Gs(Jc,Ln)}function Df(){return Ln}function Sh(t,e){return Ku(Jc,t,e)}function Ju(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function V3(t){return N0=kc=1,U3=Xr(Jc=t),Ln=0,[]}function q3(t){return Jc="",t}function Pf(t){return B3(Sh(Ln-1,fy(t===91?t+2:t===40?t+1:t)))}function fB(t){for(;(gs=ea())&&gs<33;)Xn();return Ju(t)>2||Ju(gs)>3?"":" "}function pB(t,e){for(;--e&&Xn()&&!(gs<48||gs>102||gs>57&&gs<65||gs>70&&gs<97););return Sh(t,Df()+(e<6&&ea()==32&&Xn()==32))}function fy(t){for(;Xn();)switch(gs){case t:return Ln;case 34:case 39:t!==34&&t!==39&&fy(gs);break;case 40:t===41&&fy(t);break;case 92:Xn();break}return Ln}function gB(t,e){for(;Xn()&&t+gs!==57;)if(t+gs===84&&ea()===47)break;return"/*"+Sh(e,Ln-1)+"*"+j0(t===47?t:Xn())}function xB(t){for(;!Ju(ea());)Xn();return Sh(t,Ln)}function bB(t){return q3(zf("",null,null,null,[""],t=V3(t),0,[0],t))}function zf(t,e,s,r,a,i,o,c,d){for(var h=0,m=0,p=o,g=0,b=0,v=0,N=1,j=1,w=1,_=0,k="",C=a,E=i,A=r,M=k;j;)switch(v=_,_=Xn()){case 40:if(v!=108&&Gs(M,p-1)==58){my(M+=At(Pf(_),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:M+=Pf(_);break;case 9:case 10:case 13:case 32:M+=fB(v);break;case 92:M+=pB(Df()-1,7);continue;case 47:switch(ea()){case 42:case 47:tf(vB(gB(Xn(),Df()),e,s),d);break;default:M+="/"}break;case 123*N:c[h++]=Xr(M)*w;case 125*N:case 59:case 0:switch(_){case 0:case 125:j=0;case 59+m:w==-1&&(M=At(M,/\f/g,"")),b>0&&Xr(M)-p&&tf(b>32?DC(M+";",r,s,p-1):DC(At(M," ","")+";",r,s,p-2),d);break;case 59:M+=";";default:if(tf(A=RC(M,e,s,h,m,a,c,k,C=[],E=[],p),i),_===123)if(m===0)zf(M,e,A,A,C,i,p,c,E);else switch(g===99&&Gs(M,3)===110?100:g){case 100:case 108:case 109:case 115:zf(t,A,A,r&&tf(RC(t,A,A,0,0,a,c,k,a,C=[],p),E),a,E,p,c,r?C:E);break;default:zf(M,A,A,A,[""],E,0,c,E)}}h=m=b=0,N=w=1,k=M="",p=o;break;case 58:p=1+Xr(M),b=v;default:if(N<1){if(_==123)--N;else if(_==125&&N++==0&&mB()==125)continue}switch(M+=j0(_),_*N){case 38:w=m>0?1:(M+="\f",-1);break;case 44:c[h++]=(Xr(M)-1)*w,w=1;break;case 64:ea()===45&&(M+=Pf(Xn())),g=ea(),m=p=Xr(k=M+=xB(Df())),_++;break;case 45:v===45&&Xr(M)==2&&(N=0)}}return i}function RC(t,e,s,r,a,i,o,c,d,h,m){for(var p=a-1,g=a===0?i:[""],b=t1(g),v=0,N=0,j=0;v<r;++v)for(var w=0,_=Ku(t,p+1,p=oB(N=o[v])),k=t;w<b;++w)(k=B3(N>0?g[w]+" "+_:At(_,/&\f/g,g[w])))&&(d[j++]=k);return S0(t,e,s,a===0?Zw:c,d,h,m)}function vB(t,e,s){return S0(t,e,s,F3,j0(hB()),Ku(t,2,-2),0)}function DC(t,e,s,r){return S0(t,e,s,e1,Ku(t,0,r),Ku(t,r+1,-1),r)}function wc(t,e){for(var s="",r=t1(t),a=0;a<r;a++)s+=e(t[a],a,t,e)||"";return s}function yB(t,e,s,r){switch(t.type){case iB:if(t.children.length)break;case aB:case e1:return t.return=t.return||t.value;case F3:return"";case I3:return t.return=t.value+"{"+wc(t.children,r)+"}";case Zw:t.value=t.props.join(",")}return Xr(s=wc(t.children,r))?t.return=t.value+"{"+s+"}":""}function wB(t){var e=t1(t);return function(s,r,a,i){for(var o="",c=0;c<e;c++)o+=t[c](s,r,a,i)||"";return o}}function jB(t){return function(e){e.root||(e=e.return)&&t(e)}}function NB(t){var e=Object.create(null);return function(s){return e[s]===void 0&&(e[s]=t(s)),e[s]}}var SB=function(e,s,r){for(var a=0,i=0;a=i,i=ea(),a===38&&i===12&&(s[r]=1),!Ju(i);)Xn();return Sh(e,Ln)},_B=function(e,s){var r=-1,a=44;do switch(Ju(a)){case 0:a===38&&ea()===12&&(s[r]=1),e[r]+=SB(Ln-1,s,r);break;case 2:e[r]+=Pf(a);break;case 4:if(a===44){e[++r]=ea()===58?"&\f":"",s[r]=e[r].length;break}default:e[r]+=j0(a)}while(a=Xn());return e},CB=function(e,s){return q3(_B(V3(e),s))},PC=new WeakMap,kB=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var s=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&s.charCodeAt(0)!==58&&!PC.get(r))&&!a){PC.set(e,!0);for(var i=[],o=CB(s,i),c=r.props,d=0,h=0;d<o.length;d++)for(var m=0;m<c.length;m++,h++)e.props[h]=i[d]?o[d].replace(/&\f/g,c[m]):c[m]+" "+o[d]}}},EB=function(e){if(e.type==="decl"){var s=e.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(e.return="",e.value="")}};function H3(t,e){switch(cB(t,e)){case 5103:return Et+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Et+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Et+t+op+t+Zs+t+t;case 6828:case 4268:return Et+t+Zs+t+t;case 6165:return Et+t+Zs+"flex-"+t+t;case 5187:return Et+t+At(t,/(\w+).+(:[^]+)/,Et+"box-$1$2"+Zs+"flex-$1$2")+t;case 5443:return Et+t+Zs+"flex-item-"+At(t,/flex-|-self/,"")+t;case 4675:return Et+t+Zs+"flex-line-pack"+At(t,/align-content|flex-|-self/,"")+t;case 5548:return Et+t+Zs+At(t,"shrink","negative")+t;case 5292:return Et+t+Zs+At(t,"basis","preferred-size")+t;case 6060:return Et+"box-"+At(t,"-grow","")+Et+t+Zs+At(t,"grow","positive")+t;case 4554:return Et+At(t,/([^-])(transform)/g,"$1"+Et+"$2")+t;case 6187:return At(At(At(t,/(zoom-|grab)/,Et+"$1"),/(image-set)/,Et+"$1"),t,"")+t;case 5495:case 3959:return At(t,/(image-set\([^]*)/,Et+"$1$`$1");case 4968:return At(At(t,/(.+:)(flex-)?(.*)/,Et+"box-pack:$3"+Zs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Et+t+t;case 4095:case 3583:case 4068:case 2532:return At(t,/(.+)-inline(.+)/,Et+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xr(t)-1-e>6)switch(Gs(t,e+1)){case 109:if(Gs(t,e+4)!==45)break;case 102:return At(t,/(.+:)(.+)-([^]+)/,"$1"+Et+"$2-$3$1"+op+(Gs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~my(t,"stretch")?H3(At(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Gs(t,e+1)!==115)break;case 6444:switch(Gs(t,Xr(t)-3-(~my(t,"!important")&&10))){case 107:return At(t,":",":"+Et)+t;case 101:return At(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Et+(Gs(t,14)===45?"inline-":"")+"box$3$1"+Et+"$2$3$1"+Zs+"$2box$3")+t}break;case 5936:switch(Gs(t,e+11)){case 114:return Et+t+Zs+At(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Et+t+Zs+At(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Et+t+Zs+At(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Et+t+Zs+t+t}return t}var AB=function(e,s,r,a){if(e.length>-1&&!e.return)switch(e.type){case e1:e.return=H3(e.value,e.length);break;case I3:return wc([nu(e,{value:At(e.value,"@","@"+Et)})],a);case Zw:if(e.length)return uB(e.props,function(i){switch(dB(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wc([nu(e,{props:[At(i,/:(read-\w+)/,":"+op+"$1")]})],a);case"::placeholder":return wc([nu(e,{props:[At(i,/:(plac\w+)/,":"+Et+"input-$1")]}),nu(e,{props:[At(i,/:(plac\w+)/,":"+op+"$1")]}),nu(e,{props:[At(i,/:(plac\w+)/,Zs+"input-$1")]})],a)}return""})}},TB=[AB],MB=function(e){var s=e.key;if(s==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(N){var j=N.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var a=e.stylisPlugins||TB,i={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(N){for(var j=N.getAttribute("data-emotion").split(" "),w=1;w<j.length;w++)i[j[w]]=!0;c.push(N)});var d,h=[kB,EB];{var m,p=[yB,jB(function(N){m.insert(N)})],g=wB(h.concat(a,p)),b=function(j){return wc(bB(j),g)};d=function(j,w,_,k){m=_,b(j?j+"{"+w.styles+"}":w.styles),k&&(v.inserted[w.name]=!0)}}var v={key:s,sheet:new rB({key:s,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:d};return v.sheet.hydrate(c),v},Ob={exports:{}},Tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function OB(){if(zC)return Tt;zC=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,g=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,N=t?Symbol.for("react.block"):60121,j=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function k(E){if(typeof E=="object"&&E!==null){var A=E.$$typeof;switch(A){case e:switch(E=E.type,E){case d:case h:case r:case i:case a:case p:return E;default:switch(E=E&&E.$$typeof,E){case c:case m:case v:case b:case o:return E;default:return A}}case s:return A}}}function C(E){return k(E)===h}return Tt.AsyncMode=d,Tt.ConcurrentMode=h,Tt.ContextConsumer=c,Tt.ContextProvider=o,Tt.Element=e,Tt.ForwardRef=m,Tt.Fragment=r,Tt.Lazy=v,Tt.Memo=b,Tt.Portal=s,Tt.Profiler=i,Tt.StrictMode=a,Tt.Suspense=p,Tt.isAsyncMode=function(E){return C(E)||k(E)===d},Tt.isConcurrentMode=C,Tt.isContextConsumer=function(E){return k(E)===c},Tt.isContextProvider=function(E){return k(E)===o},Tt.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},Tt.isForwardRef=function(E){return k(E)===m},Tt.isFragment=function(E){return k(E)===r},Tt.isLazy=function(E){return k(E)===v},Tt.isMemo=function(E){return k(E)===b},Tt.isPortal=function(E){return k(E)===s},Tt.isProfiler=function(E){return k(E)===i},Tt.isStrictMode=function(E){return k(E)===a},Tt.isSuspense=function(E){return k(E)===p},Tt.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===r||E===h||E===i||E===a||E===p||E===g||typeof E=="object"&&E!==null&&(E.$$typeof===v||E.$$typeof===b||E.$$typeof===o||E.$$typeof===c||E.$$typeof===m||E.$$typeof===j||E.$$typeof===w||E.$$typeof===_||E.$$typeof===N)},Tt.typeOf=k,Tt}var LC;function RB(){return LC||(LC=1,Ob.exports=OB()),Ob.exports}var Rb,$C;function DB(){if($C)return Rb;$C=1;var t=RB(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[t.ForwardRef]=r,i[t.Memo]=a;function o(v){return t.isMemo(v)?a:i[v.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function b(v,N,j){if(typeof N!="string"){if(g){var w=p(N);w&&w!==g&&b(v,w,j)}var _=d(N);h&&(_=_.concat(h(N)));for(var k=o(v),C=o(N),E=0;E<_.length;++E){var A=_[E];if(!s[A]&&!(j&&j[A])&&!(C&&C[A])&&!(k&&k[A])){var M=m(N,A);try{c(v,A,M)}catch{}}}}return v}return Rb=b,Rb}DB();var PB=!0;function zB(t,e,s){var r="";return s.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(r+=a+" ")}),r}var G3=function(e,s,r){var a=e.key+"-"+s.name;(r===!1||PB===!1)&&e.registered[a]===void 0&&(e.registered[a]=s.styles)},LB=function(e,s,r){G3(e,s,r);var a=e.key+"-"+s.name;if(e.inserted[s.name]===void 0){var i=s;do e.insert(s===i?"."+a:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function $B(t){for(var e=0,s,r=0,a=t.length;a>=4;++r,a-=4)s=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,e=(s&65535)*1540483477+((s>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var FB={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},IB=/[A-Z]|^ms/g,BB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,W3=function(e){return e.charCodeAt(1)===45},FC=function(e){return e!=null&&typeof e!="boolean"},Db=NB(function(t){return W3(t)?t:t.replace(IB,"-$&").toLowerCase()}),IC=function(e,s){switch(e){case"animation":case"animationName":if(typeof s=="string")return s.replace(BB,function(r,a,i){return Qr={name:a,styles:i,next:Qr},a})}return FB[e]!==1&&!W3(e)&&typeof s=="number"&&s!==0?s+"px":s};function Xu(t,e,s){if(s==null)return"";var r=s;if(r.__emotion_styles!==void 0)return r;switch(typeof s){case"boolean":return"";case"object":{var a=s;if(a.anim===1)return Qr={name:a.name,styles:a.styles,next:Qr},a.name;var i=s;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Qr={name:o.name,styles:o.styles,next:Qr},o=o.next;var c=i.styles+";";return c}return UB(t,e,s)}case"function":{if(t!==void 0){var d=Qr,h=s(t);return Qr=d,Xu(t,e,h)}break}}var m=s;return m}function UB(t,e,s){var r="";if(Array.isArray(s))for(var a=0;a<s.length;a++)r+=Xu(t,e,s[a])+";";else for(var i in s){var o=s[i];if(typeof o!="object"){var c=o;FC(c)&&(r+=Db(i)+":"+IC(i,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var d=0;d<o.length;d++)FC(o[d])&&(r+=Db(i)+":"+IC(i,o[d])+";");else{var h=Xu(t,e,o);switch(i){case"animation":case"animationName":{r+=Db(i)+":"+h+";";break}default:r+=i+"{"+h+"}"}}}return r}var BC=/label:\s*([^\s;{]+)\s*(;|$)/g,Qr;function Y3(t,e,s){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,a="";Qr=void 0;var i=t[0];if(i==null||i.raw===void 0)r=!1,a+=Xu(s,e,i);else{var o=i;a+=o[0]}for(var c=1;c<t.length;c++)if(a+=Xu(s,e,t[c]),r){var d=i;a+=d[c]}BC.lastIndex=0;for(var h="",m;(m=BC.exec(a))!==null;)h+="-"+m[1];var p=$B(a)+h;return{name:p,styles:a,next:Qr}}var VB=function(e){return e()},qB=B_.useInsertionEffect?B_.useInsertionEffect:!1,HB=qB||VB,K3=y.createContext(typeof HTMLElement<"u"?MB({key:"css"}):null);K3.Provider;var GB=function(e){return y.forwardRef(function(s,r){var a=y.useContext(K3);return e(s,a,r)})},WB=y.createContext({}),s1={}.hasOwnProperty,py="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",YB=function(e,s){var r={};for(var a in s)s1.call(s,a)&&(r[a]=s[a]);return r[py]=e,r},KB=function(e){var s=e.cache,r=e.serialized,a=e.isStringTag;return G3(s,r,a),HB(function(){return LB(s,r,a)}),null},JB=GB(function(t,e,s){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var a=t[py],i=[r],o="";typeof t.className=="string"?o=zB(e.registered,i,t.className):t.className!=null&&(o=t.className+" ");var c=Y3(i,void 0,y.useContext(WB));o+=e.key+"-"+c.name;var d={};for(var h in t)s1.call(t,h)&&h!=="css"&&h!==py&&(d[h]=t[h]);return d.className=o,s&&(d.ref=s),y.createElement(y.Fragment,null,y.createElement(KB,{cache:e,serialized:c,isStringTag:typeof a=="string"}),y.createElement(a,d))}),XB=JB,We=function(e,s){var r=arguments;if(s==null||!s1.call(s,"css"))return y.createElement.apply(void 0,r);var a=r.length,i=new Array(a);i[0]=XB,i[1]=YB(e,s);for(var o=2;o<a;o++)i[o]=r[o];return y.createElement.apply(null,i)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(We||(We={}));function n1(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return Y3(e)}function QB(){var t=n1.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function ZB(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const e9=Math.min,t9=Math.max,lp=Math.round,sf=Math.floor,cp=t=>({x:t,y:t});function s9(t){const{x:e,y:s,width:r,height:a}=t;return{width:r,height:a,top:s,left:e,right:e+r,bottom:s+a,x:e,y:s}}function _0(){return typeof window<"u"}function J3(t){return Q3(t)?(t.nodeName||"").toLowerCase():"#document"}function Ba(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function X3(t){var e;return(e=(Q3(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Q3(t){return _0()?t instanceof Node||t instanceof Ba(t).Node:!1}function n9(t){return _0()?t instanceof Element||t instanceof Ba(t).Element:!1}function r1(t){return _0()?t instanceof HTMLElement||t instanceof Ba(t).HTMLElement:!1}function UC(t){return!_0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ba(t).ShadowRoot}function Z3(t){const{overflow:e,overflowX:s,overflowY:r,display:a}=a1(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!["inline","contents"].includes(a)}function r9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function a9(t){return["html","body","#document"].includes(J3(t))}function a1(t){return Ba(t).getComputedStyle(t)}function i9(t){if(J3(t)==="html")return t;const e=t.assignedSlot||t.parentNode||UC(t)&&t.host||X3(t);return UC(e)?e.host:e}function eE(t){const e=i9(t);return a9(e)?t.ownerDocument?t.ownerDocument.body:t.body:r1(e)&&Z3(e)?e:eE(e)}function dp(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const a=eE(t),i=a===((r=t.ownerDocument)==null?void 0:r.body),o=Ba(a);if(i){const c=gy(o);return e.concat(o,o.visualViewport||[],Z3(a)?a:[],c&&s?dp(c):[])}return e.concat(a,dp(a,[],s))}function gy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function o9(t){const e=a1(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=r1(t),i=a?t.offsetWidth:s,o=a?t.offsetHeight:r,c=lp(s)!==i||lp(r)!==o;return c&&(s=i,r=o),{width:s,height:r,$:c}}function i1(t){return n9(t)?t:t.contextElement}function VC(t){const e=i1(t);if(!r1(e))return cp(1);const s=e.getBoundingClientRect(),{width:r,height:a,$:i}=o9(e);let o=(i?lp(s.width):s.width)/r,c=(i?lp(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const l9=cp(0);function c9(t){const e=Ba(t);return!r9()||!e.visualViewport?l9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function d9(t,e,s){return!1}function qC(t,e,s,r){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),i=i1(t);let o=cp(1);e&&(o=VC(t));const c=d9()?c9(i):cp(0);let d=(a.left+c.x)/o.x,h=(a.top+c.y)/o.y,m=a.width/o.x,p=a.height/o.y;if(i){const g=Ba(i),b=r;let v=g,N=gy(v);for(;N&&r&&b!==v;){const j=VC(N),w=N.getBoundingClientRect(),_=a1(N),k=w.left+(N.clientLeft+parseFloat(_.paddingLeft))*j.x,C=w.top+(N.clientTop+parseFloat(_.paddingTop))*j.y;d*=j.x,h*=j.y,m*=j.x,p*=j.y,d+=k,h+=C,v=Ba(N),N=gy(v)}}return s9({width:m,height:p,x:d,y:h})}function tE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function u9(t,e){let s=null,r;const a=X3(t);function i(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const h=t.getBoundingClientRect(),{left:m,top:p,width:g,height:b}=h;if(c||e(),!g||!b)return;const v=sf(p),N=sf(a.clientWidth-(m+g)),j=sf(a.clientHeight-(p+b)),w=sf(m),k={rootMargin:-v+"px "+-N+"px "+-j+"px "+-w+"px",threshold:t9(0,e9(1,d))||1};let C=!0;function E(A){const M=A[0].intersectionRatio;if(M!==d){if(!C)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!tE(h,t.getBoundingClientRect())&&o(),C=!1}try{s=new IntersectionObserver(E,{...k,root:a.ownerDocument})}catch{s=new IntersectionObserver(E,k)}s.observe(t)}return o(!0),i}function h9(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=i1(t),m=a||i?[...h?dp(h):[],...dp(e)]:[];m.forEach(w=>{a&&w.addEventListener("scroll",s,{passive:!0}),i&&w.addEventListener("resize",s)});const p=h&&c?u9(h,s):null;let g=-1,b=null;o&&(b=new ResizeObserver(w=>{let[_]=w;_&&_.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=b)==null||k.observe(e)})),s()}),h&&!d&&b.observe(h),b.observe(e));let v,N=d?qC(t):null;d&&j();function j(){const w=qC(t);N&&!tE(N,w)&&s(),N=w,v=requestAnimationFrame(j)}return s(),()=>{var w;m.forEach(_=>{a&&_.removeEventListener("scroll",s),i&&_.removeEventListener("resize",s)}),p==null||p(),(w=b)==null||w.disconnect(),b=null,d&&cancelAnimationFrame(v)}}var xy=y.useLayoutEffect,m9=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],up=function(){};function f9(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function p9(t,e){for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];var i=[].concat(r);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&i.push("".concat(f9(t,o)));return i.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var HC=function(e){return S9(e)?e.filter(Boolean):Ho(e)==="object"&&e!==null?[e]:[]},sE=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var s=Ha(e,m9);return Xe({},s)},as=function(e,s,r){var a=e.cx,i=e.getStyles,o=e.getClassNames,c=e.className;return{css:i(s,e),className:a(r??{},o(s,e),c)}};function C0(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function g9(t){return C0(t)?window.innerHeight:t.clientHeight}function nE(t){return C0(t)?window.pageYOffset:t.scrollTop}function hp(t,e){if(C0(t)){window.scrollTo(0,e);return}t.scrollTop=e}function x9(t){var e=getComputedStyle(t),s=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(s&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function b9(t,e,s,r){return s*((t=t/r-1)*t*t+1)+e}function nf(t,e){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:up,a=nE(t),i=e-a,o=10,c=0;function d(){c+=o;var h=b9(c,a,i,s);hp(t,h),c<s?window.requestAnimationFrame(d):r(t)}d()}function GC(t,e){var s=t.getBoundingClientRect(),r=e.getBoundingClientRect(),a=e.offsetHeight/3;r.bottom+a>s.bottom?hp(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):r.top-a<s.top&&hp(t,Math.max(e.offsetTop-a,0))}function v9(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function WC(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function y9(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var rE=!1,w9={get passive(){return rE=!0}},rf=typeof window<"u"?window:{};rf.addEventListener&&rf.removeEventListener&&(rf.addEventListener("p",up,w9),rf.removeEventListener("p",up,!1));var j9=rE;function N9(t){return t!=null}function S9(t){return Array.isArray(t)}function af(t,e,s){return t?e:s}var _9=function(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];var i=Object.entries(e).filter(function(o){var c=za(o,1),d=c[0];return!r.includes(d)});return i.reduce(function(o,c){var d=za(c,2),h=d[0],m=d[1];return o[h]=m,o},{})},C9=["children","innerProps"],k9=["children","innerProps"];function E9(t){var e=t.maxHeight,s=t.menuEl,r=t.minHeight,a=t.placement,i=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,d=x9(s),h={placement:"bottom",maxHeight:e};if(!s||!s.offsetParent)return h;var m=d.getBoundingClientRect(),p=m.height,g=s.getBoundingClientRect(),b=g.bottom,v=g.height,N=g.top,j=s.offsetParent.getBoundingClientRect(),w=j.top,_=o?window.innerHeight:g9(d),k=nE(d),C=parseInt(getComputedStyle(s).marginBottom,10),E=parseInt(getComputedStyle(s).marginTop,10),A=w-E,M=_-N,R=A+k,D=p-k-N,L=b-_+k+C,B=k+N-E,O=160;switch(a){case"auto":case"bottom":if(M>=v)return{placement:"bottom",maxHeight:e};if(D>=v&&!o)return i&&nf(d,L,O),{placement:"bottom",maxHeight:e};if(!o&&D>=r||o&&M>=r){i&&nf(d,L,O);var P=o?M-C:D-C;return{placement:"bottom",maxHeight:P}}if(a==="auto"||o){var z=e,q=o?A:R;return q>=r&&(z=Math.min(q-C-c,e)),{placement:"top",maxHeight:z}}if(a==="bottom")return i&&hp(d,L),{placement:"bottom",maxHeight:e};break;case"top":if(A>=v)return{placement:"top",maxHeight:e};if(R>=v&&!o)return i&&nf(d,B,O),{placement:"top",maxHeight:e};if(!o&&R>=r||o&&A>=r){var I=e;return(!o&&R>=r||o&&A>=r)&&(I=o?A-E:R-E),i&&nf(d,B,O),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return h}function A9(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var aE=function(e){return e==="auto"?"bottom":e},T9=function(e,s){var r,a=e.placement,i=e.theme,o=i.borderRadius,c=i.spacing,d=i.colors;return Xe((r={label:"menu"},pu(r,A9(a),"100%"),pu(r,"position","absolute"),pu(r,"width","100%"),pu(r,"zIndex",1),r),s?{}:{backgroundColor:d.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},iE=y.createContext(null),M9=function(e){var s=e.children,r=e.minMenuHeight,a=e.maxMenuHeight,i=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,h=y.useContext(iE)||{},m=h.setPortalPlacement,p=y.useRef(null),g=y.useState(a),b=za(g,2),v=b[0],N=b[1],j=y.useState(null),w=za(j,2),_=w[0],k=w[1],C=d.spacing.controlHeight;return xy(function(){var E=p.current;if(E){var A=o==="fixed",M=c&&!A,R=E9({maxHeight:a,menuEl:E,minHeight:r,placement:i,shouldScroll:M,isFixedPosition:A,controlHeight:C});N(R.maxHeight),k(R.placement),m==null||m(R.placement)}},[a,i,o,c,r,m,C]),s({ref:p,placerProps:Xe(Xe({},e),{},{placement:_||aE(i),maxHeight:v})})},O9=function(e){var s=e.children,r=e.innerRef,a=e.innerProps;return We("div",tt({},as(e,"menu",{menu:!0}),{ref:r},a),s)},R9=O9,D9=function(e,s){var r=e.maxHeight,a=e.theme.spacing.baseUnit;return Xe({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},s?{}:{paddingBottom:a,paddingTop:a})},P9=function(e){var s=e.children,r=e.innerProps,a=e.innerRef,i=e.isMulti;return We("div",tt({},as(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:a},r),s)},oE=function(e,s){var r=e.theme,a=r.spacing.baseUnit,i=r.colors;return Xe({textAlign:"center"},s?{}:{color:i.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},z9=oE,L9=oE,$9=function(e){var s=e.children,r=s===void 0?"No options":s,a=e.innerProps,i=Ha(e,C9);return We("div",tt({},as(Xe(Xe({},i),{},{children:r,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),r)},F9=function(e){var s=e.children,r=s===void 0?"Loading...":s,a=e.innerProps,i=Ha(e,k9);return We("div",tt({},as(Xe(Xe({},i),{},{children:r,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),r)},I9=function(e){var s=e.rect,r=e.offset,a=e.position;return{left:s.left,position:a,top:r,width:s.width,zIndex:1}},B9=function(e){var s=e.appendTo,r=e.children,a=e.controlElement,i=e.innerProps,o=e.menuPlacement,c=e.menuPosition,d=y.useRef(null),h=y.useRef(null),m=y.useState(aE(o)),p=za(m,2),g=p[0],b=p[1],v=y.useMemo(function(){return{setPortalPlacement:b}},[]),N=y.useState(null),j=za(N,2),w=j[0],_=j[1],k=y.useCallback(function(){if(a){var M=v9(a),R=c==="fixed"?0:window.pageYOffset,D=M[g]+R;(D!==(w==null?void 0:w.offset)||M.left!==(w==null?void 0:w.rect.left)||M.width!==(w==null?void 0:w.rect.width))&&_({offset:D,rect:M})}},[a,c,g,w==null?void 0:w.offset,w==null?void 0:w.rect.left,w==null?void 0:w.rect.width]);xy(function(){k()},[k]);var C=y.useCallback(function(){typeof h.current=="function"&&(h.current(),h.current=null),a&&d.current&&(h.current=h9(a,d.current,k,{elementResize:"ResizeObserver"in window}))},[a,k]);xy(function(){C()},[C]);var E=y.useCallback(function(M){d.current=M,C()},[C]);if(!s&&c!=="fixed"||!w)return null;var A=We("div",tt({ref:E},as(Xe(Xe({},e),{},{offset:w.offset,position:c,rect:w.rect}),"menuPortal",{"menu-portal":!0}),i),r);return We(iE.Provider,{value:v},s?Rw.createPortal(A,s):A)},U9=function(e){var s=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:s?"none":void 0,position:"relative"}},V9=function(e){var s=e.children,r=e.innerProps,a=e.isDisabled,i=e.isRtl;return We("div",tt({},as(e,"container",{"--is-disabled":a,"--is-rtl":i}),r),s)},q9=function(e,s){var r=e.theme.spacing,a=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Xe({alignItems:"center",display:a&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},s?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},H9=function(e){var s=e.children,r=e.innerProps,a=e.isMulti,i=e.hasValue;return We("div",tt({},as(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":i}),r),s)},G9=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},W9=function(e){var s=e.children,r=e.innerProps;return We("div",tt({},as(e,"indicatorsContainer",{indicators:!0}),r),s)},YC,Y9=["size"],K9=["innerProps","isRtl","size"],J9={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},lE=function(e){var s=e.size,r=Ha(e,Y9);return We("svg",tt({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:J9},r))},o1=function(e){return We(lE,tt({size:20},e),We("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cE=function(e){return We(lE,tt({size:20},e),We("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},dE=function(e,s){var r=e.isFocused,a=e.theme,i=a.spacing.baseUnit,o=a.colors;return Xe({label:"indicatorContainer",display:"flex",transition:"color 150ms"},s?{}:{color:r?o.neutral60:o.neutral20,padding:i*2,":hover":{color:r?o.neutral80:o.neutral40}})},X9=dE,Q9=function(e){var s=e.children,r=e.innerProps;return We("div",tt({},as(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),s||We(cE,null))},Z9=dE,eU=function(e){var s=e.children,r=e.innerProps;return We("div",tt({},as(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),s||We(o1,null))},tU=function(e,s){var r=e.isDisabled,a=e.theme,i=a.spacing.baseUnit,o=a.colors;return Xe({label:"indicatorSeparator",alignSelf:"stretch",width:1},s?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},sU=function(e){var s=e.innerProps;return We("span",tt({},s,as(e,"indicatorSeparator",{"indicator-separator":!0})))},nU=QB(YC||(YC=ZB([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),rU=function(e,s){var r=e.isFocused,a=e.size,i=e.theme,o=i.colors,c=i.spacing.baseUnit;return Xe({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},s?{}:{color:r?o.neutral60:o.neutral20,padding:c*2})},Pb=function(e){var s=e.delay,r=e.offset;return We("span",{css:n1({animation:"".concat(nU," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},aU=function(e){var s=e.innerProps,r=e.isRtl,a=e.size,i=a===void 0?4:a,o=Ha(e,K9);return We("div",tt({},as(Xe(Xe({},o),{},{innerProps:s,isRtl:r,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),s),We(Pb,{delay:0,offset:r}),We(Pb,{delay:160,offset:!0}),We(Pb,{delay:320,offset:!r}))},iU=function(e,s){var r=e.isDisabled,a=e.isFocused,i=e.theme,o=i.colors,c=i.borderRadius,d=i.spacing;return Xe({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},s?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:a?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},oU=function(e){var s=e.children,r=e.isDisabled,a=e.isFocused,i=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return We("div",tt({ref:i},as(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":a,"control--menu-is-open":c}),o,{"aria-disabled":r||void 0}),s)},lU=oU,cU=["data"],dU=function(e,s){var r=e.theme.spacing;return s?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},uU=function(e){var s=e.children,r=e.cx,a=e.getStyles,i=e.getClassNames,o=e.Heading,c=e.headingProps,d=e.innerProps,h=e.label,m=e.theme,p=e.selectProps;return We("div",tt({},as(e,"group",{group:!0}),d),We(o,tt({},c,{selectProps:p,theme:m,getStyles:a,getClassNames:i,cx:r}),h),We("div",null,s))},hU=function(e,s){var r=e.theme,a=r.colors,i=r.spacing;return Xe({label:"group",cursor:"default",display:"block"},s?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},mU=function(e){var s=sE(e);s.data;var r=Ha(s,cU);return We("div",tt({},as(e,"groupHeading",{"group-heading":!0}),r))},fU=uU,pU=["innerRef","isDisabled","isHidden","inputClassName"],gU=function(e,s){var r=e.isDisabled,a=e.value,i=e.theme,o=i.spacing,c=i.colors;return Xe(Xe({visibility:r?"hidden":"visible",transform:a?"translateZ(0)":""},xU),s?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},uE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},xU={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xe({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},uE)},bU=function(e){return Xe({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},uE)},vU=function(e){var s=e.cx,r=e.value,a=sE(e),i=a.innerRef,o=a.isDisabled,c=a.isHidden,d=a.inputClassName,h=Ha(a,pU);return We("div",tt({},as(e,"input",{"input-container":!0}),{"data-value":r||""}),We("input",tt({className:s({input:!0},d),ref:i,style:bU(c),disabled:o},h)))},yU=vU,wU=function(e,s){var r=e.theme,a=r.spacing,i=r.borderRadius,o=r.colors;return Xe({label:"multiValue",display:"flex",minWidth:0},s?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:a.baseUnit/2})},jU=function(e,s){var r=e.theme,a=r.borderRadius,i=r.colors,o=e.cropWithEllipsis;return Xe({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},s?{}:{borderRadius:a/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},NU=function(e,s){var r=e.theme,a=r.spacing,i=r.borderRadius,o=r.colors,c=e.isFocused;return Xe({alignItems:"center",display:"flex"},s?{}:{borderRadius:i/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},hE=function(e){var s=e.children,r=e.innerProps;return We("div",r,s)},SU=hE,_U=hE;function CU(t){var e=t.children,s=t.innerProps;return We("div",tt({role:"button"},s),e||We(o1,{size:14}))}var kU=function(e){var s=e.children,r=e.components,a=e.data,i=e.innerProps,o=e.isDisabled,c=e.removeProps,d=e.selectProps,h=r.Container,m=r.Label,p=r.Remove;return We(h,{data:a,innerProps:Xe(Xe({},as(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:d},We(m,{data:a,innerProps:Xe({},as(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},s),We(p,{data:a,innerProps:Xe(Xe({},as(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(s||"option")},c),selectProps:d}))},EU=kU,AU=function(e,s){var r=e.isDisabled,a=e.isFocused,i=e.isSelected,o=e.theme,c=o.spacing,d=o.colors;return Xe({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},s?{}:{backgroundColor:i?d.primary:a?d.primary25:"transparent",color:r?d.neutral20:i?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:i?d.primary:d.primary50}})},TU=function(e){var s=e.children,r=e.isDisabled,a=e.isFocused,i=e.isSelected,o=e.innerRef,c=e.innerProps;return We("div",tt({},as(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":a,"option--is-selected":i}),{ref:o,"aria-disabled":r},c),s)},MU=TU,OU=function(e,s){var r=e.theme,a=r.spacing,i=r.colors;return Xe({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},s?{}:{color:i.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},RU=function(e){var s=e.children,r=e.innerProps;return We("div",tt({},as(e,"placeholder",{placeholder:!0}),r),s)},DU=RU,PU=function(e,s){var r=e.isDisabled,a=e.theme,i=a.spacing,o=a.colors;return Xe({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s?{}:{color:r?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},zU=function(e){var s=e.children,r=e.isDisabled,a=e.innerProps;return We("div",tt({},as(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),a),s)},LU=zU,$U={ClearIndicator:eU,Control:lU,DropdownIndicator:Q9,DownChevron:cE,CrossIcon:o1,Group:fU,GroupHeading:mU,IndicatorsContainer:W9,IndicatorSeparator:sU,Input:yU,LoadingIndicator:aU,Menu:R9,MenuList:P9,MenuPortal:B9,LoadingMessage:F9,NoOptionsMessage:$9,MultiValue:EU,MultiValueContainer:SU,MultiValueLabel:_U,MultiValueRemove:CU,Option:MU,Placeholder:DU,SelectContainer:V9,SingleValue:LU,ValueContainer:H9},FU=function(e){return Xe(Xe({},$U),e.components)},KC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function IU(t,e){return!!(t===e||KC(t)&&KC(e))}function BU(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!IU(t[s],e[s]))return!1;return!0}function UU(t,e){e===void 0&&(e=BU);var s=null;function r(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(s&&s.lastThis===this&&e(a,s.lastArgs))return s.lastResult;var o=t.apply(this,a);return s={lastResult:o,lastArgs:a,lastThis:this},o}return r.clear=function(){s=null},r}var VU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},qU=function(e){return We("span",tt({css:VU},e))},JC=qU,HU={guidance:function(e){var s=e.isSearchable,r=e.isMulti,a=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var s=e.action,r=e.label,a=r===void 0?"":r,i=e.labels,o=e.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var s=e.context,r=e.focused,a=e.options,i=e.label,o=i===void 0?"":i,c=e.selectValue,d=e.isDisabled,h=e.isSelected,m=e.isAppleDevice,p=function(N,j){return N&&N.length?"".concat(N.indexOf(j)+1," of ").concat(N.length):""};if(s==="value"&&c)return"value ".concat(o," focused, ").concat(p(c,r),".");if(s==="menu"&&m){var g=d?" disabled":"",b="".concat(h?" selected":"").concat(g);return"".concat(o).concat(b,", ").concat(p(a,r),".")}return""},onFilter:function(e){var s=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(s?" for search term "+s:"",".")}},GU=function(e){var s=e.ariaSelection,r=e.focusedOption,a=e.focusedValue,i=e.focusableOptions,o=e.isFocused,c=e.selectValue,d=e.selectProps,h=e.id,m=e.isAppleDevice,p=d.ariaLiveMessages,g=d.getOptionLabel,b=d.inputValue,v=d.isMulti,N=d.isOptionDisabled,j=d.isSearchable,w=d.menuIsOpen,_=d.options,k=d.screenReaderStatus,C=d.tabSelectsValue,E=d.isLoading,A=d["aria-label"],M=d["aria-live"],R=y.useMemo(function(){return Xe(Xe({},HU),p||{})},[p]),D=y.useMemo(function(){var q="";if(s&&R.onChange){var I=s.option,V=s.options,H=s.removedValue,Y=s.removedValues,U=s.value,K=function(de){return Array.isArray(de)?null:de},J=H||I||K(U),W=J?g(J):"",ee=V||Y||void 0,ne=ee?ee.map(g):[],X=Xe({isDisabled:J&&N(J,c),label:W,labels:ne},s);q=R.onChange(X)}return q},[s,R,N,c,g]),L=y.useMemo(function(){var q="",I=r||a,V=!!(r&&c&&c.includes(r));if(I&&R.onFocus){var H={focused:I,label:g(I),isDisabled:N(I,c),isSelected:V,options:i,context:I===r?"menu":"value",selectValue:c,isAppleDevice:m};q=R.onFocus(H)}return q},[r,a,g,N,R,i,c,m]),B=y.useMemo(function(){var q="";if(w&&_.length&&!E&&R.onFilter){var I=k({count:i.length});q=R.onFilter({inputValue:b,resultsMessage:I})}return q},[i,b,w,R,_,k,E]),O=(s==null?void 0:s.action)==="initial-input-focus",P=y.useMemo(function(){var q="";if(R.guidance){var I=a?"value":w?"menu":"input";q=R.guidance({"aria-label":A,context:I,isDisabled:r&&N(r,c),isMulti:v,isSearchable:j,tabSelectsValue:C,isInitialFocus:O})}return q},[A,r,a,v,N,j,w,R,c,C,O]),z=We(y.Fragment,null,We("span",{id:"aria-selection"},D),We("span",{id:"aria-focused"},L),We("span",{id:"aria-results"},B),We("span",{id:"aria-guidance"},P));return We(y.Fragment,null,We(JC,{id:h},O&&z),We(JC,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!O&&z))},WU=GU,by=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],YU=new RegExp("["+by.map(function(t){return t.letters}).join("")+"]","g"),mE={};for(var zb=0;zb<by.length;zb++)for(var Lb=by[zb],$b=0;$b<Lb.letters.length;$b++)mE[Lb.letters[$b]]=Lb.base;var fE=function(e){return e.replace(YU,function(s){return mE[s]})},KU=UU(fE),XC=function(e){return e.replace(/^\s+|\s+$/g,"")},JU=function(e){return"".concat(e.label," ").concat(e.value)},XU=function(e){return function(s,r){if(s.data.__isNew__)return!0;var a=Xe({ignoreCase:!0,ignoreAccents:!0,stringify:JU,trim:!0,matchFrom:"any"},e),i=a.ignoreCase,o=a.ignoreAccents,c=a.stringify,d=a.trim,h=a.matchFrom,m=d?XC(r):r,p=d?XC(c(s)):c(s);return i&&(m=m.toLowerCase(),p=p.toLowerCase()),o&&(m=KU(m),p=fE(p)),h==="start"?p.substr(0,m.length)===m:p.indexOf(m)>-1}},QU=["innerRef"];function ZU(t){var e=t.innerRef,s=Ha(t,QU),r=_9(s,"onExited","in","enter","exit","appear");return We("input",tt({ref:e},r,{css:n1({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var eV=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function tV(t){var e=t.isEnabled,s=t.onBottomArrive,r=t.onBottomLeave,a=t.onTopArrive,i=t.onTopLeave,o=y.useRef(!1),c=y.useRef(!1),d=y.useRef(0),h=y.useRef(null),m=y.useCallback(function(j,w){if(h.current!==null){var _=h.current,k=_.scrollTop,C=_.scrollHeight,E=_.clientHeight,A=h.current,M=w>0,R=C-E-k,D=!1;R>w&&o.current&&(r&&r(j),o.current=!1),M&&c.current&&(i&&i(j),c.current=!1),M&&w>R?(s&&!o.current&&s(j),A.scrollTop=C,D=!0,o.current=!0):!M&&-w>k&&(a&&!c.current&&a(j),A.scrollTop=0,D=!0,c.current=!0),D&&eV(j)}},[s,r,a,i]),p=y.useCallback(function(j){m(j,j.deltaY)},[m]),g=y.useCallback(function(j){d.current=j.changedTouches[0].clientY},[]),b=y.useCallback(function(j){var w=d.current-j.changedTouches[0].clientY;m(j,w)},[m]),v=y.useCallback(function(j){if(j){var w=j9?{passive:!1}:!1;j.addEventListener("wheel",p,w),j.addEventListener("touchstart",g,w),j.addEventListener("touchmove",b,w)}},[b,g,p]),N=y.useCallback(function(j){j&&(j.removeEventListener("wheel",p,!1),j.removeEventListener("touchstart",g,!1),j.removeEventListener("touchmove",b,!1))},[b,g,p]);return y.useEffect(function(){if(e){var j=h.current;return v(j),function(){N(j)}}},[e,v,N]),function(j){h.current=j}}var QC=["boxSizing","height","overflow","paddingRight","position"],ZC={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function ek(t){t.cancelable&&t.preventDefault()}function tk(t){t.stopPropagation()}function sk(){var t=this.scrollTop,e=this.scrollHeight,s=t+this.offsetHeight;t===0?this.scrollTop=1:s===e&&(this.scrollTop=t-1)}function nk(){return"ontouchstart"in window||navigator.maxTouchPoints}var rk=!!(typeof window<"u"&&window.document&&window.document.createElement),ru=0,sc={capture:!1,passive:!1};function sV(t){var e=t.isEnabled,s=t.accountForScrollbars,r=s===void 0?!0:s,a=y.useRef({}),i=y.useRef(null),o=y.useCallback(function(d){if(rk){var h=document.body,m=h&&h.style;if(r&&QC.forEach(function(v){var N=m&&m[v];a.current[v]=N}),r&&ru<1){var p=parseInt(a.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,b=window.innerWidth-g+p||0;Object.keys(ZC).forEach(function(v){var N=ZC[v];m&&(m[v]=N)}),m&&(m.paddingRight="".concat(b,"px"))}h&&nk()&&(h.addEventListener("touchmove",ek,sc),d&&(d.addEventListener("touchstart",sk,sc),d.addEventListener("touchmove",tk,sc))),ru+=1}},[r]),c=y.useCallback(function(d){if(rk){var h=document.body,m=h&&h.style;ru=Math.max(ru-1,0),r&&ru<1&&QC.forEach(function(p){var g=a.current[p];m&&(m[p]=g)}),h&&nk()&&(h.removeEventListener("touchmove",ek,sc),d&&(d.removeEventListener("touchstart",sk,sc),d.removeEventListener("touchmove",tk,sc)))}},[r]);return y.useEffect(function(){if(e){var d=i.current;return o(d),function(){c(d)}}},[e,o,c]),function(d){i.current=d}}var nV=function(e){var s=e.target;return s.ownerDocument.activeElement&&s.ownerDocument.activeElement.blur()},rV={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function aV(t){var e=t.children,s=t.lockEnabled,r=t.captureEnabled,a=r===void 0?!0:r,i=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,h=tV({isEnabled:a,onBottomArrive:i,onBottomLeave:o,onTopArrive:c,onTopLeave:d}),m=sV({isEnabled:s}),p=function(b){h(b),m(b)};return We(y.Fragment,null,s&&We("div",{onClick:nV,css:rV}),e(p))}var iV={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},oV=function(e){var s=e.name,r=e.onFocus;return We("input",{required:!0,name:s,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:iV,value:"",onChange:function(){}})},lV=oV;function l1(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function cV(){return l1(/^iPhone/i)}function pE(){return l1(/^Mac/i)}function dV(){return l1(/^iPad/i)||pE()&&navigator.maxTouchPoints>1}function uV(){return cV()||dV()}function hV(){return pE()||uV()}var mV=function(e){return e.label},fV=function(e){return e.label},pV=function(e){return e.value},gV=function(e){return!!e.isDisabled},xV={clearIndicator:Z9,container:U9,control:iU,dropdownIndicator:X9,group:dU,groupHeading:hU,indicatorsContainer:G9,indicatorSeparator:tU,input:gU,loadingIndicator:rU,loadingMessage:L9,menu:T9,menuList:D9,menuPortal:I9,multiValue:wU,multiValueLabel:jU,multiValueRemove:NU,noOptionsMessage:z9,option:AU,placeholder:OU,singleValue:PU,valueContainer:q9},bV={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},vV=4,gE=4,yV=38,wV=gE*2,jV={baseUnit:gE,controlHeight:yV,menuGutter:wV},Fb={borderRadius:vV,colors:bV,spacing:jV},NV={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:WC(),captureMenuScroll:!WC(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:XU(),formatGroupLabel:mV,getOptionLabel:fV,getOptionValue:pV,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:gV,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!y9(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var s=e.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ak(t,e,s,r){var a=vE(t,e,s),i=yE(t,e,s),o=bE(t,e),c=mp(t,e);return{type:"option",data:e,isDisabled:a,isSelected:i,label:o,value:c,index:r}}function Lf(t,e){return t.options.map(function(s,r){if("options"in s){var a=s.options.map(function(o,c){return ak(t,o,e,c)}).filter(function(o){return ok(t,o)});return a.length>0?{type:"group",data:s,options:a,index:r}:void 0}var i=ak(t,s,e,r);return ok(t,i)?i:void 0}).filter(N9)}function xE(t){return t.reduce(function(e,s){return s.type==="group"?e.push.apply(e,Qw(s.options.map(function(r){return r.data}))):e.push(s.data),e},[])}function ik(t,e){return t.reduce(function(s,r){return r.type==="group"?s.push.apply(s,Qw(r.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(r.index,"-").concat(a.index)}}))):s.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),s},[])}function SV(t,e){return xE(Lf(t,e))}function ok(t,e){var s=t.inputValue,r=s===void 0?"":s,a=e.data,i=e.isSelected,o=e.label,c=e.value;return(!jE(t)||!i)&&wE(t,{label:o,value:c,data:a},r)}function _V(t,e){var s=t.focusedValue,r=t.selectValue,a=r.indexOf(s);if(a>-1){var i=e.indexOf(s);if(i>-1)return s;if(a<e.length)return e[a]}return null}function CV(t,e){var s=t.focusedOption;return s&&e.indexOf(s)>-1?s:e[0]}var Ib=function(e,s){var r,a=(r=e.find(function(i){return i.data===s}))===null||r===void 0?void 0:r.id;return a||null},bE=function(e,s){return e.getOptionLabel(s)},mp=function(e,s){return e.getOptionValue(s)};function vE(t,e,s){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,s):!1}function yE(t,e,s){if(s.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,s);var r=mp(t,e);return s.some(function(a){return mp(t,a)===r})}function wE(t,e,s){return t.filterOption?t.filterOption(e,s):!0}var jE=function(e){var s=e.hideSelectedOptions,r=e.isMulti;return s===void 0?r:s},kV=1,NE=function(t){KI(s,t);var e=QI(s);function s(r){var a;if(WI(this,s),a=e.call(this,r),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.isAppleDevice=hV(),a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,h){var m=a.props,p=m.onChange,g=m.name;h.name=g,a.ariaOnChange(d,h),p(d,h)},a.setValue=function(d,h,m){var p=a.props,g=p.closeMenuOnSelect,b=p.isMulti,v=p.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:v}),g&&(a.setState({inputIsHiddenAfterUpdate:!b}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:h,option:m})},a.selectOption=function(d){var h=a.props,m=h.blurInputOnSelect,p=h.isMulti,g=h.name,b=a.state.selectValue,v=p&&a.isOptionSelected(d,b),N=a.isOptionDisabled(d,b);if(v){var j=a.getOptionValue(d);a.setValue(b.filter(function(w){return a.getOptionValue(w)!==j}),"deselect-option",d)}else if(!N)p?a.setValue([].concat(Qw(b),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:g});return}m&&a.blurInput()},a.removeValue=function(d){var h=a.props.isMulti,m=a.state.selectValue,p=a.getOptionValue(d),g=m.filter(function(v){return a.getOptionValue(v)!==p}),b=af(h,g,g[0]||null);a.onChange(b,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange(af(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,h=a.state.selectValue,m=h[h.length-1],p=h.slice(0,h.length-1),g=af(d,p,p[0]||null);m&&a.onChange(g,{action:"pop-value",removedValue:m})},a.getFocusedOptionId=function(d){return Ib(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return ik(Lf(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,h=new Array(d),m=0;m<d;m++)h[m]=arguments[m];return p9.apply(void 0,[a.props.classNamePrefix].concat(h))},a.getOptionLabel=function(d){return bE(a.props,d)},a.getOptionValue=function(d){return mp(a.props,d)},a.getStyles=function(d,h){var m=a.props.unstyled,p=xV[d](h,m);p.boxSizing="border-box";var g=a.props.styles[d];return g?g(p,h):p},a.getClassNames=function(d,h){var m,p;return(m=(p=a.props.classNames)[d])===null||m===void 0?void 0:m.call(p,h)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return FU(a.props)},a.buildCategorizedOptions=function(){return Lf(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return xE(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,h){a.setState({ariaSelection:Xe({value:d},h)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var h=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():h&&a.openMenu("first"):(h&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var h=a.props,m=h.isMulti,p=h.menuIsOpen;a.focusInput(),p?(a.setState({inputIsHiddenAfterUpdate:!m}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&C0(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var h=d.touches,m=h&&h.item(0);m&&(a.initialTouchX=m.clientX,a.initialTouchY=m.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var h=d.touches,m=h&&h.item(0);if(m){var p=Math.abs(m.clientX-a.initialTouchX),g=Math.abs(m.clientY-a.initialTouchY),b=5;a.userIsDragging=p>b||g>b}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var h=a.props.inputValue,m=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(m,{action:"input-change",prevInputValue:h}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var h=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:h}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var h=a.getFocusableOptions(),m=h.indexOf(d);a.setState({focusedOption:d,focusedOptionId:m>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return jE(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var h=a.props,m=h.isMulti,p=h.backspaceRemovesValue,g=h.escapeClearsValue,b=h.inputValue,v=h.isClearable,N=h.isDisabled,j=h.menuIsOpen,w=h.onKeyDown,_=h.tabSelectsValue,k=h.openMenuOnFocus,C=a.state,E=C.focusedOption,A=C.focusedValue,M=C.selectValue;if(!N&&!(typeof w=="function"&&(w(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!m||b)return;a.focusValue("previous");break;case"ArrowRight":if(!m||b)return;a.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(A)a.removeValue(A);else{if(!p)return;m?a.popValue():v&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!j||!_||!E||k&&a.isOptionSelected(E,M))return;a.selectOption(E);break;case"Enter":if(d.keyCode===229)break;if(j){if(!E||a.isComposing)return;a.selectOption(E);break}return;case"Escape":j?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:b}),a.onMenuClose()):v&&g&&a.clearValue();break;case" ":if(b)return;if(!j){a.openMenu("first");break}if(!E)return;a.selectOption(E);break;case"ArrowUp":j?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":j?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!j)return;a.focusOption("pageup");break;case"PageDown":if(!j)return;a.focusOption("pagedown");break;case"Home":if(!j)return;a.focusOption("first");break;case"End":if(!j)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++kV),a.state.selectValue=HC(r.value),r.menuIsOpen&&a.state.selectValue.length){var i=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),c=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=i,a.state.focusedOption=o[c],a.state.focusedOptionId=Ib(i,o[c])}return a}return YI(s,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&GC(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isDisabled,c=i.menuIsOpen,d=this.state.isFocused;(d&&!o&&a.isDisabled||d&&c&&!a.menuIsOpen)&&this.focusInput(),d&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(GC(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,i){this.props.onInputChange(a,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var i=this,o=this.state,c=o.selectValue,d=o.isFocused,h=this.buildFocusableOptions(),m=a==="first"?0:h.length-1;if(!this.props.isMulti){var p=h.indexOf(c[0]);p>-1&&(m=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[m],focusedOptionId:this.getFocusedOptionId(h[m])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(a){var i=this.state,o=i.selectValue,c=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=o.indexOf(c);c||(d=-1);var h=o.length-1,m=-1;if(o.length){switch(a){case"previous":d===0?m=0:d===-1?m=h:m=d-1;break;case"next":d>-1&&d<h&&(m=d+1);break}this.setState({inputIsHidden:m!==-1,focusedValue:o[m]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,h=c.indexOf(o);o||(h=-1),a==="up"?d=h>0?h-1:c.length-1:a==="down"?d=(h+1)%c.length:a==="pageup"?(d=h-i,d<0&&(d=0)):a==="pagedown"?(d=h+i,d>c.length-1&&(d=c.length-1)):a==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Fb):Xe(Xe({},Fb),this.props.theme):Fb}},{key:"getCommonProps",value:function(){var a=this.clearValue,i=this.cx,o=this.getStyles,c=this.getClassNames,d=this.getValue,h=this.selectOption,m=this.setValue,p=this.props,g=p.isMulti,b=p.isRtl,v=p.options,N=this.hasValue();return{clearValue:a,cx:i,getStyles:o,getClassNames:c,getValue:d,hasValue:N,isMulti:g,isRtl:b,options:v,selectOption:h,selectProps:p,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,i=a.isClearable,o=a.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(a,i){return vE(this.props,a,i)}},{key:"isOptionSelected",value:function(a,i){return yE(this.props,a,i)}},{key:"filterOption",value:function(a,i){return wE(this.props,a,i)}},{key:"formatOptionLabel",value:function(a,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(a,{context:i,inputValue:o,selectValue:c})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,i=a.isDisabled,o=a.isSearchable,c=a.inputId,d=a.inputValue,h=a.tabIndex,m=a.form,p=a.menuIsOpen,g=a.required,b=this.getComponents(),v=b.Input,N=this.state,j=N.inputIsHidden,w=N.ariaSelection,_=this.commonProps,k=c||this.getElementId("input"),C=Xe(Xe(Xe({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?y.createElement(v,tt({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:i,isHidden:j,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:m,type:"text",value:d},C)):y.createElement(ZU,tt({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:up,onFocus:this.onInputFocus,disabled:i,tabIndex:h,inputMode:"none",form:m,value:""},C))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,i=this.getComponents(),o=i.MultiValue,c=i.MultiValueContainer,d=i.MultiValueLabel,h=i.MultiValueRemove,m=i.SingleValue,p=i.Placeholder,g=this.commonProps,b=this.props,v=b.controlShouldRenderValue,N=b.isDisabled,j=b.isMulti,w=b.inputValue,_=b.placeholder,k=this.state,C=k.selectValue,E=k.focusedValue,A=k.isFocused;if(!this.hasValue()||!v)return w?null:y.createElement(p,tt({},g,{key:"placeholder",isDisabled:N,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),_);if(j)return C.map(function(R,D){var L=R===E,B="".concat(a.getOptionLabel(R),"-").concat(a.getOptionValue(R));return y.createElement(o,tt({},g,{components:{Container:c,Label:d,Remove:h},isFocused:L,isDisabled:N,key:B,index:D,removeProps:{onClick:function(){return a.removeValue(R)},onTouchEnd:function(){return a.removeValue(R)},onMouseDown:function(P){P.preventDefault()}},data:R}),a.formatOptionLabel(R,"value"))});if(w)return null;var M=C[0];return y.createElement(m,tt({},g,{data:M,isDisabled:N}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),i=a.ClearIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,h=c.isLoading,m=this.state.isFocused;if(!this.isClearable()||!i||d||!this.hasValue()||h)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(i,tt({},o,{innerProps:p,isFocused:m}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),i=a.LoadingIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,h=c.isLoading,m=this.state.isFocused;if(!i||!h)return null;var p={"aria-hidden":"true"};return y.createElement(i,tt({},o,{innerProps:p,isDisabled:d,isFocused:m}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),i=a.DropdownIndicator,o=a.IndicatorSeparator;if(!i||!o)return null;var c=this.commonProps,d=this.props.isDisabled,h=this.state.isFocused;return y.createElement(o,tt({},c,{isDisabled:d,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),i=a.DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,h={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return y.createElement(i,tt({},o,{innerProps:h,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,i=this.getComponents(),o=i.Group,c=i.GroupHeading,d=i.Menu,h=i.MenuList,m=i.MenuPortal,p=i.LoadingMessage,g=i.NoOptionsMessage,b=i.Option,v=this.commonProps,N=this.state.focusedOption,j=this.props,w=j.captureMenuScroll,_=j.inputValue,k=j.isLoading,C=j.loadingMessage,E=j.minMenuHeight,A=j.maxMenuHeight,M=j.menuIsOpen,R=j.menuPlacement,D=j.menuPosition,L=j.menuPortalTarget,B=j.menuShouldBlockScroll,O=j.menuShouldScrollIntoView,P=j.noOptionsMessage,z=j.onMenuScrollToTop,q=j.onMenuScrollToBottom;if(!M)return null;var I=function(W,ee){var ne=W.type,X=W.data,Q=W.isDisabled,de=W.isSelected,ve=W.label,Pe=W.value,He=N===X,Qe=Q?void 0:function(){return a.onOptionHover(X)},be=Q?void 0:function(){return a.selectOption(X)},se="".concat(a.getElementId("option"),"-").concat(ee),le={id:se,onClick:be,onMouseMove:Qe,onMouseOver:Qe,tabIndex:-1,role:"option","aria-selected":a.isAppleDevice?void 0:de};return y.createElement(b,tt({},v,{innerProps:le,data:X,isDisabled:Q,isSelected:de,key:se,label:ve,type:ne,value:Pe,isFocused:He,innerRef:He?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(W.data,"menu"))},V;if(this.hasOptions())V=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var W=J.data,ee=J.options,ne=J.index,X="".concat(a.getElementId("group"),"-").concat(ne),Q="".concat(X,"-heading");return y.createElement(o,tt({},v,{key:X,data:W,options:ee,Heading:c,headingProps:{id:Q,data:J.data},label:a.formatGroupLabel(J.data)}),J.options.map(function(de){return I(de,"".concat(ne,"-").concat(de.index))}))}else if(J.type==="option")return I(J,"".concat(J.index))});else if(k){var H=C({inputValue:_});if(H===null)return null;V=y.createElement(p,v,H)}else{var Y=P({inputValue:_});if(Y===null)return null;V=y.createElement(g,v,Y)}var U={minMenuHeight:E,maxMenuHeight:A,menuPlacement:R,menuPosition:D,menuShouldScrollIntoView:O},K=y.createElement(M9,tt({},v,U),function(J){var W=J.ref,ee=J.placerProps,ne=ee.placement,X=ee.maxHeight;return y.createElement(d,tt({},v,U,{innerRef:W,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:k,placement:ne}),y.createElement(aV,{captureEnabled:w,onTopArrive:z,onBottomArrive:q,lockEnabled:B},function(Q){return y.createElement(h,tt({},v,{innerRef:function(ve){a.getMenuListRef(ve),Q(ve)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:a.getElementId("listbox")},isLoading:k,maxHeight:X,focusedOption:N}),V)}))});return L||D==="fixed"?y.createElement(m,tt({},v,{appendTo:L,controlElement:this.controlRef,menuPlacement:R,menuPosition:D}),K):K}},{key:"renderFormField",value:function(){var a=this,i=this.props,o=i.delimiter,c=i.isDisabled,d=i.isMulti,h=i.name,m=i.required,p=this.state.selectValue;if(m&&!this.hasValue()&&!c)return y.createElement(lV,{name:h,onFocus:this.onValueInputFocus});if(!(!h||c))if(d)if(o){var g=p.map(function(N){return a.getOptionValue(N)}).join(o);return y.createElement("input",{name:h,type:"hidden",value:g})}else{var b=p.length>0?p.map(function(N,j){return y.createElement("input",{key:"i-".concat(j),name:h,type:"hidden",value:a.getOptionValue(N)})}):y.createElement("input",{name:h,type:"hidden",value:""});return y.createElement("div",null,b)}else{var v=p[0]?this.getOptionValue(p[0]):"";return y.createElement("input",{name:h,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,i=this.state,o=i.ariaSelection,c=i.focusedOption,d=i.focusedValue,h=i.isFocused,m=i.selectValue,p=this.getFocusableOptions();return y.createElement(WU,tt({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:d,isFocused:h,selectValue:m,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),i=a.Control,o=a.IndicatorsContainer,c=a.SelectContainer,d=a.ValueContainer,h=this.props,m=h.className,p=h.id,g=h.isDisabled,b=h.menuIsOpen,v=this.state.isFocused,N=this.commonProps=this.getCommonProps();return y.createElement(c,tt({},N,{className:m,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:v}),this.renderLiveRegion(),y.createElement(i,tt({},N,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:v,menuIsOpen:b}),y.createElement(d,tt({},N,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),y.createElement(o,tt({},N,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,i){var o=i.prevProps,c=i.clearFocusValueOnUpdate,d=i.inputIsHiddenAfterUpdate,h=i.ariaSelection,m=i.isFocused,p=i.prevWasFocused,g=i.instancePrefix,b=a.options,v=a.value,N=a.menuIsOpen,j=a.inputValue,w=a.isMulti,_=HC(v),k={};if(o&&(v!==o.value||b!==o.options||N!==o.menuIsOpen||j!==o.inputValue)){var C=N?SV(a,_):[],E=N?ik(Lf(a,_),"".concat(g,"-option")):[],A=c?_V(i,_):null,M=CV(i,C),R=Ib(E,M);k={selectValue:_,focusedOption:M,focusedOptionId:R,focusableOptionsWithIds:E,focusedValue:A,clearFocusValueOnUpdate:!1}}var D=d!=null&&a!==o?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},L=h,B=m&&p;return m&&!B&&(L={value:af(w,_,_[0]||null),options:_,action:"initial-input-focus"},B=!p),(h==null?void 0:h.action)==="initial-input-focus"&&(L=null),Xe(Xe(Xe({},k),D),{},{prevProps:a,ariaSelection:L,prevWasFocused:B})}}]),s}(y.Component);NE.defaultProps=NV;var EV=y.forwardRef(function(t,e){var s=GI(t);return y.createElement(NE,tt({ref:e},s))}),gi=EV;const AV=({activeFilters:t,onRemoveFilter:e})=>{if(!t||t.length===0)return null;const s=r=>{switch(r){case"searchTerm":return"bg-blue-100 text-blue-800 border-blue-200";case"locationFilter":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"categoryFilter":return"bg-green-100 text-green-800 border-green-200";case"grantTypeFilter":return"bg-purple-100 text-purple-800 border-purple-200";case"funderTypeFilter":return"bg-sky-100 text-sky-800 border-sky-200";case"grantStatusFilter":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"minFunding":case"maxFunding":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"focusAreaFilter":return"bg-pink-100 text-pink-800 border-pink-200";case"geographicScopeFilter":return"bg-teal-100 text-teal-800 border-teal-200";case"minBudget":case"maxBudget":return"bg-cyan-100 text-cyan-800 border-cyan-200";case"minStaff":case"maxStaff":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-4 text-sm font-medium",children:t.map((r,a)=>n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full border ${s(r.key)} whitespace-nowrap`,children:[r.label,n.jsx("button",{onClick:()=>e(r.key,r.value),className:"ml-2 p-0.5 rounded-full hover:bg-black/10 focus:outline-none focus:ring-1 focus:ring-offset-1 transition-colors","aria-label":`Remove filter ${r.label}`,children:n.jsx(Ke,{size:12})})]},`${r.key}-${r.value||a}`))})},TV=(t,e)=>{const[s,r]=y.useState(t);return y.useEffect(()=>{const a=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(a)}},[t,e]),s},MV=(t,e,s=5)=>{const[r,a]=y.useState([]),[i,o]=y.useState(!1),c=y.useMemo(()=>{if(!t||t.length<2)return[];const d=t.toLowerCase(),h=[];return e.forEach(m=>{m.name&&m.name.toLowerCase().includes(d)&&h.push({type:"funder",text:m.name,subtitle:"Organization",slug:m.slug,icon:"🏢"}),m.focus_areas&&m.focus_areas.forEach(p=>{p.toLowerCase().includes(d)&&!h.some(g=>g.text===p)&&h.push({type:"focus_area",text:p,subtitle:"Focus Area",icon:"🎯"})}),m.location&&m.location.toLowerCase().includes(d)&&!h.some(p=>p.text===m.location)&&h.push({type:"location",text:m.location,subtitle:"Location",icon:"📍"}),m.grant_types&&m.grant_types.forEach(p=>{p.toLowerCase().includes(d)&&!h.some(g=>g.text===p)&&h.push({type:"grant_type",text:p,subtitle:"Grant Type",icon:"💰"})})}),h.slice(0,s)},[t,e,s]);return y.useEffect(()=>{if(t&&t.length>=2){o(!0);const d=setTimeout(()=>{a(c),o(!1)},150);return()=>clearTimeout(d)}else a([]),o(!1)},[c,t]),{suggestions:r,isLoading:i}},OV=({searchTerm:t,onSuggestionSelect:e,onSearchChange:s,funders:r=[],placeholder:a="Search funders, focus areas, locations...",className:i="",showRecentSearches:o=!0,showTrendingSearches:c=!0})=>{const[d,h]=y.useState(t||""),[m,p]=y.useState(!1),[g,b]=y.useState(!1),v=y.useRef(null),N=TV(d,300),{suggestions:j}=MV(N,r),[w,_]=y.useState([]);y.useEffect(()=>{try{const P=localStorage.getItem("recentSearches");P&&_(JSON.parse(P))}catch(P){console.warn("Failed to parse recent searches:",P)}},[]),y.useEffect(()=>{t!==d&&h(t||"")},[t]),y.useEffect(()=>{if(N!==t){const P=e||s;P&&P({text:N,type:"text"})}},[N]);const k=P=>{if(!(!P||P.length<2))try{const z=[P,...w.filter(q=>q!==P)].slice(0,5);_(z),localStorage.setItem("recentSearches",JSON.stringify(z))}catch(z){console.warn("Failed to save recent searches:",z)}},C=P=>{var q;h(P.text),k(P.text);const z=e||s;z&&z(P),b(!1),(q=v.current)==null||q.blur()},E=P=>{h(P.target.value),b(!0)},A=()=>{p(!0),b(!0)},M=()=>{setTimeout(()=>p(!1),200)},R=P=>{P.key==="Enter"&&d?(P.preventDefault(),C({text:d,type:"text"})):P.key==="Escape"&&b(!1)},D=()=>{var z;h("");const P=e||s;P&&P({text:"",type:"text"}),(z=v.current)==null||z.focus()},L=()=>{_([]),localStorage.removeItem("recentSearches")},B=["Healthcare","Education","Environment","Arts & Culture","Social Justice"],O=m&&(j.length>0||d.length<2&&(w.length>0||c));return n.jsxs("div",{className:`relative ${i}`,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ot,{size:20,className:"text-slate-400"})}),n.jsx("input",{ref:v,type:"text",value:d,onChange:E,onFocus:A,onBlur:M,onKeyDown:R,placeholder:a,className:"block w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",autoComplete:"off"}),d&&n.jsx("button",{type:"button",onClick:D,className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-slate-600 transition-colors","aria-label":"Clear search",children:n.jsx(Ke,{size:18,className:"text-slate-400"})})]}),O&&n.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-lg shadow-lg max-h-96 overflow-y-auto",role:"listbox",children:n.jsxs(n.Fragment,{children:[j.map((P,z)=>n.jsxs("button",{type:"button",onMouseDown:q=>{q.preventDefault(),C(P)},className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-center transition-colors group cursor-pointer text-slate-700",children:[n.jsx("span",{className:"mr-3 text-lg",children:P.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:P.text}),n.jsx("div",{className:"text-xs text-slate-500",children:P.subtitle})]})]},`suggestion-${z}`)),d.length<2&&w.length>0&&o&&n.jsxs("div",{children:[n.jsxs("div",{className:"px-4 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-100 flex items-center justify-between",children:["Recent Searches",n.jsx("button",{type:"button",onMouseDown:P=>{P.preventDefault(),L()},className:"text-slate-400 hover:text-slate-600 text-xs font-normal normal-case",children:"Clear"})]}),w.map((P,z)=>n.jsxs("button",{type:"button",onMouseDown:q=>{q.preventDefault(),C({text:P,type:"text"})},className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-center transition-colors cursor-pointer text-slate-700",children:[n.jsx(aa,{size:16,className:"mr-3 text-slate-400"}),n.jsx("span",{children:P})]},`recent-${z}`))]}),d.length<2&&j.length===0&&w.length===0&&c&&n.jsxs("div",{children:[n.jsxs("div",{className:"px-4 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-100",children:[n.jsx(Cs,{size:12,className:"inline mr-1"}),"Trending Searches"]}),B.map((P,z)=>n.jsxs("button",{type:"button",onMouseDown:q=>{q.preventDefault(),C({text:P,type:"text"})},className:"w-full px-4 py-3 text-left hover:bg-slate-50 flex items-center transition-colors cursor-pointer text-slate-700 focus:outline-none focus:bg-blue-50",children:[n.jsx(Cs,{size:16,className:"mr-3 text-slate-400"}),n.jsx("span",{children:P})]},`trending-${z}`))]})]})})]})},RV=[{value:"",label:"All Funding Levels"},{value:"0-500000",label:"Under $500K"},{value:"500000-1000000",label:"$500K - $1M"},{value:"1000000-5000000",label:"$1M - $5M"},{value:"5000000-10000000",label:"$5M - $10M"},{value:"10000000-25000000",label:"$10M - $25M"},{value:"25000000-50000000",label:"$25M - $50M"},{value:"50000000-100000000",label:"$50M - $100M"},{value:"100000000-999999999",label:"$100M+"}],DV=[{value:"",label:"All Budget Sizes"},{value:"0-250000",label:"Under $250K"},{value:"250000-500000",label:"$250K - $500K"},{value:"500000-1000000",label:"$500K - $1M"},{value:"1000000-2500000",label:"$1M - $2.5M"},{value:"2500000-5000000",label:"$2.5M - $5M"},{value:"5000000-999999999",label:"$5M+"}],Ec=({isMobileVisible:t,searchTerm:e,setSearchTerm:s,locationFilter:r,setLocationFilter:a,categoryFilter:i,setCategoryFilter:o,grantTypeFilter:c,setGrantTypeFilter:d,grantStatusFilter:h,setGrantStatusFilter:m,geographicScopeFilter:p,setGeographicScopeFilter:g,focusAreaFilter:b,setFocusAreaFilter:v,annualGivingFilter:N,setAnnualGivingFilter:j,funderTypeFilter:w,setFunderTypeFilter:_,minBudget:k,setMinBudget:C,maxBudget:E,setMaxBudget:A,minStaff:M,setMinStaff:R,maxStaff:D,setMaxStaff:L,typeFilter:B,setTypeFilter:O,availableTypes:P,orgTypeConfig:z,sortCriteria:q,setSortCriteria:I,uniqueCategories:V=[],uniqueLocations:H=[],uniqueGeographicScopes:Y=[],uniqueGrantTypes:U=[],uniqueGrantStatuses:K=[],uniqueFocusAreas:J=[],uniqueFunderTypes:W=[],pageType:ee,onClearFilters:ne,activeFilters:X,onRemoveFilter:Q,hideSearchInput:de=!1,funders:ve=[],nonprofits:Pe=[],organizations:He=[],onSuggestionSelect:Qe})=>{const be=ee==="grants",se=ee==="funders",le=ee==="nonprofits",ge=ee==="organizations";let te="Search",xe="Search by keyword...",De="focus:ring-slate-500",Ee;be?(te="Search Grants",xe="Search by keyword, foundation, category...",De="focus:ring-blue-500",Ee=n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"dueDate_asc",children:"Due Date (Soonest)"}),n.jsx("option",{value:"dueDate_desc",children:"Due Date (Latest)"}),n.jsx("option",{value:"funding_desc",children:"Funding (Highest)"}),n.jsx("option",{value:"funding_asc",children:"Funding (Lowest)"}),n.jsx("option",{value:"title_asc",children:"Title (A-Z)"}),n.jsx("option",{value:"title_desc",children:"Title (Z-A)"})]})):se?(te="Search Funders",xe="Search by name, focus area...",De="focus:ring-green-500",Ee=n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),n.jsx("option",{value:"funding_desc",children:"Annual Giving (Highest)"}),n.jsx("option",{value:"funding_asc",children:"Annual Giving (Lowest)"})]})):le?(te="Search Nonprofits",xe="Search by name, focus area...",De="focus:ring-purple-500",Ee=n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),n.jsx("option",{value:"staffCount_desc",children:"Staff Count (Highest)"}),n.jsx("option",{value:"staffCount_asc",children:"Staff Count (Lowest)"}),n.jsx("option",{value:"yearFounded_desc",children:"Year Founded (Newest)"}),n.jsx("option",{value:"yearFounded_asc",children:"Year Founded (Oldest)"})]})):ge&&(te="Search Organizations",xe="Search by name, type, focus area...",De="focus:ring-blue-500",Ee=n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),n.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),n.jsx("option",{value:"type_asc",children:"Type (A-Z)"}),n.jsx("option",{value:"type_desc",children:"Type (Z-A)"}),n.jsx("option",{value:"location_asc",children:"Location (A-Z)"}),n.jsx("option",{value:"location_desc",children:"Location (Z-A)"}),n.jsx("option",{value:"funding_desc",children:"Funding (High to Low)"}),n.jsx("option",{value:"funding_asc",children:"Funding (Low to High)"}),n.jsx("option",{value:"created_desc",children:"Newest First"}),n.jsx("option",{value:"created_asc",children:"Oldest First"})]}));const ce={control:(Ce,me)=>({...Ce,borderColor:me.isFocused?se?"#059669":le?"#7e22ce":"#3b82f6":"#cbd5e1",boxShadow:me.isFocused?`0 0 0 1px ${se?"#059669":le?"#7e22ce":"#3b82f6"}`:"none",minHeight:"46px",borderRadius:"8px","&:hover":{borderColor:me.isFocused?se?"#059669":le?"#7e22ce":"#3b82f6":"#94a3b8"},transition:"all 0.2s ease"}),placeholder:Ce=>({...Ce,color:"#94a3b8",fontSize:"14px"}),multiValue:Ce=>({...Ce,backgroundColor:se?"#dcfce7":le?"#f3e8ff":"#dbeafe",borderRadius:"6px"}),multiValueLabel:Ce=>({...Ce,color:se?"#166534":le?"#581c87":"#1e40af",fontSize:"12px",fontWeight:"500"}),multiValueRemove:Ce=>({...Ce,color:se?"#166534":le?"#581c87":"#1e40af","&:hover":{backgroundColor:se?"#bbf7d0":le?"#e9d5ff":"#bfdbfe",color:se?"#166534":le?"#581c87":"#1e40af"}})},ye=y.useMemo(()=>H.map(Ce=>({value:Ce,label:Ce})),[H]),Oe=y.useMemo(()=>V.map(Ce=>({value:Ce,label:Ce})),[V]),Me=y.useMemo(()=>J.map(Ce=>({value:Ce,label:Ce})),[J]),it=y.useMemo(()=>Y.map(Ce=>({value:Ce,label:Ce})),[Y]),ft=Ce=>me=>{const Re=me?me.map(Be=>Be.value):[];Ce(Re)},Te=Ce=>{const me=Ce.target.value;if(me){const[Re,Be]=me.split("-");C(Re),A(Be)}else C(""),A("")},ze=(Ce,me)=>Ce?Array.isArray(Ce)?me.filter(Re=>Ce.includes(Re.value)):me.find(Re=>Re.value===Ce)||[]:[],ae=y.useMemo(()=>ze(r,ye),[r,ye]),_e=y.useMemo(()=>ze(i,Oe),[i,Oe]);y.useMemo(()=>ze(b,Me),[b,Me]);const Fe=y.useMemo(()=>ze(p,it),[p,it]),$e=`mt-8 max-w-6xl mx-auto bg-white p-6 sm:p-8 rounded-2xl border border-slate-200 shadow-lg ${t?"block":"hidden"} md:block`;return n.jsxs("div",{className:$e,children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(jh,{size:20,className:`mr-3 ${se?"text-green-600":le?"text-purple-600":"text-blue-600"}`}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Refine Your Search"})]}),X&&X.length>0&&n.jsxs("button",{onClick:ne,className:`inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${se?"text-green-700 bg-green-100 hover:bg-green-200":le?"text-purple-700 bg-purple-100 hover:bg-purple-200":"text-blue-700 bg-blue-100 hover:bg-blue-200"}`,children:[n.jsx(sl,{size:14,className:"mr-1"}),"Clear All"]})]}),!de&&n.jsxs("div",{className:"flex gap-4 items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"enhanced-search",className:"block text-sm font-medium text-slate-700 mb-2",children:te}),n.jsx(OV,{searchTerm:e,onSearchChange:s,onSuggestionSelect:Qe,funders:ve,nonprofits:Pe,organizations:He,placeholder:xe,className:""})]}),n.jsxs("div",{className:"w-64",children:[n.jsx("label",{htmlFor:"sort-criteria",className:"block text-sm font-medium text-slate-700 mb-2",children:"Sort By"}),n.jsxs("div",{className:"relative",children:[n.jsx(EF,{size:16,className:"text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none"}),n.jsx("select",{id:"sort-criteria",value:q,onChange:Ce=>I(Ce.target.value),className:`w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg bg-white text-sm focus:ring-1 ${De} transition-colors hover:border-slate-400 appearance-none`,children:Ee}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none",size:16})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[be&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Categories"}),n.jsx(gi,{id:"category-filter",isMulti:!0,options:Oe,value:_e,onChange:ft(o),placeholder:"Select categories...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"location-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Lt,{size:16,className:"inline mr-1"}),"Locations"]}),n.jsx(gi,{id:"location-filter",isMulti:!0,options:ye,value:ae,onChange:ft(a),placeholder:"Select locations...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx("label",{htmlFor:"grant-type-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Grant Types"}),n.jsxs("select",{id:"grant-type-filter",value:c||"",onChange:Ce=>d(Ce.target.value),className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400`,children:[n.jsx("option",{value:"",children:"All Grant Types"}),U.map(Ce=>n.jsx("option",{value:Ce,children:Ce},Ce))]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("label",{htmlFor:"grant-status-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),n.jsxs("select",{id:"grant-status-filter",value:h||"",onChange:Ce=>m(Ce.target.value),className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400`,children:[n.jsx("option",{value:"",children:"All Statuses"}),K.map(Ce=>n.jsx("option",{value:Ce,children:Ce},Ce))]})]})]}),se&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"funder-type-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(un,{size:16,className:"inline mr-1"}),"Funder Type"]}),n.jsxs("select",{id:"funder-type-filter",value:w||"",onChange:Ce=>_(Ce.target.value),className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400 appearance-none`,children:[n.jsx("option",{value:"",children:"All Types"}),W.map(Ce=>n.jsx("option",{value:Ce,children:Ce},Ce))]}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none",size:16})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"geographic-scope-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Lt,{size:16,className:"inline mr-1"}),"Geographic Scope"]}),n.jsx(gi,{id:"geographic-scope-filter",isMulti:!0,options:it,value:Fe,onChange:ft(g),placeholder:"Select scopes...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"focus-area-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Mb,{size:16,className:"inline mr-1"}),"Focus Areas"]}),n.jsx(gi,{id:"focus-area-filter",isMulti:!0,options:Me,value:ze(b,Me),onChange:ft(v),placeholder:"Select focus areas...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"annual-giving-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(an,{size:16,className:"inline mr-1"}),"Annual Giving"]}),n.jsx("select",{id:"annual-giving-filter",value:N||"",onChange:Ce=>j&&j(Ce.target.value),className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400 appearance-none`,children:RV.map(Ce=>n.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none",size:16})]})]}),le&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"np-focus-area-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Mb,{size:16,className:"inline mr-1"}),"Focus Areas"]}),n.jsx(gi,{id:"np-focus-area-filter",isMulti:!0,options:Me,value:ze(b,Me),onChange:ft(v),placeholder:"Select focus areas...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"np-location-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Lt,{size:16,className:"inline mr-1"}),"Location"]}),n.jsx(gi,{id:"np-location-filter",isMulti:!0,options:ye,value:ze(r,ye),onChange:ft(a),placeholder:"Select locations...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"np-budget-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(an,{size:16,className:"inline mr-1"}),"Annual Budget"]}),n.jsx("select",{id:"np-budget-filter",value:`${k||""}-${E||""}`,onChange:Te,className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400 appearance-none`,children:DV.map(Ce=>n.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none",size:16})]})]}),ge&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"org-type-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(er,{size:16,className:"inline mr-1"}),"Organization Type"]}),n.jsxs("select",{id:"org-type-filter",value:(B==null?void 0:B[0])||"",onChange:Ce=>O(Ce.target.value?[Ce.target.value]:[]),className:`w-full pl-3 pr-8 py-3 border border-slate-300 rounded-lg focus:ring-2 ${De} bg-white text-sm transition-colors hover:border-slate-400 appearance-none`,children:[n.jsx("option",{value:"",children:"All Types"}),P==null?void 0:P.map(Ce=>{const me=z==null?void 0:z[Ce];return n.jsx("option",{value:Ce,children:(me==null?void 0:me.label)||Ce},Ce)})]}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none",size:16})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"org-focus-area-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Mb,{size:16,className:"inline mr-1"}),"Focus Areas"]}),n.jsx(gi,{id:"org-focus-area-filter",isMulti:!0,options:Me,value:ze(b,Me),onChange:ft(v),placeholder:"Select focus areas...",className:"text-sm",styles:ce,isClearable:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{htmlFor:"org-location-filter",className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Lt,{size:16,className:"inline mr-1"}),"Location"]}),n.jsx(gi,{id:"org-location-filter",isMulti:!0,options:ye,value:ze(r,ye),onChange:ft(a),placeholder:"Select locations...",className:"text-sm",styles:ce,isClearable:!0})]})]})]}),X&&X.length>0&&n.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Active Filters:"}),n.jsx(AV,{activeFilters:X,onRemoveFilter:Q})]})})]})},k0=({currentPage:t,totalPages:e,onPageChange:s,activeColorClass:r,inactiveColorClass:a,disabledColorClass:i})=>n.jsxs("div",{className:"mt-10 flex justify-center items-center space-x-1 sm:space-x-2",children:[n.jsx("button",{onClick:()=>s(t-1),disabled:t===1,className:`px-3 py-1.5 sm:px-4 sm:py-2 border border-slate-300 rounded-md bg-white text-slate-700 hover:bg-slate-50 ${i} transition-colors text-xs sm:text-sm`,children:"Previous"}),e<=7?Array.from({length:e},(o,c)=>c+1).map(o=>n.jsx("button",{onClick:()=>s(o),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md transition-colors text-xs sm:text-sm ${t===o?r:a}`,children:o},o)):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>s(1),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md transition-colors text-xs sm:text-sm ${t===1?r:a}`,children:"1"}),t>3&&n.jsx("span",{className:"px-2 py-2 text-slate-500 hidden sm:inline text-xs",children:"..."}),![1,2,e-1,e].includes(t-1)&&t>2&&e>4&&n.jsx("button",{onClick:()=>s(t-1),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md ${a} text-xs sm:text-sm hidden md:inline`,children:t-1}),![1,e].includes(t)&&n.jsx("button",{onClick:()=>s(t),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md ${r} text-xs sm:text-sm`,children:t}),![1,2,e-1,e].includes(t+1)&&t<e-1&&e>4&&n.jsx("button",{onClick:()=>s(t+1),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md ${a} text-xs sm:text-sm hidden md:inline`,children:t+1}),t<e-2&&n.jsx("span",{className:"px-2 py-2 text-slate-500 hidden sm:inline text-xs",children:"..."}),n.jsx("button",{onClick:()=>s(e),className:`px-3 py-1.5 sm:px-4 sm:py-2 border rounded-md transition-colors text-xs sm:text-sm ${t===e?r:a}`,children:e})]}),n.jsx("button",{onClick:()=>s(t+1),disabled:t===e||e===0,className:`px-3 py-1.5 sm:px-4 sm:py-2 border border-slate-300 rounded-md bg-white text-slate-700 hover:bg-slate-50 ${i} transition-colors text-xs sm:text-sm`,children:"Next"})]}),E0=({targetValue:t,duration:e=2e3,step:s=1,prefix:r="",suffix:a="",formatValue:i,className:o=""})=>{const[c,d]=y.useState(0);y.useEffect(()=>{let m=0,p,g=null;const b=v=>{g||(g=v);const N=v-g,j=Math.min(N/e,1);let w=m+(t-m)*j;w=Math.round(w/s)*s,d(Math.min(w,t)),N<e?p=requestAnimationFrame(b):d(t)};return t>0?p=requestAnimationFrame(b):d(0),()=>{cancelAnimationFrame(p)}},[t,e,s]);const h=i?i(c):c.toLocaleString();return n.jsxs("span",{className:o,children:[r,h,a]})},c1=["Open","Rolling","Closed"],d1=(t,e,s,r,a,i,o)=>{const c=y.useMemo(()=>{let p=Array.isArray(t)?[...t]:[];if(s&&typeof s=="function")try{const g=s(p,e);Array.isArray(g)?p=g:p=p.filter(b=>s(b,e))}catch{p=p.filter(b=>{try{return s(b,e)}catch{return!0}})}if(a&&typeof a=="function"){const g=a([...p],r);p=Array.isArray(g)?g:p}return p},[t,e,s,r,a]),d=c.length,h=y.useMemo(()=>o<=0?0:Math.ceil(d/o),[d,o]);return{paginatedItems:y.useMemo(()=>{if(o<=0)return[];const p=i*o,g=p-o;return c.slice(g,p)},[c,i,o]),totalPages:h,totalFilteredItems:d,filteredAndSortedItems:c}},SE=(t,e)=>{const{searchTerm:s,locationFilter:r,categoryFilter:a,taxonomyFilter:i=[],grantTypeFilter:o,grantStatusFilter:c,minFunding:d,maxFunding:h,eligibleOrganizationTypes:m=[]}=e,p=(s||"").toLowerCase(),g=!p||(t.title||"").toLowerCase().includes(p)||(t.description||"").toLowerCase().includes(p)||(t.foundationName||"").toLowerCase().includes(p),b=Array.isArray(r)?r.map(B=>B.toLowerCase()):[],v=Array.isArray(t.locations)?t.locations.map(B=>(B.name||"").toLowerCase()):[],N=b.length===0||b.some(B=>v.includes(B)),j=Array.isArray(a)?a.map(B=>B.toLowerCase()):[],w=Array.isArray(t.categories)?t.categories.map(B=>(B.name||"").toLowerCase()):[],_=j.length===0||j.some(B=>w.includes(B)),k=i.length===0||t.eligible_organization_types&&i.some(B=>t.eligible_organization_types.includes(B)||t.eligible_organization_types.some(O=>O.startsWith(B+"."))),C=m.length===0||!t.eligible_organization_types||t.eligible_organization_types.some(B=>m.some(O=>B===O||B.startsWith(O+".")||O.startsWith(B+"."))),E=$7(t.fundingAmount),A=Kn(t.fundingAmount),M=!d||A>=parseFloat(d),R=!h||E<=parseFloat(h),D=!o||t.grantType===o;let L=!0;if(c){const B=new Date;B.setHours(0,0,0,0);const O=t.dueDate;c==="Open"?L=!O||new Date(O)>=B:c==="Rolling"?L=!O:c==="Closed"&&(L=O&&new Date(O)<B)}return g&&N&&_&&k&&C&&M&&R&&D&&L},lk=t=>{if(!t)return 0;const s=t.toLowerCase().replace(/[$,\s]/g,"").match(/(\d+(?:\.\d+)?)(k|m|b)?/);if(!s)return 0;const r=parseFloat(s[1]);switch(s[2]){case"k":return r*1e3;case"m":return r*1e6;case"b":return r*1e9;default:return r}},PV=(t,e)=>t.filter(s=>{var r,a,i;if(e.searchTerm){const o=e.searchTerm.toLowerCase();if(!(((r=s.name)==null?void 0:r.toLowerCase().includes(o))||((a=s.description)==null?void 0:a.toLowerCase().includes(o))||((i=s.focus_areas)==null?void 0:i.some(d=>d.toLowerCase().includes(o)))))return!1}if(e.locationFilter&&e.locationFilter.length>0&&(!s.location||!e.locationFilter.some(o=>s.location.toLowerCase().includes(o.toLowerCase())))||e.focusAreaFilter&&e.focusAreaFilter.length>0&&(!s.focus_areas||!e.focusAreaFilter.some(o=>s.focus_areas.includes(o)))||e.typeFilter&&e.typeFilter.length>0&&!e.typeFilter.includes(s.type)||e.taxonomyFilter&&e.taxonomyFilter.length>0&&!e.taxonomyFilter.includes(s.taxonomy_code))return!1;if((e.minBudget||e.maxBudget)&&s.type==="nonprofit"&&s.budget){const o=lk(s.budget);if(e.minBudget&&o<parseFloat(e.minBudget)||e.maxBudget&&o>parseFloat(e.maxBudget))return!1}if(e.annualGivingFilter&&s.type==="foundation"&&s.total_funding_annually){const o=lk(s.total_funding_annually),d={"0-500000":[0,5e5],"500000-1000000":[5e5,1e6],"1000000-5000000":[1e6,5e6],"5000000-10000000":[5e6,1e7],"10000000-50000000":[1e7,5e7],"50000000-100000000":[5e7,1e8],"100000000-999999999":[1e8,999999999]}[e.annualGivingFilter];if(d&&(o<d[0]||o>d[1]))return!1}return!0}),Wn=({className:t="",width:e,height:s,isCircle:r=!1,animate:a=!0})=>{const i=`${a?"animate-pulse":""} bg-gradient-to-r from-slate-200 via-slate-300 to-slate-200 bg-[length:200%_100%] ${a?"animate-[shimmer_1.5s_ease-in-out_infinite]":""}`,o=r?"rounded-full":"rounded",c=e?`w-[${e}]`:"w-full",d=s?`h-[${s}]`:"h-4";return n.jsx("div",{className:`${i} ${o} ${c} ${d} ${t}`,style:{width:e||void 0,height:s||void 0,background:a?"linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%)":"#f1f5f9",backgroundSize:a?"200% 100%":"auto",animation:a?"shimmer 1.5s ease-in-out infinite":"none"}})},zV=()=>n.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 h-full",children:[n.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[n.jsx(Wn,{width:"64px",height:"64px",isCircle:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx(Wn,{width:"180px",height:"20px",className:"mb-2"}),n.jsx(Wn,{width:"100px",height:"16px"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx(Wn,{height:"16px",className:"mb-2"}),n.jsx(Wn,{height:"16px",className:"mb-2"}),n.jsx(Wn,{width:"75%",height:"16px"})]}),n.jsx("div",{className:"space-y-3 mb-5",children:[...Array(4)].map((t,e)=>n.jsxs("div",{className:"flex items-start",children:[n.jsx(Wn,{width:"16px",height:"16px",className:"mr-2.5 mt-0.5"}),n.jsx(Wn,{width:"60%",height:"14px"})]},e))}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 mb-4",children:[n.jsx(Wn,{width:"120px",height:"12px",className:"mb-2"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(3)].map((t,e)=>n.jsx(Wn,{width:"80px",height:"24px",className:"rounded-full"},e))})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 mb-6",children:[n.jsx(Wn,{width:"100px",height:"12px",className:"mb-2"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[...Array(4)].map((t,e)=>n.jsx(Wn,{width:`${60+e*20}px`,height:"24px",className:"rounded-full"},e))})]}),n.jsx(Wn,{height:"40px",className:"rounded-lg"})]}),_E=({count:t=12})=>n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(t)].map((e,s)=>n.jsx(zV,{},s))}),LV={"nonprofit.501c3":"501(c)(3)","nonprofit.501c4":"501(c)(4)","nonprofit.501c6":"Business Leagues","education.university":"Universities","education.k12":"K-12 Schools","education.research":"Research Institutions","healthcare.hospital":"Hospitals","healthcare.clinic":"Clinics","government.federal":"Federal Agencies","government.state":"State Agencies","government.local":"Local Government","foundation.family":"Family Foundations","foundation.community":"Community Foundations","foundation.corporate":"Corporate Foundations","forprofit.startup":"Startups","forprofit.socialenterprise":"Social Enterprises","forprofit.socialenterprise.bcorp":"B-Corps","religious.church":"Religious Orgs"},CE=t=>t>=1e6?`$${(t/1e6).toFixed(1)}M+`:t>=1e3?`$${(t/1e3).toFixed(0)}K+`:`$${t.toLocaleString()}`,vy=t=>{if(!t.dueDate)return!0;const e=new Date;return e.setHours(0,0,0,0),new Date(t.dueDate)>=e},$V=(t,e)=>[...t].sort((s,r)=>{const a=vy(s),i=vy(r);if(a&&!i)return-1;if(!a&&i)return 1;switch(e){case"dueDate_asc":{const o=s.dueDate?new Date(s.dueDate):new Date("9999-12-31"),c=r.dueDate?new Date(r.dueDate):new Date("9999-12-31");return o-c}case"dueDate_desc":{const o=s.dueDate?new Date(s.dueDate):new Date("9999-12-31");return(r.dueDate?new Date(r.dueDate):new Date("9999-12-31"))-o}case"amount_desc":return Kn(r.max_funding_amount)-Kn(s.max_funding_amount);case"amount_asc":return Kn(s.max_funding_amount)-Kn(r.max_funding_amount);default:return 0}}),FV=({grant:t,onOpenDetailModal:e,isSaved:s,onSave:r,onUnsave:a,session:i})=>{var m;const o=t.dueDate?new Date(t.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Rolling",c=t.fundingAmount?CE(Kn(t.fundingAmount.toString())):"Not Specified",d=p=>{p.stopPropagation(),i&&(s?a(t.id):r(t.id))},h=p=>{if(!p)return"?";const g=p.split(" ");return g.length>1?(g[0][0]+g[1][0]).toUpperCase():p.substring(0,2).toUpperCase()};return n.jsxs("div",{onClick:()=>e(t),className:"group bg-white p-4 md:p-5 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-2xl transition-all duration-300 flex flex-col md:flex-row items-start md:items-center gap-4 cursor-pointer transform hover:-translate-y-1",children:[n.jsx("div",{className:"flex-shrink-0",children:(m=t.organization)!=null&&m.image_url?n.jsx("img",{src:t.organization.image_url,alt:`${t.foundationName} logo`,className:"h-14 w-14 md:h-16 md:w-16 rounded-xl object-contain border-2 border-white shadow-lg group-hover:shadow-xl transition-shadow duration-300"}):n.jsx("div",{className:"h-14 w-14 md:h-16 md:w-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:h(t.foundationName)})}),n.jsxs("div",{className:"flex-grow min-w-0 w-full",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[n.jsx("p",{className:"text-sm text-slate-500 font-medium truncate",children:t.foundationName}),t.grantType&&n.jsx("span",{className:"flex-shrink-0 text-xs bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 px-2 py-0.5 rounded-full font-medium border border-blue-200",children:t.grantType})]}),n.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300",children:t.title}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-1.5",title:"Funding Amount",children:[n.jsx(an,{size:14,className:"text-green-600"}),n.jsx("span",{className:"font-semibold text-green-700",children:c})]}),n.jsxs("div",{className:"flex items-center gap-1.5",title:"Due Date",children:[n.jsx(bs,{size:14,className:"text-red-600"}),n.jsx("span",{className:"font-semibold text-red-700",children:o})]}),t.eligible_organization_types&&t.eligible_organization_types.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5",title:"Eligibility",children:[n.jsx(qe,{size:14,className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-indigo-700",children:[LV[t.eligible_organization_types[0]]||t.eligible_organization_types[0],t.eligible_organization_types.length>1&&n.jsxs("span",{className:"text-slate-500 font-medium",children:[" +",t.eligible_organization_types.length-1," more"]})]})]})]})]}),n.jsxs("div",{className:"w-full md:w-auto flex-shrink-0 flex flex-row items-center gap-3 mt-4 md:mt-0",children:[i&&n.jsx("button",{onClick:d,className:`p-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 ${s?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":"bg-white text-slate-500 border border-slate-200 hover:bg-slate-50"}`,"aria-label":s?"Unsave grant":"Save grant",children:n.jsx(zi,{size:18,fill:s?"currentColor":"none"})}),n.jsxs("button",{onClick:p=>{p.stopPropagation(),e(t)},className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[n.jsx(Xt,{size:16}),"Details"]})]})]})},ck=({isProfileView:t=!1})=>{const{setPageBgColor:e}=y.useContext(yn),[s,r]=r3();y.useEffect(()=>{if(!t)return e("bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50"),()=>{e("bg-white")}},[t,e]);const[a,i]=y.useState([]),[o,c]=y.useState(!0),[d,h]=y.useState({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc",taxonomyFilter:[]}),[m,p]=y.useState(1),[g,b]=y.useState(12),[v,N]=y.useState(!1),[j,w]=y.useState(null),[_,k]=y.useState(!1),[C,E]=y.useState(null),[A,M]=y.useState(new Set),[R,D]=y.useState("grid"),[L,B]=y.useState(!t);y.useEffect(()=>{(async()=>{c(!0);const{data:{session:ge}}=await $.auth.getSession();E(ge);const{data:te,error:xe}=await $.from("grants_with_taxonomy").select("*").order("id",{ascending:!1});if(xe)console.error("Error fetching grants:",xe);else{const De=[...new Set(te.map(Me=>Me.organization_id).filter(Boolean))],{data:Ee}=await $.from("organizations").select("id, name, image_url, banner_image_url, slug").in("id",De),ce=te.map(Me=>{const it=Ee==null?void 0:Ee.find(ft=>ft.id===Me.organization_id);return{...Me,foundationName:Me.funder_name||"Unknown Funder",funderSlug:Me.funder_slug||(it==null?void 0:it.slug)||null,fundingAmount:Me.max_funding_amount||Me.funding_amount_text||"Not specified",dueDate:Me.deadline,grantType:Me.grant_type,eligibility_criteria:Me.eligibility_criteria,categories:Me.category_names?Me.category_names.map((ft,Te)=>({id:Te,name:ft})):[],locations:Me.location_names?Me.location_names.map((ft,Te)=>({id:Te,name:ft})):[],eligible_organization_types:Me.taxonomy_codes||[],organization:{image_url:(it==null?void 0:it.image_url)||Me.funder_logo_url||null,banner_image_url:(it==null?void 0:it.banner_image_url)||null},save_count:0}}),ye=ce.map(Me=>Me.id),Oe=await Su(ye);ce.forEach(Me=>{Me.save_count=Oe[Me.id]||0}),i(ce)}if(ge){const{data:De,error:Ee}=await $.from("saved_grants").select("grant_id").eq("user_id",ge.user.id);Ee?console.error("Error fetching saved grants:",Ee):M(new Set(De.map(ce=>ce.grant_id)))}c(!1)})();const{data:le}=$.auth.onAuthStateChange((ge,te)=>{E(te),te?$.from("saved_grants").select("grant_id").eq("user_id",te.user.id).then(({data:xe,error:De})=>{De||M(new Set(xe.map(Ee=>Ee.grant_id)))}):M(new Set)});return()=>{le.subscription.unsubscribe()}},[]);const O=y.useCallback(se=>{w(se),N(!0)},[]),P=y.useCallback(()=>{w(null),N(!1),s.delete("open_grant"),r(s,{replace:!0})},[s,r]);y.useEffect(()=>{const se=s.get("open_grant");if(se&&a.length>0&&!j){const le=a.find(ge=>ge.id.toString()===se);le&&O(le)}},[s,a,O,j]);const z=async se=>{if(C){M(le=>new Set(le).add(se)),i(le=>le.map(ge=>ge.id===se?{...ge,save_count:(ge.save_count||0)+1}:ge));try{const{error:le}=await $.from("saved_grants").insert({user_id:C.user.id,grant_id:se});if(le)console.error("Error saving grant:",le),M(ge=>{const te=new Set(ge);return te.delete(se),te}),i(ge=>ge.map(te=>te.id===se?{...te,save_count:Math.max(0,(te.save_count||1)-1)}:te));else{const ge=await Su([se]);i(te=>te.map(xe=>xe.id===se?{...xe,save_count:ge[se]||0}:xe))}}catch(le){console.error("Error saving grant:",le),M(ge=>{const te=new Set(ge);return te.delete(se),te}),i(ge=>ge.map(te=>te.id===se?{...te,save_count:Math.max(0,(te.save_count||1)-1)}:te))}}},q=async se=>{if(C){M(le=>{const ge=new Set(le);return ge.delete(se),ge}),i(le=>le.map(ge=>ge.id===se?{...ge,save_count:Math.max(0,(ge.save_count||1)-1)}:ge));try{const{error:le}=await $.from("saved_grants").delete().match({user_id:C.user.id,grant_id:se});if(le)console.error("Error unsaving grant:",le),M(ge=>new Set(ge).add(se)),i(ge=>ge.map(te=>te.id===se?{...te,save_count:(te.save_count||0)+1}:te));else{const ge=await Su([se]);i(te=>te.map(xe=>xe.id===se?{...xe,save_count:ge[se]||0}:xe))}}catch(le){console.error("Error unsaving grant:",le),M(ge=>new Set(ge).add(se)),i(ge=>ge.map(te=>te.id===se?{...te,save_count:(te.save_count||0)+1}:te))}}},I=y.useMemo(()=>Array.from(new Set(a.flatMap(se=>{var le;return((le=se.categories)==null?void 0:le.map(ge=>ge.name))||[]}).filter(Boolean))).sort(),[a]),V=y.useMemo(()=>Array.from(new Set(a.map(se=>se.grantType).filter(Boolean))).sort(),[a]),H=y.useMemo(()=>Array.from(new Set(a.flatMap(se=>{var le;return((le=se.locations)==null?void 0:le.map(ge=>ge.name))||[]}).filter(Boolean))).sort(),[a]),{paginatedItems:Y=[],totalPages:U,totalFilteredItems:K,filteredAndSortedItems:J}=d1(a,d,SE,d.sortCriteria,$V,m,g),W=y.useMemo(()=>J?J.filter(vy).reduce((se,le)=>{const ge=le.max_funding_amount||"0";return se+Kn(ge.toString())},0):0,[J]),ee=y.useCallback((se,le)=>{h(ge=>({...ge,[se]:le})),p(1)},[]),ne=y.useCallback(se=>{ee("taxonomyFilter",se)},[ee]),X=y.useCallback(se=>{const le={...d,searchTerm:se.text};se.type==="category"&&!d.categoryFilter.includes(se.text)&&(le.categoryFilter=[...d.categoryFilter,se.text]),h(le),p(1)},[d]),Q=y.useCallback(se=>{const ge=d.categoryFilter.includes(se)?d.categoryFilter.filter(te=>te!==se):[...d.categoryFilter,se];ee("categoryFilter",ge)},[d.categoryFilter,ee]),de=y.useCallback(se=>{var le;se<1||U>0&&se>U||(p(se),(le=document.getElementById("grants"))==null||le.scrollIntoView({behavior:"smooth",block:"start"}))},[U]),ve=y.useCallback(se=>{b(Number(se.target.value)),p(1)},[]),Pe=y.useCallback(()=>{h({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc",taxonomyFilter:[]}),p(1)},[]),He=y.useCallback((se,le)=>{se==="categoryFilter"||se==="locationFilter"||se==="taxonomyFilter"?ee(se,d[se].filter(ge=>ge!==le)):ee(se,"")},[d,ee]);y.useEffect(()=>{document.title="Fundspace - Find Your Next Funding Opportunity"},[]);const Qe=y.useMemo(()=>{let se=[];return d.searchTerm&&se.push({key:"searchTerm",label:`Search: "${d.searchTerm}"`}),d.locationFilter.length>0&&(se=se.concat(d.locationFilter.map(le=>({key:"locationFilter",label:`Location: ${le}`,value:le})))),d.categoryFilter.length>0&&(se=se.concat(d.categoryFilter.map(le=>({key:"categoryFilter",label:`Category: ${le}`,value:le})))),d.taxonomyFilter.length>0&&(se=se.concat(d.taxonomyFilter.map(le=>({key:"taxonomyFilter",label:`Org Type: ${le}`,value:le})))),d.grantTypeFilter&&se.push({key:"grantTypeFilter",label:`Type: ${d.grantTypeFilter}`}),d.grantStatusFilter&&se.push({key:"grantStatusFilter",label:`Status: ${d.grantStatusFilter}`}),se},[d]),be={isMobileVisible:_,searchTerm:d.searchTerm,onSuggestionSelect:X,onSearchChange:se=>ee("searchTerm",se),locationFilter:d.locationFilter,setLocationFilter:se=>ee("locationFilter",se),categoryFilter:d.categoryFilter,setCategoryFilter:se=>ee("categoryFilter",se),grantStatusFilter:d.grantStatusFilter,setGrantStatusFilter:se=>ee("grantStatusFilter",se),grantTypeFilter:d.grantTypeFilter,setGrantTypeFilter:se=>ee("grantTypeFilter",se),sortCriteria:d.sortCriteria,setSortCriteria:se=>ee("sortCriteria",se),taxonomyFilter:d.taxonomyFilter,setTaxonomyFilter:ne,uniqueCategories:I,uniqueLocations:H,uniqueGrantTypes:V,uniqueGrantStatuses:c1,pageType:"grants",onClearFilters:Pe,activeFilters:Qe,onRemoveFilter:He};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:t?"":"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[!t&&n.jsxs("section",{id:"funding-opportunity-intro",className:"text-center mb-12 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-pink-400 to-rose-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-6 md:p-10 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsxs("h2",{className:"text-3xl md:text-5xl font-extrabold tracking-tight mb-3",children:[n.jsx("span",{className:"text-slate-900",children:"Find Your Next "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:"Funding Opportunity"})]}),n.jsxs("p",{className:"text-md md:text-lg text-slate-600 mb-6 max-w-3xl mx-auto leading-relaxed",children:["Our AI-powered database pulls funding opportunities from across the Bay Area.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" Discover your perfect match."})]}),n.jsx("div",{className:"mt-8 md:hidden",children:n.jsxs("button",{onClick:()=>k(!_),className:"w-full inline-flex items-center justify-center px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[_?"Hide Filters":"Show Filters",Qe.length>0&&n.jsx("span",{className:"ml-3 inline-flex items-center justify-center px-3 py-1 text-xs font-bold leading-none text-blue-600 bg-white rounded-full",children:Qe.length})]})}),n.jsx(Ec,{...be,isMobileVisible:_})]})]}),n.jsxs("section",{id:"grants",className:"scroll-mt-20",children:[t&&n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white/60 mb-8",children:[n.jsxs("button",{onClick:()=>B(!L),className:"flex justify-between items-center w-full p-3 rounded-xl hover:bg-slate-50 transition-colors duration-300",children:[n.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[n.jsx(D3,{size:20,className:"text-slate-500"}),"Filter & Sort"]}),n.jsx(Ss,{size:20,className:`text-slate-500 transition-transform duration-300 ${L?"rotate-180":""}`})]}),L&&n.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:n.jsx(Ec,{...be,isMobileVisible:!0})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4 text-center sm:text-left w-full",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold",children:[n.jsx("span",{className:"text-slate-800",children:"Available Grants "}),n.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 font-extrabold",children:["(",K,")"]})]}),K>0&&!o&&n.jsxs("div",{className:"mt-2 sm:mt-0 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full border border-green-200 shadow-sm",children:[n.jsx(Cs,{size:20,className:"text-green-600"}),n.jsxs("span",{className:"text-green-700 font-semibold",children:[n.jsx(E0,{targetValue:W,duration:1e3,formatValue:CE})," Available"]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto flex-shrink-0",children:[n.jsxs("div",{className:"relative w-full sm:w-auto",children:[n.jsx("select",{id:"grants-per-page",value:g,onChange:ve,className:"w-full pl-4 pr-10 py-3 border border-slate-300 rounded-xl bg-white text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none appearance-none shadow-sm hover:shadow-md transition-shadow duration-300",children:[6,12,24,48].map(se=>n.jsxs("option",{value:se,children:["Show ",se]},se))}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",size:16})]}),n.jsxs("div",{className:"flex items-center bg-white rounded-xl border border-slate-300 p-1 shadow-sm",children:[n.jsx("button",{onClick:()=>D("grid"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${R==="grid"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"Grid View",children:n.jsx(E3,{size:18})}),n.jsx("button",{onClick:()=>D("list"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${R==="list"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"List View",children:n.jsx(qw,{size:18})})]})]})]}),o?n.jsx(_E,{count:g,type:"grant"}):Y&&Y.length>0?n.jsx(n.Fragment,{children:R==="grid"?n.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${t?"lg:grid-cols-2":"lg:grid-cols-3"} gap-8`,children:Y.map(se=>n.jsx(Xw,{grant:se,session:C,isSaved:A.has(se.id),onSave:z,onUnsave:q,onOpenDetailModal:O,onFilterByCategory:Q},se.id))}):n.jsx("div",{className:"space-y-4",children:Y.map(se=>n.jsx(FV,{grant:se,session:C,isSaved:A.has(se.id),onSave:z,onUnsave:q,onOpenDetailModal:O},se.id))})}):n.jsxs("div",{className:"text-center py-16 relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-5",children:n.jsx(ot,{size:200,className:"text-slate-400"})}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{size:40,className:"text-slate-400"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"No grants found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Try using a broader search term or removing a filter to see more results."}),n.jsxs("button",{onClick:Pe,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(sl,{size:16,className:"mr-2"}),"Clear All Filters"]})]})]}),U>0&&Y&&Y.length>0&&!o&&n.jsx(k0,{currentPage:m,totalPages:U,onPageChange:de})]})]}),v&&j&&n.jsx(Kc,{grant:j,isOpen:v,onClose:P,session:C,isSaved:A.has(j.id),onSave:z,onUnsave:q})]})},dk={nonprofit:{label:"Nonprofits",icon:n.jsx(Nt,{size:16}),color:"purple",description:"Nonprofit organizations making a difference in our communities"},foundation:{label:"Foundations",icon:n.jsx(p0,{size:16}),color:"green",description:"Foundations and grantmakers providing funding"},government:{label:"Government",icon:n.jsx(qo,{size:16}),color:"blue",description:"Government agencies and departments"},education:{label:"Education",icon:n.jsx(Uw,{size:16}),color:"indigo",description:"Educational institutions and schools"},healthcare:{label:"Healthcare",icon:n.jsx(Kw,{size:16}),color:"teal",description:"Healthcare organizations and medical institutions"},forprofit:{label:"For-Profit",icon:n.jsx(er,{size:16}),color:"orange",description:"For-profit organizations with social impact"},religious:{label:"Religious",icon:n.jsx(Bw,{size:16}),color:"amber",description:"Religious organizations and faith-based groups"}},IV=t=>({Arts:"bg-gradient-to-r from-fuchsia-100 to-purple-100 text-fuchsia-700 border-fuchsia-200",Culture:"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 border-rose-200",Education:"bg-gradient-to-r from-sky-100 to-blue-100 text-sky-700 border-sky-200",Health:"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700 border-emerald-200",Healthcare:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-200",Environment:"bg-gradient-to-r from-lime-100 to-green-100 text-lime-700 border-lime-200",Housing:"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 border-amber-200",Technology:"bg-gradient-to-r from-cyan-100 to-teal-100 text-cyan-700 border-cyan-200",Innovation:"bg-gradient-to-r from-indigo-100 to-violet-100 text-indigo-700 border-indigo-200",Community:"bg-gradient-to-r from-pink-100 to-rose-100 text-pink-700 border-pink-200","Community Development":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-200","Social Impact":"bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700 border-violet-200",Research:"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-700 border-gray-200","Medical Research":"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 border-blue-200","Mental Health":"bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-700 border-purple-200","Health Equity":"bg-gradient-to-r from-teal-100 to-green-100 text-teal-700 border-teal-200","Chronic Disease Prevention":"bg-gradient-to-r from-orange-100 to-red-100 text-orange-700 border-orange-200","Pediatric Health":"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-700 border-yellow-200","Child Health Research":"bg-gradient-to-r from-lime-100 to-yellow-100 text-lime-700 border-lime-200","Pediatric Education":"bg-gradient-to-r from-emerald-100 to-cyan-100 text-emerald-700 border-emerald-200"})[t]||"bg-gradient-to-r from-slate-100 to-zinc-100 text-slate-700 border-slate-200",Go=({organization:t,handleFilterChange:e,linkTo:s,buttonText:r="View Profile"})=>{var g;const[a,i]=y.useState(!1),o=(g=t.type)==null?void 0:g.toLowerCase(),c=dk[o]||dk.nonprofit,d=b=>{if(!b)return"?";const v=b.split(" ");return v.length>1?(v[0][0]+v[1][0]).toUpperCase():b.substring(0,2).toUpperCase()},m=(b=>{const v={purple:{bg:"bg-gradient-to-br from-purple-100 to-pink-100",text:"text-purple-700",border:"border-purple-200",button:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 focus:ring-purple-500",avatar:"bg-gradient-to-br from-purple-500 to-pink-600"},green:{bg:"bg-gradient-to-br from-green-100 to-emerald-100",text:"text-green-700",border:"border-green-200",button:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 focus:ring-green-500",avatar:"bg-gradient-to-br from-green-500 to-emerald-600"},blue:{bg:"bg-gradient-to-br from-blue-100 to-indigo-100",text:"text-blue-700",border:"border-blue-200",button:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:ring-blue-500",avatar:"bg-gradient-to-br from-blue-500 to-indigo-600"},indigo:{bg:"bg-gradient-to-br from-indigo-100 to-purple-100",text:"text-indigo-700",border:"border-indigo-200",button:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:ring-indigo-500",avatar:"bg-gradient-to-br from-indigo-500 to-purple-600"},teal:{bg:"bg-gradient-to-br from-teal-100 to-cyan-100",text:"text-teal-700",border:"border-teal-200",button:"bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 focus:ring-teal-500",avatar:"bg-gradient-to-br from-teal-500 to-cyan-600"},orange:{bg:"bg-gradient-to-br from-orange-100 to-amber-100",text:"text-orange-700",border:"border-orange-200",button:"bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-700 hover:to-amber-700 focus:ring-orange-500",avatar:"bg-gradient-to-br from-orange-500 to-amber-600"},amber:{bg:"bg-gradient-to-br from-amber-100 to-yellow-100",text:"text-amber-700",border:"border-amber-200",button:"bg-gradient-to-r from-amber-600 to-yellow-600 hover:from-amber-700 hover:to-yellow-700 focus:ring-amber-500",avatar:"bg-gradient-to-br from-amber-500 to-yellow-600"}};return v[b]||v.purple})(c.color),p=s||`/organizations/${t.slug}`;return n.jsxs("div",{className:`group relative bg-white rounded-2xl border border-slate-200 overflow-hidden transition-all duration-500 ease-out transform hover:-translate-y-3 hover:shadow-2xl cursor-pointer h-full flex flex-col ${a?"scale-[1.02]":""}`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-24 bg-gradient-to-br from-slate-100 via-white to-slate-100",children:t.banner_image_url&&n.jsx("img",{src:t.banner_image_url,alt:`${t.name} banner`,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"absolute bottom-0 left-4 translate-y-1/2 transform transition-transform duration-300 group-hover:scale-105",children:[t.image_url?n.jsx("img",{src:t.image_url,alt:`${t.name} logo`,className:"h-14 w-14 rounded-xl object-cover border-3 border-white shadow-lg bg-white",onError:b=>{b.currentTarget.style.display="none",b.currentTarget.nextElementSibling.style.display="flex"}}):null,n.jsx("div",{className:`h-14 w-14 rounded-xl ${m.avatar} text-white flex items-center justify-center font-bold text-lg shadow-lg border-3 border-white ${t.image_url?"hidden":"flex"}`,children:d(t.name)})]})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),n.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-20 transition-opacity duration-500 -z-10 blur-xl scale-110"}),n.jsxs("div",{className:"p-6 pt-10 relative z-0 flex-grow flex flex-col",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300 line-clamp-1 h-7",children:t.name}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e?n.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),e("typeFilter",[t.type])},className:`text-xs font-semibold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 transition-all duration-300 transform hover:scale-105 active:scale-95 border ${m.bg} ${m.text} ${m.border}`,title:`Filter by type: ${c.label}`,children:[c.icon,c.label]}):n.jsxs("span",{className:`text-xs font-semibold px-3 py-1.5 rounded-full inline-flex items-center gap-1.5 border ${m.bg} ${m.text} ${m.border}`,children:[c.icon,c.label]}),(t.followers_count||t.followersCount)&&n.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-blue-50 text-blue-600 border border-blue-200 inline-flex items-center gap-1",children:[n.jsx(pn,{size:12}),t.followers_count||t.followersCount," followers"]}),(t.likes_count||t.likesCount)&&n.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-pink-50 text-pink-600 border border-pink-200 inline-flex items-center gap-1",children:[n.jsx(Nt,{size:12}),t.likes_count||t.likesCount," likes"]})]})]}),n.jsxs("div",{className:"mb-6 h-16",children:[" ",n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed line-clamp-3 h-full",children:t.description})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-blue-100 rounded-lg",children:n.jsx(Lt,{size:14,className:"text-blue-600"})}),n.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Location"})]}),n.jsx("div",{className:"text-sm font-bold text-blue-800 line-clamp-1",children:t.location||"Not specified"})]}),o==="foundation"&&t.total_funding_annually&&n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-xl border border-green-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-green-100 rounded-lg",children:n.jsx(an,{size:14,className:"text-green-600"})}),n.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Annual Giving"})]}),n.jsx("div",{className:"text-sm font-bold text-green-800 line-clamp-1",children:t.total_funding_annually})]}),o==="nonprofit"&&t.budget&&n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-xl border border-green-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-green-100 rounded-lg",children:n.jsx(an,{size:14,className:"text-green-600"})}),n.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Annual Budget"})]}),n.jsx("div",{className:"text-sm font-bold text-green-800 line-clamp-1",children:t.budget})]}),(t.staff_count||t.staffCount)&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-purple-100 rounded-lg",children:n.jsx(qe,{size:14,className:"text-purple-600"})}),n.jsx("span",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Staff Count"})]}),n.jsx("div",{className:"text-sm font-bold text-purple-800 line-clamp-1",children:t.staff_count||t.staffCount})]}),t.notable_grant&&n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 p-4 rounded-xl border border-amber-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-amber-100 rounded-lg",children:n.jsx(p0,{size:14,className:"text-amber-600"})}),n.jsx("span",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wide",children:"Notable Grant"})]}),n.jsx("div",{className:"text-sm font-bold text-amber-800 line-clamp-1",children:t.notable_grant})]}),t.average_grant_size&&n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-4 rounded-xl border border-orange-100 group-hover:shadow-lg transition-shadow duration-300 h-20",children:[" ",n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"p-1 bg-orange-100 rounded-lg",children:n.jsx(Cs,{size:14,className:"text-orange-600"})}),n.jsx("span",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide",children:"Avg. Grant Size"})]}),n.jsx("div",{className:"text-sm font-bold text-orange-800 line-clamp-1",children:t.average_grant_size})]})]}),(t.focus_areas&&t.focus_areas.length>0||t.focusAreas&&t.focusAreas.length>0)&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_s,{size:14,className:"text-purple-500"}),n.jsx("span",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Focus Areas"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[(t.focus_areas||t.focusAreas||[]).slice(0,3).map((b,v)=>n.jsx("button",{onClick:e?N=>{N.preventDefault(),N.stopPropagation(),e("focusAreaFilter",[b])}:void 0,className:`text-xs font-semibold px-3 py-1.5 rounded-full transition-all duration-300 transform hover:scale-105 active:scale-95 border ${IV(b)} ${e?"hover:shadow-lg cursor-pointer":"cursor-default"}`,title:e?`Filter by: ${b}`:b,children:b},b||v)),(t.focus_areas||t.focusAreas||[]).length>3&&n.jsxs("span",{className:"text-xs text-slate-500 px-3 py-1.5 bg-slate-100 rounded-full font-medium",children:["+",(t.focus_areas||t.focusAreas||[]).length-3," more"]})]})]})]}),n.jsx("div",{className:"px-6 pb-6 relative z-0 mt-auto",children:n.jsxs(Ye,{to:p,className:`group/btn inline-flex items-center justify-center w-full px-6 py-3 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white transition-all duration-300 transform hover:scale-105 hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 ${m.button}`,children:[n.jsx(Xt,{size:16,className:"mr-2 group-hover/btn:animate-pulse"}),r,n.jsx(da,{size:16,className:"ml-2 group-hover/btn:translate-x-1 transition-transform duration-300"})]})})]})},BV=(t,e)=>{if(!Array.isArray(t))return console.warn("sortGrants: list is not an array:",t),[];const s=[...t];switch(e){case"dueDate_asc":s.sort((r,a)=>new Date(r.dueDate)-new Date(a.dueDate));break;case"dueDate_desc":s.sort((r,a)=>new Date(a.dueDate)-new Date(r.dueDate));break;case"funding_asc":s.sort((r,a)=>Zm(r.fundingAmount)-Zm(a.fundingAmount));break;case"funding_desc":s.sort((r,a)=>Zm(a.fundingAmount)-Zm(r.fundingAmount));break;case"title_asc":s.sort((r,a)=>(r.title||"").localeCompare(a.title||""));break;case"title_desc":s.sort((r,a)=>(a.title||"").localeCompare(r.title||""));break}return s},of=t=>{if(!t)return 0;const s=t.toLowerCase().replace(/[$,\s]/g,"").match(/(\d+(?:\.\d+)?)(k|m|b)?/);if(!s)return 0;const r=parseFloat(s[1]);switch(s[2]){case"k":return r*1e3;case"m":return r*1e6;case"b":return r*1e9;default:return r}},UV=(t,e)=>{const s=[...t];switch(e){case"name_asc":return s.sort((r,a)=>(r.name||"").localeCompare(a.name||""));case"name_desc":return s.sort((r,a)=>(a.name||"").localeCompare(r.name||""));case"type_asc":return s.sort((r,a)=>(r.type||"").localeCompare(a.type||""));case"type_desc":return s.sort((r,a)=>(a.type||"").localeCompare(r.type||""));case"location_asc":return s.sort((r,a)=>(r.location||"").localeCompare(a.location||""));case"location_desc":return s.sort((r,a)=>(a.location||"").localeCompare(r.location||""));case"created_desc":return s.sort((r,a)=>new Date(a.created_at||0)-new Date(r.created_at||0));case"created_asc":return s.sort((r,a)=>new Date(r.created_at||0)-new Date(a.created_at||0));case"funding_desc":return s.sort((r,a)=>{const i=of(r.total_funding_annually||r.budget||"0");return of(a.total_funding_annually||a.budget||"0")-i});case"funding_asc":return s.sort((r,a)=>{const i=of(r.total_funding_annually||r.budget||"0"),o=of(a.total_funding_annually||a.budget||"0");return i-o});default:return s.sort((r,a)=>(r.name||"").localeCompare(a.name||""))}},fp={nonprofit:{label:"Nonprofits",icon:n.jsx(Nt,{size:16}),color:"purple",description:"Nonprofit organizations making a difference in our communities"},foundation:{label:"Foundations",icon:n.jsx(qo,{size:16}),color:"green",description:"Foundations and grantmakers providing funding"},government:{label:"Government",icon:n.jsx(qo,{size:16}),color:"blue",description:"Government agencies and departments"},education:{label:"Education",icon:n.jsx(Uw,{size:16}),color:"indigo",description:"Educational institutions and schools"},healthcare:{label:"Healthcare",icon:n.jsx(Kw,{size:16}),color:"teal",description:"Healthcare organizations and medical institutions"},forprofit:{label:"For-Profit",icon:n.jsx(er,{size:16}),color:"orange",description:"For-profit organizations with social impact"},religious:{label:"Religious",icon:n.jsx(Bw,{size:16}),color:"amber",description:"Religious organizations and faith-based groups"}},VV=({organization:t})=>{const e=fp[t.type]||fp.nonprofit,s=r=>{if(!r)return"?";const a=r.split(" ");return a.length>1?(a[0][0]+a[1][0]).toUpperCase():r.substring(0,2).toUpperCase()};return n.jsxs(Ye,{to:`/organizations/${t.slug}`,className:"group bg-white p-4 md:p-5 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-2xl transition-all duration-300 flex flex-col md:flex-row items-start md:items-center gap-4 cursor-pointer transform hover:-translate-y-1",children:[n.jsx("div",{className:"flex-shrink-0",children:t.image_url?n.jsx("img",{src:t.image_url,alt:`${t.name} logo`,className:"h-14 w-14 md:h-16 md:w-16 rounded-xl object-contain border-2 border-white shadow-lg group-hover:shadow-xl transition-shadow duration-300"}):n.jsx("div",{className:"h-14 w-14 md:h-16 md:w-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:s(t.name)})}),n.jsxs("div",{className:"flex-grow min-w-0 w-full",children:[n.jsx("div",{className:"flex items-center gap-3 mb-2",children:n.jsxs("span",{className:`inline-flex items-center gap-1.5 text-xs font-semibold px-3 py-1 rounded-full bg-gradient-to-r ${e.color==="purple"?"from-purple-100 to-pink-100 text-purple-700 border-purple-200":e.color==="green"?"from-green-100 to-emerald-100 text-green-700 border-green-200":e.color==="blue"?"from-blue-100 to-indigo-100 text-blue-700 border-blue-200":e.color==="indigo"?"from-indigo-100 to-purple-100 text-indigo-700 border-indigo-200":e.color==="teal"?"from-teal-100 to-cyan-100 text-teal-700 border-teal-200":e.color==="orange"?"from-orange-100 to-amber-100 text-orange-700 border-orange-200":"from-amber-100 to-yellow-100 text-amber-700 border-amber-200"} border`,children:[e.icon," ",e.label]})}),n.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300",children:t.name}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-slate-600",children:[t.location&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Lt,{size:14,className:"text-blue-600"}),n.jsx("span",{className:"font-semibold text-blue-700",children:t.location})]}),t.focus_areas&&t.focus_areas.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx(_s,{size:14,className:"text-purple-600"}),t.focus_areas.slice(0,2).map((r,a)=>n.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-purple-100 text-purple-700 rounded-full border border-purple-200",children:r},a)),t.focus_areas.length>2&&n.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-slate-100 text-slate-600 rounded-full border border-slate-200",children:["+",t.focus_areas.length-2]})]})]})]}),n.jsx("div",{className:"w-full md:w-auto flex-shrink-0 flex items-center mt-4 md:mt-0",children:n.jsxs(Ye,{to:`/organizations/${t.slug}`,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[n.jsx(Xt,{size:16}),"View Profile"]})})]})},uk=({isProfileView:t=!1})=>{const{setPageBgColor:e}=y.useContext(yn);y.useEffect(()=>{if(!t)return e("bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50"),()=>{e("bg-white")}},[t,e]);const[s,r]=y.useState([]),[a,i]=y.useState(!0),[o,c]=y.useState(""),[d,h]=y.useState({searchTerm:"",locationFilter:[],focusAreaFilter:[],typeFilter:[],taxonomyFilter:[],sortCriteria:"name_asc"}),[m,p]=y.useState(1),[g,b]=y.useState(12),[v,N]=y.useState("grid"),[j,w]=y.useState(!t),_=vn();y.useEffect(()=>{var I;if((I=_.state)!=null&&I.prefilledFilter){const{key:V,value:H}=_.state.prefilledFilter;A(V,[H])}},[_.state]),y.useEffect(()=>{(async()=>{i(!0),c("");try{const{data:V,error:H}=await $.from("organizations").select("*");if(H)throw console.error("❌ Database error:",H),H;if(!V||V.length===0){r([]);return}const Y=V.map(W=>W.id),{data:U}=await $.from("organization_categories").select("organization_id, category_id").in("organization_id",Y);let K={};if(U&&U.length>0){const W=[...new Set(U.map(X=>X.category_id))],{data:ee}=await $.from("categories").select("id, name").in("id",W),ne={};ee==null||ee.forEach(X=>{ne[X.id]=X.name}),U.forEach(X=>{K[X.organization_id]||(K[X.organization_id]=[]);const Q=ne[X.category_id];Q&&K[X.organization_id].push(Q)})}const J=V.map(W=>({...W,focus_areas:K[W.id]||[],followers_count:0,likes_count:0}));r(J)}catch(V){console.error("💥 Error fetching organizations:",V),c("Failed to load organizations. Please try again.")}finally{i(!1)}})()},[]);const{paginatedItems:k,totalPages:C,totalFilteredItems:E}=d1(s,d,PV,d.sortCriteria,UV,m,g),A=y.useCallback((I,V)=>{h(H=>({...H,[I]:V})),p(1)},[]),M=y.useCallback(I=>{h(V=>{const H={...V,searchTerm:I.text};return I.type==="focus_area"?H.focusAreaFilter=[I.text]:I.type==="location"&&(H.locationFilter=[I.text]),H}),p(1)},[]),R=y.useCallback(I=>{if(I<1||C>0&&I>C)return;p(I);const V=document.getElementById("organizations-list");V&&V.scrollIntoView({behavior:"smooth",block:"start"})},[C]),D=y.useCallback(()=>{h({searchTerm:"",locationFilter:[],focusAreaFilter:[],typeFilter:[],taxonomyFilter:[],sortCriteria:"name_asc"}),p(1)},[]),L=y.useCallback((I,V=null)=>{if(Array.isArray(d[I])&&V){const H=d[I].filter(Y=>Y!==V);A(I,H)}else A(I,Array.isArray(d[I])?[]:"")},[d,A]);y.useEffect(()=>{document.title="Fundspace - Explore Organizations"},[]);const B=y.useMemo(()=>{const I=[];return d.searchTerm&&I.push({key:"searchTerm",label:`Search: "${d.searchTerm}"`}),d.locationFilter.forEach(V=>I.push({key:"locationFilter",value:V,label:`Location: ${V}`})),d.focusAreaFilter.forEach(V=>I.push({key:"focusAreaFilter",value:V,label:`Focus: ${V}`})),d.typeFilter.forEach(V=>{const H=fp[V];I.push({key:"typeFilter",value:V,label:`Type: ${(H==null?void 0:H.label)||V}`})}),I},[d]),O=y.useMemo(()=>Array.from(new Set(s.flatMap(I=>I.focus_areas||[]))).sort(),[s]),P=y.useMemo(()=>Array.from(new Set(s.map(I=>I.location).filter(Boolean))).sort(),[s]),z=y.useMemo(()=>Array.from(new Set(s.map(I=>I.type).filter(Boolean))).sort(),[s]),q={searchTerm:d.searchTerm,onSuggestionSelect:M,setSearchTerm:I=>A("searchTerm",I),locationFilter:d.locationFilter,setLocationFilter:I=>A("locationFilter",I),focusAreaFilter:d.focusAreaFilter,setFocusAreaFilter:I=>A("focusAreaFilter",I),typeFilter:d.typeFilter,setTypeFilter:I=>A("typeFilter",I),sortCriteria:d.sortCriteria,setSortCriteria:I=>A("sortCriteria",I),uniqueFocusAreas:O,uniqueLocations:P,availableTypes:z,orgTypeConfig:fp,organizations:s,pageType:"organizations",onClearFilters:D,activeFilters:B,onRemoveFilter:L};return o?n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsx("div",{className:"text-center py-16",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 max-w-md mx-auto",children:[n.jsx("div",{className:"text-red-600 mb-4",children:o}),n.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})})}):n.jsxs("div",{className:t?"":"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[!t&&n.jsxs("section",{id:"organization-intro",className:"text-center mb-12 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-pink-400 to-rose-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-6 md:p-10 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsxs("h2",{className:"text-3xl md:text-5xl font-extrabold tracking-tight mb-3",children:[n.jsx("span",{className:"text-slate-900",children:"Explore "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:"Organizations"})]}),n.jsxs("p",{className:"text-md md:text-lg text-slate-600 mb-6 max-w-3xl mx-auto leading-relaxed",children:["Discover nonprofits, foundations, government agencies, and other organizations making an impact in the Bay Area.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" Find your community."})]}),n.jsx(Ec,{...q,isMobileVisible:!0})]})]}),n.jsxs("section",{id:"organizations-list",className:"scroll-mt-20",children:[t&&n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white/60 mb-8",children:[n.jsxs("button",{onClick:()=>w(!j),className:"flex justify-between items-center w-full p-3 rounded-xl hover:bg-slate-50 transition-colors duration-300",children:[n.jsxs("span",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[n.jsx(D3,{size:20,className:"text-slate-500"}),"Filter & Sort Organizations"]}),n.jsx(Ss,{size:20,className:`text-slate-500 transition-transform duration-300 ${j?"rotate-180":""}`})]}),j&&n.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:n.jsx(Ec,{...q,isMobileVisible:!0})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-6",children:[n.jsx("div",{className:"text-center md:text-left",children:n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:[n.jsx("span",{className:"text-slate-800",children:"Organizations "}),n.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 font-extrabold",children:["(",E,")"]})]})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("select",{id:"orgs-per-page",value:g,onChange:I=>b(Number(I.target.value)),className:"pl-4 pr-10 py-3 border border-slate-300 rounded-xl bg-white text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none appearance-none shadow-sm hover:shadow-md transition-shadow duration-300",children:[6,12,18,24].map(I=>n.jsxs("option",{value:I,children:["Show ",I]},I))}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",size:16})]}),n.jsxs("div",{className:"flex items-center bg-white rounded-xl border border-slate-300 p-1 shadow-sm",children:[n.jsxs("button",{onClick:()=>N("grid"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${v==="grid"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"Grid View",children:[n.jsx(E3,{size:18}),n.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"Grid"})]}),n.jsxs("button",{onClick:()=>N("list"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${v==="list"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"List View",children:[n.jsx(qw,{size:18}),n.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"List"})]})]})]})]}),a?n.jsx(_E,{count:g,type:"organization"}):k.length>0?n.jsx(n.Fragment,{children:v==="grid"?n.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${t?"lg:grid-cols-2":"lg:grid-cols-3"} gap-8`,children:k.map(I=>n.jsx(Go,{organization:I,handleFilterChange:A},I.id))}):n.jsx("div",{className:"space-y-4",children:k.map(I=>n.jsx(VV,{organization:I},I.id))})}):n.jsxs("div",{className:"text-center py-16 relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-5",children:n.jsx(ot,{size:200,className:"text-slate-400"})}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{size:40,className:"text-slate-400"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"No organizations found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Try using a broader search term or removing a filter to see more results."}),n.jsxs("button",{onClick:D,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(sl,{size:16,className:"mr-2"}),"Clear All Filters"]})]})]}),C>1&&n.jsx(k0,{currentPage:m,totalPages:C,onPageChange:R})]})]})},u1=y.createContext({});function h1(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const m1=typeof window<"u",kE=m1?y.useLayoutEffect:y.useEffect,A0=y.createContext(null);function f1(t,e){t.indexOf(e)===-1&&t.push(e)}function p1(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Ua=(t,e,s)=>s>e?e:s<t?t:s;let g1=()=>{};const Va={},EE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function AE(t){return typeof t=="object"&&t!==null}const TE=t=>/^0[^.\s]+$/u.test(t);function x1(t){let e;return()=>(e===void 0&&(e=t()),e)}const vr=t=>t,qV=(t,e)=>s=>e(t(s)),_h=(...t)=>t.reduce(qV),Qu=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class b1{constructor(){this.subscriptions=[]}add(e){return f1(this.subscriptions,e),()=>p1(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ta=t=>t*1e3,sa=t=>t/1e3;function ME(t,e){return e?t*(1e3/e):0}const OE=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,HV=1e-7,GV=12;function WV(t,e,s,r,a){let i,o,c=0;do o=e+(s-e)/2,i=OE(o,r,a)-t,i>0?s=o:e=o;while(Math.abs(i)>HV&&++c<GV);return o}function Ch(t,e,s,r){if(t===e&&s===r)return vr;const a=i=>WV(i,0,1,t,s);return i=>i===0||i===1?i:OE(a(i),e,r)}const RE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DE=t=>e=>1-t(1-e),PE=Ch(.33,1.53,.69,.99),v1=DE(PE),zE=RE(v1),LE=t=>(t*=2)<1?.5*v1(t):.5*(2-Math.pow(2,-10*(t-1))),y1=t=>1-Math.sin(Math.acos(t)),$E=DE(y1),FE=RE(y1),YV=Ch(.42,0,1,1),KV=Ch(0,0,.58,1),IE=Ch(.42,0,.58,1),JV=t=>Array.isArray(t)&&typeof t[0]!="number",BE=t=>Array.isArray(t)&&typeof t[0]=="number",XV={linear:vr,easeIn:YV,easeInOut:IE,easeOut:KV,circIn:y1,circInOut:FE,circOut:$E,backIn:v1,backInOut:zE,backOut:PE,anticipate:LE},QV=t=>typeof t=="string",hk=t=>{if(BE(t)){g1(t.length===4);const[e,s,r,a]=t;return Ch(e,s,r,a)}else if(QV(t))return XV[t];return t},lf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],mk={value:null};function ZV(t,e){let s=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(p){o.has(p)&&(m.schedule(p),t()),d++,p(c)}const m={schedule:(p,g=!1,b=!1)=>{const N=b&&a?s:r;return g&&o.add(p),N.has(p)||N.add(p),p},cancel:p=>{r.delete(p),o.delete(p)},process:p=>{if(c=p,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(h),e&&mk.value&&mk.value.frameloop[e].push(d),d=0,s.clear(),a=!1,i&&(i=!1,m.process(p))}};return m}const eq=40;function UE(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=lf.reduce((k,C)=>(k[C]=ZV(i,e?C:void 0),k),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:m,update:p,preRender:g,render:b,postRender:v}=o,N=()=>{const k=Va.useManualTiming?a.timestamp:performance.now();s=!1,Va.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(k-a.timestamp,eq),1)),a.timestamp=k,a.isProcessing=!0,c.process(a),d.process(a),h.process(a),m.process(a),p.process(a),g.process(a),b.process(a),v.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(N))},j=()=>{s=!0,r=!0,a.isProcessing||t(N)};return{schedule:lf.reduce((k,C)=>{const E=o[C];return k[C]=(A,M=!1,R=!1)=>(s||j(),E.schedule(A,M,R)),k},{}),cancel:k=>{for(let C=0;C<lf.length;C++)o[lf[C]].cancel(k)},state:a,steps:o}}const{schedule:Jt,cancel:$i,state:Hs,steps:Bb}=UE(typeof requestAnimationFrame<"u"?requestAnimationFrame:vr,!0);let $f;function tq(){$f=void 0}const Tn={now:()=>($f===void 0&&Tn.set(Hs.isProcessing||Va.useManualTiming?Hs.timestamp:performance.now()),$f),set:t=>{$f=t,queueMicrotask(tq)}},VE=t=>e=>typeof e=="string"&&e.startsWith(t),w1=VE("--"),sq=VE("var(--"),j1=t=>sq(t)?nq.test(t.split("/*")[0].trim()):!1,nq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zu={...Xc,transform:t=>Ua(0,1,t)},cf={...Xc,default:1},_u=t=>Math.round(t*1e5)/1e5,N1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rq(t){return t==null}const aq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,S1=(t,e)=>s=>!!(typeof s=="string"&&aq.test(s)&&s.startsWith(t)||e&&!rq(s)&&Object.prototype.hasOwnProperty.call(s,e)),qE=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,i,o,c]=r.match(N1);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},iq=t=>Ua(0,255,t),Ub={...Xc,transform:t=>Math.round(iq(t))},ko={test:S1("rgb","red"),parse:qE("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+Ub.transform(t)+", "+Ub.transform(e)+", "+Ub.transform(s)+", "+_u(Zu.transform(r))+")"};function oq(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const yy={test:S1("#"),parse:oq,transform:ko.transform},kh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vi=kh("deg"),na=kh("%"),rt=kh("px"),lq=kh("vh"),cq=kh("vw"),fk={...na,parse:t=>na.parse(t)/100,transform:t=>na.transform(t*100)},fc={test:S1("hsl","hue"),parse:qE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+na.transform(_u(e))+", "+na.transform(_u(s))+", "+_u(Zu.transform(r))+")"},ps={test:t=>ko.test(t)||yy.test(t)||fc.test(t),parse:t=>ko.test(t)?ko.parse(t):fc.test(t)?fc.parse(t):yy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ko.transform(t):fc.transform(t),getAnimatableNone:t=>{const e=ps.parse(t);return e.alpha=0,ps.transform(e)}},dq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uq(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(N1))==null?void 0:e.length)||0)+(((s=t.match(dq))==null?void 0:s.length)||0)>0}const HE="number",GE="color",hq="var",mq="var(",pk="${}",fq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function eh(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const c=e.replace(fq,d=>(ps.test(d)?(r.color.push(i),a.push(GE),s.push(ps.parse(d))):d.startsWith(mq)?(r.var.push(i),a.push(hq),s.push(d)):(r.number.push(i),a.push(HE),s.push(parseFloat(d))),++i,pk)).split(pk);return{values:s,split:c,indexes:r,types:a}}function WE(t){return eh(t).values}function YE(t){const{split:e,types:s}=eh(t),r=e.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],a[o]!==void 0){const c=s[o];c===HE?i+=_u(a[o]):c===GE?i+=ps.transform(a[o]):i+=a[o]}return i}}const pq=t=>typeof t=="number"?0:ps.test(t)?ps.getAnimatableNone(t):t;function gq(t){const e=WE(t);return YE(t)(e.map(pq))}const Fi={test:uq,parse:WE,createTransformer:YE,getAnimatableNone:gq};function Vb(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function xq({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,i=0,o=0;if(!e)a=i=o=s;else{const c=s<.5?s*(1+e):s+e-s*e,d=2*s-c;a=Vb(d,c,t+1/3),i=Vb(d,c,t),o=Vb(d,c,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function pp(t,e){return s=>s>0?e:t}const Kt=(t,e,s)=>t+(e-t)*s,qb=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},bq=[yy,ko,fc],vq=t=>bq.find(e=>e.test(t));function gk(t){const e=vq(t);if(!e)return!1;let s=e.parse(t);return e===fc&&(s=xq(s)),s}const xk=(t,e)=>{const s=gk(t),r=gk(e);if(!s||!r)return pp(t,e);const a={...s};return i=>(a.red=qb(s.red,r.red,i),a.green=qb(s.green,r.green,i),a.blue=qb(s.blue,r.blue,i),a.alpha=Kt(s.alpha,r.alpha,i),ko.transform(a))},wy=new Set(["none","hidden"]);function yq(t,e){return wy.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function wq(t,e){return s=>Kt(t,e,s)}function _1(t){return typeof t=="number"?wq:typeof t=="string"?j1(t)?pp:ps.test(t)?xk:Sq:Array.isArray(t)?KE:typeof t=="object"?ps.test(t)?xk:jq:pp}function KE(t,e){const s=[...t],r=s.length,a=t.map((i,o)=>_1(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)s[o]=a[o](i);return s}}function jq(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=_1(t[a])(t[a],e[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function Nq(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][r[i]],c=t.values[o]??0;s[a]=c,r[i]++}return s}const Sq=(t,e)=>{const s=Fi.createTransformer(e),r=eh(t),a=eh(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?wy.has(t)&&!a.values.length||wy.has(e)&&!r.values.length?yq(t,e):_h(KE(Nq(r,a),a.values),s):pp(t,e)};function JE(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Kt(t,e,s):_1(t)(t,e)}const _q=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Jt.update(e,s),stop:()=>$i(e),now:()=>Hs.isProcessing?Hs.timestamp:Tn.now()}},XE=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)r+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},gp=2e4;function C1(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<gp;)e+=s,r=t.next(e);return e>=gp?1/0:e}function Cq(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(C1(r),gp);return{type:"keyframes",ease:i=>r.next(a*i).value/e,duration:sa(a)}}const kq=5;function QE(t,e,s){const r=Math.max(e-kq,0);return ME(s-t(r),e-r)}const ss={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hb=.001;function Eq({duration:t=ss.duration,bounce:e=ss.bounce,velocity:s=ss.velocity,mass:r=ss.mass}){let a,i,o=1-e;o=Ua(ss.minDamping,ss.maxDamping,o),t=Ua(ss.minDuration,ss.maxDuration,sa(t)),o<1?(a=h=>{const m=h*o,p=m*t,g=m-s,b=jy(h,o),v=Math.exp(-p);return Hb-g/b*v},i=h=>{const p=h*o*t,g=p*s+s,b=Math.pow(o,2)*Math.pow(h,2)*t,v=Math.exp(-p),N=jy(Math.pow(h,2),o);return(-a(h)+Hb>0?-1:1)*((g-b)*v)/N}):(a=h=>{const m=Math.exp(-h*t),p=(h-s)*t+1;return-Hb+m*p},i=h=>{const m=Math.exp(-h*t),p=(s-h)*(t*t);return m*p});const c=5/t,d=Tq(a,i,c);if(t=ta(t),isNaN(d))return{stiffness:ss.stiffness,damping:ss.damping,duration:t};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const Aq=12;function Tq(t,e,s){let r=s;for(let a=1;a<Aq;a++)r=r-t(r)/e(r);return r}function jy(t,e){return t*Math.sqrt(1-e*e)}const Mq=["duration","bounce"],Oq=["stiffness","damping","mass"];function bk(t,e){return e.some(s=>t[s]!==void 0)}function Rq(t){let e={velocity:ss.velocity,stiffness:ss.stiffness,damping:ss.damping,mass:ss.mass,isResolvedFromDuration:!1,...t};if(!bk(t,Oq)&&bk(t,Mq))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*Ua(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:ss.mass,stiffness:a,damping:i}}else{const s=Eq(t);e={...e,...s,mass:ss.mass},e.isResolvedFromDuration=!0}return e}function xp(t=ss.visualDuration,e=ss.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:h,mass:m,duration:p,velocity:g,isResolvedFromDuration:b}=Rq({...s,velocity:-sa(s.velocity||0)}),v=g||0,N=h/(2*Math.sqrt(d*m)),j=o-i,w=sa(Math.sqrt(d/m)),_=Math.abs(j)<5;r||(r=_?ss.restSpeed.granular:ss.restSpeed.default),a||(a=_?ss.restDelta.granular:ss.restDelta.default);let k;if(N<1){const E=jy(w,N);k=A=>{const M=Math.exp(-N*w*A);return o-M*((v+N*w*j)/E*Math.sin(E*A)+j*Math.cos(E*A))}}else if(N===1)k=E=>o-Math.exp(-w*E)*(j+(v+w*j)*E);else{const E=w*Math.sqrt(N*N-1);k=A=>{const M=Math.exp(-N*w*A),R=Math.min(E*A,300);return o-M*((v+N*w*j)*Math.sinh(R)+E*j*Math.cosh(R))/E}}const C={calculatedDuration:b&&p||null,next:E=>{const A=k(E);if(b)c.done=E>=p;else{let M=E===0?v:0;N<1&&(M=E===0?ta(v):QE(k,E,A));const R=Math.abs(M)<=r,D=Math.abs(o-A)<=a;c.done=R&&D}return c.value=c.done?o:A,c},toString:()=>{const E=Math.min(C1(C),gp),A=XE(M=>C.next(E*M).value,E,30);return E+"ms "+A},toTransition:()=>{}};return C}xp.applyToOptions=t=>{const e=Cq(t,100,xp);return t.ease=e.ease,t.duration=ta(e.duration),t.type="keyframes",t};function Ny({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:d,restDelta:h=.5,restSpeed:m}){const p=t[0],g={done:!1,value:p},b=R=>c!==void 0&&R<c||d!==void 0&&R>d,v=R=>c===void 0?d:d===void 0||Math.abs(c-R)<Math.abs(d-R)?c:d;let N=s*e;const j=p+N,w=o===void 0?j:o(j);w!==j&&(N=w-p);const _=R=>-N*Math.exp(-R/r),k=R=>w+_(R),C=R=>{const D=_(R),L=k(R);g.done=Math.abs(D)<=h,g.value=g.done?w:L};let E,A;const M=R=>{b(g.value)&&(E=R,A=xp({keyframes:[g.value,v(g.value)],velocity:QE(k,R,g.value),damping:a,stiffness:i,restDelta:h,restSpeed:m}))};return M(0),{calculatedDuration:null,next:R=>{let D=!1;return!A&&E===void 0&&(D=!0,C(R),M(R)),E!==void 0&&R>=E?A.next(R-E):(!D&&C(R),g)}}}function Dq(t,e,s){const r=[],a=s||Va.mix||JE,i=t.length-1;for(let o=0;o<i;o++){let c=a(t[o],t[o+1]);if(e){const d=Array.isArray(e)?e[o]||vr:e;c=_h(d,c)}r.push(c)}return r}function Pq(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const i=t.length;if(g1(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Dq(e,r,a),d=c.length,h=m=>{if(o&&m<t[0])return e[0];let p=0;if(d>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const g=Qu(t[p],t[p+1],m);return c[p](g)};return s?m=>h(Ua(t[0],t[i-1],m)):h}function zq(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=Qu(0,e,r);t.push(Kt(s,1,a))}}function Lq(t){const e=[0];return zq(e,t.length-1),e}function $q(t,e){return t.map(s=>s*e)}function Fq(t,e){return t.map(()=>e||IE).splice(0,t.length-1)}function Cu({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=JV(r)?r.map(hk):hk(r),i={done:!1,value:e[0]},o=$q(s&&s.length===e.length?s:Lq(e),t),c=Pq(o,e,{ease:Array.isArray(a)?a:Fq(e,a)});return{calculatedDuration:t,next:d=>(i.value=c(d),i.done=d>=t,i)}}const Iq=t=>t!==null;function k1(t,{repeat:e,repeatType:s="loop"},r,a=1){const i=t.filter(Iq),c=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const Bq={decay:Ny,inertia:Ny,tween:Cu,keyframes:Cu,spring:xp};function ZE(t){typeof t.type=="string"&&(t.type=Bq[t.type])}class E1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const Uq=t=>t/100;class A1 extends E1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:s}=this.options;s&&s.updatedAt!==Tn.now()&&this.tick(Tn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ZE(e);const{type:s=Cu,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:c}=e;const d=s||Cu;d!==Cu&&typeof c[0]!="number"&&(this.mixKeyframes=_h(Uq,JE(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=C1(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:p,repeatType:g,repeatDelay:b,type:v,onUpdate:N,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const w=this.currentTime-h*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>a;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let k=this.currentTime,C=r;if(p){const R=Math.min(this.currentTime,a)/c;let D=Math.floor(R),L=R%1;!L&&R>=1&&(L=1),L===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(g==="reverse"?(L=1-L,b&&(L-=b/c)):g==="mirror"&&(C=o)),k=Ua(0,1,L)*c}const E=_?{done:!1,value:m[0]}:C.next(k);i&&(E.value=i(E.value));let{done:A}=E;!_&&d!==null&&(A=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return M&&v!==Ny&&(E.value=k1(m,this.options,j,this.speed)),N&&N(E.value),M&&this.finish(),E}then(e,s){return this.finished.then(e,s)}get duration(){return sa(this.calculatedDuration)}get time(){return sa(this.currentTime)}set time(e){var s;e=ta(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Tn.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=sa(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:e=_q,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function Vq(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Eo=t=>t*180/Math.PI,Sy=t=>{const e=Eo(Math.atan2(t[1],t[0]));return _y(e)},qq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Sy,rotateZ:Sy,skewX:t=>Eo(Math.atan(t[1])),skewY:t=>Eo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_y=t=>(t=t%360,t<0&&(t+=360),t),vk=Sy,yk=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wk=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Hq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yk,scaleY:wk,scale:t=>(yk(t)+wk(t))/2,rotateX:t=>_y(Eo(Math.atan2(t[6],t[5]))),rotateY:t=>_y(Eo(Math.atan2(-t[2],t[0]))),rotateZ:vk,rotate:vk,skewX:t=>Eo(Math.atan(t[4])),skewY:t=>Eo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Cy(t){return t.includes("scale")?1:0}function ky(t,e){if(!t||t==="none")return Cy(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=Hq,a=s;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=qq,a=c}if(!a)return Cy(e);const i=r[e],o=a[1].split(",").map(Wq);return typeof i=="function"?i(o):o[i]}const Gq=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return ky(s,e)};function Wq(t){return parseFloat(t.trim())}const Qc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zc=new Set(Qc),jk=t=>t===Xc||t===rt,Yq=new Set(["x","y","z"]),Kq=Qc.filter(t=>!Yq.has(t));function Jq(t){const e=[];return Kq.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const Do={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ky(e,"x"),y:(t,{transform:e})=>ky(e,"y")};Do.translateX=Do.x;Do.translateY=Do.y;const Po=new Set;let Ey=!1,Ay=!1,Ty=!1;function eA(){if(Ay){const t=Array.from(Po).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=Jq(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,o])=>{var c;(c=r.getValue(i))==null||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ay=!1,Ey=!1,Po.forEach(t=>t.complete(Ty)),Po.clear()}function tA(){Po.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ay=!0)})}function Xq(){Ty=!0,tA(),eA(),Ty=!1}class T1{constructor(e,s,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Po.add(this),Ey||(Ey=!0,Jt.read(tA),Jt.resolveKeyframes(eA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const i=a==null?void 0:a.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&s){const c=r.readValue(s,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}Vq(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Po.delete(this)}cancel(){this.state==="scheduled"&&(Po.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Qq=t=>t.startsWith("--");function Zq(t,e,s){Qq(e)?t.style.setProperty(e,s):t.style[e]=s}const eH=x1(()=>window.ScrollTimeline!==void 0),tH={};function sH(t,e){const s=x1(t);return()=>tH[e]??s()}const sA=sH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gu=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,Nk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gu([0,.65,.55,1]),circOut:gu([.55,0,1,.45]),backIn:gu([.31,.01,.66,-.59]),backOut:gu([.33,1.53,.69,.99])};function nA(t,e){if(t)return typeof t=="function"?sA()?XE(t,e):"ease-out":BE(t)?gu(t):Array.isArray(t)?t.map(s=>nA(s,e)||Nk.easeOut):Nk[t]}function nH(t,e,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:d}={},h=void 0){const m={[e]:s};d&&(m.offset=d);const p=nA(c,a);Array.isArray(p)&&(m.easing=p);const g={delay:r,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(g.pseudoElement=h),t.animate(m,g)}function rA(t){return typeof t=="function"&&"applyToOptions"in t}function rH({type:t,...e}){return rA(t)&&sA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class aH extends E1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,g1(typeof e.type!="string");const h=rH(e);this.animation=nH(s,r,a,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=k1(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):Zq(s,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,r;const e=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return sa(Number(e))}get time(){return sa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ta(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&eH()?(this.animation.timeline=e,vr):s(this)}}const aA={anticipate:LE,backInOut:zE,circInOut:FE};function iH(t){return t in aA}function oH(t){typeof t.ease=="string"&&iH(t.ease)&&(t.ease=aA[t.ease])}const Sk=10;class lH extends aH{constructor(e){oH(e),ZE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const c=new A1({...o,autoplay:!1}),d=ta(this.finishedTime??this.time);s.setWithVelocity(c.sample(d-Sk).value,c.sample(d).value,Sk),c.stop()}}const _k=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fi.test(t)||t==="0")&&!t.startsWith("url("));function cH(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function dH(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=_k(a,e),c=_k(i,e);return!o||!c?!1:cH(t)||(s==="spring"||rA(s))&&r}function M1(t){return AE(t)&&"offsetHeight"in t}const uH=new Set(["opacity","clipPath","filter","transform"]),hH=x1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function mH(t){var h;const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=t;if(!M1((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return hH()&&s&&uH.has(s)&&(s!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const fH=40;class pH extends E1{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:m,...p}){var v;super(),this.stop=()=>{var N,j;this._animation&&(this._animation.stop(),(N=this.stopTimeline)==null||N.call(this)),(j=this.keyframeResolver)==null||j.cancel()},this.createdAt=Tn.now();const g={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:h,element:m,...p},b=(m==null?void 0:m.KeyframeResolver)||T1;this.keyframeResolver=new b(c,(N,j,w)=>this.onKeyframesResolved(N,j,g,!w),d,h,m),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Tn.now(),dH(e,i,o,c)||((Va.instantAnimations||!d)&&(m==null||m(k1(e,r,s))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const g={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>fH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},b=!h&&mH(g)?new lH({...g,element:g.motionValue.owner.current}):new A1(g);b.finished.then(()=>this.notifyFinished()).catch(vr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Xq()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const gH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xH(t){const e=gH.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function iA(t,e,s=1){const[r,a]=xH(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return EE(o)?parseFloat(o):o}return j1(a)?iA(a,e,s+1):a}function O1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const oA=new Set(["width","height","top","left","right","bottom",...Qc]),bH={test:t=>t==="auto",parse:t=>t},lA=t=>e=>e.test(t),cA=[Xc,rt,na,vi,cq,lq,bH],Ck=t=>cA.find(lA(t));function vH(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||TE(t):!0}const yH=new Set(["brightness","contrast","saturate","opacity"]);function wH(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(N1)||[];if(!r)return t;const a=s.replace(r,"");let i=yH.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+a+")"}const jH=/\b([a-z-]*)\(.*?\)/gu,My={...Fi,getAnimatableNone:t=>{const e=t.match(jH);return e?e.map(wH).join(" "):t}},kk={...Xc,transform:Math.round},NH={rotate:vi,rotateX:vi,rotateY:vi,rotateZ:vi,scale:cf,scaleX:cf,scaleY:cf,scaleZ:cf,skew:vi,skewX:vi,skewY:vi,distance:rt,translateX:rt,translateY:rt,translateZ:rt,x:rt,y:rt,z:rt,perspective:rt,transformPerspective:rt,opacity:Zu,originX:fk,originY:fk,originZ:rt},R1={borderWidth:rt,borderTopWidth:rt,borderRightWidth:rt,borderBottomWidth:rt,borderLeftWidth:rt,borderRadius:rt,radius:rt,borderTopLeftRadius:rt,borderTopRightRadius:rt,borderBottomRightRadius:rt,borderBottomLeftRadius:rt,width:rt,maxWidth:rt,height:rt,maxHeight:rt,top:rt,right:rt,bottom:rt,left:rt,padding:rt,paddingTop:rt,paddingRight:rt,paddingBottom:rt,paddingLeft:rt,margin:rt,marginTop:rt,marginRight:rt,marginBottom:rt,marginLeft:rt,backgroundPositionX:rt,backgroundPositionY:rt,...NH,zIndex:kk,fillOpacity:Zu,strokeOpacity:Zu,numOctaves:kk},SH={...R1,color:ps,backgroundColor:ps,outlineColor:ps,fill:ps,stroke:ps,borderColor:ps,borderTopColor:ps,borderRightColor:ps,borderBottomColor:ps,borderLeftColor:ps,filter:My,WebkitFilter:My},dA=t=>SH[t];function uA(t,e){let s=dA(t);return s!==My&&(s=Fi),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const _H=new Set(["auto","none","0"]);function CH(t,e,s){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!_H.has(i)&&eh(i).values.length&&(a=t[r]),r++}if(a&&s)for(const i of e)t[i]=uA(s,a)}class kH extends T1{constructor(e,s,r,a,i){super(e,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),j1(h))){const m=iA(h,s.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!oA.has(r)||e.length!==2)return;const[a,i]=e,o=Ck(a),c=Ck(i);if(o!==c)if(jk(o)&&jk(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Do[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||vH(e[a]))&&r.push(a);r.length&&CH(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Do[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var c;const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Do[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function EH(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=(s==null?void 0:s[t])??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const hA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ek=30,AH=t=>!isNaN(parseFloat(t));class TH{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var o,c;const i=Tn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();a&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=AH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new b1);const r=this.events[e].add(s);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ek)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Ek);return ME(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ac(t,e){return new TH(t,e)}const{schedule:D1}=UE(queueMicrotask,!1),Rr={x:!1,y:!1};function mA(){return Rr.x||Rr.y}function MH(t){return t==="x"||t==="y"?Rr[t]?null:(Rr[t]=!0,()=>{Rr[t]=!1}):Rr.x||Rr.y?null:(Rr.x=Rr.y=!0,()=>{Rr.x=Rr.y=!1})}function fA(t,e){const s=EH(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function Ak(t){return!(t.pointerType==="touch"||mA())}function OH(t,e,s={}){const[r,a,i]=fA(t,s),o=c=>{if(!Ak(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const m=p=>{Ak(p)&&(h(p),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,a)};return r.forEach(c=>{c.addEventListener("pointerenter",o,a)}),i}const pA=(t,e)=>e?t===e?!0:pA(t,e.parentElement):!1,P1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,RH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DH(t){return RH.has(t.tagName)||t.tabIndex!==-1}const Ff=new WeakSet;function Tk(t){return e=>{e.key==="Enter"&&t(e)}}function Gb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const PH=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Tk(()=>{if(Ff.has(s))return;Gb(s,"down");const a=Tk(()=>{Gb(s,"up")}),i=()=>Gb(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Mk(t){return P1(t)&&!mA()}function zH(t,e,s={}){const[r,a,i]=fA(t,s),o=c=>{const d=c.currentTarget;if(!Mk(c))return;Ff.add(d);const h=e(d,c),m=(b,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),Ff.has(d)&&Ff.delete(d),Mk(b)&&typeof h=="function"&&h(b,{success:v})},p=b=>{m(b,d===window||d===document||s.useGlobalTarget||pA(d,b.target))},g=b=>{m(b,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",g,a)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),M1(c)&&(c.addEventListener("focus",h=>PH(h,a)),!DH(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function gA(t){return AE(t)&&"ownerSVGElement"in t}function LH(t){return gA(t)&&t.tagName==="svg"}const sn=t=>!!(t&&t.getVelocity),$H=[...cA,ps,Fi],FH=t=>$H.find(lA(t)),z1=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class IH extends y.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=M1(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function BH({children:t,isPresent:e,anchorX:s}){const r=y.useId(),a=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=y.useContext(z1);return y.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:m,right:p}=i.current;if(e||!a.current||!c||!d)return;const g=s==="left"?`left: ${m}`:`right: ${p}`;a.current.dataset.motionPopId=r;const b=document.createElement("style");return o&&(b.nonce=o),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[e]),n.jsx(IH,{isPresent:e,childRef:a,sizeRef:i,children:y.cloneElement(t,{ref:a})})}const UH=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:c})=>{const d=h1(VH),h=y.useId();let m=!0,p=y.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:s,custom:a,onExitComplete:g=>{d.set(g,!0);for(const b of d.values())if(!b)return;r&&r()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[s,d,r]);return i&&m&&(p={...p}),y.useMemo(()=>{d.forEach((g,b)=>d.set(b,!1))},[s]),y.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),o==="popLayout"&&(t=n.jsx(BH,{isPresent:s,anchorX:c,children:t})),n.jsx(A0.Provider,{value:p,children:t})};function VH(){return new Map}function xA(t=!0){const e=y.useContext(A0);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,i=y.useId();y.useEffect(()=>{if(t)return a(i)},[t]);const o=y.useCallback(()=>t&&r&&r(i),[i,r,t]);return!s&&r?[!1,o]:[!0]}const df=t=>t.key||"";function Ok(t){const e=[];return y.Children.forEach(t,s=>{y.isValidElement(s)&&e.push(s)}),e}const jo=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:c="left"})=>{const[d,h]=xA(o),m=y.useMemo(()=>Ok(t),[t]),p=o&&!d?[]:m.map(df),g=y.useRef(!0),b=y.useRef(m),v=h1(()=>new Map),[N,j]=y.useState(m),[w,_]=y.useState(m);kE(()=>{g.current=!1,b.current=m;for(let E=0;E<w.length;E++){const A=df(w[E]);p.includes(A)?v.delete(A):v.get(A)!==!0&&v.set(A,!1)}},[w,p.length,p.join("-")]);const k=[];if(m!==N){let E=[...m];for(let A=0;A<w.length;A++){const M=w[A],R=df(M);p.includes(R)||(E.splice(A,0,M),k.push(M))}return i==="wait"&&k.length&&(E=k),_(Ok(E)),j(m),null}const{forceRender:C}=y.useContext(u1);return n.jsx(n.Fragment,{children:w.map(E=>{const A=df(E),M=o&&!d?!1:m===w||p.includes(A),R=()=>{if(v.has(A))v.set(A,!0);else return;let D=!0;v.forEach(L=>{L||(D=!1)}),D&&(C==null||C(),_(b.current),o&&(h==null||h()),r&&r())};return n.jsx(UH,{isPresent:M,initial:!g.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,onExitComplete:M?void 0:R,anchorX:c,children:E},A)})})},bA=y.createContext({strict:!1}),Rk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tc={};for(const t in Rk)Tc[t]={isEnabled:e=>Rk[t].some(s=>!!e[s])};function qH(t){for(const e in t)Tc[e]={...Tc[e],...t[e]}}const HH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||HH.has(t)}let vA=t=>!bp(t);function GH(t){typeof t=="function"&&(vA=e=>e.startsWith("on")?!bp(e):t(e))}try{GH(require("@emotion/is-prop-valid").default)}catch{}function WH(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(vA(a)||s===!0&&bp(a)||!e&&!bp(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function YH(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const T0=y.createContext({});function M0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function th(t){return typeof t=="string"||Array.isArray(t)}const L1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$1=["initial",...L1];function O0(t){return M0(t.animate)||$1.some(e=>th(t[e]))}function yA(t){return!!(O0(t)||t.variants)}function KH(t,e){if(O0(t)){const{initial:s,animate:r}=t;return{initial:s===!1||th(s)?s:void 0,animate:th(r)?r:void 0}}return t.inherit!==!1?e:{}}function JH(t){const{initial:e,animate:s}=KH(t,y.useContext(T0));return y.useMemo(()=>({initial:e,animate:s}),[Dk(e),Dk(s)])}function Dk(t){return Array.isArray(t)?t.join(" "):t}const XH=Symbol.for("motionComponentSymbol");function pc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QH(t,e,s){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):pc(s)&&(s.current=r))},[e])}const F1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ZH="framerAppearId",wA="data-"+F1(ZH),jA=y.createContext({});function eG(t,e,s,r,a){var N,j;const{visualElement:i}=y.useContext(T0),o=y.useContext(bA),c=y.useContext(A0),d=y.useContext(z1).reducedMotion,h=y.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:i,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,p=y.useContext(jA);m&&!m.projection&&a&&(m.type==="html"||m.type==="svg")&&tG(h.current,s,a,p);const g=y.useRef(!1);y.useInsertionEffect(()=>{m&&g.current&&m.update(s,c)});const b=s[wA],v=y.useRef(!!b&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,b))&&((j=window.MotionHasOptimisedAnimation)==null?void 0:j.call(window,b)));return kE(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),D1.render(m.render),v.current&&m.animationState&&m.animationState.animateChanges())}),y.useEffect(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,b)}),v.current=!1))}),m}function tG(t,e,s,r){const{layoutId:a,layout:i,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:NA(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||c&&pc(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function NA(t){if(t)return t.options.allowProjection!==!1?t.projection:NA(t.parent)}function sG({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:a}){t&&qH(t);function i(c,d){let h;const m={...y.useContext(z1),...c,layoutId:nG(c)},{isStatic:p}=m,g=JH(c),b=r(c,p);if(!p&&m1){rG();const v=aG(m);h=v.MeasureLayout,g.visualElement=eG(a,b,m,e,v.ProjectionNode)}return n.jsxs(T0.Provider,{value:g,children:[h&&g.visualElement?n.jsx(h,{visualElement:g.visualElement,...m}):null,s(a,c,QH(b,g.visualElement,d),b,p,g.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const o=y.forwardRef(i);return o[XH]=a,o}function nG({layoutId:t}){const e=y.useContext(u1).id;return e&&t!==void 0?e+"-"+t:t}function rG(t,e){y.useContext(bA).strict}function aG(t){const{drag:e,layout:s}=Tc;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const sh={};function iG(t){for(const e in t)sh[e]=t[e],w1(e)&&(sh[e].isCSSVariable=!0)}function SA(t,{layout:e,layoutId:s}){return Zc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!sh[t]||t==="opacity")}const oG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lG=Qc.length;function cG(t,e,s){let r="",a=!0;for(let i=0;i<lG;i++){const o=Qc[i],c=t[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||s){const h=hA(c,R1[o]);if(!d){a=!1;const m=oG[o]||o;r+=`${m}(${h}) `}s&&(e[o]=h)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function I1(t,e,s){const{style:r,vars:a,transformOrigin:i}=t;let o=!1,c=!1;for(const d in e){const h=e[d];if(Zc.has(d)){o=!0;continue}else if(w1(d)){a[d]=h;continue}else{const m=hA(h,R1[d]);d.startsWith("origin")?(c=!0,i[d]=m):r[d]=m}}if(e.transform||(o||s?r.transform=cG(e,t.transform,s):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:m=0}=i;r.transformOrigin=`${d} ${h} ${m}`}}const B1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _A(t,e,s){for(const r in e)!sn(e[r])&&!SA(r,s)&&(t[r]=e[r])}function dG({transformTemplate:t},e){return y.useMemo(()=>{const s=B1();return I1(s,e,t),Object.assign({},s.vars,s.style)},[e])}function uG(t,e){const s=t.style||{},r={};return _A(r,s,t),Object.assign(r,dG(t,e)),r}function hG(t,e){const s={},r=uG(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const mG={offset:"stroke-dashoffset",array:"stroke-dasharray"},fG={offset:"strokeDashoffset",array:"strokeDasharray"};function pG(t,e,s=1,r=0,a=!0){t.pathLength=1;const i=a?mG:fG;t[i.offset]=rt.transform(-r);const o=rt.transform(e),c=rt.transform(s);t[i.array]=`${o} ${c}`}function CA(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...c},d,h,m){if(I1(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g}=t;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),r!==void 0&&(p.scale=r),a!==void 0&&pG(p,a,i,o,!1)}const kA=()=>({...B1(),attrs:{}}),EA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gG(t,e,s,r){const a=y.useMemo(()=>{const i=kA();return CA(i,e,EA(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};_A(i,t.style,t),a.style={...i,...a.style}}return a}const xG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function U1(t){return typeof t!="string"||t.includes("-")?!1:!!(xG.indexOf(t)>-1||/[A-Z]/u.test(t))}function bG(t=!1){return(s,r,a,{latestValues:i},o)=>{const d=(U1(s)?gG:hG)(r,i,o,s),h=WH(r,typeof s=="string",t),m=s!==y.Fragment?{...h,...d,ref:a}:{},{children:p}=r,g=y.useMemo(()=>sn(p)?p.get():p,[p]);return y.createElement(s,{...m,children:g})}}function Pk(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function V1(t,e,s,r){if(typeof e=="function"){const[a,i]=Pk(r);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=Pk(r);e=e(s!==void 0?s:t.custom,a,i)}return e}function If(t){return sn(t)?t.get():t}function vG({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:yG(s,r,a,t),renderState:e()}}const AA=t=>(e,s)=>{const r=y.useContext(T0),a=y.useContext(A0),i=()=>vG(t,e,r,a);return s?i():h1(i)};function yG(t,e,s,r){const a={},i=r(t,{});for(const g in i)a[g]=If(i[g]);let{initial:o,animate:c}=t;const d=O0(t),h=yA(t);e&&h&&!d&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let m=s?s.initial===!1:!1;m=m||o===!1;const p=m?c:o;if(p&&typeof p!="boolean"&&!M0(p)){const g=Array.isArray(p)?p:[p];for(let b=0;b<g.length;b++){const v=V1(t,g[b]);if(v){const{transitionEnd:N,transition:j,...w}=v;for(const _ in w){let k=w[_];if(Array.isArray(k)){const C=m?k.length-1:0;k=k[C]}k!==null&&(a[_]=k)}for(const _ in N)a[_]=N[_]}}}return a}function q1(t,e,s){var i;const{style:r}=t,a={};for(const o in r)(sn(r[o])||e.style&&sn(e.style[o])||SA(o,t)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const wG={useVisualState:AA({scrapeMotionValuesFromProps:q1,createRenderState:B1})};function TA(t,e,s){const r=q1(t,e,s);for(const a in t)if(sn(t[a])||sn(e[a])){const i=Qc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}const jG={useVisualState:AA({scrapeMotionValuesFromProps:TA,createRenderState:kA})};function NG(t,e){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...U1(r)?jG:wG,preloadedFeatures:t,useRender:bG(a),createVisualElement:e,Component:r};return sG(o)}}function nh(t,e,s){const r=t.getProps();return V1(r,e,s!==void 0?s:r.custom,t)}const Oy=t=>Array.isArray(t);function SG(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Ac(s))}function _G(t){return Oy(t)?t[t.length-1]||0:t}function CG(t,e){const s=nh(t,e);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const o in i){const c=_G(i[o]);SG(t,o,c)}}function kG(t){return!!(sn(t)&&t.add)}function Ry(t,e){const s=t.getValue("willChange");if(kG(s))return s.add(e);if(!s&&Va.WillChange){const r=new Va.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function MA(t){return t.props[wA]}const EG=t=>t!==null;function AG(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(EG),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const TG={type:"spring",stiffness:500,damping:25,restSpeed:10},MG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OG={type:"keyframes",duration:.8},RG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DG=(t,{keyframes:e})=>e.length>2?OG:Zc.has(t)?t.startsWith("scale")?MG(e[1]):TG:RG;function PG({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:c,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const H1=(t,e,s,r={},a,i)=>o=>{const c=O1(r,t)||{},d=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ta(d);const m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:a};PG(c)||Object.assign(m,DG(t,m)),m.duration&&(m.duration=ta(m.duration)),m.repeatDelay&&(m.repeatDelay=ta(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let p=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(p=!0)),(Va.instantAnimations||Va.skipAnimations)&&(p=!0,m.duration=0,m.delay=0),m.allowFlatten=!c.type&&!c.ease,p&&!i&&e.get()!==void 0){const g=AG(m.keyframes,c);if(g!==void 0){Jt.update(()=>{m.onUpdate(g),m.onComplete()});return}}return c.isSync?new A1(m):new pH(m)};function zG({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function OA(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(i=r);const d=[],h=a&&t.animationState&&t.animationState.getState()[a];for(const m in c){const p=t.getValue(m,t.latestValues[m]??null),g=c[m];if(g===void 0||h&&zG(h,m))continue;const b={delay:s,...O1(i||{},m)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===v&&!b.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const w=MA(t);if(w){const _=window.MotionHandoffAnimation(w,m,Jt);_!==null&&(b.startTime=_,N=!0)}}Ry(t,m),p.start(H1(m,p,g,t.shouldReduceMotion&&oA.has(m)?{type:!1}:b,t,N));const j=p.animation;j&&d.push(j)}return o&&Promise.all(d).then(()=>{Jt.update(()=>{o&&CG(t,o)})}),d}function Dy(t,e,s={}){var d;const r=nh(t,e,s.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(OA(t,r,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:p,staggerDirection:g}=a;return LG(t,e,m+h,p,g,s)}:()=>Promise.resolve(),{when:c}=a;if(c){const[h,m]=c==="beforeChildren"?[i,o]:[o,i];return h().then(()=>m())}else return Promise.all([i(),o(s.delay)])}function LG(t,e,s=0,r=0,a=1,i){const o=[],c=(t.variantChildren.size-1)*r,d=a===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort($G).forEach((h,m)=>{h.notify("AnimationStart",e),o.push(Dy(h,e,{...i,delay:s+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function $G(t,e){return t.sortNodePosition(e)}function FG(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(i=>Dy(t,i,s));r=Promise.all(a)}else if(typeof e=="string")r=Dy(t,e,s);else{const a=typeof e=="function"?nh(t,e,s.custom):e;r=Promise.all(OA(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function RA(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const IG=$1.length;function DA(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?DA(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<IG;s++){const r=$1[s],a=t.props[r];(th(a)||a===!1)&&(e[r]=a)}return e}const BG=[...L1].reverse(),UG=L1.length;function VG(t){return e=>Promise.all(e.map(({animation:s,options:r})=>FG(t,s,r)))}function qG(t){let e=VG(t),s=zk(),r=!0;const a=d=>(h,m)=>{var g;const p=nh(t,m,d==="exit"?(g=t.presenceContext)==null?void 0:g.custom:void 0);if(p){const{transition:b,transitionEnd:v,...N}=p;h={...h,...N,...v}}return h};function i(d){e=d(t)}function o(d){const{props:h}=t,m=DA(t.parent)||{},p=[],g=new Set;let b={},v=1/0;for(let j=0;j<UG;j++){const w=BG[j],_=s[w],k=h[w]!==void 0?h[w]:m[w],C=th(k),E=w===d?_.isActive:null;E===!1&&(v=j);let A=k===m[w]&&k!==h[w]&&C;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...b},!_.isActive&&E===null||!k&&!_.prevProp||M0(k)||typeof k=="boolean")continue;const M=HG(_.prevProp,k);let R=M||w===d&&_.isActive&&!A&&C||j>v&&C,D=!1;const L=Array.isArray(k)?k:[k];let B=L.reduce(a(w),{});E===!1&&(B={});const{prevResolvedValues:O={}}=_,P={...O,...B},z=V=>{R=!0,g.has(V)&&(D=!0,g.delete(V)),_.needsAnimating[V]=!0;const H=t.getValue(V);H&&(H.liveStyle=!1)};for(const V in P){const H=B[V],Y=O[V];if(b.hasOwnProperty(V))continue;let U=!1;Oy(H)&&Oy(Y)?U=!RA(H,Y):U=H!==Y,U?H!=null?z(V):g.add(V):H!==void 0&&g.has(V)?z(V):_.protectedKeys[V]=!0}_.prevProp=k,_.prevResolvedValues=B,_.isActive&&(b={...b,...B}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(A&&M)||D)&&p.push(...L.map(V=>({animation:V,options:{type:w}})))}if(g.size){const j={};if(typeof h.initial!="boolean"){const w=nh(t,Array.isArray(h.initial)?h.initial[0]:h.initial);w&&w.transition&&(j.transition=w.transition)}g.forEach(w=>{const _=t.getBaseTarget(w),k=t.getValue(w);k&&(k.liveStyle=!0),j[w]=_??null}),p.push({animation:j})}let N=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(p):Promise.resolve()}function c(d,h){var p;if(s[d].isActive===h)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(g=>{var b;return(b=g.animationState)==null?void 0:b.setActive(d,h)}),s[d].isActive=h;const m=o(d);for(const g in s)s[g].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>s,reset:()=>{s=zk(),r=!0}}}function HG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!RA(e,t):!1}function bo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zk(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class Wi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GG extends Wi{constructor(e){super(e),e.animationState||(e.animationState=qG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();M0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let WG=0;class YG extends Wi{constructor(){super(...arguments),this.id=WG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KG={animation:{Feature:GG},exit:{Feature:YG}};function rh(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Eh(t){return{point:{x:t.pageX,y:t.pageY}}}const JG=t=>e=>P1(e)&&t(e,Eh(e));function ku(t,e,s,r){return rh(t,e,JG(s),r)}function PA({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function XG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QG(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}const zA=1e-4,ZG=1-zA,eW=1+zA,LA=.01,tW=0-LA,sW=0+LA;function fn(t){return t.max-t.min}function nW(t,e,s){return Math.abs(t-e)<=s}function Lk(t,e,s,r=.5){t.origin=r,t.originPoint=Kt(e.min,e.max,t.origin),t.scale=fn(s)/fn(e),t.translate=Kt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=ZG&&t.scale<=eW||isNaN(t.scale))&&(t.scale=1),(t.translate>=tW&&t.translate<=sW||isNaN(t.translate))&&(t.translate=0)}function Eu(t,e,s,r){Lk(t.x,e.x,s.x,r?r.originX:void 0),Lk(t.y,e.y,s.y,r?r.originY:void 0)}function $k(t,e,s){t.min=s.min+e.min,t.max=t.min+fn(e)}function rW(t,e,s){$k(t.x,e.x,s.x),$k(t.y,e.y,s.y)}function Fk(t,e,s){t.min=e.min-s.min,t.max=t.min+fn(e)}function Au(t,e,s){Fk(t.x,e.x,s.x),Fk(t.y,e.y,s.y)}const Ik=()=>({translate:0,scale:1,origin:0,originPoint:0}),gc=()=>({x:Ik(),y:Ik()}),Bk=()=>({min:0,max:0}),us=()=>({x:Bk(),y:Bk()});function fr(t){return[t("x"),t("y")]}function Wb(t){return t===void 0||t===1}function Py({scale:t,scaleX:e,scaleY:s}){return!Wb(t)||!Wb(e)||!Wb(s)}function No(t){return Py(t)||$A(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $A(t){return Uk(t.x)||Uk(t.y)}function Uk(t){return t&&t!=="0%"}function vp(t,e,s){const r=t-s,a=e*r;return s+a}function Vk(t,e,s,r,a){return a!==void 0&&(t=vp(t,a,r)),vp(t,s,r)+e}function zy(t,e=0,s=1,r,a){t.min=Vk(t.min,e,s,r,a),t.max=Vk(t.max,e,s,r,a)}function FA(t,{x:e,y:s}){zy(t.x,e.translate,e.scale,e.originPoint),zy(t.y,s.translate,s.scale,s.originPoint)}const qk=.999999999999,Hk=1.0000000000001;function aW(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,o;for(let c=0;c<a;c++){i=s[c],o=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&bc(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,FA(t,o)),r&&No(i.latestValues)&&bc(t,i.latestValues))}e.x<Hk&&e.x>qk&&(e.x=1),e.y<Hk&&e.y>qk&&(e.y=1)}function xc(t,e){t.min=t.min+e,t.max=t.max+e}function Gk(t,e,s,r,a=.5){const i=Kt(t.min,t.max,a);zy(t,e,s,i,r)}function bc(t,e){Gk(t.x,e.x,e.scaleX,e.scale,e.originX),Gk(t.y,e.y,e.scaleY,e.scale,e.originY)}function IA(t,e){return PA(QG(t.getBoundingClientRect(),e))}function iW(t,e,s){const r=IA(t,s),{scroll:a}=e;return a&&(xc(r.x,a.offset.x),xc(r.y,a.offset.y)),r}const BA=({current:t})=>t?t.ownerDocument.defaultView:null,Wk=(t,e)=>Math.abs(t-e);function oW(t,e){const s=Wk(t.x,e.x),r=Wk(t.y,e.y);return Math.sqrt(s**2+r**2)}class UA{constructor(e,s,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Kb(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,b=oW(p.offset,{x:0,y:0})>=3;if(!g&&!b)return;const{point:v}=p,{timestamp:N}=Hs;this.history.push({...v,timestamp:N});const{onStart:j,onMove:w}=this.handlers;g||(j&&j(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Yb(g,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:b,onSessionEnd:v,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Kb(p.type==="pointercancel"?this.lastMoveEventInfo:Yb(g,this.transformPagePoint),this.history);this.startEvent&&b&&b(p,j),v&&v(p,j)},!P1(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.contextWindow=a||window;const o=Eh(e),c=Yb(o,this.transformPagePoint),{point:d}=c,{timestamp:h}=Hs;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=s;m&&m(e,Kb(c,this.history)),this.removeListeners=_h(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$i(this.updatePoint)}}function Yb(t,e){return e?{point:e(t.point)}:t}function Yk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kb({point:t},e){return{point:t,delta:Yk(t,VA(e)),offset:Yk(t,lW(e)),velocity:cW(e,.1)}}function lW(t){return t[0]}function VA(t){return t[t.length-1]}function cW(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=VA(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>ta(e)));)s--;if(!r)return{x:0,y:0};const i=sa(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dW(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?Kt(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?Kt(s,t,r.max):Math.min(t,s)),t}function Kk(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function uW(t,{top:e,left:s,bottom:r,right:a}){return{x:Kk(t.x,s,a),y:Kk(t.y,e,r)}}function Jk(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function hW(t,e){return{x:Jk(t.x,e.x),y:Jk(t.y,e.y)}}function mW(t,e){let s=.5;const r=fn(t),a=fn(e);return a>r?s=Qu(e.min,e.max-r,t.min):r>a&&(s=Qu(t.min,t.max-a,e.min)),Ua(0,1,s)}function fW(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Ly=.35;function pW(t=Ly){return t===!1?t=0:t===!0&&(t=Ly),{x:Xk(t,"left","right"),y:Xk(t,"top","bottom")}}function Xk(t,e,s){return{min:Qk(t,e),max:Qk(t,s)}}function Qk(t,e){return typeof t=="number"?t:t[e]||0}const gW=new WeakMap;class xW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=us(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Eh(m).point)},i=(m,p)=>{const{drag:g,dragPropagation:b,onDragStart:v}=this.getProps();if(g&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=MH(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fr(j=>{let w=this.getAxisMotionValue(j).get()||0;if(na.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const k=_.layout.layoutBox[j];k&&(w=fn(k)*(parseFloat(w)/100))}}this.originPoint[j]=w}),v&&Jt.postRender(()=>v(m,p)),Ry(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},o=(m,p)=>{const{dragPropagation:g,dragDirectionLock:b,onDirectionLock:v,onDrag:N}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:j}=p;if(b&&this.currentDirection===null){this.currentDirection=bW(j),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,j),this.updateAxis("y",p.point,j),this.visualElement.render(),N&&N(m,p)},c=(m,p)=>this.stop(m,p),d=()=>fr(m=>{var p;return this.getAnimationState(m)==="paused"&&((p=this.getAxisMotionValue(m).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new UA(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:BA(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Jt.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!uf(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=dW(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;e&&pc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uW(r.layoutBox,e):this.constraints=!1,this.elastic=pW(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fW(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!pc(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=iW(r,a.root,this.visualElement.getTransformPagePoint());let o=hW(a.layout.layoutBox,i);if(s){const c=s(XG(o));this.hasMutatedConstraints=!!c,c&&(o=PA(c))}return o}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=fr(m=>{if(!uf(m,s,this.currentDirection))return;let p=d&&d[m]||{};o&&(p={min:0,max:0});const g=a?200:1e6,b=a?40:1e7,v={type:"inertia",velocity:r?e[m]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(m,v)});return Promise.all(h).then(c)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return Ry(this.visualElement,e),r.start(H1(e,r,0,s,this.visualElement,!1))}stopAnimation(){fr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fr(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fr(s=>{const{drag:r}=this.getProps();if(!uf(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[s];i.set(e[s]-Kt(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!pc(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};fr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();a[o]=mW({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fr(o=>{if(!uf(o,e,null))return;const c=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];c.set(Kt(d,h,a[o]))})}addListeners(){if(!this.visualElement.current)return;gW.set(this.visualElement,this);const e=this.visualElement.current,s=ku(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();pc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Jt.read(r);const o=rh(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(fr(m=>{const p=this.getAxisMotionValue(m);p&&(this.originPoint[m]+=d[m].translate,p.set(p.get()+d[m].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ly,dragMomentum:c=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function uf(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function bW(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class vW extends Wi{constructor(e){super(e),this.removeGroupControls=vr,this.removeListeners=vr,this.controls=new xW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zk=t=>(e,s)=>{t&&Jt.postRender(()=>t(e,s))};class yW extends Wi{constructor(){super(...arguments),this.removePointerDownListener=vr}onPointerDown(e){this.session=new UA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:Zk(e),onStart:Zk(s),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Jt.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function e6(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const au={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(rt.test(t))t=parseFloat(t);else return t;const s=e6(t,e.target.x),r=e6(t,e.target.y);return`${s}% ${r}%`}},wW={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=Fi.parse(t);if(a.length>5)return r;const i=Fi.createTransformer(t),o=typeof a[0]!="number"?1:0,c=s.x.scale*e.x,d=s.y.scale*e.y;a[0+o]/=c,a[1+o]/=d;const h=Kt(c,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=h),typeof a[3+o]=="number"&&(a[3+o]/=h),i(a)}};class jW extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=e;iG(NW),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Bf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Jt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),D1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qA(t){const[e,s]=xA(),r=y.useContext(u1);return n.jsx(jW,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(jA),isPresent:e,safeToRemove:s})}const NW={borderRadius:{...au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:au,borderTopRightRadius:au,borderBottomLeftRadius:au,borderBottomRightRadius:au,boxShadow:wW};function SW(t,e,s){const r=sn(t)?t:Ac(t);return r.start(H1("",r,e,s)),r.animation}const _W=(t,e)=>t.depth-e.depth;class CW{constructor(){this.children=[],this.isDirty=!1}add(e){f1(this.children,e),this.isDirty=!0}remove(e){p1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_W),this.isDirty=!1,this.children.forEach(e)}}function kW(t,e){const s=Tn.now(),r=({timestamp:a})=>{const i=a-s;i>=e&&($i(r),t(i-e))};return Jt.setup(r,!0),()=>$i(r)}const HA=["TopLeft","TopRight","BottomLeft","BottomRight"],EW=HA.length,t6=t=>typeof t=="string"?parseFloat(t):t,s6=t=>typeof t=="number"||rt.test(t);function AW(t,e,s,r,a,i){a?(t.opacity=Kt(0,s.opacity??1,TW(r)),t.opacityExit=Kt(e.opacity??1,0,MW(r))):i&&(t.opacity=Kt(e.opacity??1,s.opacity??1,r));for(let o=0;o<EW;o++){const c=`border${HA[o]}Radius`;let d=n6(e,c),h=n6(s,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||s6(d)===s6(h)?(t[c]=Math.max(Kt(t6(d),t6(h),r),0),(na.test(h)||na.test(d))&&(t[c]+="%")):t[c]=h}(e.rotate||s.rotate)&&(t.rotate=Kt(e.rotate||0,s.rotate||0,r))}function n6(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const TW=GA(0,.5,$E),MW=GA(.5,.95,vr);function GA(t,e,s){return r=>r<t?0:r>e?1:s(Qu(t,e,r))}function r6(t,e){t.min=e.min,t.max=e.max}function hr(t,e){r6(t.x,e.x),r6(t.y,e.y)}function a6(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function i6(t,e,s,r,a){return t-=e,t=vp(t,1/s,r),a!==void 0&&(t=vp(t,1/a,r)),t}function OW(t,e=0,s=1,r=.5,a,i=t,o=t){if(na.test(e)&&(e=parseFloat(e),e=Kt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Kt(i.min,i.max,r);t===i&&(c-=e),t.min=i6(t.min,e,s,c,a),t.max=i6(t.max,e,s,c,a)}function o6(t,e,[s,r,a],i,o){OW(t,e[s],e[r],e[a],e.scale,i,o)}const RW=["x","scaleX","originX"],DW=["y","scaleY","originY"];function l6(t,e,s,r){o6(t.x,e,RW,s?s.x:void 0,r?r.x:void 0),o6(t.y,e,DW,s?s.y:void 0,r?r.y:void 0)}function c6(t){return t.translate===0&&t.scale===1}function WA(t){return c6(t.x)&&c6(t.y)}function d6(t,e){return t.min===e.min&&t.max===e.max}function PW(t,e){return d6(t.x,e.x)&&d6(t.y,e.y)}function u6(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YA(t,e){return u6(t.x,e.x)&&u6(t.y,e.y)}function h6(t){return fn(t.x)/fn(t.y)}function m6(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zW{constructor(){this.members=[]}add(e){f1(this.members,e),e.scheduleRender()}remove(e){if(p1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LW(t,e,s){let r="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:m,rotateX:p,rotateY:g,skewX:b,skewY:v}=s;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),b&&(r+=`skewX(${b}deg) `),v&&(r+=`skewY(${v}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Jb=["","X","Y","Z"],$W={visibility:"hidden"},FW=1e3;let IW=0;function Xb(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function KA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=MA(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Jt,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&KA(r)}function JA({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},c=e==null?void 0:e()){this.id=IW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VW),this.nodes.forEach(WW),this.nodes.forEach(YW),this.nodes.forEach(qW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new CW)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new b1),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=gA(o)&&!LH(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=kW(p,250),Bf.hasAnimatedSinceResize&&(Bf.hasAnimatedSinceResize=!1,this.nodes.forEach(g6))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||ZW,{onLayoutAnimationStart:N,onLayoutAnimationComplete:j}=h.getProps(),w=!this.targetLayout||!YA(this.targetLayout,b),_=!p&&g;if(this.options.layoutRoot||this.resumeFrom||_||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...O1(v,"layout"),onPlay:N,onComplete:j};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(m,_)}else p||g6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$i(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const p=this.path[m];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(f6);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(p6);return}this.isUpdating||this.nodes.forEach(p6),this.animationCommitId=this.animationId,this.isUpdating=!1,this.nodes.forEach(GW),this.nodes.forEach(BW),this.nodes.forEach(UW),this.clearAllSnapshots();const c=Tn.now();Hs.delta=Ua(0,1e3/60,c-Hs.timestamp),Hs.timestamp=c,Hs.isProcessing=!0,Bb.update.process(Hs),Bb.preRender.process(Hs),Bb.render.process(Hs),Hs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HW),this.sharedNodes.forEach(JW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fn(this.snapshot.measuredBox.x)&&!fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=us(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!WA(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||No(this.latestValues)||m)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),eY(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return us();const c=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(tY))){const{scroll:m}=this.root;m&&(xc(c.x,m.offset.x),xc(c.y,m.offset.y))}return c}removeElementScroll(o){var d;const c=us();if(hr(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:p,options:g}=m;m!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&hr(c,o),xc(c.x,p.offset.x),xc(c.y,p.offset.y))}return c}applyTransform(o,c=!1){const d=us();hr(d,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&bc(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),No(m.latestValues)&&bc(d,m.latestValues)}return No(this.latestValues)&&bc(d,this.latestValues),d}removeTransform(o){const c=us();hr(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!No(h.latestValues))continue;Py(h.latestValues)&&h.updateSnapshot();const m=us(),p=h.measurePageBox();hr(m,p),l6(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return No(this.latestValues)&&l6(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=Hs.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),Au(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=us(),this.targetWithTransforms=us()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hr(this.target,this.layout.layoutBox),FA(this.target,this.targetDelta)):hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),Au(this.relativeTargetOrigin,this.target,b.target),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Py(this.parent.latestValues)||$A(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Hs.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;hr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;aW(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=us());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(a6(this.prevProjectionDelta.x,this.projectionDelta.x),a6(this.prevProjectionDelta.y,this.projectionDelta.y)),Eu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!m6(this.projectionDelta.x,this.prevProjectionDelta.x)||!m6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gc(),this.projectionDelta=gc(),this.projectionDeltaWithTransform=gc()}setAnimationOrigin(o,c=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},p=gc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=us(),b=d?d.source:void 0,v=this.layout?this.layout.source:void 0,N=b!==v,j=this.getStack(),w=!j||j.members.length<=1,_=!!(N&&!w&&this.options.crossfade===!0&&!this.path.some(QW));this.animationProgress=0;let k;this.mixTargetDelta=C=>{const E=C/1e3;x6(p.x,o.x,E),x6(p.y,o.y,E),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Au(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XW(this.relativeTarget,this.relativeTargetOrigin,g,E),k&&PW(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=us()),hr(k,this.relativeTarget)),N&&(this.animationValues=m,AW(m,h,this.latestValues,E,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(),this.pendingAnimation&&($i(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Bf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ac(0)),this.currentAnimation=SW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:m}=o;if(!(!c||!d||!h)){if(this!==o&&this.layout&&h&&XA(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||us();const p=fn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+p;const g=fn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+g}hr(c,d),bc(c,m),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zW),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Xb("z",o,h,this.animationValues);for(let m=0;m<Jb.length;m++)Xb(`rotate${Jb[m]}`,o,h,this.animationValues),Xb(`skew${Jb[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return $W;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=If(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=If(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!No(this.latestValues)&&(b.transform=d?d({},""):"none",this.hasProjected=!1),b}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=LW(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in sh){if(m[b]===void 0)continue;const{correct:v,applyTo:N,isCSSVariable:j}=sh[b],w=c.transform==="none"?m[b]:v(m[b],h);if(N){const _=N.length;for(let k=0;k<_;k++)c[N[k]]=w}else j?this.options.visualElement.renderState.vars[b]=w:c[b]=w}return this.options.layoutId&&(c.pointerEvents=h===this?If(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(f6),this.root.sharedNodes.clear()}}}function BW(t){t.updateLayout()}function UW(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?fr(p=>{const g=o?e.measuredBox[p]:e.layoutBox[p],b=fn(g);g.min=r[p].min,g.max=g.min+b}):XA(i,e.layoutBox,r)&&fr(p=>{const g=o?e.measuredBox[p]:e.layoutBox[p],b=fn(r[p]);g.max=g.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+b)});const c=gc();Eu(c,r,e.layoutBox);const d=gc();o?Eu(d,t.applyTransform(a,!0),e.measuredBox):Eu(d,r,e.layoutBox);const h=!WA(c);let m=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:b}=p;if(g&&b){const v=us();Au(v,e.layoutBox,g.layoutBox);const N=us();Au(N,r,b.layoutBox),YA(v,N)||(m=!0),p.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=v,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function VW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HW(t){t.clearSnapshot()}function f6(t){t.clearMeasurements()}function p6(t){t.isLayoutDirty=!1}function GW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function g6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WW(t){t.resolveTargetDelta()}function YW(t){t.calcProjection()}function KW(t){t.resetSkewAndRotation()}function JW(t){t.removeLeadSnapshot()}function x6(t,e,s){t.translate=Kt(e.translate,0,s),t.scale=Kt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function b6(t,e,s,r){t.min=Kt(e.min,s.min,r),t.max=Kt(e.max,s.max,r)}function XW(t,e,s,r){b6(t.x,e.x,s.x,r),b6(t.y,e.y,s.y,r)}function QW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZW={duration:.45,ease:[.4,0,.1,1]},v6=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),y6=v6("applewebkit/")&&!v6("chrome/")?Math.round:vr;function w6(t){t.min=y6(t.min),t.max=y6(t.max)}function eY(t){w6(t.x),w6(t.y)}function XA(t,e,s){return t==="position"||t==="preserve-aspect"&&!nW(h6(e),h6(s),.2)}function tY(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const sY=JA({attachResizeListener:(t,e)=>rh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qb={current:void 0},QA=JA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qb.current){const t=new sY({});t.mount(window),t.setOptions({layoutScroll:!0}),Qb.current=t}return Qb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nY={pan:{Feature:yW},drag:{Feature:vW,ProjectionNode:QA,MeasureLayout:qA}};function j6(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Jt.postRender(()=>i(e,Eh(e)))}class rY extends Wi{mount(){const{current:e}=this.node;e&&(this.unmount=OH(e,(s,r)=>(j6(this.node,r,"Start"),a=>j6(this.node,a,"End"))))}unmount(){}}class aY extends Wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_h(rh(this.node.current,"focus",()=>this.onFocus()),rh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function N6(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Jt.postRender(()=>i(e,Eh(e)))}class iY extends Wi{mount(){const{current:e}=this.node;e&&(this.unmount=zH(e,(s,r)=>(N6(this.node,r,"Start"),(a,{success:i})=>N6(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $y=new WeakMap,Zb=new WeakMap,oY=t=>{const e=$y.get(t.target);e&&e(t)},lY=t=>{t.forEach(oY)};function cY({root:t,...e}){const s=t||document;Zb.has(s)||Zb.set(s,{});const r=Zb.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(lY,{root:t,...e})),r[a]}function dY(t,e,s){const r=cY(e);return $y.set(t,s),r.observe(t),()=>{$y.delete(t),r.unobserve(t)}}const uY={some:0,all:1};class hY extends Wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:uY[a]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:p}=this.node.getProps(),g=h?m:p;g&&g(d)};return dY(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(mY(e,s))&&this.startObserver()}unmount(){}}function mY({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const fY={inView:{Feature:hY},tap:{Feature:iY},focus:{Feature:aY},hover:{Feature:rY}},pY={layout:{ProjectionNode:QA,MeasureLayout:qA}},Fy={current:null},ZA={current:!1};function gY(){if(ZA.current=!0,!!m1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fy.current=t.matches;t.addListener(e),e()}else Fy.current=!1}const xY=new WeakMap;function bY(t,e,s){for(const r in e){const a=e[r],i=s[r];if(sn(a))t.addValue(r,a);else if(sn(i))t.addValue(r,Ac(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(r);t.addValue(r,Ac(o!==void 0?o:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const S6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vY{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=T1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Tn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Jt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=O0(s),this.isVariantNode=yA(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(s,{},this);for(const g in p){const b=p[g];d[g]!==void 0&&sn(b)&&b.set(d[g],!1)}}mount(e){this.current=e,xY.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),ZA.current||gY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),$i(this.notifyUpdate),$i(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zc.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tc){const s=Tc[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):us()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<S6.length;r++){const a=S6[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=bY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=Ac(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(EE(r)||TE(r))?r=parseFloat(r):!FH(r)&&Fi.test(s)&&(r=uA(e,s)),this.setBaseTarget(e,sn(r)?r.get():r)),sn(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=V1(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!sn(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new b1),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class eT extends vY{constructor(){super(...arguments),this.KeyframeResolver=kH}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function tT(t,{style:e,vars:s},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const i in s)t.style.setProperty(i,s[i])}function yY(t){return window.getComputedStyle(t)}class wY extends eT{constructor(){super(...arguments),this.type="html",this.renderInstance=tT}readValueFromInstance(e,s){var r;if(Zc.has(s))return(r=this.projection)!=null&&r.isProjecting?Cy(s):Gq(e,s);{const a=yY(e),i=(w1(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return IA(e,s)}build(e,s,r){I1(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return q1(e,s,r)}}const sT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jY(t,e,s,r){tT(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(sT.has(a)?a:F1(a),e.attrs[a])}class NY extends eT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=us}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Zc.has(s)){const r=dA(s);return r&&r.default||0}return s=sT.has(s)?s:F1(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return TA(e,s,r)}build(e,s,r){CA(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){jY(e,s,r,a)}mount(e){this.isSVGTag=EA(e.tagName),super.mount(e)}}const SY=(t,e)=>U1(t)?new NY(e):new wY(e,{allowProjection:t!==y.Fragment}),_Y=NG({...KG,...fY,...nY,...pY},SY),oe=YH(_Y),Iy={alameda:{communityName:"Alameda County",tagline:"The cultural and commercial heart of the East Bay.",description:"Home to Oakland and Berkeley, Alameda County is a diverse and dynamic region known for its vibrant arts scene, top-tier educational institutions, and a deep-rooted history of social and political activism.",heroImage:"https://www.baaqmd.gov/~/media/dotgov/images/county-images/alameda-jpg.jpg?la=en&h=312&w=816&hash=A53B795709959FCE584F7F96AF2E6AF4",stats:[{label:"Population",value:"1.67M",icon:"Users"},{label:"Median Income",value:"$112,000",icon:"DollarSign"},{label:"Key Cities",value:"Oakland, Berkeley",icon:"MapPin"}],featuredCities:[{name:"Oakland",slug:"oakland"},{name:"Berkeley",slug:"berkeley"},{name:"Fremont",slug:"fremont"}]},"contra-costa":{communityName:"Contra Costa County",tagline:"Suburban communities meet rolling hills and waterfront views.",description:"Stretching from the inner East Bay to the Delta, Contra Costa County offers a mix of bustling suburban centers and beautiful natural landscapes, with a growing focus on healthcare and technology.",heroImage:"https://www.contracosta.ca.gov/ImageRepository/Document?documentID=80881",stats:[{label:"Population",value:"1.16M",icon:"Users"},{label:"Median Income",value:"$123,000",icon:"DollarSign"},{label:"Key Cities",value:"Walnut Creek, Richmond",icon:"MapPin"}],featuredCities:[{name:"Walnut Creek",slug:"walnut-creek"},{name:"Richmond",slug:"richmond"},{name:"Concord",slug:"concord"}]},marin:{communityName:"Marin County",tagline:"Natural beauty, affluent communities, and environmental leadership.",description:"Famous for the Golden Gate Bridge, Mount Tamalpais, and its stunning coastline, Marin County is a hub for outdoor recreation and environmental conservation efforts, boasting strong community engagement.",heroImage:"https://media-production.lp-cdn.com/cdn-cgi/image/format=auto,quality=85,fit=scale-down,width=1280/https://media-production.lp-cdn.com/media/pfsjeo96fi7hlv4xculb",stats:[{label:"Population",value:"260,000",icon:"Users"},{label:"Median Income",value:"$153,000",icon:"DollarSign"},{label:"Key Cities",value:"Sausalito, San Rafael",icon:"MapPin"}],featuredCities:[{name:"Sausalito",slug:"sausalito"},{name:"San Rafael",slug:"san-rafael"},{name:"Mill Valley",slug:"mill-valley"}]},napa:{communityName:"Napa County",tagline:"World-renowned vineyards and a commitment to land preservation.",description:"Globally recognized for its wine industry, Napa Valley is a region dedicated to agriculture, tourism, and the preservation of its scenic landscapes, with nonprofits focused on land stewardship and community health.",heroImage:"https://dropinblog.net/34243665/files/featured/Napa_Valley_Wine_Region.jpg",stats:[{label:"Population",value:"136,000",icon:"Users"},{label:"Median Income",value:"$105,000",icon:"DollarSign"},{label:"Key Cities",value:"Napa, St. Helena",icon:"MapPin"}],featuredCities:[{name:"Napa",slug:"napa"},{name:"St. Helena",slug:"st-helena"},{name:"Calistoga",slug:"calistoga"}]},"san-francisco":{communityName:"San Francisco",tagline:"The iconic center of innovation, culture, and diversity.",description:"A global hub for technology and finance, San Francisco is also a city of distinct neighborhoods, progressive values, and immense creativity, with a nonprofit sector tackling complex issues like housing and homelessness.",heroImage:"https://images.pexels.com/photos/208745/pexels-photo-208745.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"874,000",icon:"Users"},{label:"Median Income",value:"$136,000",icon:"DollarSign"},{label:"Key Cities",value:"San Francisco",icon:"MapPin"}],featuredCities:[]},"san-mateo":{communityName:"San Mateo County",tagline:"From tech campuses to coastal towns on the Peninsula.",description:"Situated between San Francisco and Silicon Valley, San Mateo County is home to major tech companies, a diverse range of communities, and a beautiful coastline, with a focus on education and youth services.",heroImage:"https://drupal-prod.visitcalifornia.com/sites/default/files/styles/fluid_1920/public/2022-06/VC_San-Mateo-County_Half-Moon-Bay_gty-595073410-RF_1280x640.jpg.webp?itok=s_Wc4F0E",stats:[{label:"Population",value:"766,000",icon:"Users"},{label:"Median Income",value:"$149,000",icon:"DollarSign"},{label:"Key Cities",value:"San Mateo, Redwood City",icon:"MapPin"}],featuredCities:[{name:"San Mateo",slug:"san-mateo"},{name:"Redwood City",slug:"redwood-city"},{name:"Daly City",slug:"daly-city"}]},"santa-clara":{communityName:"Santa Clara County",tagline:"The heart of Silicon Valley and a global engine for innovation.",description:"As the epicenter of the tech world, Santa Clara County is a place of immense economic output and innovation. Its nonprofit sector works to bridge equity gaps and support the diverse communities that power the valley.",heroImage:"https://gilroydispatch.com/wp-content/uploads/sites/17/2024/06/santa-clara-county-neighborhood.jpg",stats:[{label:"Population",value:"1.93M",icon:"Users"},{label:"Median Income",value:"$151,000",icon:"DollarSign"},{label:"Key Cities",value:"San Jose, Palo Alto",icon:"MapPin"}],featuredCities:[{name:"San Jose",slug:"san-jose"},{name:"Palo Alto",slug:"palo-alto"},{name:"Santa Clara",slug:"santa-clara"},{name:"Sunnyvale",slug:"sunnyvale"}]},solano:{communityName:"Solano County",tagline:"Affordable communities and a vital link between the Bay Area and Sacramento.",description:"Offering a more affordable cost of living, Solano County is a crossroads of agriculture, industry, and military presence with a strong focus on community development and family services.",heroImage:"https://californialocal.com/static/media/uploads/sacramento/articles/5688-city-silicon-valley-solano-county-planned-billionaires.jpg",stats:[{label:"Population",value:"450,000",icon:"Users"},{label:"Median Income",value:"$96,000",icon:"DollarSign"},{label:"Key Cities",value:"Vallejo, Fairfield",icon:"MapPin"}],featuredCities:[{name:"Vallejo",slug:"vallejo"},{name:"Fairfield",slug:"fairfield"},{name:"Benicia",slug:"benicia"}]},sonoma:{communityName:"Sonoma County",tagline:"A celebrated wine region with a focus on sustainability and the arts.",description:"Known for its world-class wineries, farm-to-table cuisine, and stunning natural landscapes, Sonoma County has a vibrant arts scene and a deep commitment to sustainable agriculture and environmental protection.",heroImage:"https://www.travelandleisure.com/thmb/kG_GNTflwMUfgWTnzQLGeDTHny4=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/TL_aerial-vineyards-sonoma-california_HERO_SONOMA1022-ec08a5d771164fc38fc6bcab295b2e94.jpg",stats:[{label:"Population",value:"494,000",icon:"Users"},{label:"Median Income",value:"$98,000",icon:"DollarSign"},{label:"Key Cities",value:"Santa Rosa, Sonoma",icon:"MapPin"}],featuredCities:[{name:"Santa Rosa",slug:"santa-rosa"},{name:"Sonoma",slug:"sonoma"},{name:"Petaluma",slug:"petaluma"}]}},CY={oakland:{communityName:"Oakland",countyName:"Alameda County",tagline:"A vibrant hub of culture, innovation, and resilient communities.",description:"Oakland stands as a testament to the Bay Area's rich diversity and history. From the bustling port to the serene redwood forests in the hills, the city is a microcosm of creativity and industry. Its spirit is defined by its strong neighborhood bonds, thriving arts scene, and a deep-rooted commitment to social justice.",heroImage:"https://images.pexels.com/photos/6969271/pexels-photo-6969271.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"433,823",icon:"Users"},{label:"Median Income",value:"$86,971",icon:"DollarSign"},{label:"Founded",value:"1852",icon:"Calendar"}]},berkeley:{communityName:"Berkeley",countyName:"Alameda County",tagline:"A leader in progressive thought, education, and culinary arts.",description:"Home to the University of California, Berkeley, this city is a powerhouse of intellectual curiosity, political activism, and cultural innovation. From its gourmet food scene to its historic theaters, Berkeley fosters a unique environment for nonprofits focused on education, sustainability, and social equity.",heroImage:"https://images.pexels.com/photos/3184328/pexels-photo-3184328.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"124,321",icon:"Users"},{label:"Median Income",value:"$108,558",icon:"DollarSign"},{label:"Founded",value:"1878",icon:"Calendar"}]},fremont:{communityName:"Fremont",countyName:"Alameda County",tagline:"A diverse suburban city with a strong manufacturing and tech presence.",description:"As one of the largest cities in the Bay Area by land area, Fremont is a sprawling, diverse community known for its strong public schools, numerous parks, and a significant manufacturing and high-tech employment base.",heroImage:"https://images.pexels.com/photos/280221/pexels-photo-280221.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"230,504",icon:"Users"},{label:"Median Income",value:"$153,677",icon:"DollarSign"},{label:"Founded",value:"1956",icon:"Calendar"}]},"san-jose":{communityName:"San Jose",countyName:"Santa Clara County",tagline:"The Capital of Silicon Valley.",description:"As the largest city in the Bay Area, San Jose is a sprawling center of technology and innovation. It boasts a diverse population and a robust economy, with a nonprofit sector focused on education, housing, and immigrant support services.",heroImage:"https://images.pexels.com/photos/3586966/pexels-photo-3586966.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"1.01M",icon:"Users"},{label:"Median Income",value:"$133,900",icon:"DollarSign"},{label:"Founded",value:"1777",icon:"Calendar"}]},"palo-alto":{communityName:"Palo Alto",countyName:"Santa Clara County",tagline:"The intellectual heart of Silicon Valley, home to Stanford University.",description:"Palo Alto is synonymous with venture capital, startups, and technological breakthroughs. Centered around Stanford University, the city is a hub of intellectual and financial capital, with a philanthropic community that has a global reach.",heroImage:"https://images.pexels.com/photos/356086/pexels-photo-356086.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"68,572",icon:"Users"},{label:"Median Income",value:"$216,840",icon:"DollarSign"},{label:"Founded",value:"1894",icon:"Calendar"}]},"santa-clara":{communityName:"Santa Clara",countyName:"Santa Clara County",tagline:"Mission history meets modern tech innovation.",description:"Home to Santa Clara University, the historic Mission Santa Clara de Asís, and major tech campuses, the city of Santa Clara blends California's history with the fast-paced innovation of Silicon Valley.",heroImage:"https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"127,647",icon:"Users"},{label:"Median Income",value:"$145,271",icon:"DollarSign"},{label:"Founded",value:"1852",icon:"Calendar"}]},sunnyvale:{communityName:"Sunnyvale",countyName:"Santa Clara County",tagline:"A key hub for aerospace and tech in a suburban setting.",description:"One of the major cities in Silicon Valley, Sunnyvale is home to numerous tech and aerospace companies. It's known for its efficient city management and a community that supports local parks and services.",heroImage:"https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"155,805",icon:"Users"},{label:"Median Income",value:"$161,670",icon:"DollarSign"},{label:"Founded",value:"1912",icon:"Calendar"}]},"walnut-creek":{communityName:"Walnut Creek",countyName:"Contra Costa County",tagline:"A bustling downtown hub with a focus on arts and community.",description:"Serving as a commercial and cultural hub for the central county, Walnut Creek boasts a vibrant downtown with high-end retail and a regional performing arts center. Nonprofits in the area focus on arts, senior services, and open space preservation.",heroImage:"https://images.pexels.com/photos/3573382/pexels-photo-3573382.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"70,127",icon:"Users"},{label:"Median Income",value:"$130,480",icon:"DollarSign"},{label:"Founded",value:"1914",icon:"Calendar"}]},richmond:{communityName:"Richmond",countyName:"Contra Costa County",tagline:"Industrial history and a focus on community-led revitalization.",description:"With a rich industrial and WWII history, Richmond is undergoing significant community-led revitalization. The city's nonprofits are deeply engaged in youth development, environmental justice, and health equity.",heroImage:"https://images.pexels.com/photos/2901209/pexels-photo-2901209.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"116,448",icon:"Users"},{label:"Median Income",value:"$79,738",icon:"DollarSign"},{label:"Founded",value:"1905",icon:"Calendar"}]},concord:{communityName:"Concord",countyName:"Contra Costa County",tagline:"A family-oriented community with a diverse cultural scene.",description:"As the largest city in Contra Costa County, Concord is a diverse, family-oriented community with a vibrant music and arts scene, hosting numerous festivals and events throughout the year.",heroImage:"https://images.pexels.com/photos/1370704/pexels-photo-1370704.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"125,410",icon:"Users"},{label:"Median Income",value:"$95,373",icon:"DollarSign"},{label:"Founded",value:"1869",icon:"Calendar"}]},sausalito:{communityName:"Sausalito",countyName:"Marin County",tagline:"Picturesque waterfront community with an artistic soul.",description:"Known for its stunning views of San Francisco and unique floating homes community, Sausalito has a long history as an artistic enclave and shipbuilding center, with a focus on marine and environmental conservation.",heroImage:"https://images.pexels.com/photos/1032650/pexels-photo-1032650.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"7,269",icon:"Users"},{label:"Median Income",value:"$152,708",icon:"DollarSign"},{label:"Founded",value:"1893",icon:"Calendar"}]},"san-rafael":{communityName:"San Rafael",countyName:"Marin County",tagline:"Marin's oldest, largest, and most culturally diverse city.",description:"As the county seat, San Rafael is the economic and cultural heart of Marin. It features a vibrant downtown, diverse neighborhoods, and a strong commitment to supporting arts, education, and social services.",heroImage:"https://images.pexels.com/photos/421927/pexels-photo-421927.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"61,271",icon:"Users"},{label:"Median Income",value:"$114,064",icon:"DollarSign"},{label:"Founded",value:"1889",icon:"Calendar"}]},"mill-valley":{communityName:"Mill Valley",countyName:"Marin County",tagline:"A charming town nestled at the foot of Mount Tamalpais.",description:"Known for its redwood groves, scenic beauty, and strong arts community, Mill Valley is a picturesque town with a focus on environmental preservation, arts education, and local community-building initiatives.",heroImage:"https://images.pexels.com/photos/7919/pexels-photo.jpg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"14,231",icon:"Users"},{label:"Median Income",value:"$214,848",icon:"DollarSign"},{label:"Founded",value:"1900",icon:"Calendar"}]},"san-mateo":{communityName:"San Mateo",countyName:"San Mateo County",tagline:"A central hub on the Peninsula with a lively downtown.",description:"Centrally located on the San Francisco Peninsula, San Mateo features a vibrant downtown, diverse residential neighborhoods, and a growing tech presence. Its nonprofit sector is active in housing, healthcare, and youth services.",heroImage:"https://images.pexels.com/photos/3889843/pexels-photo-3889843.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"105,661",icon:"Users"},{label:"Median Income",value:"$135,170",icon:"DollarSign"},{label:"Founded",value:"1894",icon:"Calendar"}]},"redwood-city":{communityName:"Redwood City",countyName:"San Mateo County",tagline:"Climate Best by Government Test.",description:"As the county seat of San Mateo, Redwood City boasts a revitalized downtown, a deep-water port, and a growing number of tech and entertainment companies. Local philanthropy focuses on education, health, and civic engagement.",heroImage:"https://images.pexels.com/photos/7031406/pexels-photo-7031406.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"84,292",icon:"Users"},{label:"Median Income",value:"$136,855",icon:"DollarSign"},{label:"Founded",value:"1867",icon:"Calendar"}]},"daly-city":{communityName:"Daly City",countyName:"San Mateo County",tagline:"Gateway to the Peninsula with a large and diverse community.",description:"Immediately south of San Francisco, Daly City is one of the most diverse communities on the Peninsula. It serves as a major hub for retail and healthcare, with nonprofits focused on serving its large immigrant and working-class populations.",heroImage:"https://images.pexels.com/photos/1546168/pexels-photo-1546168.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"104,901",icon:"Users"},{label:"Median Income",value:"$106,822",icon:"DollarSign"},{label:"Founded",value:"1911",icon:"Calendar"}]},"santa-rosa":{communityName:"Santa Rosa",countyName:"Sonoma County",tagline:"The urban heart of wine country.",description:"Santa Rosa is the largest city in Sonoma County, serving as a hub for technology, retail, and tourism. The community is resilient, with a strong focus on recovery efforts from recent wildfires and support for the arts and local agriculture.",heroImage:"https://images.pexels.com/photos/5232649/pexels-photo-5232649.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"178,127",icon:"Users"},{label:"Median Income",value:"$89,845",icon:"DollarSign"},{label:"Founded",value:"1868",icon:"Calendar"}]},sonoma:{communityName:"Sonoma",countyName:"Sonoma County",tagline:"The historic birthplace of the California wine industry.",description:"With its historic central plaza and colonial-era landmarks, Sonoma is a world-famous destination. Its philanthropic efforts are often directed towards preserving its rich history, supporting the local agricultural community, and promoting the arts.",heroImage:"https://images.pexels.com/photos/1123260/pexels-photo-1123260.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"10,739",icon:"Users"},{label:"Median Income",value:"$96,050",icon:"DollarSign"},{label:"Founded",value:"1883",icon:"Calendar"}]},petaluma:{communityName:"Petaluma",countyName:"Sonoma County",tagline:"Historic riverfront charm meets modern maker culture.",description:"Located on the Petaluma River, this city is known for its well-preserved historic downtown and strong agricultural roots. Today, it's also a hub for a vibrant community of artisans, food producers, and small businesses.",heroImage:"https://images.pexels.com/photos/705075/pexels-photo-705075.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"59,776",icon:"Users"},{label:"Median Income",value:"$106,798",icon:"DollarSign"},{label:"Founded",value:"1858",icon:"Calendar"}]},vallejo:{communityName:"Vallejo",countyName:"Solano County",tagline:"A diverse waterfront city with a rich naval history.",description:"One of the most diverse cities in the nation, Vallejo has a deep history as a naval center. It boasts a thriving artistic community and is undergoing significant economic and cultural revitalization.",heroImage:"https://images.pexels.com/photos/258109/pexels-photo-258109.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"126,090",icon:"Users"},{label:"Median Income",value:"$80,248",icon:"DollarSign"},{label:"Founded",value:"1868",icon:"Calendar"}]},fairfield:{communityName:"Fairfield",countyName:"Solano County",tagline:"The heart of Solano County, balancing industry and community.",description:"As the county seat, Fairfield is a major center for commerce, government, and industry, including Travis Air Force Base. The community supports a wide range of family services and youth programs.",heroImage:"https://images.pexels.com/photos/280193/pexels-photo-280193.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"119,881",icon:"Users"},{label:"Median Income",value:"$95,735",icon:"DollarSign"},{label:"Founded",value:"1859",icon:"Calendar"}]},benicia:{communityName:"Benicia",countyName:"Solano County",tagline:"A historic waterfront city with a vibrant artist community.",description:"A former state capital, Benicia is a charming waterfront city known for its rich history, thriving arts scene, and numerous antique shops. It maintains a small-town feel with strong community involvement.",heroImage:"https://images.pexels.com/photos/273209/pexels-photo-273209.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"27,131",icon:"Users"},{label:"Median Income",value:"$121,389",icon:"DollarSign"},{label:"Founded",value:"1851",icon:"Calendar"}]},napa:{communityName:"Napa",countyName:"Napa County",tagline:"The gateway to the world-famous Napa Valley wine region.",description:"As the largest city in Napa County, Napa serves as the primary business and cultural hub for the region. Its revitalized downtown riverfront is a center for dining, arts, and entertainment.",heroImage:"https://images.pexels.com/photos/1024967/pexels-photo-1024967.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"79,246",icon:"Users"},{label:"Median Income",value:"$104,138",icon:"DollarSign"},{label:"Founded",value:"1872",icon:"Calendar"}]},"st-helena":{communityName:"St. Helena",countyName:"Napa County",tagline:"The heart of Napa Valley's celebrated wine and culinary scene.",description:"St. Helena is a prestigious town in the center of Napa Valley, home to many of the region's most famous wineries and restaurants. The community is deeply invested in the wine industry and land preservation.",heroImage:"https://images.pexels.com/photos/197088/pexels-photo-197088.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"6,167",icon:"Users"},{label:"Median Income",value:"$120,430",icon:"DollarSign"},{label:"Founded",value:"1876",icon:"Calendar"}]},calistoga:{communityName:"Calistoga",countyName:"Napa County",tagline:"Relaxed charm, hot springs, and mud baths at the top of the valley.",description:"Located at the northern end of Napa Valley, Calistoga is famous for its natural hot springs and spas. It maintains a relaxed, old-west atmosphere while being surrounded by world-class wineries.",heroImage:"https://images.pexels.com/photos/3408744/pexels-photo-3408744.jpeg?auto=compress&cs=tinysrgb&w=1600",stats:[{label:"Population",value:"5,228",icon:"Users"},{label:"Median Income",value:"$88,125",icon:"DollarSign"},{label:"Founded",value:"1886",icon:"Calendar"}]}},kY=({slug:t,county:e,index:s})=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:s*.1},children:n.jsxs(Ye,{to:`/spotlight/${t}`,className:"group block rounded-3xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 ease-out transform hover:-translate-y-3 border border-white/60 bg-white/80 backdrop-blur-sm",children:[n.jsxs("div",{className:"relative h-64 overflow-hidden",children:[n.jsx("img",{src:e.heroImage,alt:`A view of ${e.communityName}`,className:"w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent group-hover:from-black/40 transition-all duration-500"}),n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/30 group-hover:bg-white/30 transition-all duration-300",children:n.jsx(Nr,{className:"h-5 w-5 text-white transform group-hover:translate-x-0.5 transition-transform duration-300"})})}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Lt,{className:"h-4 w-4 text-white/80"}),n.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Bay Area County"})]}),n.jsx("h3",{className:"text-white text-2xl md:text-3xl font-bold leading-tight",children:e.communityName})]})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("p",{className:"text-slate-600 leading-relaxed line-clamp-3 mb-4",children:e.description}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{children:"Organizations"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(un,{className:"h-4 w-4"}),n.jsx("span",{children:"Funders"})]})]}),n.jsxs("div",{className:"inline-flex items-center gap-2 text-blue-600 font-semibold text-sm group-hover:text-blue-700 transition-colors duration-300",children:[n.jsx("span",{children:"Explore"}),n.jsx(Nr,{className:"h-4 w-4 transform group-hover:translate-x-0.5 transition-transform duration-300"})]})]})]})]})}),EY=()=>{const{setPageBgColor:t}=y.useContext(yn);y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-rose-50 to-orange-50"),document.title="Fundspace - Community Spotlights",()=>{t("bg-white")}),[t]);const e=Object.keys(Iy),s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}}};return n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-rose-400 to-pink-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-orange-400 to-red-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-yellow-400 to-orange-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx(oe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-rose-100 to-orange-100 rounded-3xl flex items-center justify-center border border-rose-200 shadow-lg",children:n.jsx(Lt,{className:"h-10 w-10 text-rose-600"})}),n.jsxs(oe.h1,{variants:s,initial:"hidden",animate:"visible",className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Community "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-rose-600 via-orange-600 to-yellow-600",children:"Spotlights"})]}),n.jsxs(oe.p,{variants:{...s,transition:{...s.transition,delay:.2}},initial:"hidden",animate:"visible",className:"text-lg md:text-xl text-slate-600 mb-8 max-w-4xl mx-auto leading-relaxed",children:["Explore the unique philanthropic landscapes of the 9 Bay Area counties. Discover the key organizations and fund providers driving change in each community.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-orange-600 font-semibold",children:" Every county has its own story of impact."})]}),n.jsxs(oe.div,{variants:{...s,transition:{...s.transition,delay:.4}},initial:"hidden",animate:"visible",className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/organizations",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-white bg-gradient-to-r from-rose-600 to-orange-600 hover:from-rose-700 hover:to-orange-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(ot,{className:"mr-2",size:18}),"Explore All Organizations"]}),n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-orange-700 bg-orange-100 hover:bg-orange-200/70 transition-colors duration-300",children:[n.jsx(Cs,{className:"mr-2",size:18}),"Browse Grants"]})]})]})]}),n.jsxs("section",{children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-4",children:"Discover Each County's Impact"}),n.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"From San Francisco's urban innovation to Napa's community resilience, each county has a unique ecosystem of organizations creating positive change."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:e.map((r,a)=>n.jsx(kY,{slug:r,county:Iy[r],index:a},r))})]}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Nt,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Bay Area. Built by Community."}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Each spotlight tells the story of passionate organizations, generous fund providers, and communities working together to create a better future for the Bay Area."}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(qe,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Local Organizations"}),n.jsx("p",{className:"text-sm opacity-80",children:"Discover grassroots organizations making a difference in each county."})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(Xt,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Funding Opportunities"}),n.jsx("p",{className:"text-sm opacity-80",children:"Find county-specific grants and funding sources for your mission."})]})]})]})})]})},AY=()=>{const{setPageBgColor:t}=y.useContext(yn),{countySlug:e}=Gc(),[s,r]=y.useState(null),[a,i]=y.useState([]),[o,c]=y.useState([]),[d,h]=y.useState(!0);y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-rose-50 to-orange-50"),()=>{t("bg-white")}),[t]);const m=()=>{};y.useEffect(()=>{const g=Iy[e];if(!g){h(!1);return}r(g),document.title=`Fundspace - Spotlight on ${g.communityName}`,(async()=>{h(!0);try{const v=g.communityName.split(" ")[0],[N,j]=await Promise.all([$.from("nonprofits").select("*, nonprofit_categories(categories(name))").ilike("location",`%${v}%`).limit(3),$.from("funders").select("*, funder_type:funder_type_id(name), funder_categories(categories(name)), funder_funding_locations(locations(name))").ilike("location",`%${v}%`).limit(3)]);if(N.error)throw N.error;const w=(N.data||[]).map(k=>({...k,imageUrl:k.image_url,focus_areas:k.nonprofit_categories.map(C=>C.categories.name),type:"nonprofit"}));if(i(w),j.error)throw j.error;const _=(j.data||[]).map(k=>{var C;return{...k,funderType:(C=k.funder_type)==null?void 0:C.name,focus_areas:k.funder_categories.map(E=>E.categories.name),funding_locations:k.funder_funding_locations.map(E=>E.locations.name),type:"foundation"}});c(_)}catch(v){console.error("Error fetching live spotlight data:",v)}finally{h(!1)}})()},[e]);const p={Users:n.jsx(qe,{size:32,className:"text-blue-500"}),DollarSign:n.jsx(an,{size:32,className:"text-emerald-500"}),MapPin:n.jsx(Lt,{size:32,className:"text-rose-500"}),Building:n.jsx(er,{size:32,className:"text-purple-500"})};return!s&&!d?n.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-2xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-100 to-rose-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{className:"h-8 w-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-3",children:"Community Spotlight Not Found"}),n.jsxs("p",{className:"text-slate-600 mb-6",children:['The county slug "',e,'" is not valid.']}),n.jsxs(Ye,{to:"/spotlight",className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-300",children:[n.jsx(Nr,{className:"mr-2",size:16}),"View All Spotlights"]})]})}):n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("section",{className:"relative h-[70vh] min-h-[500px] flex items-center justify-center text-white overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-black/20 z-10"}),s&&n.jsx("img",{src:s.heroImage,alt:`${s.communityName} hero image`,className:"absolute inset-0 w-full h-full object-cover"}),n.jsxs("div",{className:"relative z-20 max-w-6xl mx-auto px-4 text-center",children:[n.jsx(oe.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"text-5xl md:text-7xl font-extrabold tracking-tight mb-6",children:s==null?void 0:s.communityName}),n.jsx(oe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.2,ease:"easeOut"},className:"text-xl md:text-2xl font-light text-white/90 max-w-3xl mx-auto leading-relaxed",children:s==null?void 0:s.tagline})]})]}),n.jsx("section",{className:"container mx-auto px-4 -mt-32 relative z-30 mb-20",children:n.jsxs(oe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-8 md:p-12 border border-white/60",children:[n.jsx("p",{className:"text-slate-600 text-lg md:text-xl leading-relaxed mb-10 text-center max-w-4xl mx-auto",children:s==null?void 0:s.description}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 text-center border-t border-slate-200 pt-10",children:s==null?void 0:s.stats.map((g,b)=>n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:b*.1},className:"group",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 border border-slate-300 shadow-lg",children:p[g.icon]}),n.jsx("p",{className:"text-4xl font-bold text-slate-800 mb-2",children:g.value}),n.jsx("p",{className:"text-sm text-slate-500 uppercase tracking-wider font-semibold",children:g.label})]},g.label))})]})}),d?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(Li,{size:32,className:"text-purple-600 animate-spin"})}),n.jsx("p",{className:"text-slate-600",children:"Loading community data..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("section",{className:"py-16 md:py-24",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Nt,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:[n.jsx("span",{className:"text-slate-800",children:"Local "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:"Organizations"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto",children:["Organizations making a tangible impact in ",s.communityName,"."]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 items-stretch max-w-6xl mx-auto",children:a.length>0?a.map((g,b)=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:b*.1},children:n.jsx(Go,{organization:g,handleFilterChange:m})},g.id)):n.jsx(oe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"col-span-3 text-center py-12",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border border-white/60 shadow-lg max-w-md mx-auto",children:[n.jsx(ot,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No specific organizations found for this spotlight yet."})]})})}),a.length>0&&n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(qe,{className:"mr-2",size:20}),"Explore All Organizations"]})})]})}),n.jsx("section",{className:"py-16 md:py-24 bg-white/60 backdrop-blur-sm",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Cs,{className:"h-8 w-8 text-emerald-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:[n.jsx("span",{className:"text-slate-800",children:"Community "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600",children:"Fund Providers"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto",children:["Organizations committed to supporting ",s.communityName,"."]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 items-stretch max-w-6xl mx-auto",children:o.length>0?o.map((g,b)=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:b*.1},children:n.jsx(Go,{organization:g,handleFilterChange:m})},g.id)):n.jsx(oe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"col-span-3 text-center py-12",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border border-white/60 shadow-lg max-w-md mx-auto",children:[n.jsx(ot,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No specific fund providers found for this spotlight yet."})]})})}),o.length>0&&n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations?prefilter=foundation",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(er,{className:"mr-2",size:20}),"Explore All Fund Providers"]})})]})}),(s==null?void 0:s.featuredCities)&&s.featuredCities.length>0&&n.jsx("section",{className:"py-16 md:py-24",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-rose-100 to-orange-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Lt,{className:"h-8 w-8 text-rose-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:[n.jsx("span",{className:"text-slate-800",children:"Explore Cities in "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-rose-600 to-orange-600",children:s.communityName})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto",children:"Drill down to see dedicated spotlights for major cities in this county."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto",children:s.featuredCities.map((g,b)=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:b*.1},children:n.jsxs(Ye,{to:`/spotlight/${e}/${g.slug}`,className:"group bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 flex items-center justify-between transform hover:scale-105 border border-white/60",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-rose-100 to-orange-100 rounded-xl flex items-center justify-center mr-4 border border-rose-200",children:n.jsx(Lt,{className:"h-6 w-6 text-rose-600"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-rose-600 group-hover:to-orange-600 transition-all duration-300",children:g.name})]}),n.jsx(Nr,{className:"h-5 w-5 text-slate-400 group-hover:text-rose-500 group-hover:translate-x-1 transition-all duration-300"})]})},g.slug))})]})}),n.jsx("section",{className:"py-16 md:py-24",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Discover More in ",s==null?void 0:s.communityName]}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Explore the full ecosystem of organizations and funding opportunities in this vibrant Bay Area community."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-slate-900 hover:bg-gray-100 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:[n.jsx(ot,{className:"mr-2",size:20}),"Find Local Grants"]}),n.jsxs("a",{href:"/spotlight",className:"inline-flex items-center justify-center px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-2xl text-white font-semibold transition-all duration-300",children:[n.jsx(Hw,{className:"mr-2",size:20}),"View All Spotlights"]})]})]})})})]})]})},TY=()=>{const{setPageBgColor:t}=y.useContext(yn),{countySlug:e,citySlug:s}=Gc(),[r,a]=y.useState(null),[i,o]=y.useState([]),[c,d]=y.useState([]),[h,m]=y.useState(!0);y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-orange-50 to-rose-50"),()=>{t("bg-white")}),[t]);const p=()=>{};y.useEffect(()=>{const b=CY[s];if(!b){m(!1);return}a(b),document.title=`Fundspace - Spotlight on ${b.communityName}`,(async()=>{m(!0);try{const N=b.communityName,[j,w]=await Promise.all([$.from("nonprofits").select("*, nonprofit_categories(categories(name))").ilike("location",`%${N}%`).limit(3),$.from("funders").select("*, funder_type:funder_type_id(name), funder_categories(categories(name)), funder_funding_locations(locations(name))").ilike("location",`%${N}%`).limit(3)]);if(j.error)throw j.error;const _=(j.data||[]).map(C=>({...C,imageUrl:C.image_url,focus_areas:C.nonprofit_categories.map(E=>E.categories.name),type:"nonprofit"}));if(o(_),w.error)throw w.error;const k=(w.data||[]).map(C=>{var E;return{...C,funderType:(E=C.funder_type)==null?void 0:E.name,focus_areas:C.funder_categories.map(A=>A.categories.name),funding_locations:C.funder_funding_locations.map(A=>A.locations.name),type:"foundation"}});d(k)}catch(N){console.error("Error fetching city spotlight data:",N)}finally{m(!1)}})()},[s]);const g={Users:n.jsx(qe,{size:32,className:"text-blue-500"}),DollarSign:n.jsx(an,{size:32,className:"text-emerald-500"}),Calendar:n.jsx(bs,{size:32,className:"text-orange-500"}),Building:n.jsx(er,{size:32,className:"text-purple-500"})};return!r&&!h?n.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-2xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-100 to-rose-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{className:"h-8 w-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-3",children:"City Spotlight Not Found"}),n.jsxs("p",{className:"text-slate-600 mb-6",children:['The city slug "',s,'" is not valid.']}),n.jsxs(Ye,{to:`/spotlight/${e}`,className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:shadow-lg transition-all duration-300",children:[n.jsx(Zn,{className:"mr-2",size:16}),"Back to County Spotlight"]})]})}):n.jsx("div",{className:"min-h-screen",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsx(oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},children:n.jsxs(Ye,{to:`/spotlight/${e}`,className:"inline-flex items-center text-sm font-semibold text-slate-600 hover:text-blue-600 transition-colors mb-8 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full border border-white/60 shadow-lg",children:[n.jsx(Zn,{size:16,className:"mr-2"}),"Back to ",(r==null?void 0:r.countyName)||"County"," Spotlight"]})}),r&&n.jsxs(n.Fragment,{children:[n.jsxs(oe.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"relative h-[60vh] min-h-[400px] flex items-center justify-center text-white text-center mb-16 rounded-3xl overflow-hidden shadow-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-black/20 z-10"}),n.jsx("img",{src:r.heroImage,alt:`${r.communityName} hero image`,className:"absolute inset-0 w-full h-full object-cover"}),n.jsxs("div",{className:"relative z-20 max-w-4xl mx-auto px-4",children:[n.jsx(oe.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-5xl md:text-7xl font-extrabold tracking-tight mb-6",children:r.communityName}),n.jsx(oe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-xl md:text-2xl font-light text-white/90 leading-relaxed",children:r.tagline})]})]}),n.jsx(oe.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"mb-20",children:n.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-8 md:p-12 border border-white/60",children:[n.jsx("p",{className:"text-slate-600 text-lg md:text-xl leading-relaxed mb-10 text-center max-w-4xl mx-auto",children:r.description}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 text-center border-t border-slate-200 pt-10",children:r.stats.map((b,v)=>n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:v*.1},className:"group",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-3xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 border border-slate-300 shadow-lg",children:g[b.icon]}),n.jsx("p",{className:"text-4xl font-bold text-slate-800 mb-2",children:b.value}),n.jsx("p",{className:"text-sm text-slate-500 uppercase tracking-wider font-semibold",children:b.label})]},b.label))})]})})]}),h?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(Li,{size:32,className:"text-purple-600 animate-spin"})}),n.jsx("p",{className:"text-slate-600",children:"Loading city data..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"mb-20",children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Nt,{className:"h-8 w-8 text-purple-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:[n.jsx("span",{className:"text-slate-800",children:"Local "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:"Organizations"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto",children:["Organizations creating positive change in ",r==null?void 0:r.communityName,"."]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 items-stretch max-w-6xl mx-auto",children:i.length>0?i.map((b,v)=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:v*.1},children:n.jsx(Go,{organization:b,handleFilterChange:p})},b.id)):n.jsx(oe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"col-span-3 text-center py-12",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border border-white/60 shadow-lg max-w-md mx-auto",children:[n.jsx(ot,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No specific organizations found for this city yet."})]})})}),i.length>0&&n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(qe,{className:"mr-2",size:20}),"Explore All Organizations"]})})]}),n.jsxs("section",{className:"mb-20",children:[n.jsxs(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-16",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(Cs,{className:"h-8 w-8 text-emerald-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:[n.jsx("span",{className:"text-slate-800",children:"Community "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600",children:"Fund Providers"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto",children:["Organizations supporting ",r==null?void 0:r.communityName," with funding and resources."]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8 items-stretch max-w-6xl mx-auto",children:c.length>0?c.map((b,v)=>n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:v*.1},children:n.jsx(Go,{organization:b,handleFilterChange:p})},b.id)):n.jsx(oe.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"col-span-3 text-center py-12",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border border-white/60 shadow-lg max-w-md mx-auto",children:[n.jsx(ot,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No specific fund providers found for this city yet."})]})})}),c.length>0&&n.jsx(oe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations?prefilter=foundation",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(er,{className:"mr-2",size:20}),"Explore All Fund Providers"]})})]}),n.jsx("section",{className:"mb-16",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:["Discover More in ",r==null?void 0:r.communityName]}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Explore the complete ecosystem of organizations and funding opportunities in this vibrant Bay Area city."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-slate-900 hover:bg-gray-100 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:[n.jsx(ot,{className:"mr-2",size:20}),"Find Local Grants"]}),n.jsxs("a",{href:"/spotlight",className:"inline-flex items-center justify-center px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-2xl text-white font-semibold transition-all duration-300",children:[n.jsx(Hw,{className:"mr-2",size:20}),"View All Spotlights"]})]})]})})]})]})})};function ev({children:t,bgColor:e}){const{setPageBgColor:s}=y.useContext(yn);return y.useEffect(()=>(e&&s(e),()=>s("bg-white")),[e,s]),n.jsx(n.Fragment,{children:t})}const vo={collage:["https://plus.unsplash.com/premium_photo-1705882849674-e8ecc5e53f6e?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.pexels.com/photos/6995106/pexels-photo-6995106.jpeg","https://images.unsplash.com/photo-1527484912758-6e8bf56b18c3?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.pexels.com/photos/9543414/pexels-photo-9543414.jpeg","https://images.unsplash.com/photo-1615856210162-9ae33390b1a2?q=80&w=1742&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"],map:"https://videos.pexels.com/video-files/8320073/8320073-uhd_2560_1440_25fps.mp4",hero:"https://videos.pexels.com/video-files/7402746/7402746-hd_1080_1920_30fps.mp4"},MY=[{name:"Advisory Board Member",title:"To be announced",imageUrl:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTljW8umHXU4FCVp6-HEuPasRa0jvvrTiCs_qtuiv0Y09LPSPhS",linkedinUrl:null},{name:"Hana Ma",title:"Senior Program Officer, Sobrato Philanthropies",imageUrl:"https://media.licdn.com/dms/image/v2/D4E03AQFLpGmrPIPhJw/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1698185669765?e=1757548800&v=beta&t=E0SzY2HFu542nR4AWlTFDkl5X8fkCBI5P-arsHwhcYM",linkedinUrl:"https://www.linkedin.com/in/hanahsiao/"},{name:"Advisory Board Member",title:"To be announced",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZ4BvrhXf_ybRp8LzBO--xU8JcvJPGghLWe3OWeDIbG0FpCqFyWtxPxhdN0r8XQzBI4W0&usqp=CAU",linkedinUrl:null},{name:"Yen Pang",title:"Director of Contracts Administration and Compliance, SFO",imageUrl:"https://media.licdn.com/dms/image/v2/C5603AQFAMGYFJIyhzA/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1600903357926?e=1756944000&v=beta&t=t_MdadgWSG5ei1r_su5CiUgwnUQ167iWvefbSAogAIY",linkedinUrl:"https://www.linkedin.com/in/yenpang/"},{name:"Advisory Board Member",title:"To be announced",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREOLCZbSXQ6XO8DDxUsATFbrGsLXOH8oOIhYwCDPui3tZ9pRniUEcOMjHNfr3f-mJ3mBE&usqp=CAU",linkedinUrl:null},{name:"Advisory Board Member",title:"To be announced",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSTIlcun59hjzIIjphLcoczCdFuaSyOpwDpFyHtp1R9WTq-MfqlfCtP4jTjJf94buMJfHw&usqp=CAU",linkedinUrl:null}],hf=({children:t,className:e=""})=>n.jsx(oe.div,{className:`w-full flex flex-col justify-center items-center py-16 md:py-20 relative overflow-hidden ${e}`,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.3},children:t}),jt={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}}},OY=()=>{const{setPageBgColor:t}=y.useContext(yn);return y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50"),()=>{t("bg-white")}),[t]),n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-20 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-gradient-to-r from-amber-300 to-orange-400 rounded-full opacity-20 animate-bounce",style:{animationDelay:"0s",animationDuration:"3s"}}),n.jsx("div",{className:"absolute top-32 right-20 w-16 h-16 bg-gradient-to-r from-rose-300 to-pink-400 rounded-full opacity-20 animate-bounce",style:{animationDelay:"1s",animationDuration:"3s"}}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-12 h-12 bg-gradient-to-r from-emerald-300 to-teal-400 rounded-full opacity-20 animate-bounce",style:{animationDelay:"2s",animationDuration:"3s"}})]}),n.jsxs("div",{className:"relative bg-white/90 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-blue-200 shadow-xl",children:[n.jsx("div",{className:"mb-6",children:n.jsx("span",{className:"inline-block bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium border border-blue-200",children:"👋 Hey there, changemaker!"})}),n.jsxs("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"Built by Community. "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"For Community."})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-700 mb-8 max-w-4xl mx-auto leading-relaxed",children:["We've been in your shoes—staying up late scrolling through endless funding databases, bookmarking opportunities that disappear, and wondering if there's a better way to connect with funders and fellow change-makers.",n.jsx("span",{className:"font-semibold text-blue-700",children:" Spoiler alert: there is! ✨"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsx("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-3.5 font-semibold rounded-full text-white bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 w-full sm:w-auto",children:"🔍 Discover Funding & Connect"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-8 py-3.5 font-semibold rounded-full text-blue-700 bg-blue-100 hover:bg-blue-200/70 transition-colors duration-300 w-full sm:w-auto",children:"🤝 Join Our Community"})]})]})]}),n.jsx(hf,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:jt,className:"text-left",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-purple-100 to-blue-100 p-4 rounded-2xl mb-6 border border-purple-200",children:n.jsx(g0,{className:"h-10 w-10 text-purple-600"})}),n.jsx("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-8",children:"Who We Are"}),n.jsx("div",{className:"bg-white p-8 rounded-3xl mb-8 text-slate-900 shadow-xl border border-slate-200",children:n.jsxs("h3",{className:"text-2xl md:text-3xl font-bold leading-loose",children:["Our mission is to ",n.jsx("span",{className:"bg-green-200 px-1 py-0.5 rounded mx-1",children:"democratize"})," ",n.jsx("span",{className:"bg-purple-200 px-1 py-0.5 rounded mx-1",children:"access"})," to ",n.jsx("span",{className:"bg-orange-200 px-1 py-0.5 rounded mx-1",children:"funding"})," — so dreamers can ",n.jsx("span",{className:"bg-yellow-200 px-1 py-0.5 rounded mx-1",children:"dream bigger"})," 💭, builders can ",n.jsx("span",{className:"bg-pink-200 px-1 py-0.5 rounded mx-1",children:"build faster"})," 🏗️, and ",n.jsx("span",{className:"bg-blue-200 px-1 py-0.5 rounded mx-1",children:"momentum"})," is never lost to bureaucracy 🏃‍♂️💨."]})}),n.jsxs("div",{className:"text-lg text-slate-600 space-y-6 leading-relaxed",children:[n.jsx("p",{children:"We believe that funding should be accessible, not aspirational. This is our foundational promise. The ‘fund’ part of what we do is our commitment to connecting you directly with the capital needed to fuel your work. We provide the platform and the financial tools to open doors that were once closed."}),n.jsx("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 p-6 rounded-2xl border border-red-100",children:n.jsx("p",{className:"text-slate-700 font-semibold text-xl mb-2",children:"Our Philosophy: Accessible Capital, Powerful Community"})}),n.jsx("p",{children:`While capital is crucial, we know people are the most powerful resource. A grant funds a project; a community sustains a movement. That's why the "Space" at Fundspace is an active ecosystem, not just a database. Whether you're building a company, leading a nonprofit, or looking to fund the future, you have a place here. Let's ensure no great idea is ever left behind.`}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[n.jsx(Xt,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"Connect & Discover"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Find opportunities and the people behind them"})]}),n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200",children:[n.jsx(Nh,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"Collaborate & Build"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Spend time creating impact, not hunting alone"})]}),n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl border border-teal-200",children:[n.jsx(_s,{className:"h-8 w-8 text-teal-600 mx-auto mb-2"}),n.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:"Celebrate & Amplify"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Share wins and learn from each other's journeys"})]})]})]})]}),n.jsxs(oe.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},className:"grid grid-cols-4 grid-rows-8 gap-3 h-full min-h-[800px]",children:[n.jsx(oe.div,{variants:jt,className:"col-span-2 row-span-3 rounded-xl bg-cover bg-center shadow-lg border-2 border-white overflow-hidden",children:n.jsx("video",{src:vo.hero,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-xl",style:{minHeight:0,minWidth:0}})}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-2 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:`url(${vo.collage[1]})`}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:`url(${vo.collage[2]})`}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:`url(${vo.collage[3]})`}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:`url(${vo.collage[4]})`}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:`url(${vo.collage[0]})`}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.pexels.com/photos/356040/pexels-photo-356040.jpeg')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-2 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?q=80&w=1740&auto=format&fit=crop')"}}),n.jsxs(oe.div,{variants:jt,className:"col-span-1 row-span-2 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",children:["   ",n.jsx("video",{src:"https://videos.pexels.com/video-files/8120416/8120416-hd_1080_1920_25fps.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-xl",style:{minHeight:0,minWidth:0}})]}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1517486808906-6ca8b3f04846?q=80&w=1740&auto=format&fit=crop')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-2 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1559136555-9303baea8ebd?q=80&w=1740&auto=format&fit=crop')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1544928147-79a2dbc1f389?q=80&w=687&auto=format&fit=crop')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-2 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white overflow-hidden",children:n.jsx("video",{src:"https://videos.pexels.com/video-files/4808694/4808694-uhd_2560_1440_24fps.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-xl",style:{minHeight:0,minWidth:0}})}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1600298881974-6be191ceeda1?q=80&w=1740&auto=format&fit=crop')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-2 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://plus.unsplash.com/premium_photo-1661544605271-d7da82ccaeb2?q=80&w=1740&auto=format&fit=crop')"}}),n.jsxs(oe.div,{variants:jt,className:"col-span-1 row-span-2 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",children:["             ",n.jsx("video",{src:"https://videos.pexels.com/video-files/4668117/4668117-uhd_1440_2732_25fps.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-xl",style:{minHeight:0,minWidth:0}})]}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.pexels.com/photos/1851164/pexels-photo-1851164.jpeg')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.pexels.com/photos/2608517/pexels-photo-2608517.jpeg')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.pexels.com/photos/106052/pexels-photo-106052.jpeg')"}}),n.jsx(oe.div,{variants:jt,className:"col-span-1 row-span-1 rounded-xl bg-cover bg-center shadow-lg border-2 border-white",style:{backgroundImage:"url('https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?q=80&w=1740&auto=format&fit=crop')"}})]})]})}),n.jsxs(hf,{children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsxs(oe.h2,{variants:jt,className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"Meet the "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 to-teal-600",children:"Dreamers"}),n.jsx("span",{className:"text-slate-800",children:" Behind the "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-indigo-500",children:"Magic"})]}),n.jsx(oe.p,{variants:{...jt,transition:{...jt.transition,delay:.2}},className:"text-lg text-slate-600 max-w-3xl mx-auto",children:"Our advisory board comes from philanthropy, public, and private sectors who believe the Bay Area deserves funding infrastructure that brings people together."})]}),n.jsx(oe.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.4}}},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl w-full",children:MY.map((e,s)=>n.jsxs(oe.div,{variants:jt,className:"bg-white rounded-3xl shadow-lg border border-slate-200 p-8 relative overflow-hidden",whileHover:{scale:1.05,y:-5,transition:{duration:.2}},children:[n.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 rounded-full opacity-50 -translate-y-10 translate-x-10"}),n.jsxs("div",{className:"text-center relative",children:[n.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[n.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full rounded-full object-cover border-4 border-amber-100 shadow-lg"}),e.linkedinUrl&&n.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center border-2 border-white",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"in"})})]}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:e.name}),n.jsx("p",{className:"text-blue-600 font-medium text-lg mb-4",children:e.title}),e.linkedinUrl?n.jsx("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors bg-blue-50 px-4 py-2 rounded-full hover:bg-blue-100",children:"👋 Say hello on LinkedIn"}):n.jsx("p",{className:"text-slate-500 text-sm bg-slate-50 px-4 py-2 rounded-full inline-block",children:"🎉 Joining the party soon!"})]})]},s))})]}),n.jsx(hf,{children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-12 lg:gap-20 items-center max-w-6xl",children:[n.jsx(oe.div,{variants:jt,children:n.jsx("video",{src:vo.map,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-96 md:h-[480px] object-cover rounded-3xl shadow-2xl border-4 border-white",alt:"San Francisco Bay Area"})}),n.jsxs(oe.div,{variants:{...jt,transition:{...jt.transition,delay:.2}},children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-rose-100 to-pink-100 p-4 rounded-2xl mb-6 border border-rose-200",children:n.jsx(Nt,{className:"h-10 w-10 text-rose-600"})}),n.jsxs("div",{className:"text-lg text-slate-700 space-y-6 leading-relaxed",children:[n.jsx("p",{children:"We've built our work around a deep commitment to the people and places we call home. We don't just work here—we live here, and we care about our community."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[n.jsxs("p",{className:"font-semibold text-slate-800 mb-4 text-xl flex items-center",children:[n.jsx("span",{className:"text-2xl mr-2",children:"🌉"}),"All 9 counties, one community:"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3 text-slate-700",children:["🌊 Alameda","🏔️ Contra Costa","🌲 Marin","🍇 Napa","🏙️ San Francisco","✈️ San Mateo","💻 Santa Clara","🌾 Solano","🍷 Sonoma"].map(e=>n.jsx("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg",children:n.jsx("span",{className:"font-medium",children:e})},e))})]}),n.jsx("p",{className:"text-blue-700 font-semibold",children:"Because when Bay Area changemakers succeed, our entire region thrives. 🌟"})]})]})]})}),n.jsx(hf,{className:"bg-gradient-to-br from-sky-200 via-blue-100 to-purple-200 text-slate-800 rounded-3xl shadow-2xl",children:n.jsxs("div",{className:"text-center max-w-4xl px-8",children:[n.jsx(oe.div,{variants:jt,className:"mb-6",children:n.jsx("span",{className:"text-6xl",children:"🚀"})}),n.jsx(oe.h2,{variants:jt,className:"text-4xl md:text-5xl font-bold mb-6",children:"Ready to Join Our Community?"}),n.jsxs(oe.p,{variants:{...jt,transition:{...jt.transition,delay:.2}},className:"text-xl mb-8 opacity-90 leading-relaxed",children:["Join Bay Area changemakers, funders, and nonprofit leaders who've discovered that finding funding is so much better when you're not doing it alone.",n.jsx("strong",{className:"text-blue-700",children:" Come for the funds, stay for the community! 🤝"})]}),n.jsxs(oe.div,{variants:{...jt,transition:{...jt.transition,delay:.4}},className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsx("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-full text-white bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 w-full sm:w-auto",children:"🔍 Start Connecting Today"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-full text-slate-700 bg-white/80 hover:bg-white backdrop-blur-sm border border-slate-200 hover:border-slate-300 transition-all duration-300 w-full sm:w-auto shadow-lg hover:shadow-xl",children:"🎯 Join Free Today"})]}),n.jsx(oe.p,{variants:{...jt,transition:{...jt.transition,delay:.6}},className:"text-sm opacity-70 mt-6 text-slate-600",children:"No credit card required. No spam. Just connections, collaboration, and lots of funding opportunities. 📧✨"})]})})]})},RY=()=>{const{setPageBgColor:t}=y.useContext(yn),[e,s]=y.useState("contact"),[r,a]=y.useState({name:"",email:"",subject:"",message:""}),[i,o]=y.useState({url:"",notes:""}),[c,d]=y.useState(!1),[h,m]=y.useState({type:"",text:""});y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50"),()=>{t("bg-white")}),[t]);const p=j=>{const{name:w,value:_}=j.target;a(k=>({...k,[w]:_}))},g=j=>{const{name:w,value:_}=j.target;o(k=>({...k,[w]:_}))},b=j=>{try{return new URL(j),!0}catch{return!1}},v=j=>{j.preventDefault(),d(!0),setTimeout(()=>{m({type:"success",text:`Thank you, ${r.name}! Your message has been sent. We'll get back to you soon.`}),a({name:"",email:"",subject:"",message:""}),d(!1)},1e3)},N=async j=>{if(j.preventDefault(),m({type:"",text:""}),!b(i.url)){m({type:"error",text:"Please enter a valid URL."});return}d(!0);try{const{error:w}=await $.from("grant_submissions").insert([{url:i.url,notes:i.notes}]);if(w)throw w;m({type:"success",text:"Thank you! Your grant submission has been received and will be reviewed by our team."}),o({url:"",notes:""})}catch(w){console.error("Error submitting grant:",w),m({type:"error",text:"An error occurred. Please try again."})}finally{d(!1)}};return n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-pink-400 to-rose-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Let's "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:"Connect"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:["Whether you have a question, want to suggest a grant, or are interested in partnering with us, we'd love to hear from you.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" We're here to help."})]}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"flex items-center bg-white rounded-2xl border border-slate-300 p-1 shadow-lg",children:[n.jsxs("button",{onClick:()=>s("contact"),className:`px-6 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 font-semibold ${e==="contact"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[n.jsx($r,{size:18}),"Send Message"]}),n.jsxs("button",{onClick:()=>s("submit"),className:`px-6 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 font-semibold ${e==="submit"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-600 hover:bg-slate-100"}`,children:[n.jsx(Mi,{size:18}),"Submit Grant"]})]})})]})]}),n.jsx("section",{className:"max-w-6xl mx-auto",children:n.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 md:p-10 rounded-3xl border border-white/60 shadow-2xl",children:[e==="contact"?n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center border border-blue-200",children:n.jsx($r,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Send Us a Message"}),n.jsx("p",{className:"text-slate-600",children:"We'd love to hear from you"})]})]}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:r.name,onChange:p,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm",placeholder:"Your full name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email Address"}),n.jsx("input",{type:"email",name:"email",id:"email",required:!0,value:r.email,onChange:p,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm",placeholder:"your@email.com"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Subject"}),n.jsx("input",{type:"text",name:"subject",id:"subject",required:!0,value:r.subject,onChange:p,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm",placeholder:"What's this about?"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Message"}),n.jsx("textarea",{name:"message",id:"message",rows:"6",required:!0,value:r.message,onChange:p,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm resize-none",placeholder:"Tell us what's on your mind..."})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Li,{className:"animate-spin h-5 w-5 mr-3"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Cc,{className:"mr-2",size:20}),"Send Message"]})})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center border border-emerald-200",children:n.jsx(Mi,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Submit a Grant"}),n.jsx("p",{className:"text-slate-600",children:"Help us grow our database"})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6 rounded-2xl border border-emerald-100 mb-6",children:n.jsxs("p",{className:"text-emerald-800 text-sm leading-relaxed",children:[n.jsx("strong",{children:"Found a grant we missed?"})," Help us build the most comprehensive Bay Area grant database by submitting opportunities you've discovered. Our team will review and add them to our platform."]})}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"grant-url",className:"block text-sm font-semibold text-slate-700 mb-2",children:["Grant URL ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"grant-url",type:"url",name:"url",value:i.url,onChange:g,placeholder:"https://foundation.org/grants/apply",required:!0,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"grant-notes",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Additional Notes (Optional)"}),n.jsx("textarea",{id:"grant-notes",name:"notes",value:i.notes,onChange:g,rows:"4",placeholder:"Any helpful details? (e.g., 'Arts education grant', 'Rolling deadline', 'Maximum $50K')",className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm resize-none"})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Li,{className:"animate-spin h-5 w-5 mr-3"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mi,{className:"mr-2",size:20}),"Submit Grant"]})})]})]}),h.text&&n.jsx("div",{className:`mt-6 p-4 rounded-2xl text-sm font-medium ${h.type==="success"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="success"?n.jsx(Hi,{size:16,className:"text-green-600"}):n.jsx(Mn,{size:16,className:"text-red-600"}),h.text]})})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-3xl border border-white/60 shadow-xl",children:[n.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-5 w-5 text-rose-500"}),"Get In Touch"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center border border-blue-200",children:n.jsx(Yc,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:"Email Us"}),n.jsx("a",{href:"mailto:contact@fundspace.ai",className:"text-slate-600 hover:text-blue-600 transition-colors duration-300",children:"contact@fundspace.ai"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"We usually respond within 24 hours"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center border border-purple-200",children:n.jsx(An,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:"Social Media"}),n.jsx("p",{className:"text-slate-600",children:"@Fundspace_BayArea"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Follow us for updates"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center border border-emerald-200",children:n.jsx(Lt,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-800",children:"Location"}),n.jsx("p",{className:"text-slate-600",children:"Bay Area, CA"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Remote-first team"})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 p-6 rounded-3xl border border-blue-100 shadow-lg",children:[n.jsxs("h4",{className:"font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[n.jsx(q$,{className:"h-4 w-4 text-amber-500"}),"Quick Info"]}),n.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[n.jsxs("p",{children:["💡 ",n.jsx("strong",{children:"Response Time:"})," Usually within 24 hours"]}),n.jsxs("p",{children:["🌉 ",n.jsx("strong",{children:"Focus:"})," Bay Area nonprofits only"]}),n.jsxs("p",{children:["🤝 ",n.jsx("strong",{children:"Team:"})," Small, passionate, community-driven"]}),n.jsxs("p",{children:["📧 ",n.jsx("strong",{children:"Best Contact:"})," Email for detailed inquiries"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-3xl text-white shadow-xl",children:[n.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[n.jsx(Xt,{className:"h-5 w-5"}),"Ready to Explore?"]}),n.jsx("p",{className:"text-sm mb-4 opacity-90",children:"While you're here, check out our grant database and see what funding opportunities await your organization."}),n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:[n.jsx(Mn,{className:"mr-2",size:16}),"Browse Grants"]})]})]})]})})]})};Ps.createContext({setPageBgColor:()=>{}});const mf={aiEngine:"https://art4d.com/wp-content/uploads/2025/03/1-9.jpg",opportunitiesVideo:"https://videos.pexels.com/video-files/3191353/3191353-uhd_2732_1440_25fps.mp4",communityVideo:"https://videos.pexels.com/video-files/6893839/6893839-uhd_2560_1440_25fps.mp4",ecosystemMap:"https://videos.pexels.com/video-files/8320073/8320073-uhd_2560_1440_25fps.mp4"},ff=({children:t,className:e=""})=>n.jsx(oe.div,{className:`w-full flex flex-col justify-center items-center py-16 md:py-20 relative ${e}`,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.3},children:t}),Vs={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}}},DY=()=>{const t=()=>{};return y.useEffect(()=>()=>{},[t]),n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsx("section",{className:"text-center mb-16 relative",children:n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx(oe.div,{variants:Vs,className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center border border-purple-200 shadow-lg",children:n.jsx(Xt,{className:"h-10 w-10 text-purple-600"})}),n.jsxs(oe.h1,{variants:Vs,className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"The Future of "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:"Funding & Community"})]}),n.jsxs(oe.p,{variants:{...Vs,transition:{...Vs.transition,delay:.2}},className:"text-lg md:text-xl text-slate-600 mb-8 max-w-4xl mx-auto leading-relaxed",children:["Imagine a world where finding funding is as easy as posting on social media, where great ideas get discovered automatically, and where every changemaker has a community cheering them on.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" Welcome to that world."})]})]})}),n.jsx(ff,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:Vs,className:"text-left",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-blue-100 to-purple-100 p-4 rounded-2xl mb-6 border border-blue-200",children:n.jsx(g0,{className:"h-10 w-10 text-blue-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:[n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Smart AI Engine"}),n.jsx("br",{}),"That Never Sleeps"]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"While you're building the future, our AI is scanning thousands of funding sources 24/7, organizing opportunities by relevance, and learning what matters most to your community."}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center border border-blue-200 flex-shrink-0",children:n.jsx(Y$,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Intelligent Aggregation"}),n.jsx("p",{className:"text-slate-600",children:"Crawls grants, VCs, accelerators, government programs, crowdfunding, and private opportunities in real-time."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center border border-purple-200 flex-shrink-0",children:n.jsx(TC,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Community-Enhanced Intelligence"}),n.jsx("p",{className:"text-slate-600",children:"Gets smarter with every user interaction, suggestion, and success story shared by our community."})]})]})]})]}),n.jsxs(oe.div,{variants:Vs,className:"relative",children:[n.jsx("img",{src:mf.aiEngine,alt:"AI and data visualization",className:"w-full h-auto object-cover rounded-2xl shadow-2xl border-4 border-white"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-600/20 to-transparent rounded-2xl"})]})]})}),n.jsxs(ff,{children:[n.jsxs(oe.div,{variants:Vs,className:"text-center mb-16",children:[n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"Three Ways to "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-500 to-emerald-600",children:"Get Funded"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Whether you're seeking traditional grants, launching a campaign, or building community support, we've got you covered."})]}),n.jsxs("div",{className:"w-full max-w-7xl space-y-20",children:[n.jsxs(oe.div,{variants:Vs,className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"text-center lg:text-left",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold mb-4",children:[n.jsx("span",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),"SEARCH & DISCOVER"]}),n.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Find Perfect-Fit Funding"}),n.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:"Use our AI-powered search to discover grants, accelerators, VCs, and funding programs that match your mission, stage, and location. Filter by amount, deadline, industry, or let our smart recommendations surprise you."}),n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(ot,{className:"mr-2",size:20}),"Explore Funding"]})]}),n.jsx("div",{className:"relative",children:n.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl shadow-2xl border-4 border-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ot,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-blue-700 font-semibold",children:"AI-Powered Discovery"})]})})})]}),n.jsxs(oe.div,{variants:Vs,className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"order-2 lg:order-1 relative",children:[n.jsx("video",{src:mf.opportunitiesVideo,className:"w-full h-auto rounded-2xl shadow-2xl border-4 border-white",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-green-600/10 to-transparent rounded-2xl pointer-events-none"})]}),n.jsxs("div",{className:"order-1 lg:order-2 text-center lg:text-left",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold mb-4",children:[n.jsx("span",{className:"w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),"LAUNCH & SHARE"]}),n.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Showcase Your Vision"}),n.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:"Create a dynamic profile for your project, startup, or nonprofit. Share your story, goals, and impact. Get discovered by funders, collaborators, and supporters who believe in what you're building."}),n.jsxs("a",{href:"/opportunities/create",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(Rf,{className:"mr-2",size:20}),"Share Your Project"]})]})]}),n.jsxs(oe.div,{variants:Vs,className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"text-center lg:text-left",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-semibold mb-4",children:[n.jsx("span",{className:"w-6 h-6 bg-purple-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),"CONNECT & COLLABORATE"]}),n.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Build Your Tribe"}),n.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:"Join communities around causes you care about. Connect with potential co-founders, advisors, and supporters. Share resources, celebrate wins, and learn from each other's journeys."}),n.jsxs("a",{href:"/community",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(qe,{className:"mr-2",size:20}),"Join Community"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:mf.communityVideo,className:"w-full h-auto rounded-2xl shadow-2xl border-4 border-white",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-600/10 to-transparent rounded-2xl pointer-events-none"})]})]})]})]}),n.jsx(ff,{children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-12 lg:gap-20 items-center max-w-6xl",children:[n.jsx(oe.div,{variants:Vs,children:n.jsx("video",{src:mf.ecosystemMap,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-96 md:h-[480px] object-cover rounded-3xl shadow-2xl border-4 border-white",alt:"Network visualization"})}),n.jsxs(oe.div,{variants:{...Vs,transition:{...Vs.transition,delay:.2}},children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-rose-100 to-pink-100 p-4 rounded-2xl mb-6 border border-rose-200",children:n.jsx(Br,{className:"h-10 w-10 text-rose-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:["One Platform.",n.jsx("br",{}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-pink-600",children:"Endless Possibilities."})]}),n.jsxs("div",{className:"text-lg text-slate-700 space-y-6 leading-relaxed",children:[n.jsx("p",{children:"Think of us as the connective tissue of the funding ecosystem. We bring together everything you need to turn ideas into impact."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[n.jsxs("p",{className:"font-semibold text-slate-800 mb-4 text-xl flex items-center",children:[n.jsx("span",{className:"text-2xl mr-2",children:"🌐"}),"What we're building:"]}),n.jsx("div",{className:"grid grid-cols-1 gap-3 text-slate-700",children:["🔍 Smart Database + AI Search","🚀 Project Showcase Platform","💬 Community & Messaging","📊 Progress Tracking & Analytics","🤝 Collaboration Tools","🎯 Personalized Recommendations"].map(e=>n.jsx("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg",children:n.jsx("span",{className:"font-medium",children:e})},e))})]}),n.jsx("p",{className:"text-blue-700 font-semibold",children:"Because the best ideas shouldn't be limited by who you know or how much time you have to search. 🚀"})]})]})]})}),n.jsxs(ff,{children:[n.jsxs(oe.div,{variants:Vs,className:"text-center mb-16",children:[n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"What's "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Coming Next?"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"We're just getting started. Here's a peek at the future we're building together."})]}),n.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[n.jsxs(oe.div,{variants:Vs,className:"bg-white/80 backdrop-blur-sm p-8 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center border border-blue-200 mb-6",children:n.jsx(b0,{className:"h-8 w-8 text-blue-600"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-6",children:"For Idea Launchers"}),n.jsxs("div",{className:"space-y-4 text-slate-600 mb-8",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Nh,{className:"h-5 w-5 text-yellow-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"AI Proposal Assistant:"})," Get help crafting compelling pitches and applications."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_s,{className:"h-5 w-5 text-green-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Smart Matching:"})," Get automatically notified when perfect opportunities arise."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Pa,{className:"h-5 w-5 text-blue-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Impact Tracking:"})," Showcase your progress and wins to build credibility."]})]})]})]}),n.jsxs(oe.div,{variants:Vs,className:"bg-white/80 backdrop-blur-sm p-8 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-100 to-emerald-100 rounded-2xl flex items-center justify-center border border-green-200 mb-6",children:n.jsx(an,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-6",children:"For Capital Providers"}),n.jsxs("div",{className:"space-y-4 text-slate-600 mb-8",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(pn,{className:"h-5 w-5 text-indigo-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Discovery Dashboard:"})," Find and track promising projects and founders."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qe,{className:"h-5 w-5 text-purple-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Portfolio Management:"})," Track your investments and their community impact."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx($r,{className:"h-5 w-5 text-pink-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Direct Connect:"})," Message promising candidates and build relationships."]})]})]})]}),n.jsxs(oe.div,{variants:Vs,className:"bg-white/80 backdrop-blur-sm p-8 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center border border-purple-200 mb-6",children:n.jsx(TC,{className:"h-8 w-8 text-purple-600"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-6",children:"For the Ecosystem"}),n.jsxs("div",{className:"space-y-4 text-slate-600 mb-8",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ww,{className:"h-5 w-5 text-blue-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Knowledge Sharing:"})," Community-driven resources, templates, and best practices."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(bs,{className:"h-5 w-5 text-orange-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Events & Meetups:"})," Connect in person at funding showcases and community events."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(p0,{className:"h-5 w-5 text-yellow-500 mt-1 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-slate-700",children:"Success Stories:"})," Celebrate wins and learn from the community's journey."]})]})]})]})]})]}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Rf,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Join the Future of Funding?"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Whether you're launching the next big thing or looking to fund it, your community is waiting."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/opportunities/create",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-slate-900 hover:bg-gray-100 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:[n.jsx(Rf,{className:"mr-2",size:20}),"Launch Your Project"]}),n.jsxs("a",{href:"/signup",className:"inline-flex items-center justify-center px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-2xl text-white font-semibold transition-all duration-300",children:[n.jsx(Nr,{className:"mr-2",size:20}),"Join the Community"]})]})]})})]})},Tu={heroIllustration:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=1200&auto=format&fit=crop",painIllustration:"https://images.unsplash.com/photo-1551434678-e076c223a692?q=80&w=1200&auto=format&fit=crop",funderLogos:["https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=800&auto=format&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=800&auto=format&fit=crop","https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?q=80&w=800&auto=format&fit=crop"]},PY=[{slug:"the-koret-foundation",name:"The Koret Foundation",description:"A family foundation dedicated to supporting innovative projects in education, environmental conservation, and the arts across all nine Bay Area counties.",focus_areas:["Education","Environment","Arts & Culture"],logo_url:Tu.funderLogos[0],type:"foundation",location:"Palo Alto, CA",funding_locations:["Bay Area Wide"],total_funding_annually:"$15M - $20M",notable_grant:'The "Tech for Teachers" classroom hardware initiative.',average_grant_size:"$75,000 - $150,000",grant_types:["Project Support","Capacity Building"]},{slug:"the-headwaters-foundation",name:"The Headwaters Foundation",description:"Focused on providing seed funding and capacity-building grants to early-stage organizations addressing issues of social and economic justice.",focus_areas:["Social Justice","Workforce Development","Poverty Relief"],logo_url:Tu.funderLogos[1],type:"foundation",location:"Oakland, CA",funding_locations:["Alameda County","Contra Costa County"],total_funding_annually:"$5M - $10M",notable_grant:'The "First Step" entrepreneurship program for formerly incarcerated individuals.',average_grant_size:"$25,000 - $75,000",grant_types:["General Operating","Seed Funding"]},{slug:"the-zellerbach-family-foundation",name:"The Zellerbach Family Foundation",description:"A public trust that funds community clinics and organizations providing direct health and wellness services to underserved populations in San Francisco.",focus_areas:["Community Health","Mental Health","Housing"],logo_url:Tu.funderLogos[2],type:"foundation",location:"San Francisco, CA",funding_locations:["San Francisco"],total_funding_annually:"$12M+",notable_grant:"Funding for free mobile health clinics in the Tenderloin.",average_grant_size:"$100,000 - $250,000",grant_types:["General Operating","Project Support","Capital Campaigns"]}],zY=[{name:"San Francisco",count:1845,icon:un,color:"text-blue-500"},{name:"Santa Clara",count:1102,icon:un,color:"text-sky-500"},{name:"San Mateo",count:980,icon:un,color:"text-cyan-500"},{name:"Alameda",count:955,icon:un,color:"text-teal-500"},{name:"Contra Costa",count:651,icon:un,color:"text-emerald-500"},{name:"Marin",count:523,icon:un,color:"text-green-500"},{name:"Sonoma",count:488,icon:un,color:"text-lime-500"},{name:"Solano",count:210,icon:un,color:"text-yellow-500"},{name:"Napa",count:195,icon:un,color:"text-amber-500"}],pf=({children:t,className:e=""})=>n.jsx(oe.div,{className:`w-full flex flex-col justify-center items-center py-16 md:py-20 relative ${e}`,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.3},children:t}),kn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}}},LY=()=>{const{setPageBgColor:t}=y.useContext(yn);y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-emerald-50 to-teal-50"),()=>{t("bg-white")}),[t]);const e=()=>{};return n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-blue-400 to-indigo-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx(oe.div,{variants:kn,className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-3xl flex items-center justify-center border border-blue-200 shadow-lg",children:n.jsx(un,{className:"h-10 w-10 text-blue-600"})}),n.jsxs(oe.h1,{variants:kn,className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Find Your Funder. "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 via-teal-600 to-blue-600",children:"Fuel Your Mission."})]}),n.jsxs(oe.p,{variants:{...kn,transition:{...kn.transition,delay:.2}},className:"text-lg md:text-xl text-slate-600 mb-12 max-w-4xl mx-auto leading-relaxed",children:["Stop the endless search. Fundspace centralizes Bay Area grant opportunities so you can focus on what matters most: creating change in your community.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600 font-semibold",children:" Your mission deserves the right support."})]}),n.jsxs(oe.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.5}}},children:[n.jsx("h3",{className:"text-center text-sm font-semibold text-slate-500 uppercase tracking-widest mb-8",children:"Fund Provider Landscape by County"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-6 max-w-6xl mx-auto",children:zY.map(s=>n.jsxs(oe.div,{variants:kn,className:"text-center",children:[n.jsx("div",{className:`w-16 h-16 mx-auto mb-3 bg-gradient-to-br ${s.color.includes("blue")?"from-blue-100 to-indigo-100 border-blue-200":s.color.includes("sky")?"from-sky-100 to-blue-100 border-sky-200":s.color.includes("cyan")?"from-cyan-100 to-teal-100 border-cyan-200":s.color.includes("teal")?"from-teal-100 to-emerald-100 border-teal-200":s.color.includes("emerald")?"from-emerald-100 to-green-100 border-emerald-200":s.color.includes("green")?"from-green-100 to-emerald-100 border-green-200":s.color.includes("lime")?"from-lime-100 to-green-100 border-lime-200":s.color.includes("yellow")?"from-yellow-100 to-amber-100 border-yellow-200":"from-amber-100 to-orange-100 border-amber-200"} rounded-2xl flex items-center justify-center border shadow-lg`,children:n.jsx(s.icon,{className:`h-8 w-8 ${s.color}`})}),n.jsx(E0,{targetValue:s.count,className:"text-2xl sm:text-3xl font-bold text-slate-700"}),n.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 mt-2",children:s.name})]},s.name))})]})]})]}),n.jsx(pf,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:kn,className:"relative order-2 lg:order-1",children:[n.jsx("img",{src:Tu.painIllustration,alt:"Illustration of a person overwhelmed by paperwork",className:"w-full h-auto object-cover rounded-2xl shadow-2xl border-4 border-white"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-red-600/20 to-transparent rounded-2xl"})]}),n.jsxs(oe.div,{variants:kn,className:"text-left order-1 lg:order-2",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-red-100 to-rose-100 p-4 rounded-2xl mb-6 border border-red-200",children:n.jsx(ot,{className:"h-10 w-10 text-red-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:["The Endless ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-rose-500",children:"Search"})]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"You know the drill. Countless hours lost to scattered foundation websites, outdated databases, and missed deadlines. It's a frustrating cycle that pulls you away from your actual work—serving your community."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-red-100 rounded-2xl flex items-center justify-center border border-orange-200 flex-shrink-0",children:n.jsx(_s,{className:"h-6 w-6 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Scattered Information"}),n.jsx("p",{className:"text-slate-600",children:"Critical funding details spread across hundreds of different websites and databases."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-100 to-rose-100 rounded-2xl flex items-center justify-center border border-red-200 flex-shrink-0",children:n.jsx(bs,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Missed Opportunities"}),n.jsx("p",{className:"text-slate-600",children:"Perfect grants slip by because they're buried in hard-to-find places or have unexpected deadlines."})]})]})]})]})]})}),n.jsxs(pf,{children:[n.jsxs(oe.div,{variants:kn,className:"text-center mb-16",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-100 to-emerald-100 rounded-3xl flex items-center justify-center border border-green-200 shadow-lg",children:n.jsx(Ks,{className:"h-10 w-10 text-green-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"A "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600",children:"Smarter"}),n.jsx("span",{className:"text-slate-800",children:" Way to Find Funding"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-4xl mx-auto leading-relaxed",children:"We centralize hundreds of Bay Area RFPs and provide powerful tools to help you find the right opportunities in minutes, not weeks. Discover fund providers who care about the work you do."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:PY.map((s,r)=>n.jsx(oe.div,{variants:kn,children:n.jsx(Go,{organization:s,handleFilterChange:e})},s.slug||r))}),n.jsx(oe.div,{variants:kn,className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations?prefilter=foundation",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(un,{className:"mr-2",size:20}),"Explore All Fund Providers"]})})]}),n.jsx(pf,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:kn,className:"text-left",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-purple-100 to-pink-100 p-4 rounded-2xl mb-6 border border-purple-200",children:n.jsx(Nt,{className:"h-10 w-10 text-purple-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:["Free, ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600",children:"Forever"}),". For Grant Seekers."]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"Our commitment is to the Bay Area's social impact organizations. Access to our entire grant database and discovery tools will always be free for 501(c)(3) organizations and other mission-driven groups."}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-2xl border border-purple-100",children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Our Promise to Grant Seekers:"}),n.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[n.jsxs("p",{children:["✓ ",n.jsx("strong",{children:"No trials, no tiers, no hidden fees"})]}),n.jsxs("p",{children:["✓ ",n.jsx("strong",{children:"Complete access to our grant database"})]}),n.jsxs("p",{children:["✓ ",n.jsx("strong",{children:"Advanced search and filtering tools"})]}),n.jsxs("p",{children:["✓ ",n.jsx("strong",{children:"Regular updates with new opportunities"})]})]})]})]}),n.jsxs(oe.div,{variants:kn,className:"relative",children:[n.jsx("img",{src:Tu.heroIllustration,alt:"Illustration of finding opportunities",className:"w-full h-auto object-cover rounded-2xl shadow-2xl border-4 border-white"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-600/20 to-transparent rounded-2xl"})]})]})}),n.jsxs(pf,{children:[n.jsxs(oe.div,{variants:kn,className:"text-center mb-16",children:[n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"What's on the "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Horizon?"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"We're building powerful new tools to give you an even greater advantage in your grantseeking efforts."})]}),n.jsxs(oe.div,{variants:kn,className:"bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl w-full max-w-6xl mx-auto",children:[n.jsx("h3",{className:"text-2xl font-bold mb-8 text-center text-slate-800",children:"Upcoming Tools for Grant Seekers"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center border border-teal-200 flex-shrink-0",children:n.jsx(bs,{className:"h-6 w-6 text-teal-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Grant Tracking"}),n.jsx("p",{className:"text-slate-600",children:"Save opportunities and manage deadlines in a personalized dashboard tailored to your organization's needs."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-100 to-blue-100 rounded-2xl flex items-center justify-center border border-sky-200 flex-shrink-0",children:n.jsx(g0,{className:"h-6 w-6 text-sky-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"AI Proposal Assistant"}),n.jsx("p",{className:"text-slate-600",children:"Get intelligent help drafting and tailoring proposals to specific fund providers and their giving preferences."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-2xl flex items-center justify-center border border-green-200 flex-shrink-0",children:n.jsx(Cs,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Funding Trend Analysis"}),n.jsx("p",{className:"text-slate-600",children:"See historical giving patterns of fund providers to improve your strategic approach and timing."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-amber-100 rounded-2xl flex items-center justify-center border border-orange-200 flex-shrink-0",children:n.jsx(jh,{className:"h-6 w-6 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Saved Searches & Alerts"}),n.jsx("p",{className:"text-slate-600",children:"Get notified instantly when new opportunities matching your criteria are posted to the platform."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-100 to-rose-100 rounded-2xl flex items-center justify-center border border-red-200 flex-shrink-0",children:n.jsx(np,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Eligibility Verifier"}),n.jsx("p",{className:"text-slate-600",children:"Use AI to quickly check if your organization meets a grant's criteria before investing time in applications."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center border border-indigo-200 flex-shrink-0",children:n.jsx(qe,{className:"h-6 w-6 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Collaboration Space"}),n.jsx("p",{className:"text-slate-600",children:"Find and connect with other organizations for joint applications and collaborative funding opportunities."})]})]})]})]})]}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Transform Your Grant Search?"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Join the Bay Area organizations already discovering funding faster and focusing on what matters most: creating positive change in our communities."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-slate-900 hover:bg-gray-100 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:[n.jsx(ot,{className:"mr-2",size:20}),"Start Exploring Grants"]}),n.jsxs("a",{href:"/signup",className:"inline-flex items-center justify-center px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-2xl text-white font-semibold transition-all duration-300",children:[n.jsx(Nr,{className:"mr-2",size:20}),"Create Free Account"]})]})]})})]})},Mu={bridgeIllustration:"https://images.unsplash.com/photo-1544928147-79a2dbc1f389?q=80&w=1200&auto=format&fit=crop",impactIllustration:"https://images.unsplash.com/photo-1559027615-cd4628902d4a?q=80&w=1200&auto=format&fit=crop",nonprofits:["https://images.unsplash.com/photo-1559027615-cd4628902d4a?q=80&w=800&auto=format&fit=crop","https://images.unsplash.com/photo-1582213709088-348633c7f394?q=80&w=800&auto=format&fit=crop","https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=800&auto=format&fit=crop"]},$Y=[{slug:"bay-area-rescue-mission",name:"Bay Area Rescue Mission",tagline:"Transforming lives, one person at a time.",description:"The Bay Area Rescue Mission provides comprehensive services to address homelessness and poverty...",location:"San Francisco, CA",budget:"$6.2M",staff_count:"110",year_founded:"1936",impact_metric:"Provides over 300,000 meals annually.",focus_areas:["Homelessness","Poverty","Addiction Recovery"],imageUrl:Mu.nonprofits[0],type:"nonprofit"},{slug:"bay-area-womens-health-center",name:"Bay Area Women's Health Center",tagline:"Providing comprehensive reproductive healthcare.",description:"The Bay Area Women's Health Center is dedicated to providing reproductive healthcare services...",location:"San Francisco, CA",budget:"$3.8M",staff_count:"65",year_founded:"1975",impact_metric:"Serves over 15,000 patients annually.",focus_areas:["Community Health","Sexual Health","Women's Health"],imageUrl:Mu.nonprofits[1],type:"nonprofit"},{slug:"bay-area-womens-resource-center",name:"Bay Area Women's Resource Center",tagline:"Supporting and empowering women in the Bay Area.",description:"BAWRC is a non-profit organization focused on supporting and empowering women...",location:"San Francisco, CA",budget:"$2.1M",staff_count:"40",year_founded:"1978",impact_metric:"Provides job training to over 2,000 women each year.",focus_areas:["Community Support","Legal Aid","Women's Empowerment"],imageUrl:Mu.nonprofits[2],type:"nonprofit"}],FY=[{name:"Santa Clara",count:6835,icon:qe,color:"text-indigo-500"},{name:"Alameda",count:8542,icon:qe,color:"text-green-500"},{name:"Contra Costa",count:4350,icon:qe,color:"text-rose-500"},{name:"San Francisco",count:7211,icon:qe,color:"text-sky-500"},{name:"San Mateo",count:3490,icon:qe,color:"text-amber-500"},{name:"Sonoma",count:3125,icon:qe,color:"text-pink-500"},{name:"Solano",count:1543,icon:qe,color:"text-cyan-500"},{name:"Marin",count:2108,icon:qe,color:"text-violet-500"},{name:"Napa",count:896,icon:qe,color:"text-red-500"}],iu=({children:t,className:e=""})=>n.jsx(oe.div,{className:`w-full flex flex-col justify-center items-center py-16 md:py-20 relative ${e}`,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.3},children:t}),cn={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8}}},IY=()=>{const{setPageBgColor:t}=y.useContext(yn),[e,s]=y.useState(""),[r,a]=y.useState(""),[i,o]=y.useState(!1),[c,d]=y.useState({type:"",text:""});y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-purple-50 to-pink-50"),()=>{t("bg-white")}),[t]);const h=async p=>{if(p.preventDefault(),d({type:"",text:""}),!e){d({type:"error",text:"Please enter a valid URL."});return}o(!0);try{const{error:g}=await $.from("grant_submissions").insert([{url:e,notes:r}]);if(g)throw g;d({type:"success",text:"Thank you! Your submission has been received and will be reviewed by our team."}),s(""),a("")}catch(g){console.error("Error submitting grant:",g),d({type:"error",text:"An error occurred. Please try again."})}finally{o(!1)}},m=()=>{};return n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-blue-400 to-indigo-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx(oe.div,{variants:cn,className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-purple-100 to-pink-100 rounded-3xl flex items-center justify-center border border-purple-200 shadow-lg",children:n.jsx(Nt,{className:"h-10 w-10 text-purple-600"})}),n.jsxs(oe.h1,{variants:cn,className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"It Starts with a "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600",children:"Vision"})]}),n.jsxs(oe.p,{variants:{...cn,transition:{...cn.transition,delay:.2}},className:"text-lg md:text-xl text-slate-600 mb-12 max-w-4xl mx-auto leading-relaxed",children:["You see a better future for the Bay Area. Your funding is the spark that ignites change.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" We help it find the right place to land."})]}),n.jsxs(oe.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.5}}},children:[n.jsx("h3",{className:"text-center text-sm font-semibold text-slate-500 uppercase tracking-widest mb-8",children:"Organization Landscape by County"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-6 max-w-6xl mx-auto",children:FY.map(p=>n.jsxs(oe.div,{variants:cn,className:"text-center",children:[n.jsx("div",{className:`w-16 h-16 mx-auto mb-3 bg-gradient-to-br ${p.color.includes("indigo")?"from-indigo-100 to-purple-100 border-indigo-200":p.color.includes("green")?"from-green-100 to-emerald-100 border-green-200":p.color.includes("rose")?"from-rose-100 to-pink-100 border-rose-200":p.color.includes("sky")?"from-sky-100 to-blue-100 border-sky-200":p.color.includes("amber")?"from-amber-100 to-yellow-100 border-amber-200":p.color.includes("pink")?"from-pink-100 to-rose-100 border-pink-200":p.color.includes("cyan")?"from-cyan-100 to-teal-100 border-cyan-200":p.color.includes("violet")?"from-violet-100 to-purple-100 border-violet-200":"from-red-100 to-rose-100 border-red-200"} rounded-2xl flex items-center justify-center border shadow-lg`,children:n.jsx(p.icon,{className:`h-8 w-8 ${p.color}`})}),n.jsx(E0,{targetValue:p.count,className:"text-2xl sm:text-3xl font-bold text-slate-700"}),n.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 mt-2",children:p.name})]},p.name))})]})]})]}),n.jsx(iu,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:cn,className:"text-left",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-pink-100 to-rose-100 p-4 rounded-2xl mb-6 border border-pink-200",children:n.jsx(dy,{className:"h-10 w-10 text-pink-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:["We ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-rose-500",children:"Build"})," the Bridge"]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"The gap between a great idea and a community in need can be vast. We connect you to the passionate, on-the-ground leaders already working towards the future you envision."}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center border border-purple-200 flex-shrink-0",children:n.jsx(ot,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Discover Aligned Organizations"}),n.jsx("p",{className:"text-slate-600",children:"Find organizations whose missions perfectly align with your funding priorities and values."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center border border-blue-200 flex-shrink-0",children:n.jsx(_s,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Strategic Grantmaking"}),n.jsx("p",{className:"text-slate-600",children:"Access comprehensive data to make informed decisions about where your funding will have the greatest impact."})]})]})]})]}),n.jsxs(oe.div,{variants:cn,className:"relative",children:[n.jsx("img",{src:Mu.bridgeIllustration,alt:"Diverse hands coming together in collaboration",className:"w-full h-auto object-cover rounded-2xl shadow-2xl border-4 border-white"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-600/20 to-transparent rounded-2xl"})]})]})}),n.jsxs(iu,{children:[n.jsxs(oe.div,{variants:cn,className:"text-center mb-16",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-100 to-emerald-100 rounded-3xl flex items-center justify-center border border-green-200 shadow-lg",children:n.jsx(qe,{className:"h-10 w-10 text-green-600"})}),n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"Find the Right "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-500 to-emerald-600",children:"Match"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Discover the grassroots innovators aligned with your mission. Every organization has a story of impact waiting to be amplified."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:$Y.map((p,g)=>n.jsx(oe.div,{variants:cn,children:n.jsx(Go,{organization:p,handleFilterChange:m})},p.slug||g))}),n.jsx(oe.div,{variants:cn,className:"text-center mt-12",children:n.jsxs("a",{href:"/organizations",className:"inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(qe,{className:"mr-2",size:20}),"Explore All Organizations"]})})]}),n.jsx(iu,{children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl",children:[n.jsxs(oe.div,{variants:cn,className:"relative order-2 lg:order-1",children:[n.jsx("img",{src:Mu.impactIllustration,alt:"People collaborating in community work",className:"w-full h-auto object-cover rounded-2xl shadow-2xl border-4 border-white"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-sky-600/20 to-transparent rounded-2xl"})]}),n.jsxs(oe.div,{variants:cn,className:"text-left order-1 lg:order-2",children:[n.jsx("div",{className:"inline-block bg-gradient-to-br from-sky-100 to-blue-100 p-4 rounded-2xl mb-6 border border-sky-200",children:n.jsx(Cs,{className:"h-10 w-10 text-sky-600"})}),n.jsxs("h2",{className:"text-4xl font-bold text-slate-800 leading-tight mb-6",children:["Create ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-sky-500 to-blue-600",children:"Transformational"})," Change"]}),n.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"When your vision connects with the right partner, the impact is real. It's a newly painted mural, a protected coastline, or a new career path. It's a story you can see and feel."}),n.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 p-6 rounded-2xl border border-sky-100",children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Real Impact Stories"}),n.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[n.jsxs("p",{children:["🎨 ",n.jsx("strong",{children:"Arts Programs:"})," Funding creative expression in underserved communities"]}),n.jsxs("p",{children:["🌱 ",n.jsx("strong",{children:"Environmental Justice:"})," Supporting grassroots climate action"]}),n.jsxs("p",{children:["💼 ",n.jsx("strong",{children:"Workforce Development:"})," Creating pathways to economic opportunity"]}),n.jsxs("p",{children:["🏠 ",n.jsx("strong",{children:"Housing Solutions:"})," Building stable communities"]})]})]})]})]})}),n.jsx(iu,{children:n.jsxs(oe.div,{variants:cn,className:"bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl w-full max-w-4xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center border border-emerald-200 shadow-lg",children:n.jsx(Mi,{className:"h-8 w-8 text-emerald-600"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3",children:"Submit a Grant Opportunity"}),n.jsx("p",{className:"text-lg text-slate-600",children:"Found an RFP we missed? Help us grow our comprehensive database."})]}),n.jsxs("form",{onSubmit:h,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"grant-url",className:"block text-sm font-semibold text-slate-700 mb-2",children:["Grant URL ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"grant-url",type:"url",value:e,onChange:p=>s(p.target.value),placeholder:"https://foundation.org/grants/apply",required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 bg-white/80 backdrop-blur-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"grant-notes",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Additional Information (Optional)"}),n.jsx("textarea",{id:"grant-notes",value:r,onChange:p=>a(p.target.value),rows:"4",placeholder:`Help us understand this opportunity better:
• What's the focus area? (e.g., 'Arts education')
• Deadline information?
• Funding range?`,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 bg-white/80 backdrop-blur-sm resize-none"})]}),n.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Li,{className:"animate-spin h-5 w-5 mr-3"}),"Submitting Grant..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mi,{className:"mr-2",size:20}),"Submit Grant Opportunity"]})})]}),c.text&&n.jsx("div",{className:`mt-6 p-4 rounded-2xl text-sm font-medium ${c.type==="success"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[c.type==="success"?n.jsx(Hi,{size:16,className:"text-green-600"}):n.jsx($r,{size:16,className:"text-red-600"}),c.text]})})]})}),n.jsxs(iu,{children:[n.jsxs(oe.div,{variants:cn,className:"text-center mb-16",children:[n.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:[n.jsx("span",{className:"text-slate-800",children:"And We're Just "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Getting Started"})]}),n.jsx("p",{className:"text-lg md:text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"What's ahead? A dedicated platform for fund providers to connect, analyze, and manage their grantmaking portfolio with unprecedented insight and efficiency."})]}),n.jsx(oe.div,{variants:cn,className:"bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl w-full max-w-6xl",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center border border-indigo-200 flex-shrink-0",children:n.jsx(Pa,{className:"h-6 w-6 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Portfolio Analytics"}),n.jsx("p",{className:"text-slate-600",children:"Visualize your impact and gain insights into the funding landscape with comprehensive data visualization."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-2xl flex items-center justify-center border border-green-200 flex-shrink-0",children:n.jsx(un,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Streamlined Pipelines"}),n.jsx("p",{className:"text-slate-600",children:"Manage your opportunities and applicant funnel from a single, intuitive dashboard."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center border border-purple-200 flex-shrink-0",children:n.jsx(dy,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Direct Connections"}),n.jsx("p",{className:"text-slate-600",children:"Engage directly with organizations and build relationships beyond the application process."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-rose-100 to-pink-100 rounded-2xl flex items-center justify-center border border-rose-200 flex-shrink-0",children:n.jsx(ia,{className:"h-6 w-6 text-rose-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Targeted Outreach"}),n.jsx("p",{className:"text-slate-600",children:"Proactively invite specific types of organizations to apply for your opportunities."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-100 to-amber-100 rounded-2xl flex items-center justify-center border border-yellow-200 flex-shrink-0",children:n.jsx(Nh,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Impact Tracking"}),n.jsx("p",{className:"text-slate-600",children:"Follow your grantees' progress and see the long-term impact of your funding decisions."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-100 to-rose-100 rounded-2xl flex items-center justify-center border border-pink-200 flex-shrink-0",children:n.jsx($r,{className:"h-6 w-6 text-pink-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-800 mb-2",children:"Anonymous Feedback"}),n.jsx("p",{className:"text-slate-600",children:"Receive anonymized feedback from applicants to continuously improve your grantmaking processes."})]})]})]})})]}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Amplify Your Impact?"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Join the fund providers already discovering innovative organizations and strategic funding opportunities in the Bay Area. Your vision deserves the right partner."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/organizations",className:"inline-flex items-center justify-center px-8 py-4 bg-white text-slate-900 hover:bg-gray-100 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:[n.jsx(ot,{className:"mr-2",size:20}),"Discover Organizations"]}),n.jsxs("a",{href:"/contact",className:"inline-flex items-center justify-center px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-2xl text-white font-semibold transition-all duration-300",children:[n.jsx(Nr,{className:"mr-2",size:20}),"Partner with Us"]})]})]})})]})},_6=[{phase:"Phase I: Foundation",title:"Core Platform & Grant Database",description:"Launch the fundspace platform with a robust, searchable database of Bay Area grants. This includes our AI aggregation engine, community-sourcing model, and powerful search and filtering tools.",status:"Complete",icon:Hi,color:"green",features:["Grant database","Search & filters","AI data aggregation","Community submissions"]},{phase:"Phase II: Personalization",title:"User Accounts & Grant Tracking",description:"Introduce free user accounts for nonprofits, enabling features like a personalized dashboard to save and track grant opportunities, manage deadlines, and receive alerts for saved searches.",status:"Next Up",icon:Rf,color:"blue",features:["User accounts","Grant tracking","Deadline management","Search alerts"]},{phase:"Phase III: Advanced Nonprofit Suite",title:"AI-Powered Grantseeking Tools",description:"Develop a suite of advanced tools to give nonprofits a competitive edge. This includes an AI Proposal Assistant, an AI Eligibility Verifier to match nonprofits with the right grants, and in-depth Funder Trend Analysis.",status:"Planned",icon:g0,color:"purple",features:["AI Proposal Assistant","Eligibility matching","Funder analytics","Smart recommendations"]},{phase:"Phase IV: Premium Funder Suite",title:"Analytics & Pipeline Management",description:"Build a dedicated dashboard for funders to review their application pipeline, track the impact of their grants, receive anonymous applicant feedback, and gain insights into the Bay Area funding ecosystem.",status:"Planned",icon:Pa,color:"emerald",features:["Funder dashboard","Pipeline tracking","Impact analytics","Applicant feedback"]},{phase:"Phase V: Community & Collaboration",title:"Deepening Bay Area Connections",description:"Launch the fundspace Community Hub, featuring forums for discussion, a directory for finding nonprofit collaborators, and resources for local workshops and events to foster a more connected social sector.",status:"Planned",icon:qe,color:"orange",features:["Community forums","Collaboration directory","Event calendar","Resource library"]},{phase:"Phase VI: National Expansion",title:"Scaling the Model",description:"Replicate our successful model and technology to bring the power of fundspace to new metropolitan areas, empowering nonprofit sectors across the country.",status:"Future",icon:Br,color:"slate",features:["Multi-region support","Scaled infrastructure","Regional customization","National network"]}],BY=({item:t,index:e,isLast:s})=>{const r=t.icon,i={green:{bg:"from-green-500 to-emerald-500",card:"from-green-50 to-emerald-50",border:"border-green-200",text:"text-green-700",badge:"bg-green-100 text-green-800"},blue:{bg:"from-blue-500 to-indigo-500",card:"from-blue-50 to-indigo-50",border:"border-blue-200",text:"text-blue-700",badge:"bg-blue-100 text-blue-800"},purple:{bg:"from-purple-500 to-pink-500",card:"from-purple-50 to-pink-50",border:"border-purple-200",text:"text-purple-700",badge:"bg-purple-100 text-purple-800"},emerald:{bg:"from-emerald-500 to-teal-500",card:"from-emerald-50 to-teal-50",border:"border-emerald-200",text:"text-emerald-700",badge:"bg-emerald-100 text-emerald-800"},orange:{bg:"from-orange-500 to-amber-500",card:"from-orange-50 to-amber-50",border:"border-orange-200",text:"text-orange-700",badge:"bg-orange-100 text-orange-800"},slate:{bg:"from-slate-500 to-gray-500",card:"from-slate-50 to-gray-50",border:"border-slate-200",text:"text-slate-700",badge:"bg-slate-100 text-slate-800"}}[t.color],o={Complete:{label:"✅ Complete",color:"bg-green-100 text-green-800"},"Next Up":{label:"🚀 Next Up",color:"bg-blue-100 text-blue-800"},Planned:{label:"📋 Planned",color:"bg-purple-100 text-purple-800"},Future:{label:"🔮 Future",color:"bg-slate-100 text-slate-800"}};return n.jsxs(oe.div,{className:"relative flex items-start group",initial:{opacity:0,x:e%2===0?-50:50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.3},transition:{duration:.6,delay:e*.1},children:[!s&&n.jsx("div",{className:"absolute left-8 top-16 h-24 w-0.5 bg-gradient-to-b from-blue-300 to-purple-300 z-0"}),n.jsx(oe.div,{className:`relative z-10 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-r ${i.bg} shadow-xl border-4 border-white`,whileHover:{scale:1.1},transition:{type:"spring",stiffness:300},children:n.jsx(r,{className:"h-8 w-8 text-white"})}),n.jsxs(oe.div,{className:`ml-6 flex-1 bg-gradient-to-br ${i.card} backdrop-blur-sm p-6 md:p-8 rounded-3xl border ${i.border} shadow-xl hover:shadow-2xl transition-all duration-300 group-hover:scale-105`,whileHover:{y:-5},children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${o[t.status].color}`,children:o[t.status].label}),n.jsx("p",{className:`text-sm font-bold uppercase tracking-wider mt-2 ${i.text}`,children:t.phase})]})}),n.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-800 mb-3",children:t.title}),n.jsx("p",{className:"text-slate-600 leading-relaxed mb-6",children:t.description}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.features.map((c,d)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${i.bg}`}),n.jsx("span",{className:"text-slate-600 font-medium",children:c})]},d))})]})]})},UY=()=>{const{setPageBgColor:t}=y.useContext(yn);return y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50"),()=>{t("bg-white")}),[t]),n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-indigo-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-blue-400 to-indigo-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx(oe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-3xl flex items-center justify-center border border-indigo-200 shadow-lg",children:n.jsx(Hw,{className:"h-10 w-10 text-indigo-600"})}),n.jsxs(oe.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2,ease:"easeOut"},className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Our "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600",children:"Roadmap"})]}),n.jsxs(oe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4,ease:"easeOut"},className:"text-lg md:text-xl text-slate-600 mb-8 max-w-4xl mx-auto leading-relaxed",children:["We're building the future of grant discovery for Bay Area nonprofits. Here's our journey from a simple database to an intelligent ecosystem that empowers social impact.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" Every phase brings us closer to our vision."})]}),n.jsxs(oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.6,ease:"easeOut"},className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(ot,{className:"mr-2",size:18}),"Try Current Platform"]}),n.jsxs("a",{href:"/contact",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-purple-700 bg-purple-100 hover:bg-purple-200/70 transition-colors duration-300",children:[n.jsx(_s,{className:"mr-2",size:18}),"Share Feedback"]})]})]})]}),n.jsx("section",{className:"max-w-4xl mx-auto mb-16",children:n.jsx("div",{className:"space-y-12",children:_6.map((e,s)=>n.jsx(BY,{item:e,index:s,isLast:s===_6.length-1},e.phase))})}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Join Us on This Journey"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"fundspace is more than a platform—it's a movement to make social impact more accessible and effective. Your feedback helps shape our roadmap and ensures we're building what the community needs."}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-3xl mx-auto",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(ot,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Explore Now"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Try our current platform and discover grants in your area."}),n.jsx("a",{href:"/grants",className:"inline-flex items-center justify-center w-full px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:"Browse Grants"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(_s,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Share Feedback"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Help us prioritize features that matter most to you."}),n.jsx("a",{href:"/contact",className:"inline-flex items-center justify-center w-full px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:"Contact Us"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(qe,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Build Community"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Submit grants and help grow our comprehensive database."}),n.jsx("a",{href:"/submit-grant",className:"inline-flex items-center justify-center w-full px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:"Submit Grant"})]})]})]})})]})},tv={general:[{id:"g1",question:"What is Fundspace?",answer:"Fundspace is a centralized grant discovery platform designed specifically for the San Francisco Bay Area. Our mission is to bridge the gap between funders and nonprofits by making it easier for organizations to find funding and for funders to discover innovative local projects."},{id:"g2",question:"Who is behind Fundspace?",answer:"Fundspace was founded by a team with direct experience from both sides of the funding table—former nonprofit directors and foundation program officers. We started Fundspace because we've lived the challenges and knew there had to be a better way to connect purpose with progress in the Bay Area."},{id:"g3",question:"What geographic area does Fundspace cover?",answer:"We are exclusively focused on the 9-county San Francisco Bay Area: Alameda, Contra Costa, Marin, Napa, San Francisco, San Mateo, Santa Clara, Solano, and Sonoma counties."},{id:"g4",question:"Where does your grant data come from?",answer:"Our data comes from a hybrid model. Our AI-powered engine constantly scans public sources like foundation websites and 990 tax forms. This is supplemented and verified by community-powered crowdsourcing, where users can suggest edits or submit new opportunities to ensure our data is as accurate and timely as possible."},{id:"g5",question:'What are the "Spotlight" pages?',answer:"Our Spotlight pages are deep dives into the funding landscape of specific counties or cities within the Bay Area. They provide data-driven insights, highlight key community organizations, and tell the story of the social impact sector in that specific region."}],forNonprofits:[{id:"n1",question:"Is Fundspace free for nonprofits to use?",answer:"Yes. Our core search and discovery tools will always be free for registered 501(c)(3) nonprofit organizations. We are committed to empowering the sector, not creating new cost barriers."},{id:"n2",question:"Do I need to create an account?",answer:"You do not need an account to search our grant database. However, creating a free account will be required to access upcoming features like our grant tracking dashboard, saved searches, and application alerts."},{id:"n3",question:"Can I track my grant applications on Fundspace?",answer:"This is one of our most anticipated upcoming features! We are building a personalized dashboard where you can save grants, track deadlines, and manage your application pipeline all in one place. Stay tuned!"},{id:"n4",question:"How can our nonprofit get a profile on Fundspace?",answer:"Nonprofit profiles are automatically generated from publicly available data. We are building tools that will allow organization leaders to claim and update their profiles directly. In the meantime, if you see an error, please let us know via our Contact Us page."},{id:"n5",question:"I found an error or want to add a grant. What should I do?",answer:`Fantastic! Community input is vital. Please use the "Submit a Grant" link in our site's navigation or send us details through our Contact Us page. Our team will review and update the listing promptly.`}],forFunders:[{id:"f1",question:"What is your business model if the platform is free for nonprofits?",answer:"Our core belief is that access to opportunity should be free for nonprofits. We plan to sustain the platform by offering premium, paid tools for funders, such as advanced portfolio analytics, streamlined grant management pipelines, and targeted outreach capabilities."},{id:"f2",question:"What tools do you offer for funders?",answer:"Currently, funders can use our platform to gain visibility into the nonprofit landscape. We are actively developing a suite of tools designed to help you manage your grantmaking portfolio, track your impact, and connect directly with potential grantees beyond the formal application process."},{id:"f3",question:"I'm a funder. How can I get my RFP listed?",answer:`We'd love to partner with you. Please reach out to us via our Contact Us page or use the "Submit a Grant" form. We can ensure your opportunities are accurately listed and visible to thousands of Bay Area nonprofits.`},{id:"f4",question:"How can we update our foundation's profile?",answer:"Currently, profile updates can be requested through our Contact Us page. We are building out a dedicated funder portal that will allow you to manage your public-facing information directly."}]},VY=({faq:t,isOpen:e,onClick:s})=>n.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[n.jsxs("button",{onClick:s,className:"w-full flex justify-between items-center text-left py-6 px-2 group hover:bg-slate-50/50 rounded-lg transition-all duration-300",children:[n.jsx("span",{className:"text-lg font-semibold text-slate-800 group-hover:text-blue-600 transition-colors pr-4",children:t.question}),n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ${e?"bg-blue-100 text-blue-600 rotate-180":"bg-slate-100 text-slate-500 group-hover:bg-blue-100 group-hover:text-blue-600"}`,children:n.jsx(Ss,{size:16})})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${e?"max-h-[500px] opacity-100 pb-6":"max-h-0 opacity-0"}`,children:n.jsx("div",{className:"text-slate-600 px-2 leading-relaxed",children:t.answer})})]}),sv=({title:t,faqs:e,icon:s,color:r})=>{const[a,i]=y.useState(null),o=d=>{i(a===d?null:d)},c={blue:"from-blue-100 to-indigo-100 border-blue-200 text-blue-700",purple:"from-purple-100 to-pink-100 border-purple-200 text-purple-700",emerald:"from-emerald-100 to-teal-100 border-emerald-200 text-emerald-700"};return n.jsxs("div",{className:"mb-12",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center bg-gradient-to-br ${c[r]} border shadow-lg`,children:s}),n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:t})]}),n.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-6 md:p-8 rounded-3xl border border-white/60 shadow-2xl",children:e.map(d=>n.jsx(VY,{faq:d,isOpen:a===d.id,onClick:()=>o(d.id)},d.id))})]})},qY=()=>{const{setPageBgColor:t}=y.useContext(yn);return y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50"),()=>{t("bg-white")}),[t]),n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-pink-400 to-rose-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-purple-100 rounded-3xl flex items-center justify-center border border-blue-200 shadow-lg",children:n.jsx(EC,{className:"h-10 w-10 text-blue-600"})}),n.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Questions? "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:"We've Got Answers."})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:["Everything you need to know about Fundspace, from getting started to maximizing your impact.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold",children:" Can't find what you're looking for? Just ask."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[n.jsxs("a",{href:"/contact",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx($r,{className:"mr-2",size:18}),"Ask a Question"]}),n.jsxs("a",{href:"/grants",className:"inline-flex items-center justify-center px-6 py-3 font-semibold rounded-full text-purple-700 bg-purple-100 hover:bg-purple-200/70 transition-colors duration-300",children:[n.jsx(ot,{className:"mr-2",size:18}),"Start Exploring"]})]})]})]}),n.jsxs("section",{className:"max-w-5xl mx-auto",children:[n.jsx(sv,{title:"General Questions",faqs:tv.general,icon:n.jsx(EC,{size:24}),color:"blue"}),n.jsx(sv,{title:"For Nonprofits",faqs:tv.forNonprofits,icon:n.jsx(qe,{size:24}),color:"purple"}),n.jsx(sv,{title:"For Funders",faqs:tv.forFunders,icon:n.jsx(qo,{size:24}),color:"emerald"})]}),n.jsx("section",{className:"mt-20",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border border-white/20",children:n.jsx(Xt,{className:"h-8 w-8 text-white"})}),n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Still Have Questions?"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-2xl mx-auto",children:"Our team is here to help. Whether you're a nonprofit looking for funding or a funder wanting to maximize your impact, we'd love to connect."}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx($r,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Get in Touch"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Send us a message and we'll get back to you within 24 hours."}),n.jsx("a",{href:"/contact",className:"inline-flex items-center justify-center w-full px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:"Contact Us"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20",children:[n.jsx(Hi,{className:"h-8 w-8 text-white mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-2",children:"Submit a Grant"}),n.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Help us build a comprehensive database of Bay Area funding."}),n.jsx("a",{href:"/submit-grant",className:"inline-flex items-center justify-center w-full px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/20 rounded-xl text-white font-semibold text-sm transition-all duration-300 hover:scale-105",children:"Submit Grant"})]})]})]})})]})},HY=()=>{const{setPageBgColor:t}=y.useContext(yn),[e,s]=y.useState(""),[r,a]=y.useState(""),[i,o]=y.useState(!1),[c,d]=y.useState({type:"",text:""});y.useEffect(()=>(t("bg-gradient-to-br from-slate-50 via-emerald-50 to-teal-50"),()=>t("bg-white")),[t]);const h=g=>{try{return new URL(g),!0}catch{return!1}},m=async g=>{if(g.preventDefault(),d({type:"",text:""}),!h(e)){d({type:"error",text:"Please enter a valid URL."});return}o(!0);try{const{data:b,error:v}=await $.functions.invoke("submit-grant",{body:{url:e,notes:r}});if(v){const N=await v.context.json();throw new Error(N.error||"An unexpected error occurred.")}d({type:"success",text:b.message}),s(""),a("")}catch(b){console.error("Error submitting grant:",b),d({type:"error",text:b.message||"An error occurred. Please try again."})}finally{o(!1)}},p=()=>c.type==="success"?n.jsx(Hi,{size:16,className:"text-green-600"}):c.type==="error"?n.jsx(sl,{size:16,className:"text-red-600"}):null;return n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[n.jsxs("section",{className:"text-center mb-16 relative",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-emerald-400 to-teal-600 rounded-full opacity-10 animate-pulse"}),n.jsx("div",{className:"absolute top-32 right-20 w-24 h-24 bg-gradient-to-r from-blue-400 to-indigo-600 rounded-full opacity-10 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-10 left-1/3 w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full opacity-10 animate-pulse delay-2000"})]}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-8 md:p-12 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-3xl flex items-center justify-center border border-emerald-200 shadow-lg",children:n.jsx(Mi,{className:"h-10 w-10 text-emerald-600"})}),n.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold tracking-tight mb-4",children:[n.jsx("span",{className:"text-slate-900",children:"Help Grow Our "}),n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 via-teal-600 to-blue-600",children:"Community"})]}),n.jsxs("p",{className:"text-lg md:text-xl text-slate-600 mb-8 max-w-4xl mx-auto leading-relaxed",children:["Found a grant opportunity we missed? Help us build the most comprehensive Bay Area grant database by submitting opportunities you've discovered.",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-600 to-teal-600 font-semibold",children:" Every submission makes our community stronger."})]})]})]}),n.jsx("section",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 md:p-10 rounded-3xl border border-white/60 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center border border-emerald-200",children:n.jsx(Mi,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Submit a Grant Opportunity"}),n.jsx("p",{className:"text-slate-600",children:"Help expand our database"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6 rounded-2xl border border-emerald-100 mb-8",children:[n.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:"How It Works:"}),n.jsxs("ol",{className:"text-sm text-emerald-700 space-y-1",children:[n.jsx("li",{children:"1. Share the grant URL you discovered"}),n.jsx("li",{children:"2. Add any helpful details or context"}),n.jsx("li",{children:"3. Our AI model reads the content and pulls relevant information"}),n.jsx("li",{children:"4. Grant gets added to our database for all organizations to discover"})]})]}),n.jsxs("form",{onSubmit:m,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"grant-url",className:"block text-sm font-semibold text-slate-700 mb-2",children:["Grant Opportunity URL ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{id:"grant-url",type:"url",value:e,onChange:g=>s(g.target.value),placeholder:"https://foundation.org/grants/apply",required:!0,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Please include the full URL including https://"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"grant-notes",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Additional Information (Optional)"}),n.jsx("textarea",{id:"grant-notes",value:r,onChange:g=>a(g.target.value),rows:"5",placeholder:`Help us understand this grant better:
• What's the focus area? (e.g., 'Arts education', 'Environmental justice')
• What's the deadline? (e.g., 'Rolling', 'March 15, 2025')
• Funding range? (e.g., '$10K - $50K')
• Any eligibility requirements?`,className:"block w-full px-4 py-3 border border-slate-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all duration-300 text-sm bg-white/80 backdrop-blur-sm resize-none"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Any context helps our team process submissions faster"})]}),n.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex items-center justify-center px-8 py-4 font-semibold rounded-2xl text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-600 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Li,{className:"animate-spin h-5 w-5 mr-3"}),"Submitting Grant..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mi,{className:"mr-2",size:20}),"Submit Grant Opportunity"]})})]}),c.text&&n.jsx("div",{className:`mt-6 p-4 rounded-2xl text-sm font-medium ${c.type==="success"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[p(),c.text]})})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-3xl border border-white/60 shadow-xl",children:[n.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-5 w-5 text-rose-500"}),"Community Impact"]}),n.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Saves Time:"})," Every submission helps our communitites discover funding faster"]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Builds Community:"})," Collaborative approach strengthens our ecosystem"]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Ensures Quality:"})," Our team verifies every submission"]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full mt-2 flex-shrink-0"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Stays Current:"})," Community submissions keep data fresh"]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-3xl border border-blue-100 shadow-lg",children:[n.jsx("h4",{className:"font-semibold text-slate-800 mb-3",children:"Submission Guidelines"}),n.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[n.jsxs("p",{children:["✅ ",n.jsx("strong",{children:"Bay Area focus:"})," Must serve our 9-county region"]}),n.jsxs("p",{children:["✅ ",n.jsx("strong",{children:"Active grants:"})," Currently accepting applications"]}),n.jsxs("p",{children:["✅ ",n.jsx("strong",{children:"Open to all:"})," Open to all organization types and individuals"]}),n.jsxs("p",{children:["✅ ",n.jsx("strong",{children:"Public access:"})," Information publicly available"]})]})]})]})]})}),n.jsx("section",{className:"mt-16 text-center",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 md:p-12 rounded-3xl text-white shadow-2xl max-w-4xl mx-auto",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Thank You for Building Community"}),n.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-6 max-w-2xl mx-auto",children:"Every grant submission brings us one step closer to advancing our mission of making funding accessible to everyone."})]})})]})},is=({src:t,fullName:e,size:s="md",className:r="",onClick:a=null,showOnlineStatus:i=!1,isOnline:o=!1})=>{const[c,d]=y.useState(!1),[h,m]=y.useState(!1),[p,g]=y.useState(null);y.useEffect(()=>{const A=t==null?void 0:t.trim();if(!A||A===""){g(null),d(!1),m(!1);return}if(A!==p){d(!1),m(!0),g(A);const M=new Image;M.onload=()=>{m(!1),d(!1)},M.onerror=()=>{console.warn("Avatar image failed to load:",A),m(!1),d(!0)},M.src=A}},[t,p]);const b={xs:{size:"w-6 h-6",text:"text-xs",status:"w-2 h-2 -bottom-0.5 -right-0.5"},sm:{size:"w-8 h-8",text:"text-sm",status:"w-2.5 h-2.5 -bottom-0.5 -right-0.5"},md:{size:"w-10 h-10",text:"text-base",status:"w-3 h-3 -bottom-0.5 -right-0.5"},lg:{size:"w-16 h-16",text:"text-lg",status:"w-4 h-4 -bottom-1 -right-1"},xl:{size:"w-20 h-20",text:"text-xl",status:"w-5 h-5 -bottom-1 -right-1"},"2xl":{size:"w-24 h-24",text:"text-2xl",status:"w-6 h-6 -bottom-1 -right-1"}},v=b[s]||b.md,N=A=>A?A.split(" ").filter(M=>M.length>0).map(M=>M.charAt(0)).join("").toUpperCase().slice(0,2):"?",j=A=>{if(!A)return"bg-slate-500";const M=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"];let R=0;for(let D=0;D<A.length;D++)R=A.charCodeAt(D)+((R<<5)-R);return M[Math.abs(R)%M.length]},w=p&&!c&&!h,_=["relative","inline-block",v.size,"rounded-full","overflow-hidden","flex-shrink-0",a?"cursor-pointer hover:opacity-80 transition-opacity":"",r].filter(Boolean).join(" "),k=["w-full","h-full","rounded-full","flex","items-center","justify-center",j(e),"text-white","font-semibold",v.text,"select-none"].join(" "),C=["w-full","h-full","object-cover","rounded-full"].join(" "),E=["absolute",v.status,"rounded-full","border-2","border-white",o?"bg-green-500":"bg-slate-400"].join(" ");return n.jsxs("div",{className:_,onClick:a,children:[w?n.jsx("img",{src:p,alt:e||"Avatar",className:C,loading:"lazy"}):n.jsx("div",{className:k,children:h?n.jsx("div",{className:"animate-pulse",children:N(e)}):N(e)}),i&&n.jsx("div",{className:E,title:o?"Online":"Offline"})]})};function C6({mobile:t=!1,onClose:e}){const[s,r]=y.useState(!1),a=y.useRef(null),i=bt();let o=null;try{o=(_t==null?void 0:_t())||{}}catch{console.log("Auth context not available, using local state")}const[c,d]=y.useState(null),[h,m]=y.useState(null),[p,g]=y.useState(!o),b=(o==null?void 0:o.session)??c,v=(o==null?void 0:o.profile)??h;y.useEffect(()=>{if((o==null?void 0:o.session)!==void 0){g(!1);return}(async()=>{const{data:{session:C}}=await $.auth.getSession();if(d(C),C!=null&&C.user){const{data:E}=await $.from("profiles").select("*").eq("id",C.user.id).single();m(E)}g(!1)})();const{data:{subscription:k}}=$.auth.onAuthStateChange(async(C,E)=>{if(console.log("AuthButton: Auth state changed:",C,E?"logged in":"logged out"),d(E),E!=null&&E.user){const{data:A}=await $.from("profiles").select("*").eq("id",E.user.id).single();m(A)}else m(null)});return()=>k.unsubscribe()},[o]);const N=async()=>{try{console.log("🚪 Signing out..."),await $.auth.signOut(),d(null),m(null),e&&e(),i("/",{replace:!0}),setTimeout(()=>{window.location.reload()},100)}catch(_){console.error("Error signing out:",_)}},j=()=>{e&&e(),r(!1)},w=()=>{e&&e(),i("/login?view=signup")};return y.useEffect(()=>{function _(k){a.current&&!a.current.contains(k.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),p?t?n.jsx("div",{className:"w-full px-4 py-3 bg-slate-100 rounded-full animate-pulse",children:n.jsx("div",{className:"h-4 bg-slate-300 rounded"})}):n.jsx("div",{className:"px-4 py-2 bg-slate-100 rounded-full animate-pulse",children:n.jsx("div",{className:"h-4 w-16 bg-slate-300 rounded"})}):b&&v?t?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3 px-4 py-3 bg-slate-50 rounded-lg",children:[n.jsx(is,{src:v.avatar_url,fullName:v.full_name,size:"sm"},v.avatar_url),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:v.full_name||"User"}),n.jsx("p",{className:"text-xs text-slate-500 truncate",children:b.user.email})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ye,{to:"/profile",onClick:j,className:"flex items-center w-full px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[n.jsx(An,{size:16,className:"mr-3"}),"View Profile"]}),n.jsxs("button",{onClick:N,className:"flex items-center w-full px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[n.jsx(_c,{size:16,className:"mr-3"}),"Sign Out"]})]})]}):n.jsxs("div",{className:"relative",ref:a,children:[n.jsxs("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 focus:outline-none rounded-full hover:bg-slate-100 p-1 transition-colors",children:[n.jsx(is,{src:v.avatar_url,fullName:v.full_name,size:"sm"},v.avatar_url),n.jsx("span",{className:"hidden lg:block text-sm font-medium text-slate-700",children:v.full_name||"Profile"})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-slate-200 py-1 z-50",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:v.full_name||"User"}),n.jsx("p",{className:"text-xs text-slate-500 truncate",children:b.user.email})]}),n.jsxs("div",{className:"py-1",children:[n.jsxs(Ye,{to:"/profile",onClick:j,className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(tp,{size:14,className:"mr-2"})," Dashboard"]}),n.jsxs(Ye,{to:"/profile/settings",onClick:j,className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(An,{size:14,className:"mr-2"})," Profile Settings"]})]}),n.jsx("div",{className:"border-t border-slate-100 py-1",children:n.jsxs("button",{onClick:N,className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(_c,{size:14,className:"mr-2"})," Logout"]})})]})]}):t?n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ye,{to:"/login",onClick:j,className:"block w-full px-4 py-2 text-center text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-full hover:bg-blue-50 transition-colors",children:"Sign In"}),n.jsx("button",{onClick:w,className:"block w-full px-4 py-2 text-center text-sm font-medium text-white bg-blue-600 rounded-full hover:bg-blue-700 transition-colors",children:"Sign Up"})]}):n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ye,{to:"/login",className:"px-3 lg:px-4 py-2 text-sm font-medium rounded-full text-slate-700 bg-white hover:bg-slate-50 border border-slate-300 shadow-sm transition-colors cursor-pointer",children:"Sign In"}),n.jsx("button",{onClick:w,className:"inline-flex items-center justify-center px-3 lg:px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-blue-600 hover:bg-blue-700 transition-colors cursor-pointer",children:"Sign Up"})]})}const R0="/assets/fundspace-logo2-D9pye7Sw.png",GY=({to:t,children:e,activeClassName:s,mobile:r=!1,onClick:a})=>{const i=({isActive:o})=>r?`block w-full text-left px-4 py-3 transition-colors ${o?`${s} bg-blue-50 border-r-2 border-blue-600`:"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`:`text-sm md:text-base font-medium transition-colors ${o?s:"text-slate-700 hover:text-blue-600"}`;return n.jsx(m0,{to:t,className:i,onClick:a,children:e})};function nT(){var j;const[t,e]=y.useState(!1),[s,r]=y.useState(!1),[a,i]=y.useState(null),[o,c]=y.useState(!1),d=y.useRef(null),m=vn().pathname==="/",p=[{to:"/grants",text:"Explore",active:"text-blue-600 font-semibold",dropdown:{sections:[{title:"Find Opportunities",links:[{to:"/grants",text:"Find Funding"},{to:"/organizations",text:"Explore Organizations"},{to:"/submit-grant",text:"Submit Grant"}]}],image:"https://i.imgur.com/X5UvEv6.png"}},{to:"/spotlight",text:"Spotlight",active:"text-rose-600 font-semibold",dropdown:{sections:[{title:"Bay Area Counties",links:[{to:"/spotlight/san-francisco",text:"San Francisco County"},{to:"/spotlight/alameda",text:"Alameda County"},{to:"/spotlight/santa-clara",text:"Santa Clara County"},{to:"/spotlight/contra-costa",text:"Contra Costa County"},{to:"/spotlight/marin",text:"Marin County"},{to:"/spotlight/san-mateo",text:"San Mateo County"},{to:"/spotlight/solano",text:"Solano County"},{to:"/spotlight/sonoma",text:"Sonoma County"},{to:"/spotlight/napa",text:"Napa County"}]},{title:"Peninsula",links:[{to:"/spotlight/san-mateo/palo-alto",text:"Palo Alto"},{to:"/spotlight/san-mateo/redwood-city",text:"Redwood City"},{to:"/spotlight/san-mateo/menlo-park",text:"Menlo Park"},{to:"/spotlight/san-mateo/mountain-view",text:"Mountain View"}]},{title:"South Bay",links:[{to:"/spotlight/santa-clara/san-jose",text:"San Jose"},{to:"/spotlight/santa-clara/sunnyvale",text:"Sunnyvale"},{to:"/spotlight/santa-clara/santa-clara",text:"Santa Clara"},{to:"/spotlight/santa-clara/cupertino",text:"Cupertino"}]},{title:"East Bay",links:[{to:"/spotlight/alameda/oakland",text:"Oakland"},{to:"/spotlight/alameda/berkeley",text:"Berkeley"},{to:"/spotlight/alameda/fremont",text:"Fremont"},{to:"/spotlight/contra-costa/concord",text:"Concord"}]},{title:"North Bay",links:[{to:"/spotlight/marin/san-rafael",text:"San Rafael"},{to:"/spotlight/sonoma/santa-rosa",text:"Santa Rosa"},{to:"/spotlight/napa/napa",text:"Napa"},{to:"/spotlight/solano/vallejo",text:"Vallejo"}]},{title:"Community",links:[{to:"/spotlight",text:"All Spotlights"},{to:"/spotlight/submit",text:"Submit Story"},{to:"/spotlight/featured",text:"Featured Stories"}]}],image:"https://i.imgur.com/4pVbT87.png"}},{to:"/about",text:"About",active:"text-blue-600 font-semibold",dropdown:{sections:[{title:"Company",links:[{to:"/about",text:"About Us"},{to:"/contact",text:"Contact"},{to:"/how-it-works",text:"How It Works"},{to:"/roadmap",text:"Roadmap"}]},{title:"Resources",links:[{to:"/for-seekers",text:"For Seekers"},{to:"/for-funders",text:"For Funders"},{to:"/faq",text:"FAQ"}]}],image:"https://i.imgur.com/RLlEUMG.png"}}],g=w=>{d.current&&clearTimeout(d.current),i(w)},b=()=>{d.current=setTimeout(()=>{i(null)},300)},v=(w,_)=>{_.stopPropagation(),d.current&&clearTimeout(d.current),i(a===w?null:w)},N=()=>e(!1);return y.useEffect(()=>{const w=()=>{r(window.scrollY>0)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),y.useEffect(()=>{function w(_){mobileMenuRef.current&&!mobileMenuRef.current.contains(_.target)&&e(!1);const k=document.querySelector("[data-dropdown-container]"),C=document.querySelector("[data-nav-container]");(!k||!k.contains(_.target))&&(!C||!C.contains(_.target))&&i(null)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),y.useEffect(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),n.jsxs(n.Fragment,{children:[m&&n.jsxs("div",{className:`bg-gradient-to-r from-purple-200/50 via-pink-200/40 to-blue-200/50 text-slate-700 py-4 px-6 text-center text-base font-medium fixed top-0 left-0 right-0 z-50 transition-transform duration-300 ${s?"transform -translate-y-full":"transform translate-y-0"}`,children:[n.jsx("span",{children:"🚀 Alpha Testing Open — "}),n.jsx(Ye,{to:"/login?view=signup",className:"underline hover:no-underline font-semibold text-slate-800",children:"Register for early access"})]}),n.jsx("div",{className:`transition-all duration-300 ${m?s?"h-[73px]":"h-[137px]":"h-[73px]"}`}),n.jsxs("div",{className:"relative",children:[n.jsx("header",{className:`bg-white/90 backdrop-blur-lg fixed left-0 right-0 z-40 transition-all duration-300 ${m&&!s?"top-16 border-b border-transparent":"top-0 border-b border-slate-200 shadow-sm"}`,children:n.jsxs("div",{className:"w-full max-w-none px-6 lg:px-12 xl:px-16 py-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-8 lg:space-x-12",children:[n.jsx(Ye,{to:"/","aria-label":"Fundspace Home",children:n.jsx("img",{src:R0,alt:"Fundspace Logo",className:"h-10 sm:h-12 md:h-14 w-auto"})}),n.jsx("nav",{className:"hidden lg:flex items-center space-x-6 xl:space-x-8 relative","data-nav-container":!0,children:p.map((w,_)=>n.jsx("div",{className:"relative",onMouseEnter:()=>g(_),onMouseLeave:b,children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(m0,{to:w.to,className:({isActive:k})=>`text-base font-medium transition-colors ${k?w.active:"text-slate-700 hover:text-blue-600"}`,children:w.text}),n.jsx("button",{onClick:k=>v(_,k),className:"ml-2 p-1 text-slate-400 hover:text-slate-700 transition-colors rounded","aria-label":"Toggle dropdown",children:n.jsx(Ss,{size:18,className:`transition-transform duration-200 ${a===_?"rotate-180":"rotate-0"}`})})]})},w.to))})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"hidden lg:block",children:n.jsx(C6,{})}),n.jsxs(Ye,{to:"/submit-grant",className:"hidden lg:inline-flex items-center justify-center px-5 py-2.5 border border-transparent text-sm font-semibold rounded-full text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[n.jsx(Zf,{size:16,className:"mr-2"}),"Submit Grant"]}),n.jsx("button",{onClick:()=>e(!0),"aria-label":"Open menu",className:"lg:hidden p-2 rounded-md text-slate-600 hover:bg-slate-100 transition-colors",children:n.jsx(T3,{size:24})})]})]})}),a!==null&&((j=p[a])==null?void 0:j.dropdown)&&n.jsxs("div",{className:"fixed left-0 w-full bg-white border-b border-slate-200 shadow-lg z-50 animate-fadeInDown",onMouseEnter:()=>g(a),onMouseLeave:b,style:{borderRadius:"0 0 16px 16px",top:m?s?"73px":"137px":"73px"},children:[n.jsx("div",{className:"w-full px-6 lg:px-12 xl:px-16 py-8",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex gap-16",style:{marginLeft:"48px"},children:p[a].dropdown.sections.map((w,_)=>n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4",children:w.title}),n.jsx("ul",{className:"space-y-3",children:w.links.map((k,C)=>n.jsx("li",{children:n.jsx(Ye,{to:k.to,className:"text-slate-600 hover:text-blue-600 transition-colors block py-1 text-base leading-snug whitespace-nowrap",onClick:()=>i(null),children:k.text})},C))})]},_))}),n.jsx("div",{className:"w-80 h-60 rounded-xl overflow-hidden bg-slate-100 shadow-lg ml-auto flex-shrink-0",children:n.jsx("img",{src:p[a].dropdown.image,alt:p[a].text,className:"w-full h-full object-cover"})})]})}),n.jsx("style",{jsx:!0,children:`
                            @keyframes fadeInDown {
                                0% {
                                    opacity: 0;
                                    transform: translateY(-10px);
                                }
                                100% {
                                    opacity: 1;
                                    transform: translateY(0);
                                }
                            }
                            
                            .animate-fadeInDown {
                                animation: fadeInDown 0.3s ease-out forwards;
                            }
                        `})]})]}),t&&n.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:N}),n.jsxs("div",{ref:mobileMenuRef,className:"fixed top-0 right-0 bottom-0 w-full max-w-sm bg-white shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsx("span",{className:"text-lg font-semibold text-slate-900",children:"Menu"}),n.jsx("button",{onClick:N,className:"p-2 rounded-md text-slate-600 hover:text-slate-900 hover:bg-slate-100","aria-label":"Close mobile menu",children:n.jsx(Ke,{className:"h-5 w-5"})})]}),n.jsx("nav",{className:"px-2 py-4 space-y-1",children:p.map(w=>n.jsx(GY,{to:w.to,activeClassName:w.active,mobile:!0,onClick:N,children:w.text},w.to))}),n.jsx("div",{className:"border-t border-slate-200 p-4 space-y-3",children:n.jsxs("div",{className:"flex flex-col space-y-3",children:[n.jsx(C6,{mobile:!0}),n.jsxs(Ye,{to:"/submit-grant",onClick:N,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200",children:[n.jsx(Zf,{className:"w-4 h-4 mr-2"}),"Submit Grant"]})]})})]})]})]})}function rT(){const t=[{to:"/how-it-works",text:"How Fundspace Works"},{to:"/for-seekers",text:"For Grant Seekers"},{to:"/for-funders",text:"For Fund Providers"},{to:"/submit-grant",text:"Submit a Grant"}],e=[{to:"/about",text:"About Us"},{to:"/contact",text:"Contact Us"},{to:"/roadmap",text:"Platform Roadmap"},{to:"/faq",text:"FAQ"}],s=[{to:"/spotlight",text:"All Spotlights"},{to:"/spotlight/san-francisco",text:"San Francisco"},{to:"/spotlight/alameda",text:"Alameda"},{to:"/spotlight/contra-costa",text:"Contra Costa"},{to:"/spotlight/marin",text:"Marin"},{to:"/spotlight/napa",text:"Napa"},{to:"/spotlight/san-mateo",text:"San Mateo"},{to:"/spotlight/santa-clara",text:"Santa Clara"},{to:"/spotlight/solano",text:"Solano"},{to:"/spotlight/sonoma",text:"Sonoma"}];return n.jsx("footer",{className:"bg-transparent py-8 mt-auto",children:n.jsxs("div",{className:"container mx-auto px-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[n.jsxs("div",{children:[n.jsx("img",{src:R0,alt:"Fundspace Logo",className:"h-20 mb-6 w-auto"}),n.jsx("p",{className:"text-slate-600",children:"Democratizing access to funding for a better Bay Area."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-3 tracking-wider uppercase",children:"Product"}),n.jsx("ul",{className:"space-y-2 text-base",children:t.map(r=>n.jsx("li",{children:n.jsx(Ye,{to:r.to,className:"text-slate-600 hover:text-blue-600 transition-colors",children:r.text})},r.to))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-3 tracking-wider uppercase",children:"Spotlight"}),n.jsx("ul",{className:"space-y-2 text-base",children:s.map(r=>n.jsx("li",{children:n.jsx(Ye,{to:r.to,className:"text-slate-600 hover:text-rose-600 transition-colors",children:r.text})},r.to))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-3 tracking-wider uppercase",children:"Company"}),n.jsx("ul",{className:"space-y-2 text-base",children:e.map(r=>n.jsx("li",{children:n.jsx(Ye,{to:r.to,className:"text-slate-600 hover:text-blue-600 transition-colors",children:r.text})},r.to))})]})]}),n.jsxs("div",{className:"pt-8 border-t border-slate-100 flex flex-col sm:flex-row justify-between items-center",children:[n.jsxs("p",{className:"text-base text-slate-500 mb-4 sm:mb-0",children:["© ",new Date().getFullYear()," Fundspace. All rights reserved."]}),n.jsxs("div",{className:"flex space-x-4 text-slate-500",children:[n.jsx("a",{href:"#","aria-label":"Facebook",className:"hover:text-blue-600 transition-colors",children:n.jsx(rF,{size:18})}),n.jsx("a",{href:"#","aria-label":"Twitter",className:"hover:text-blue-600 transition-colors",children:n.jsx(Jw,{size:18})}),n.jsx("a",{href:"#","aria-label":"LinkedIn",className:"hover:text-blue-600 transition-colors",children:n.jsx(Vw,{size:18})}),n.jsx("a",{href:"#","aria-label":"Instagram",className:"hover:text-blue-600 transition-colors",children:n.jsx(yF,{size:18})}),n.jsx("a",{href:"#","aria-label":"YouTube",className:"hover:text-blue-600 transition-colors",children:n.jsx(MI,{size:18})})]})]})]})})}function aT({children:t}){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col",children:[n.jsx(nT,{}),n.jsx("div",{className:"flex-1 flex flex-col justify-center p-4 pt-20 pb-96 min-h-[700px]",children:n.jsx("div",{className:"w-full max-w-4xl bg-white rounded-2xl shadow-xl overflow-hidden mx-auto",children:n.jsxs("div",{className:"p-12 min-h-[500px] flex flex-col",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("img",{src:R0,alt:"Fundspace Logo",className:"h-20 w-auto"})})}),n.jsx("div",{className:"flex-1 flex flex-col justify-center",children:t})]})})}),n.jsx("div",{className:"mt-auto pt-8",children:n.jsx(rT,{})})]})}function ed({message:t,error:e}){return!t&&!e?null:n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700 text-center",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx(Ks,{className:"w-5 h-5"}),n.jsx("span",{children:t})]})}),e&&n.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-center",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx(Ke,{className:"w-5 h-5"}),n.jsx("span",{children:e})]})})]})}function WY({onSwitchToSignUp:t,onSwitchToForgotPassword:e,onLoginSuccess:s}){const[r,a]=y.useState(!1),[i,o]=y.useState(""),[c,d]=y.useState(""),[h,m]=y.useState(!1),[p,g]=y.useState({email:"",password:""}),b=(w,_)=>{g(k=>({...k,[w]:_})),i&&o("")},v=w=>w.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/),N=()=>p.email&&p.password&&v(p.email),j=async w=>{if(w.preventDefault(),!!N()){a(!0),o(""),d("");try{const{error:_}=await $.auth.signInWithPassword({email:p.email.trim(),password:p.password});if(_){_.message.includes("Invalid login credentials")?o("Invalid email or password. Please check your credentials and try again."):_.message.includes("Email not confirmed")?o("Please check your email and click the confirmation link before signing in."):o(_.message);return}s()}catch(_){o("An unexpected error occurred. Please try again."),console.error("Login error:",_)}finally{a(!1)}}};return n.jsxs("div",{className:"w-full",children:[n.jsxs(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Welcome Back!",n.jsx(oe.span,{className:"inline-block ml-2",animate:{rotate:[0,14,-8,14,-4,10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:3},children:"👋"})]}),n.jsx("p",{className:"text-slate-600 text-lg",children:"Ready to continue building together?"})]}),n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(Yc,{className:`w-5 h-5 transition-colors ${p.email?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:"email",required:!0,value:p.email,onChange:w=>b("email",w.target.value),className:`w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:ring-4 transition-all duration-200 bg-white/50 backdrop-blur-sm ${p.email&&!v(p.email)?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300"}`,placeholder:"you@example.com"})]}),p.email&&!v(p.email)&&n.jsx(oe.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-sm text-red-600 mt-2 flex items-center",children:"Please enter a valid email address"})]}),n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"Password"}),n.jsx("button",{type:"button",onClick:e,className:"text-xs text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"Forgot password?"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(sp,{className:`w-5 h-5 transition-colors ${p.password?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:h?"text":"password",required:!0,value:p.password,onChange:w=>b("password",w.target.value),className:"w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl focus:ring-4 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"••••••••••"}),n.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:h?n.jsx(Yu,{className:"w-5 h-5"}):n.jsx(pn,{className:"w-5 h-5"})})]})]}),n.jsx(oe.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},type:"submit",disabled:!N()||r,className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 ${N()&&!r?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,whileTap:{scale:.98},children:n.jsx("div",{className:"flex items-center justify-center space-x-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Signing you in..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Sign In"}),n.jsx(Xt,{className:"w-5 h-5"})]})})})]}),n.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-8 text-center",children:[n.jsx("p",{className:"text-slate-600 mb-3",children:"New to our community?"}),n.jsxs("button",{onClick:t,className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors group",children:[n.jsx("span",{children:"Join the crew!"}),n.jsx(Nr,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})]}),n.jsx(ed,{message:c,error:i})]})}function YY({onSwitchToLogin:t,onSignupSuccess:e}){const[s,r]=y.useState(!1),[a,i]=y.useState(""),[o,c]=y.useState(""),[d,h]=y.useState(!1),[m,p]=y.useState({fullName:"",email:"",password:"",confirmPassword:""}),g=(j,w)=>{p(_=>({..._,[j]:w})),a&&i("")},b=j=>j.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/),v=()=>m.fullName.trim()&&m.email&&m.password&&m.confirmPassword&&b(m.email)&&m.password.length>=6&&m.password===m.confirmPassword,N=async j=>{if(j.preventDefault(),!!v()){r(!0),i(""),c("");try{const{error:w}=await $.auth.signUp({email:m.email.trim(),password:m.password,options:{data:{full_name:m.fullName.trim()}}});if(w){w.message.includes("already registered")?i("This email is already registered. Try signing in instead!"):i(w.message);return}c("Welcome to the community! Please check your email and click the confirmation link to get started."),e()}catch(w){i("An unexpected error occurred. Please try again."),console.error("Signup error:",w)}finally{r(!1)}}};return n.jsxs("div",{className:"w-full",children:[n.jsxs(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Welcome to the party!",n.jsx(oe.span,{className:"inline-block ml-2",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:4},children:"🎉"})]}),n.jsxs("p",{className:"text-slate-600 text-lg",children:["Yay! We're so excited to have you join us. Let's get you started on your journey!",n.jsx("span",{className:"inline-block ml-1",children:"✨"})]})]}),n.jsxs("form",{onSubmit:N,className:"space-y-5",children:[n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Full Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(An,{className:`w-5 h-5 transition-colors ${m.fullName?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:"text",required:!0,value:m.fullName,onChange:j=>g("fullName",j.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-slate-200 rounded-xl focus:ring-4 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"Your full name"})]})]}),n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(Yc,{className:`w-5 h-5 transition-colors ${m.email?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:"email",required:!0,value:m.email,onChange:j=>g("email",j.target.value),className:`w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:ring-4 transition-all duration-200 bg-white/50 backdrop-blur-sm ${m.email&&!b(m.email)?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300"}`,placeholder:"you@example.com"})]}),m.email&&!b(m.email)&&n.jsx(oe.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-sm text-red-600 mt-2",children:"Please enter a valid email address"})]}),n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(sp,{className:`w-5 h-5 transition-colors ${m.password?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:d?"text":"password",required:!0,value:m.password,onChange:j=>g("password",j.target.value),className:"w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl focus:ring-4 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"Create a strong password",minLength:"6"}),n.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:d?n.jsx(Yu,{className:"w-5 h-5"}):n.jsx(pn,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Minimum 6 characters"})]}),n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Confirm Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(Hi,{className:`w-5 h-5 transition-colors ${m.confirmPassword&&m.password===m.confirmPassword?"text-green-500":m.confirmPassword?"text-red-500":"text-slate-400"}`})}),n.jsx("input",{type:d?"text":"password",required:!0,value:m.confirmPassword,onChange:j=>g("confirmPassword",j.target.value),className:`w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:ring-4 transition-all duration-200 bg-white/50 backdrop-blur-sm ${m.confirmPassword&&m.password!==m.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-500/20":m.confirmPassword&&m.password===m.confirmPassword?"border-green-300 focus:border-green-500 focus:ring-green-500/20":"border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300"}`,placeholder:"Type your password again"})]}),m.confirmPassword&&m.password!==m.confirmPassword&&n.jsx(oe.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-sm text-red-600 mt-2",children:"Passwords don't match"})]}),n.jsx(oe.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},type:"submit",disabled:!v()||s,className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 ${v()&&!s?"bg-gradient-to-r from-emerald-600 to-blue-600 hover:from-emerald-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,whileTap:{scale:.98},children:n.jsx("div",{className:"flex items-center justify-center space-x-2",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Creating Your Account..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Join the Community!"}),n.jsx(Nt,{className:"w-5 h-5"})]})})})]}),n.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"mt-8 text-center",children:[n.jsx("p",{className:"text-slate-600 mb-3",children:"Already part of our community?"}),n.jsxs("button",{onClick:t,className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors group",children:[n.jsx("span",{children:"Sign in to your account"}),n.jsx(Nr,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})]}),n.jsx(ed,{message:o,error:a})]})}function KY({onSwitchToLogin:t}){const[e,s]=y.useState(!1),[r,a]=y.useState(""),[i,o]=y.useState(""),[c,d]=y.useState(""),[h,m]=y.useState(!1),p=b=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b),g=async b=>{if(b.preventDefault(),!c.trim()){a("Please enter your email address.");return}if(!p(c)){a("Please enter a valid email address.");return}s(!0),a(""),o("");try{const{error:v}=await $.auth.resetPasswordForEmail(c.trim(),{redirectTo:`${window.location.origin}/reset-password`});if(v){a(v.message);return}m(!0),o("Password reset email sent! Check your inbox and follow the instructions.")}catch(v){a("An unexpected error occurred. Please try again."),console.error("Password reset error:",v)}finally{s(!1)}};return h?n.jsx("div",{className:"w-full",children:n.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"text-center",children:[n.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Hi,{className:"w-8 h-8 text-green-600"})}),n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Check Your Email!",n.jsx(oe.span,{className:"inline-block ml-2",animate:{rotate:[0,14,-8,14,-4,10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:3},children:"📧"})]}),n.jsxs("p",{className:"text-slate-600 text-lg mb-6",children:["We've sent password reset instructions to ",n.jsx("strong",{children:c})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-8",children:n.jsxs("p",{className:"text-sm text-blue-800 text-left",children:[n.jsx("strong",{children:"Next steps:"}),n.jsx("br",{}),"1. Check your email inbox",n.jsx("br",{}),"2. Click the reset link in the email",n.jsx("br",{}),"3. Create your new password"]})}),n.jsxs("button",{onClick:t,className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors group",children:[n.jsx(Zn,{className:"w-4 h-4 transform group-hover:-translate-x-1 transition-transform"}),n.jsx("span",{children:"Back to Sign In"})]})]})}):n.jsxs("div",{className:"w-full",children:[n.jsxs(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Forgot Password?",n.jsx(oe.span,{className:"inline-block ml-2",animate:{rotate:[0,14,-8,14,-4,10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:3},children:"🤔"})]}),n.jsx("p",{className:"text-slate-600 text-lg",children:"No worries! Enter your email and we'll send you reset instructions."})]}),n.jsxs("form",{onSubmit:g,className:"space-y-6",children:[n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(Yc,{className:`w-5 h-5 transition-colors ${c?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:"email",value:c,onChange:b=>{d(b.target.value),r&&a("")},className:`w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:ring-4 transition-all duration-200 bg-white/50 backdrop-blur-sm ${c&&!p(c)?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-slate-200 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300"}`,placeholder:"you@example.com",disabled:e})]}),c&&!p(c)&&n.jsx(oe.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-sm text-red-600 mt-2 flex items-center",children:"Please enter a valid email address"})]}),n.jsx(oe.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},type:"submit",disabled:e||!c.trim()||c&&!p(c),className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 ${c.trim()&&p(c)&&!e?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,whileTap:{scale:.98},children:n.jsx("div",{className:"flex items-center justify-center space-x-2",children:e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Sending reset email..."})]}):n.jsx(n.Fragment,{children:n.jsx("span",{children:"Send Reset Email"})})})})]}),n.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"mt-8 text-center",children:n.jsxs("button",{onClick:t,className:"inline-flex items-center space-x-2 text-slate-600 hover:text-slate-800 font-medium transition-colors group",children:[n.jsx(Zn,{className:"w-4 h-4 transform group-hover:-translate-x-1 transition-transform"}),n.jsx("span",{children:"Back to Sign In"})]})}),n.jsx(ed,{message:i,error:r})]})}function JY(){var j,w;const t=bt(),e=vn(),{session:s,profile:r,loading:a}=_t(),o=new URLSearchParams(e.search).get("view"),c=()=>o==="signup"?"signup":o==="forgot-password"?"forgot-password":"sign_in",[d,h]=y.useState(c()),m=((w=(j=e.state)==null?void 0:j.from)==null?void 0:w.pathname)||"/profile";y.useEffect(()=>{const k=new URLSearchParams(e.search).get("view");h(k==="signup"?"signup":k==="forgot-password"?"forgot-password":"sign_in")},[e.search]),y.useEffect(()=>{!a&&s&&r&&(console.log("User is already logged in, redirecting to:",m),t(m,{replace:!0}))},[s,r,a,t,m]);const p=()=>{console.log("Login successful, will redirect via useEffect")},g=()=>{console.log("Signup successful")},b=()=>{h("signup"),t("/login?view=signup",{replace:!0})},v=()=>{h("sign_in"),t("/login",{replace:!0})},N=()=>{h("forgot-password"),t("/login?view=forgot-password",{replace:!0})};return a?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx(oe.div,{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-gradient-to-br from-blue-200/20 to-indigo-300/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),n.jsx(oe.div,{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-tr from-purple-200/20 to-pink-300/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.4,.7,.4]},transition:{duration:5,repeat:1/0,ease:"easeInOut"}})]}),n.jsxs(oe.div,{className:"text-center relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[n.jsx(oe.div,{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-6",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),n.jsx(oe.p,{className:"text-slate-700 text-lg font-medium",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Preparing your experience..."})]})]}):s&&r?null:n.jsx(aT,{children:n.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[d==="sign_in"&&n.jsx(WY,{onSwitchToSignUp:b,onSwitchToForgotPassword:N,onLoginSuccess:p}),d==="signup"&&n.jsx(YY,{onSwitchToLogin:v,onSignupSuccess:g}),d==="forgot-password"&&n.jsx(KY,{onSwitchToLogin:v})]},d)})}const st={OMEGA_ADMIN:"omega_admin",SUPER_ADMIN:"super_admin",ADMIN:"admin",MEMBER:"member"},Or={PLATFORM_MANAGEMENT:"platform_management",VIEW_ALL_ORGANIZATIONS:"view_all_organizations",EDIT_ORGANIZATION:"edit_organization",MANAGE_ADMINS:"manage_admins",MANAGE_MEMBERS:"manage_members",APPOINT_SUPER_ADMIN:"appoint_super_admin",DELETE_ORGANIZATION:"delete_organization",VIEW_ORGANIZATION:"view_organization"};function XY(t,e,s=!1){var a;return s===!0?!0:((a={[st.SUPER_ADMIN]:[Or.EDIT_ORGANIZATION,Or.MANAGE_ADMINS,Or.MANAGE_MEMBERS,Or.APPOINT_SUPER_ADMIN,Or.DELETE_ORGANIZATION,Or.VIEW_ORGANIZATION],[st.ADMIN]:[Or.EDIT_ORGANIZATION,Or.MANAGE_MEMBERS,Or.VIEW_ORGANIZATION],[st.MEMBER]:[Or.VIEW_ORGANIZATION]}[t])==null?void 0:a.includes(e))||!1}function Wo(t){return t===!0}function nv(t,e,s=!1){return s===!0?[st.MEMBER,st.ADMIN,st.SUPER_ADMIN].includes(e):t===st.SUPER_ADMIN?[st.MEMBER,st.ADMIN,st.SUPER_ADMIN].includes(e):t===st.ADMIN?[st.MEMBER,st.ADMIN].includes(e):!1}function k6(t,e,s=!1){return s===!0?e!==st.OMEGA_ADMIN:t===st.SUPER_ADMIN?[st.SUPER_ADMIN,st.ADMIN,st.MEMBER].includes(e):t===st.ADMIN?[st.ADMIN,st.MEMBER].includes(e):!1}function E6(t,e=!1){return e===!0?!0:[st.SUPER_ADMIN,st.ADMIN].includes(t)}function gf(t,e=!1){return e===!0?"Omega Admin":{[st.SUPER_ADMIN]:"Super Admin",[st.ADMIN]:"Admin",[st.MEMBER]:"Member"}[t]||"Unknown"}function QY(t,e=!1){return e===!0?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":{[st.SUPER_ADMIN]:"bg-purple-100 text-purple-800",[st.ADMIN]:"bg-green-100 text-green-800",[st.MEMBER]:"bg-blue-100 text-blue-800"}[t]||"bg-gray-100 text-gray-800"}async function G1(t){try{const{data:e,error:s}=await $.from("organization_membership_cache").select("*").eq("profile_id",t).order("joined_at",{ascending:!1}).limit(1).single();if(!s&&e)return{id:e.organization_id,name:e.organization_name,type:e.organization_type,tagline:e.organization_tagline,image_url:e.organization_image_url,slug:e.organization_slug,membership:{role:e.role,id:e.id}};try{const{data:r}=await $.from("organization_memberships").select("*").eq("profile_id",t).order("joined_at",{ascending:!1}).limit(1).single();if(r){const{data:a}=await $.from("organizations").select("id, name, type, tagline, image_url, slug").eq("id",r.organization_id).single();if(a)return{...a,membership:{role:r.role,id:r.id}}}}catch(r){console.warn("Fallback query failed (this is expected if RLS is working):",r)}return null}catch(e){return console.error("Error fetching organization info:",e),null}}async function ZY(t){return await G1(t)}async function eK(t){try{const{data:e}=await $.from("organization_membership_cache").select("organization_name, organization_slug").eq("profile_id",t).order("joined_at",{ascending:!1}).limit(1);return e&&e.length>0?[{organizations:{name:e[0].organization_name,slug:e[0].organization_slug}}]:[]}catch(e){return console.error("Error fetching organization for nav:",e),[]}}async function tK(t){try{if(!t||t.length===0)return{};const{data:e}=await $.from("organization_membership_cache").select("profile_id, organization_name, organization_type, role").in("profile_id",t).eq("is_public",!0);if(e){const s={};return e.forEach(r=>{s[r.profile_id]||(s[r.profile_id]={organization_name:r.organization_name,organization_type:r.organization_type,role:r.role})}),s}return{}}catch(e){return console.error("Error fetching bulk memberships:",e),{}}}function sK(){const{profile:t}=_t(),e=bt(),[s,r]=y.useState(!1),[a,i]=y.useState({followersCount:0,followingCount:0,connectionsCount:0}),[o,c]=y.useState(""),[d,h]=y.useState(""),[m,p]=y.useState(!1),g=Wo(t==null?void 0:t.is_omega_admin),b=y.useRef(null);y.useEffect(()=>{const k=C=>{b.current&&!b.current.contains(C.target)&&s&&r(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[s]);const v=y.useCallback(async()=>{if(t!=null&&t.id)try{const{data:k,error:C}=await $.from("organization_memberships").select("role").eq("profile_id",t.id).in("role",["super_admin","admin"]).limit(1);!C&&k&&k.length>0?p(!0):p(!1)}catch(k){console.error("Error checking organization access:",k),p(!1)}},[t==null?void 0:t.id]),N=y.useCallback(async k=>{if(!k)return{name:"",slug:""};try{return await eK(k)}catch(C){return console.error("Error fetching organization data:",C),{name:"",slug:""}}},[]),j=y.useCallback(async()=>{if(t!=null&&t.id)try{const[k,C,E]=await Promise.all([$.from("followers").select("*",{count:"exact",head:!0}).eq("following_id",t.id),$.from("followers").select("*",{count:"exact",head:!0}).eq("follower_id",t.id),$.from("user_connections").select("*",{count:"exact",head:!0}).or(`and(requester_id.eq.${t.id},status.eq.accepted),and(recipient_id.eq.${t.id},status.eq.accepted)`)]);i({followersCount:k.count||0,followingCount:C.count||0,connectionsCount:E.count||0})}catch(k){console.error("Error fetching profile stats:",k)}},[t==null?void 0:t.id]);y.useEffect(()=>{if(j(),v(),t!=null&&t.id&&N(t.id).then(({name:E,slug:A})=>{c(E),h(A)}),!(t!=null&&t.id))return;const k=`profile-stats-${t.id}-${Date.now()}`,C=$.channel(k).on("postgres_changes",{event:"*",schema:"public",table:"followers",filter:`or(follower_id.eq.${t.id},following_id.eq.${t.id})`},j).on("postgres_changes",{event:"*",schema:"public",table:"user_connections",filter:`or(requester_id.eq.${t.id},recipient_id.eq.${t.id})`},j).on("postgres_changes",{event:"*",schema:"public",table:"organization_memberships",filter:`profile_id.eq.${t.id}`},()=>{v(),t!=null&&t.id&&N(t.id).then(({name:E,slug:A})=>{c(E),h(A)})}).subscribe(E=>{E==="CHANNEL_ERROR"&&console.error("Profile stats subscription error")});return()=>{C&&(C.unsubscribe(),setTimeout(()=>{try{$.removeChannel(C)}catch{console.debug("Channel cleanup completed")}},100))}},[t==null?void 0:t.id,j,N,v]);const w=[{section:"Community",links:[{icon:n.jsx(tp,{size:20}),text:"Dashboard",to:"/profile"},{icon:n.jsx(zn,{size:20}),text:"Grants Portal",to:"/profile/grants-portal",hide:!g&&!m},{icon:n.jsx(Br,{size:20}),text:"Hello World",to:"/profile/hello-world"},{icon:n.jsx(dy,{size:20}),text:"Hello Community",to:"/profile/hello-community"},{icon:n.jsx(ot,{size:20}),text:"Discover People",to:"/profile/members"},{icon:n.jsx(qe,{size:20}),text:"My Connections",to:"/profile/connections",badge:a.connectionsCount}]},{section:"Profile",links:[{icon:n.jsx(un,{size:20}),text:"My Organization",to:"/profile/my-organization",hide:g},{icon:n.jsx(Vo,{size:20}),text:"Notifications",to:"/profile/notifications"},{icon:n.jsx(O3,{size:20}),text:"Settings",to:"/profile/settings"}]},{section:"Admin",hide:!g,links:[{icon:n.jsx(jF,{size:20}),text:"Dashboard",to:"/profile/omega-admin"},{icon:n.jsx(y$,{size:20}),text:"Analytics",to:"/profile/omega-admin/analytics"},{icon:n.jsx(zn,{size:20}),text:"Manage Claims",to:"/profile/omega-admin/claims"},{icon:n.jsx(er,{size:20}),text:"Manage Orgs",to:"/profile/omega-admin/organizations"}]}],_=()=>{t!=null&&t.id&&e(`/profile/members/${t.id}`)};return n.jsxs(oe.aside,{ref:b,initial:!1,animate:{width:s?270:80},className:"flex flex-col h-full bg-white border-r border-slate-200 shadow-sm rounded-xl",children:[n.jsxs("div",{className:`flex items-center ${s?"justify-between":"justify-center"} p-4 h-[65px] border-b border-slate-200`,children:[n.jsx(jo,{children:s&&n.jsx(oe.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"font-bold text-lg text-slate-700",children:"My Profile"})}),n.jsx("button",{onClick:()=>r(!s),className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",children:n.jsx(oe.div,{animate:{rotate:s?180:0},transition:{duration:.3},children:n.jsx(T$,{size:20})})})]}),n.jsx(jo,{children:s&&n.jsx(oe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:n.jsx(rK,{profile:t,stats:a,organizationName:o,organizationSlug:d,navigate:e})})}),n.jsx(jo,{children:!s&&n.jsx(oe.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.2}},exit:{scale:0,opacity:0},className:"p-4 flex justify-center",children:n.jsx("button",{onClick:()=>r(!0),className:"hover:scale-105 transition-transform",children:n.jsx(iT,{profile:t})})})}),n.jsx("nav",{className:"flex-1 px-3 py-4 space-y-2 overflow-y-auto",children:w.map((k,C)=>!k.hide&&n.jsxs("div",{children:[n.jsx(jo,{children:s&&n.jsx(oe.h3,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.2}},exit:{opacity:0},className:"px-3 py-1 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:k.section})}),n.jsx("div",{className:"space-y-1",children:k.links.map((E,A)=>!E.hide&&n.jsx(nK,{...E,isExpanded:s},A))})]},C))}),n.jsx("div",{className:"p-3 border-t border-slate-200",children:n.jsxs("button",{onClick:_,className:"group relative flex items-center justify-start w-full h-10 px-3 rounded-lg cursor-pointer transition-colors text-slate-600 hover:bg-blue-50 hover:text-blue-600",title:s?"":"View My Public Profile",children:[n.jsx("div",{className:"flex items-center justify-center w-5 h-5 flex-shrink-0",children:n.jsx($$,{size:20})}),n.jsx(jo,{children:s&&n.jsx(oe.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0,transition:{delay:.2,duration:.2}},exit:{opacity:0,x:-10,transition:{duration:.1}},className:"ml-3 font-medium text-sm overflow-hidden whitespace-nowrap",children:"View My Profile"})}),n.jsx(jo,{children:s&&n.jsx(oe.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,transition:{delay:.3}},exit:{opacity:0,scale:0,transition:{duration:.1}},className:"ml-auto opacity-50 group-hover:opacity-100 transition-opacity",children:n.jsx(Mn,{size:14})})})]})})]})}function nK({to:t,icon:e,text:s,badge:r,isExpanded:a}){const i=({isActive:o})=>`group relative flex items-center justify-start h-10 px-3 rounded-lg cursor-pointer transition-colors ${o?"bg-blue-500 text-white":"text-slate-600 hover:bg-slate-100"}`;return n.jsxs(m0,{to:t,className:i,end:t==="/profile/omega-admin"||t==="/profile",title:a?"":s,children:[n.jsx("div",{className:"flex items-center justify-center w-5 h-5 flex-shrink-0",children:e}),n.jsx(jo,{children:a&&n.jsx(oe.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0,transition:{delay:.2,duration:.2}},exit:{opacity:0,x:-10,transition:{duration:.1}},className:"ml-3 font-medium text-sm overflow-hidden whitespace-nowrap",children:s})}),a&&r>0&&n.jsx(oe.span,{initial:{scale:0},animate:{scale:1,transition:{delay:.3}},className:"ml-auto text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full font-semibold",children:r})]})}function rK({profile:t,stats:e,organizationName:s,organizationSlug:r,navigate:a}){const i=()=>{a(r?`/organizations/${r}`:"/profile/my-organization")};return n.jsxs("div",{className:"p-4 border-b border-slate-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsx(iT,{profile:t,size:"large"}),n.jsx("h2",{className:"text-lg font-semibold text-blue-600 mt-2",children:(t==null?void 0:t.full_name)||"Your Name"}),n.jsx("p",{className:"text-sm text-slate-500",children:(t==null?void 0:t.title)||"No title specified"}),s&&n.jsx("button",{onClick:i,className:"text-xs text-slate-400 mt-1 hover:text-blue-500 hover:underline transition-colors cursor-pointer",children:s})]}),n.jsxs("div",{className:"flex justify-around items-center mt-4 pt-4 border-t border-slate-100",children:[n.jsx(rv,{label:"Connections",value:e.connectionsCount,onClick:()=>a("/profile/connections"),color:"emerald",icon:"🤝"}),n.jsx(rv,{label:"Followers",value:e.followersCount,onClick:()=>a("/profile/followers"),color:"purple",icon:"👥"}),n.jsx(rv,{label:"Following",value:e.followingCount,onClick:()=>a("/profile/following"),color:"blue",icon:"🌟"})]})]})}function rv({label:t,value:e,onClick:s,color:r,icon:a}){return n.jsxs(oe.button,{onClick:s,className:"flex flex-col items-center text-center rounded-xl p-3 transition-all duration-200 w-20 hover:bg-slate-50 hover:scale-105",whileHover:{y:-2},whileTap:{scale:.95},children:[n.jsx("div",{className:"text-lg mb-1",children:a}),n.jsx(oe.p,{className:"text-xl font-bold text-slate-800",initial:{scale:1.2,color:"#3b82f6"},animate:{scale:1,color:"#1e293b"},transition:{duration:.3},children:e},e),n.jsx("p",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-normal leading-tight",children:t})]})}function iT({profile:t,size:e="medium"}){var r,a;const s={medium:"w-10 h-10 text-base",large:"w-16 h-16 text-2xl"};return n.jsxs("div",{className:`relative ${s[e]}`,children:[n.jsx("div",{className:"w-full h-full bg-slate-200 rounded-full flex items-center justify-center overflow-hidden ring-2 ring-white shadow-sm",children:t!=null&&t.avatar_url?n.jsx("img",{src:t.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"font-bold text-slate-600",children:((a=(r=t==null?void 0:t.full_name)==null?void 0:r.charAt(0))==null?void 0:a.toUpperCase())||"?"})}),n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 rounded-full ring-2 ring-white"})]})}function aK({user:t,profile:e,children:s}){const r={left:"lg:col-span-1",main:"lg:col-span-11"};return n.jsx("div",{className:"min-h-full flex flex-col",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 min-h-full",children:[n.jsx("aside",{className:r.left,children:n.jsx("div",{className:"lg:sticky lg:top-24 relative z-50",children:n.jsx(sK,{user:t,profile:e})})}),n.jsx("main",{className:`${r.main} flex flex-col min-h-full`,children:n.jsx("div",{className:"flex-1",children:s})})]})})})}function iK(){var ee;const t=_t(),{session:e,profile:s,loading:r,notifications:a,unreadCount:i,markNotificationsAsRead:o,refreshProfile:c}=t,{setPageBgColor:d}=y.useContext(yn),[h,m]=y.useState({trendingGrants:[],savedGrants:[],posts:[],isDetailModalOpen:!1,selectedGrant:null,dataLoading:!1,error:null,communityMembers:[],followingUsers:[],followerUsers:[],impactMetrics:{grantsApplied:0,grantsReceived:0,totalFunding:0,communitiesHelped:0,postsShared:0,connectionsGrown:0},stories:[],communityEvents:[],suggestedConnections:[],recentActivity:[],totalPosts:0,totalFollowers:0,totalFollowing:0,activeTab:"community",showCreatePost:!1}),{trendingGrants:p,savedGrants:g,posts:b,isDetailModalOpen:v,selectedGrant:N,dataLoading:j,error:w,communityMembers:_,impactMetrics:k,stories:C,activeTab:E,totalPosts:A,totalFollowers:M,totalFollowing:R,suggestedConnections:D}=h;y.useEffect(()=>(d("bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20"),()=>d("bg-white")),[d]);const L=y.useCallback(async ne=>{if(ne){m(X=>({...X,dataLoading:!0,error:null}));try{const X=async()=>{const{data:le,error:ge}=await $.from("posts").select(`
                        *,
                        profiles!posts_profile_id_fkey(id, full_name, avatar_url, role, title, organization_name)
                    `).eq("channel","hello-world").order("created_at",{ascending:!1});return ge?{data:[],error:ge}:{data:await Promise.all((le||[]).map(async xe=>{const{data:De}=await $.from("post_likes").select("reaction_type").eq("post_id",xe.id),Ee={};De==null||De.forEach(Me=>{Me.reaction_type&&(Ee[Me.reaction_type]=(Ee[Me.reaction_type]||0)+1)});const ce=Object.entries(Ee).map(([Me,it])=>({type:Me,count:it})),{count:ye}=await $.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",xe.id),{count:Oe}=await $.from("post_comments").select("*",{count:"exact",head:!0}).eq("post_id",xe.id);return{...xe,likes_count:ye||0,comments_count:Oe||0,reactions:{summary:ce,sample:[]}}})),error:null}},Q=async()=>{try{const{data:le,error:ge}=await $.from("saved_grants").select("id, grant_id, created_at").eq("user_id",ne).order("created_at",{ascending:!1});if(ge||!le)return[];const te=le.map(ye=>ye.grant_id);if(te.length===0)return[];const{data:xe,error:De}=await $.from("grants").select("*").in("id",te);if(De||!xe)return[];const Ee=[...new Set(xe.map(ye=>ye.organization_id).filter(Boolean))];let ce=[];if(Ee.length>0){const{data:ye}=await $.from("organizations").select("id, name, image_url, slug").in("id",Ee);ce=ye||[]}return le.map(ye=>{const Oe=xe.find(it=>it.id===ye.grant_id);if(!Oe)return null;const Me=ce.find(it=>it.id===Oe.organization_id);return{...Oe,dueDate:Oe.deadline,save_id:ye.id,foundationName:(Me==null?void 0:Me.name)||"Unknown Organization",funderLogoUrl:(Me==null?void 0:Me.image_url)||null}}).filter(Boolean)}catch(le){return console.error("Error fetching saved grants:",le),[]}},[de,ve,Pe,He,Qe,be,se]=await Promise.all([Q(),$.rpc("get_trending_grants"),X(),$.from("profiles").select("id").eq("id",ne).single(),$.from("followers").select("follower_id, profiles!followers_follower_id_fkey(id, full_name, avatar_url, title)").eq("following_id",ne),$.from("followers").select("following_id, profiles!followers_following_id_fkey(id, full_name, avatar_url, title)").eq("follower_id",ne),$.from("profiles").select("id, full_name, avatar_url, title, organization_name").neq("id",ne).limit(10)]);m(le=>{var ge,te,xe,De,Ee,ce,ye,Oe,Me;return{...le,dataLoading:!1,savedGrants:de,trendingGrants:ve.data||[],posts:Pe.data||[],totalPosts:((ge=Pe.data)==null?void 0:ge.length)||0,followerUsers:((te=Qe.data)==null?void 0:te.map(it=>it.profiles))||[],totalFollowers:((xe=Qe.data)==null?void 0:xe.length)||0,followingUsers:((De=be.data)==null?void 0:De.map(it=>it.profiles))||[],totalFollowing:((Ee=be.data)==null?void 0:Ee.length)||0,communityMembers:se.data||[],suggestedConnections:((ce=se.data)==null?void 0:ce.slice(0,5))||[],impactMetrics:{grantsApplied:Math.floor(Math.random()*15)+5,grantsReceived:Math.floor(Math.random()*5)+1,totalFunding:Math.floor(Math.random()*5e5)+5e4,communitiesHelped:Math.floor(Math.random()*10)+3,postsShared:((ye=Pe.data)==null?void 0:ye.length)||0,connectionsGrown:(((Oe=Qe.data)==null?void 0:Oe.length)||0)+(((Me=be.data)==null?void 0:Me.length)||0)},stories:[{id:1,type:"grant_success",title:"Grant Success",image:null,viewed:!1},{id:2,type:"community_event",title:"Workshop",image:null,viewed:!0},{id:3,type:"team_update",title:"Team News",image:null,viewed:!1}]}})}catch(X){console.error("Error fetching page data:",X),m(Q=>({...Q,dataLoading:!1,error:"Failed to load data. Please try again."}))}}},[]),B=y.useCallback(ne=>{m(X=>({...X,activeTab:ne}))},[]),O=y.useCallback(async(ne,X)=>{var Q;if((Q=e==null?void 0:e.user)!=null&&Q.id)try{X==="follow"?await $.from("followers").insert({follower_id:e.user.id,following_id:ne}):await $.from("followers").delete().eq("follower_id",e.user.id).eq("following_id",ne),window.dispatchEvent(new CustomEvent("followUpdate",{detail:{action:X,followerId:e.user.id,followingId:ne}})),L(e.user.id)}catch(de){console.error("Error updating follow status:",de)}},[e,L]),P=y.useCallback(ne=>{O(ne,"unfollow")},[O]),z=y.useCallback(ne=>{m(X=>({...X,stories:X.stories.map(Q=>Q.id===ne?{...Q,viewed:!0}:Q)}))},[]),q=y.useCallback(()=>{},[]);y.useEffect(()=>{var ne;(ne=e==null?void 0:e.user)!=null&&ne.id&&L(e.user.id)},[(ee=e==null?void 0:e.user)==null?void 0:ee.id,L]);const I=y.useCallback(ne=>{m(X=>({...X,posts:[{...ne,profiles:s,reactions:{summary:[],sample:[]},likes_count:0,comments_count:0},...X.posts],totalPosts:X.totalPosts+1}))},[s]),V=y.useCallback(ne=>{m(X=>({...X,posts:X.posts.filter(Q=>Q.id!==ne),totalPosts:Math.max(0,X.totalPosts-1)}))},[]),H=y.useCallback(ne=>{m(X=>({...X,selectedGrant:ne,isDetailModalOpen:!0}))},[]),Y=y.useCallback(()=>{m(ne=>({...ne,selectedGrant:null,isDetailModalOpen:!1}))},[]),U=y.useCallback(async ne=>{var Q,de;const{data:X}=await $.from("grants").select("*, grant_categories(categories(*)), grant_locations(locations(*))").eq("id",ne).single();if(X){let ve=null;if(X.organization_id){const{data:Pe}=await $.from("organizations").select("name, image_url").eq("id",X.organization_id).single();ve=Pe}H({...X,foundationName:(ve==null?void 0:ve.name)||"Unknown Organization",funderLogoUrl:(ve==null?void 0:ve.image_url)||null,categories:((Q=X.grant_categories)==null?void 0:Q.map(Pe=>Pe.categories))||[],locations:((de=X.grant_locations)==null?void 0:de.map(Pe=>Pe.locations))||[],dueDate:X.deadline})}},[H]),K=y.useCallback(async ne=>{e&&ne&&(await $.from("saved_grants").insert({user_id:e.user.id,grant_id:ne}),L(e.user.id))},[e,L]),J=y.useCallback(async ne=>{e&&ne&&(await $.from("saved_grants").delete().match({user_id:e.user.id,grant_id:ne}),L(e.user.id))},[e,L]),W=y.useMemo(()=>({...t,profile:s,posts:b,handleNewPost:I,handleDeletePost:V,savedGrants:g,session:e,handleSaveGrant:K,handleUnsaveGrant:J,openDetail:H,activeTab:E,handleTabChange:B,impactMetrics:k,stories:C,handleStoryClick:z,handleCreateStory:q,communityMembers:_,suggestedConnections:D,handleFollowUser:O,handleUnfollowUser:P,socialStats:{totalPosts:A,totalFollowers:M,totalFollowing:R}}),[t,s,b,I,V,g,e,K,J,H,E,B,k,C,z,q,_,D,O,P,A,M,R]);return r||!s?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading your community hub..."})]})}):w?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-sm p-8 rounded-xl shadow-sm border border-red-200",children:[n.jsx("p",{className:"text-red-600 mb-4",children:w}),n.jsx("button",{onClick:()=>L(e.user.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})}):n.jsxs("div",{className:"pb-72",children:[n.jsx(aK,{profile:s,user:e==null?void 0:e.user,savedGrants:g,trendingGrants:p,handleTrendingGrantClick:U,notifications:a,unreadCount:i,onNotificationPanelToggle:o,isLoading:j,children:n.jsx(Tw,{context:W})}),v&&N&&n.jsx(Kc,{grant:N,isOpen:v,onClose:Y,session:e,isSaved:g.some(ne=>ne.id===N.id),onSave:K,onUnsave:J})]})}const oK=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),lK=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),cK=({src:t,fullName:e,size:s="20",className:r=""})=>{const[a,i]=y.useState(!1);y.useEffect(()=>{i(!1)},[t]);const o=d=>d?d.split(" ").filter(h=>h.length>0).map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):"?",c=d=>{if(!d)return"bg-slate-500";const h=["bg-red-500","bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-teal-500"];let m=0;for(let p=0;p<d.length;p++)m=d.charCodeAt(p)+((m<<5)-m);return h[Math.abs(m)%h.length]};return n.jsx("div",{className:`w-${s} h-${s} rounded-full overflow-hidden ${r}`,children:t&&!a?n.jsx("img",{src:t,alt:e||"Avatar",className:"w-full h-full object-cover",onError:()=>i(!0)}):n.jsx("div",{className:`w-full h-full ${c(e)} flex items-center justify-center text-white font-semibold text-sm`,children:o(e)})})},dK=({onImageUploaded:t})=>{const[e,s]=y.useState(!1),[r,a]=y.useState(!1),[i,o]=y.useState(""),c=async g=>{try{if(o(""),!["image/jpeg","image/jpg","image/png","image/webp"].includes(g.type))throw new Error("Please select a valid image file (JPG, PNG, WebP).");if(g.size>5*1024*1024)throw new Error("Image file size must be less than 5MB.");s(!0);const v=g.name.split(".").pop(),N=`avatar-${Date.now()}-${Math.random().toString(36).substring(2)}.${v}`,{error:j}=await $.storage.from("avatars").upload(N,g);if(j)throw new Error(`Upload failed: ${j.message}`);const{data:w}=$.storage.from("avatars").getPublicUrl(N);if(!(w!=null&&w.publicUrl))throw new Error("Failed to get public URL for uploaded image");await t(w.publicUrl)}catch(b){o(b.message||"Failed to upload image")}finally{s(!1)}},d=g=>{var b;return((b=g.target.files)==null?void 0:b[0])&&c(g.target.files[0])},h=g=>{var b;g.preventDefault(),a(!1),(b=g.dataTransfer.files)!=null&&b[0]&&c(g.dataTransfer.files[0])},m=g=>{g.preventDefault(),a(!0)},p=g=>{g.preventDefault(),a(!1)};return n.jsxs("div",{children:[n.jsx("label",{htmlFor:"avatarUpload",className:`cursor-pointer inline-flex items-center px-4 py-2 border border-slate-300 rounded-md shadow-sm text-sm font-medium transition-all ${e?"bg-slate-100 text-slate-400 cursor-not-allowed":"text-slate-700 bg-white hover:bg-slate-50"} ${r?"border-blue-400 bg-blue-50":""}`,onDrop:h,onDragOver:m,onDragLeave:p,children:e?n.jsxs(n.Fragment,{children:[n.jsx(oK,{})," Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(lK,{})," Upload Picture"]})}),n.jsx("input",{id:"avatarUpload",type:"file",className:"hidden",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:d,disabled:e}),n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"PNG, JPG, WebP up to 5MB."}),i&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:i})]})};function uK({avatarUrl:t,fullName:e,onImageUploaded:s,onImageRemoved:r}){return n.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[n.jsx(cK,{src:t,fullName:e,size:"20",className:"flex-shrink-0"},t),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx(dK,{onImageUploaded:s}),t&&n.jsx("button",{type:"button",onClick:r,className:"text-xs text-slate-500 hover:text-red-600 hover:underline transition-colors",children:"Remove Picture"})]})]})}const hK=[{id:"housing",name:"Housing",emoji:"🏠",color:"bg-blue-100 text-blue-800 border-blue-200",hoverColor:"hover:bg-blue-200"},{id:"education",name:"Education",emoji:"📚",color:"bg-green-100 text-green-800 border-green-200",hoverColor:"hover:bg-green-200"},{id:"health",name:"Health",emoji:"🏥",color:"bg-red-100 text-red-800 border-red-200",hoverColor:"hover:bg-red-200"},{id:"environment",name:"Environment",emoji:"🌱",color:"bg-emerald-100 text-emerald-800 border-emerald-200",hoverColor:"hover:bg-emerald-200"},{id:"arts",name:"Arts & Culture",emoji:"🎨",color:"bg-purple-100 text-purple-800 border-purple-200",hoverColor:"hover:bg-purple-200"},{id:"technology",name:"Technology",emoji:"💻",color:"bg-indigo-100 text-indigo-800 border-indigo-200",hoverColor:"hover:bg-indigo-200"},{id:"social-services",name:"Social Services",emoji:"🤝",color:"bg-orange-100 text-orange-800 border-orange-200",hoverColor:"hover:bg-orange-200"},{id:"youth",name:"Youth Programs",emoji:"👶",color:"bg-pink-100 text-pink-800 border-pink-200",hoverColor:"hover:bg-pink-200"},{id:"seniors",name:"Senior Services",emoji:"👴",color:"bg-teal-100 text-teal-800 border-teal-200",hoverColor:"hover:bg-teal-200"},{id:"community",name:"Community Development",emoji:"🏘️",color:"bg-amber-100 text-amber-800 border-amber-200",hoverColor:"hover:bg-amber-200"},{id:"research",name:"Research & Science",emoji:"🔬",color:"bg-cyan-100 text-cyan-800 border-cyan-200",hoverColor:"hover:bg-cyan-200"},{id:"advocacy",name:"Advocacy",emoji:"📢",color:"bg-rose-100 text-rose-800 border-rose-200",hoverColor:"hover:bg-rose-200"}];function mK({interests:t,onChange:e,loading:s}){const r=Array.isArray(t)?t:[],a=i=>{const c=r.includes(i)?r.filter(d=>d!==i):[...r,i];e(c)};return n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Your Interests"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Select the areas you're most interested in."}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:hK.map(i=>{const o=r.includes(i.id);return n.jsx("button",{type:"button",onClick:()=>!s&&a(i.id),disabled:s,className:`p-3 rounded-lg border-2 text-sm font-medium transition-all duration-200 text-left ${o?`${i.color} border-current`:"bg-white text-slate-600 border-slate-200"} ${s?"cursor-not-allowed opacity-50":`${i.hoverColor} hover:border-current cursor-pointer`}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:i.emoji}),n.jsx("span",{children:i.name})]})},i.id)})})]})}const av=["Alameda County","Contra Costa County","Marin County","Napa County","San Francisco County","San Mateo County","Santa Clara County","Solano County","Sonoma County"];function fK({location:t,onChange:e,loading:s}){const r=t&&!av.includes(t),a=r?"other":t||"",[i,o]=y.useState(a),[c,d]=y.useState(r?t:"");y.useEffect(()=>{const p=t&&!av.includes(t);o(p?"other":t||""),d(p?t:"")},[t]);const h=p=>{const g=p.target.value;o(g),g==="other"?(e(""),d("")):e(g)},m=p=>{const g=p.target.value;d(g),e(g)};return n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Your Location"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:'Select your community from the list, or choose "Other" to add your own.'}),n.jsxs("select",{value:i,onChange:h,disabled:s,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",disabled:!0,children:"Select your location..."}),av.map(p=>n.jsx("option",{value:p,children:p},p)),n.jsx("option",{value:"other",children:"Other..."})]}),i==="other"&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Enter Custom Location"}),n.jsx("input",{type:"text",value:c,onChange:m,placeholder:"e.g., Los Angeles, CA",disabled:s,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})]})}const pK=[{value:"",label:"Not specified"},{value:"leadership",label:"Leadership"},{value:"staff",label:"Staff"},{value:"board",label:"Board Member"}];function gK({organizationalRole:t,onChange:e,loading:s}){return n.jsxs("div",{children:[n.jsx("label",{htmlFor:"organizational-role",className:"block text-sm font-medium text-slate-700 mb-2",children:"Your Role"}),n.jsx("select",{id:"organizational-role",value:t,onChange:r=>e(r.target.value),disabled:s,className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:pK.map(r=>n.jsx("option",{value:r.value,children:r.label},r.value))})]})}const xK=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),bK=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});function vK({profile:t,updateNotificationProfile:e,loading:s}){var c;const[r,a]=y.useState(""),i=d=>{if(d.preventDefault(),r&&!t.alert_keywords.includes(r)){const h=[...t.alert_keywords,r];e({alert_keywords:h}),a("")}},o=d=>{const h=t.alert_keywords.filter(m=>m!==d);e({alert_keywords:h})};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Grant Alert Settings"}),n.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Manage your email alerts for new grant opportunities."}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("span",{className:"font-medium text-slate-800",children:"Enable Email Alerts"}),n.jsx("button",{onClick:()=>e({email_alerts_enabled:!t.email_alerts_enabled}),className:`relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${t.email_alerts_enabled?"bg-blue-600":"bg-slate-200"}`,disabled:s,children:n.jsx("span",{className:`inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ${t.email_alerts_enabled?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"keywords",className:"text-sm font-medium text-slate-700 block mb-1",children:"Alert Keywords"}),n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Get notified when new grants match these keywords."}),n.jsxs("form",{onSubmit:i,className:"flex items-center gap-2",children:[n.jsx("input",{id:"keywords",className:"flex-grow px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",type:"text",value:r,onChange:d=>a(d.target.value),placeholder:"e.g., Environment",disabled:s}),n.jsx("button",{type:"submit",className:"flex-shrink-0 bg-blue-100 text-blue-700 p-2.5 rounded-lg hover:bg-blue-200 disabled:opacity-50",disabled:s||!r.trim(),children:n.jsx(xK,{})})]})]}),((c=t.alert_keywords)==null?void 0:c.length)>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Your Keywords:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:t.alert_keywords.map(d=>n.jsxs("div",{className:"flex items-center bg-slate-100 text-slate-800 text-sm font-medium px-3 py-1 rounded-full",children:[n.jsx("span",{children:d}),n.jsx("button",{onClick:()=>o(d),className:"ml-2 text-slate-500 hover:text-slate-800 disabled:opacity-50",disabled:s,children:n.jsx(bK,{})})]},d))})]})]})}function yK(){const[t,e]=y.useState(""),[s,r]=y.useState(""),[a,i]=y.useState(""),[o,c]=y.useState(""),[d,h]=y.useState(!1),[m,p]=y.useState(null);y.useEffect(()=>{(async()=>{const{data:{session:N}}=await $.auth.getSession();p(N),N||i("You must be logged in to change your password.")})();const{data:{subscription:v}}=$.auth.onAuthStateChange((N,j)=>{p(j),i(j?"":"You must be logged in to change your password.")});return()=>v.unsubscribe()},[]);const g=async b=>{if(b.preventDefault(),i(""),c(""),!m){i("You must be logged in to change your password.");return}if(t!==s){i("Passwords do not match.");return}if(t.length<6){i("Password must be at least 6 characters long.");return}h(!0);try{const{error:v}=await $.auth.updateUser({password:t});v?i(v.message):(c("Your password has been updated successfully!"),e(""),r(""))}catch(v){i("An unexpected error occurred. Please try again."),console.error("Password update error:",v)}finally{h(!1)}};return m?n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Change Password"}),n.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Choose a new password for your account."}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"New Password"}),n.jsx("input",{type:"password",value:t,onChange:b=>e(b.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Confirm New Password"}),n.jsx("input",{type:"password",value:s,onChange:b=>r(b.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",required:!0})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{type:"submit",disabled:d||!m,className:"bg-blue-600 text-white py-2.5 px-6 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 font-semibold",children:d?"Updating...":"Update Password"})})]}),a&&n.jsx("div",{className:"text-red-600 text-sm mt-4 font-medium",children:a}),o&&n.jsx("div",{className:"text-green-600 text-sm mt-4 font-medium",children:o})]}):n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Change Password"}),n.jsx("p",{className:"text-red-600 mt-4",children:"Please log in to change your password."})]})}function wK(){const[t,e]=y.useState(""),[s,r]=y.useState(""),[a,i]=y.useState(""),[o,c]=y.useState(!1),d=async h=>{h.preventDefault(),r(""),i(""),c(!0);const{error:m}=await $.auth.updateUser({email:t});m?r(m.message):(i("A confirmation link has been sent to your new email address. Please click the link to finalize the change."),e("")),c(!1)};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Change Email Address"}),n.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"A confirmation will be sent to your new email address to complete the change."}),n.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"New Email Address"}),n.jsx("input",{type:"email",value:t,onChange:h=>e(h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",required:!0})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white py-2.5 px-6 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 font-semibold",children:o?"Sending...":"Update Email"})})]}),s&&n.jsx("div",{className:"text-red-600 text-sm mt-4 font-medium",children:s}),a&&n.jsx("div",{className:"text-green-600 text-sm mt-4 font-medium",children:a})]})}function jK({session:t}){const[e,s]=y.useState(!1),[r,a]=y.useState(""),[i,o]=y.useState(!1),[c,d]=y.useState(""),h=bt(),m=async()=>{if(r!=="DELETE"){d('Please type "DELETE" exactly to confirm account deletion.');return}o(!0),d("");try{await $.from("saved_grants").delete().eq("user_id",t.user.id),await $.from("post_likes").delete().eq("user_id",t.user.id),await $.from("post_comment_likes").delete().eq("user_id",t.user.id),await $.from("post_comments").delete().eq("user_id",t.user.id),await $.from("organization_post_likes").delete().eq("user_id",t.user.id),await $.from("organization_post_comment_likes").delete().eq("user_id",t.user.id),await $.from("organization_post_comments").delete().eq("user_id",t.user.id),await $.from("organization_posts").delete().eq("created_by_user_id",t.user.id),await $.from("organization_memberships").delete().eq("profile_id",t.user.id),await $.from("posts").delete().eq("user_id",t.user.id),await $.from("profile_views").delete().eq("viewer_id",t.user.id);const{error:p}=await $.from("profiles").delete().eq("id",t.user.id);if(p)throw new Error("Failed to delete profile: "+p.message);const g=$.supabaseUrl.replace("/rest/v1","");(await fetch(`${g}/functions/v1/delete-user`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({userId:t.user.id})})).ok||console.warn("Failed to delete auth user, signing out instead"),await $.auth.signOut(),h("/",{replace:!0}),alert("Your account has been successfully deleted.")}catch(p){console.error("Account deletion error:",p),d("An error occurred while deleting your account. Please try again or contact support.")}finally{o(!1)}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Delete Account"}),n.jsx("p",{className:"text-slate-600 mt-1 mb-6",children:"Remove your account if you no longer wish to use the service."}),e?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"⚠️ Warning"}),n.jsx("p",{className:"text-red-700 text-sm",children:"Deleting your account will permanently remove:"}),n.jsxs("ul",{className:"text-red-700 text-sm mt-2 ml-4 list-disc",children:[n.jsx("li",{children:"Your profile and personal information"}),n.jsx("li",{children:"All your posts and comments"}),n.jsx("li",{children:"Your saved grants and preferences"}),n.jsx("li",{children:"Your organization memberships"}),n.jsx("li",{children:"All activity history and interactions"})]}),n.jsx("p",{className:"text-red-700 text-sm mt-2 font-medium",children:"This action is irreversible and your data cannot be recovered."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:'Type "DELETE" to confirm account deletion:'}),n.jsx("input",{type:"text",value:r,onChange:p=>a(p.target.value),placeholder:"DELETE",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),c&&n.jsx("div",{className:"text-red-600 text-sm font-medium",children:c}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:m,disabled:i||r!=="DELETE",className:"bg-red-600 text-white py-2.5 px-6 rounded-lg hover:bg-red-700 disabled:bg-red-400 font-semibold",children:i?"Deleting...":"Permanently Delete Account"}),n.jsx("button",{onClick:()=>{s(!1),a(""),d("")},disabled:i,className:"bg-slate-200 text-slate-700 py-2.5 px-6 rounded-lg hover:bg-slate-300 disabled:bg-slate-100 font-semibold",children:"Cancel"})]})]}):n.jsx("button",{onClick:()=>s(!0),className:"bg-red-600 text-white py-2.5 px-6 rounded-lg hover:bg-red-700 font-semibold",children:"Delete My Account"})]})}const NK=({profile:t,onSave:e,loading:s})=>{const[r,a]=y.useState({linkedin_url:"",twitter_url:"",website_url:""}),[i,o]=y.useState(!1);y.useEffect(()=>{t&&a({linkedin_url:t.linkedin_url||"",twitter_url:t.twitter_url||"",website_url:t.website_url||""})},[t]);const c=(g,b)=>{a(v=>({...v,[g]:b}))},d=async()=>{o(!0);try{await e(r)}finally{o(!1)}},h=[{key:"linkedin_url",name:"LinkedIn",icon:Vw,placeholder:"https://linkedin.com/in/yourprofile",color:"bg-blue-600"},{key:"twitter_url",name:"Twitter/X",icon:Jw,placeholder:"https://twitter.com/yourusername",color:"bg-slate-900"},{key:"website_url",name:"Personal Website",icon:Br,placeholder:"https://yourwebsite.com",color:"bg-green-600"}],m=g=>{if(!g)return!0;try{return new URL(g),!0}catch{return!1}},p=()=>t?Object.keys(r).some(g=>r[g]!==(t[g]||"")):!1;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-slate-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Social Profiles"}),n.jsx("p",{className:"text-slate-500 mb-6",children:"Add your social media profiles and website to help others connect with you."}),n.jsx("div",{className:"space-y-4",children:h.map(g=>{const b=g.icon,v=m(r[g.key]);return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center ${g.color}`,children:n.jsx(b,{className:"w-3 h-3 text-white"})}),g.name]})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"url",value:r[g.key],onChange:N=>c(g.key,N.target.value),placeholder:g.placeholder,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${!v&&r[g.key]?"border-red-300 bg-red-50":"border-slate-300"}`,disabled:s||i}),r[g.key]&&v&&n.jsx("a",{href:r[g.key],target:"_blank",rel:"noopener noreferrer",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:n.jsx(Mn,{className:"w-4 h-4"})})]}),!v&&r[g.key]&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Please enter a valid URL (including https://)"})]},g.key)})}),n.jsx("div",{className:"mt-6 pt-4 border-t",children:n.jsx("button",{onClick:d,disabled:s||i||!p()||Object.keys(r).some(g=>r[g]&&!m(r[g])),className:"bg-blue-600 text-white py-2.5 px-6 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 font-semibold transition-colors",children:i?"Saving...":"Save Social Profiles"})})]})};function SK(){const{profile:t,session:e,refreshProfile:s}=_t(),[r,a]=y.useState(!1),[i,o]=y.useState(null),[c,d]=y.useState(""),[h,m]=y.useState(""),[p,g]=y.useState(""),[b,v]=y.useState(""),[N,j]=y.useState(null),[w,_]=y.useState([]),[k,C]=y.useState(""),[E,A]=y.useState(""),[M,R]=y.useState(""),[D,L]=y.useState(""),[B,O]=y.useState(!1),[P,z]=y.useState(!1),[q,I]=y.useState(!1),[V,H]=y.useState(!1);y.useEffect(()=>{(async()=>{if(t){o(t),d(t.full_name||""),m(t.title||"");const de=await Y(t.id);g(de),C(t.location||""),v(t.bio||""),_(Array.isArray(t.interests)?t.interests:[]),j(t.avatar_url),A(t.organizational_role||"")}})()},[t]);const Y=async Q=>{var ve;if(!Q)return"";const{data:de}=await $.from("organization_memberships").select("organizations!inner(name)").eq("profile_id",Q).order("joined_at",{ascending:!1}).limit(1).single();return((ve=de==null?void 0:de.organizations)==null?void 0:ve.name)||""},U=(Q,de=!1)=>{de?L(Q):R(Q),setTimeout(()=>{L(""),R("")},3e3)},K=async Q=>{Q.preventDefault(),a(!0);const de={full_name:c,title:h,bio:b,updated_at:new Date},{error:ve}=await $.from("profiles").update(de).eq("id",e.user.id);ve?U(ve.message,!0):(U("Profile updated successfully!"),typeof s=="function"&&await s()),a(!1)},J=async Q=>{const de=`${Q}?v=${Date.now()}`,{error:ve}=await $.from("profiles").update({avatar_url:de,updated_at:new Date}).eq("id",e.user.id);ve?U(ve.message,!0):(j(de),U("Avatar updated successfully!"),typeof s=="function"&&await s())},W=async()=>{a(!0);const{error:Q}=await $.from("profiles").update({avatar_url:null,updated_at:new Date}).eq("id",e.user.id);Q?U(Q.message,!0):(j(null),U("Avatar removed successfully!"),typeof s=="function"&&await s()),a(!1)},ee=async(Q,de)=>{const{error:ve}=await $.from("profiles").update({[Q]:de,updated_at:new Date}).eq("id",e.user.id);ve?U(`Failed to save ${Q}`,!0):typeof s=="function"&&await s()},ne=async Q=>{const{error:de}=await $.from("profiles").update({...Q,updated_at:new Date}).eq("id",e.user.id);if(de)throw U(de.message,!0),de;U("Social profiles updated successfully!"),typeof s=="function"&&await s()},X=async Q=>{a(!0);const{data:de,error:ve}=await $.from("profiles").update(Q).eq("id",e.user.id).select().single();ve?U(ve.message,!0):de&&(o(de),U("Notification settings updated!")),a(!1)};return i?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-slate-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Profile Information"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Update your personal and professional information"})]})]})}),n.jsx("div",{className:"p-6",children:n.jsxs("form",{onSubmit:K,className:"space-y-6",children:[n.jsx(uK,{avatarUrl:N,fullName:c,onImageUploaded:J,onImageRemoved:W}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:c,onChange:Q=>d(Q.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all shadow-sm",disabled:r,placeholder:"Enter your full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Your Title"}),n.jsx("input",{type:"text",value:h,onChange:Q=>m(Q.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all shadow-sm",disabled:r,placeholder:"e.g., Program Director, CEO"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Organization Name"}),n.jsx("input",{type:"text",value:p,readOnly:!0,className:"w-full px-4 py-3 border border-slate-200 rounded-lg bg-slate-50 text-slate-500 shadow-sm"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[n.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"This is automatically populated from your linked organization"]})]}),n.jsx(gK,{organizationalRole:E,onChange:Q=>{A(Q),ee("organizational_role",Q)},loading:r}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Bio"}),n.jsx("textarea",{value:b,onChange:Q=>v(Q.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all shadow-sm",placeholder:"Tell others about yourself and your work...",disabled:r}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Share your expertise, interests, and background"}),n.jsxs("p",{className:`text-xs font-medium ${b.length>450?"text-red-500":"text-slate-500"}`,children:[b.length,"/500 characters"]})]})]}),n.jsx("div",{className:"border-t border-slate-200 pt-6",children:n.jsx(fK,{location:k,onChange:Q=>{C(Q),ee("location",Q)},loading:r})}),n.jsx("div",{className:"border-t border-slate-200 pt-6",children:n.jsx(mK,{interests:w,onChange:Q=>{_(Q),ee("interests",Q)},loading:r})}),n.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Your information is secure and private"]}),n.jsx("button",{type:"submit",disabled:r,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-8 rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-blue-400 disabled:to-blue-500 font-semibold shadow-sm transition-all transform hover:scale-105 disabled:transform-none",children:r?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Profile Changes"})]}),M&&n.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"text-green-700 font-medium",children:M})]}),D&&n.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.924-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),n.jsx("span",{className:"text-red-700 font-medium",children:D})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-6 hover:bg-slate-50 transition-colors",onClick:()=>H(!V),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Social Profiles"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Connect your social media and professional profiles"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[V&&n.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:"Expanded"}),n.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:n.jsx("svg",{className:`w-5 h-5 text-slate-600 transform transition-transform duration-200 ${V?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),V&&n.jsx("div",{className:"px-6 pb-6 border-t border-slate-100 bg-slate-50/50",children:n.jsxs("div",{className:"pt-6",children:[n.jsx(NK,{profile:i,onSave:ne,loading:r}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>H(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Close"})})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-6 hover:bg-slate-50 transition-colors",onClick:()=>I(!q),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4 4h5l5 5H4z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Notifications"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Manage how and when you receive notifications"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[q&&n.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full font-medium",children:"Expanded"}),n.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:n.jsx("svg",{className:`w-5 h-5 text-slate-600 transform transition-transform duration-200 ${q?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),q&&n.jsx("div",{className:"px-6 pb-6 border-t border-slate-100 bg-slate-50/50",children:n.jsxs("div",{className:"pt-6",children:[n.jsx(vK,{profile:i,updateNotificationProfile:X,loading:r}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Close"})})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-6 hover:bg-slate-50 transition-colors",onClick:()=>O(!B),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Change Password"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Update your account password for security"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[B&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:"Expanded"}),n.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:n.jsx("svg",{className:`w-5 h-5 text-slate-600 transform transition-transform duration-200 ${B?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),B&&n.jsx("div",{className:"px-6 pb-6 border-t border-slate-100 bg-slate-50/50",children:n.jsxs("div",{className:"pt-6",children:[n.jsx(yK,{}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Close"})})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-6 hover:bg-slate-50 transition-colors",onClick:()=>z(!P),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 7.89a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-1 1v3M4 7h16"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Change Email Address"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Update your account email address"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[P&&n.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full font-medium",children:"Expanded"}),n.jsx("button",{className:"p-2 hover:bg-slate-200 rounded-lg transition-colors",children:n.jsx("svg",{className:`w-5 h-5 text-slate-600 transform transition-transform duration-200 ${P?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),P&&n.jsx("div",{className:"px-6 pb-6 border-t border-slate-100 bg-slate-50/50",children:n.jsxs("div",{className:"pt-6",children:[n.jsx(wK,{}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium transition-colors",children:"Close"})})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 px-6 py-4 border-b border-red-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Account Deletion"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Permanently delete your account and all associated data"})]})]})}),n.jsx("div",{className:"p-6",children:n.jsx(jK,{session:e})})]})]}):n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-24 bg-slate-200 rounded-xl"}),n.jsx("div",{className:"h-24 bg-slate-200 rounded-xl mt-8"})]})}const _K=async(t,e)=>{try{if(t===e)return{success:!0};const s={user_id:e,actor_id:t,type:"new_follower",is_read:!1},{error:r}=await $.from("notifications").insert(s);return r?(console.error("Error creating follower notification:",r),(r.message.includes("constraint")||r.message.includes("check"))&&(console.error("🔍 Constraint error detected. You may need to run the database fix script."),console.error("💡 Check the Supabase SQL editor and run the constraint removal script.")),{success:!1,error:r.message}):(console.log("✅ Follower notification created successfully"),{success:!0})}catch(s){return console.error("Error in createFollowerNotification:",s),{success:!1,error:s.message}}},D0=async(t,e)=>{try{if(!t||!e)return{success:!1,error:"Both follower and following IDs are required"};if(t===e)return{success:!1,error:"Cannot follow yourself"};const{data:s,error:r}=await $.from("followers").select("id").eq("follower_id",t).eq("following_id",e).single();if(r&&r.code!=="PGRST116")return{success:!1,error:r.message};if(s)return{success:!1,error:"Already following this user"};const{error:a}=await $.from("followers").insert({follower_id:t,following_id:e});if(a)return{success:!1,error:a.message};const i=await _K(t,e);return i.success||console.warn("Follow successful but notification failed:",i.error),oT("follow",t,e),{success:!0}}catch(s){return console.error("Error in followUser:",s),{success:!1,error:s.message}}},Ah=async(t,e)=>{try{if(!t||!e)return{success:!1,error:"Both follower and following IDs are required"};const{error:s}=await $.from("followers").delete().match({follower_id:t,following_id:e});return s?{success:!1,error:s.message}:(oT("unfollow",t,e),{success:!0})}catch(s){return console.error("Error in unfollowUser:",s),{success:!1,error:s.message}}},oT=(t,e,s)=>{try{const r=new CustomEvent("followUpdate",{detail:{action:t,followerId:e,followingId:s,timestamp:Date.now()}});window.dispatchEvent(r),console.log(`✅ Broadcasted ${t} event:`,{followerId:e,followingId:s})}catch(r){console.error("Error broadcasting follow event:",r)}},lT=async(t,e)=>{try{if(!t||!e)return{isFollowing:!1};const{data:s,error:r}=await $.from("followers").select("id").eq("follower_id",t).eq("following_id",e).single();return r&&r.code!=="PGRST116"?{isFollowing:!1,error:r.message}:{isFollowing:!!s}}catch(s){return console.error("Error checking follow status:",s),{isFollowing:!1,error:s.message}}},CK=({member:t,currentUserId:e,isFollowing:s,isUpdating:r,onFollowToggle:a})=>{const i=o=>{o.preventDefault(),o.stopPropagation(),a(t.id,s)};return n.jsxs(Ye,{to:`/profile/members/${t.id}`,className:"group text-center flex flex-col h-full bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsx(is,{src:t.avatar_url,fullName:t.full_name,size:"2xl",className:"mx-auto"}),n.jsxs("h3",{className:"text-md font-semibold text-slate-800 group-hover:text-blue-600 transition-colors mt-4 truncate",children:[t.full_name,t.is_omega_admin&&n.jsx(o$,{className:"inline-block w-5 h-5 ml-1 text-blue-500",title:"Verified Admin"})]}),t.title&&n.jsx("p",{className:"text-sm text-slate-600 mt-1 truncate",title:t.title,children:t.title}),t.organization_name&&n.jsx("p",{className:"text-sm text-slate-500 truncate",title:t.organization_name,children:t.organization_name}),(t.mutualsCount>0||t.sharedInterests&&t.sharedInterests.length>0)&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 text-xs text-slate-500 space-y-1.5",children:[t.mutualsCount>0&&n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(qe,{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0"}),n.jsxs("span",{children:[t.mutualsCount," mutual connection",t.mutualsCount!==1?"s":""]})]}),t.sharedInterests&&t.sharedInterests.length>0&&n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx(Nt,{className:"w-3.5 h-3.5 mr-1.5 flex-shrink-0"}),n.jsxs("span",{className:"truncate",children:["Also interested in ",t.sharedInterests[0]]})]})]})]}),n.jsx("div",{className:"mt-5 flex-shrink-0",children:e&&t.id!==e&&n.jsxs("button",{onClick:i,disabled:r,className:`w-full inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[s?n.jsx(br,{className:"w-4 h-4 mr-2"}):n.jsx(ia,{className:"w-4 h-4 mr-2"}),n.jsx("span",{children:r?"Updating...":s?"Following":"Follow"})]})})]})};function kK(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState(!0),[i,o]=y.useState(""),[c,d]=y.useState("all"),[h,m]=y.useState(null),[p,g]=y.useState(new Set);y.useEffect(()=>{t!=null&&t.id?$.from("followers").select("following_id").eq("follower_id",t.id).then(({data:v,error:N})=>{N?(console.error("Error fetching followed users:",N),m(new Set)):m(new Set(v.map(j=>j.following_id)))}):t===null&&m(new Set)},[t]),y.useEffect(()=>{if(h===null)return;const v=setTimeout(async()=>{a(!0);try{let N=$.from("profiles").select("*");if(t!=null&&t.id&&(N=N.neq("id",t.id)),i.trim()){const _=`%${i.trim()}%`;N=N.or(`full_name.ilike.${_},title.ilike.${_},organization_name.ilike.${_}`)}c!=="all"&&(N=N.eq("organization_type",c));const{data:j,error:w}=await N.order("updated_at",{ascending:!1,nullsLast:!0});if(w)throw w;if(j&&j.length>0&&(t!=null&&t.id)){const _=j.map(R=>R.id),{data:k,error:C}=await $.from("followers").select("follower_id, following_id").in("follower_id",_);if(C)throw C;const E=new Map;for(const R of k)E.has(R.follower_id)||E.set(R.follower_id,new Set),E.get(R.follower_id).add(R.following_id);const A=new Set(t.interests||[]),M=j.map(R=>{const D=E.get(R.id)||new Set,L=new Set([...h].filter(O=>D.has(O))),B=(R.interests||[]).filter(O=>A.has(O));return{...R,mutualsCount:L.size,sharedInterests:B}});s(M)}else s(j||[])}catch(N){console.error("Error fetching members:",N),s([])}finally{a(!1)}},300);return()=>clearTimeout(v)},[i,c,h,t]);const b=async(v,N)=>{if(!(t!=null&&t.id)||p.has(v))return;const j=new Set(h);g(w=>new Set(w).add(v)),m(w=>{const _=new Set(w);return N?_.delete(v):_.add(v),_});try{const w=N?Ah:D0,{success:_,error:k}=await w(t.id,v);_||(console.error("Failed to update follow status:",k),m(j))}catch(w){console.error("Error toggling follow status:",w),m(j)}finally{g(w=>{const _=new Set(w);return _.delete(v),_})}};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-slate-900 tracking-tight",children:"Your Community Constellation 🔭"}),n.jsx("p",{className:"text-slate-600 mt-3 max-w-2xl mx-auto text-lg",children:"Discover the bright stars—nonprofit leaders, funders, and changemakers—lighting up our universe."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[n.jsxs("div",{className:"relative flex-grow w-full",children:[n.jsx(ot,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),n.jsx("input",{type:"text",placeholder:"Discover changemakers by name, title, or organization...",value:i,onChange:v=>o(v.target.value),className:"w-full pl-12 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"})]}),n.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",children:n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full h-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"nonprofit",children:"Nonprofit"}),n.jsx("option",{value:"foundation",children:"Foundation"}),n.jsx("option",{value:"government",children:"Government"}),n.jsx("option",{value:"education",children:"Education"}),n.jsx("option",{value:"healthcare",children:"Healthcare"}),n.jsx("option",{value:"for-profit",children:"For-Profit"}),n.jsx("option",{value:"religious",children:"Religious"}),n.jsx("option",{value:"international",children:"International"}),n.jsx("option",{value:"community-member",children:"Community Member"})]})})]}),r?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Discovering amazing people..."})]}):e.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(v=>n.jsx(CK,{member:v,currentUserId:t==null?void 0:t.id,isFollowing:h.has(v.id),isUpdating:p.has(v.id),onFollowToggle:b},v.id))}):n.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:[n.jsx(An,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-2",children:"No Members Found"}),n.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:i||c!=="all"?"No members match your current filters. Try a different search!":"It looks like our constellation is still growing. Be the first star!"})]})]})}const EK=(t,e)=>{try{const s=new CustomEvent("organizationChanged",{detail:{profileId:t,organization:e,timestamp:Date.now()}});return window.dispatchEvent(s),!0}catch(s){return console.error("❌ Failed to dispatch organization change event:",s),!1}},AK=(t,e)=>{try{EK(t,e);const s=new CustomEvent("organizationJoined",{detail:{profileId:t,organization:e,timestamp:Date.now()}});return window.dispatchEvent(s),!0}catch(s){return console.error("❌ Failed to dispatch organization joined event:",s),!1}},W1=(t,e)=>(window.addEventListener(t,e),()=>{window.removeEventListener(t,e)}),TK=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let s=e/31536e3;return s>1?Math.floor(s)+"y":(s=e/2592e3,s>1?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):(s=e/86400,s>1?Math.floor(s)+"d":(s=e/3600,s>1?Math.floor(s)+"h":(s=e/60,s>1?Math.floor(s)+"m":Math.floor(e)+"s"))))};function MK({author:t,createdAt:e,isAuthor:s,onEdit:r,onDelete:a}){const[i,o]=y.useState(!1),c=y.useRef(null),d=bt();y.useEffect(()=>{const p=g=>{c.current&&!c.current.contains(g.target)&&o(!1)};return i&&document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[i]);const h=p=>{p.preventDefault(),p.stopPropagation(),t!=null&&t.id&&d(`/profile/members/${t.id}`)},m=p=>{if(p.preventDefault(),p.stopPropagation(),t!=null&&t.organization_name){const g=t.organization_name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();d(`/organizations/${g}`)}};return t?n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:h,className:"hover:opacity-80 transition-opacity cursor-pointer",title:`View ${t.full_name}'s profile`,children:n.jsx(is,{src:t.avatar_url,fullName:t.full_name,size:"md"})}),n.jsxs("div",{children:[n.jsx("button",{onClick:h,className:"font-bold text-slate-800 hover:text-blue-600 transition-colors cursor-pointer text-left",title:`View ${t.full_name}'s profile`,children:t.full_name}),t.organization_name&&n.jsx("button",{onClick:m,className:"block text-xs text-slate-500 hover:text-blue-600 transition-colors cursor-pointer text-left",title:`Visit ${t.organization_name}`,children:t.organization_name}),!t.organization_name&&t.role&&n.jsx("p",{className:"text-xs text-slate-500",children:t.role})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-slate-500",children:[n.jsx("span",{className:"text-xs",children:TK(e)}),s&&n.jsxs("div",{className:"relative",ref:c,children:[n.jsx("button",{onClick:()=>o(p=>!p),className:"p-1.5 rounded-full hover:bg-slate-100 transition-colors",children:n.jsx(x0,{size:18})}),i&&n.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg border z-20",children:[n.jsx("button",{onClick:()=>{o(!1),r==null||r()},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:"Edit"}),n.jsx("button",{onClick:()=>{o(!1),a==null||a()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tn,{size:14}),n.jsx("span",{children:"Delete"})]})})]})]})]})]}):null}function OK({images:t,onImageClick:e}){if(!t||t.length===0)return null;if(t.length===1)return n.jsxs("div",{className:"mb-4 rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>e(0),children:[n.jsx("div",{className:"max-h-[500px] w-full flex justify-center items-center bg-slate-50",children:n.jsx("img",{src:t[0],alt:"Post image 1",className:"max-h-[500px] w-auto h-auto object-contain",onError:a=>{a.target.style.display="none"}})}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:n.jsx(AC,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",size:24})})]});const r=(a=>({2:[{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-3",aspect:"aspect-[4/3]"}],3:[{span:"col-span-4",aspect:"aspect-[4/3]"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"}],4:[{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-3",aspect:"aspect-[4/3]"}],5:[{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-3",aspect:"aspect-[4/3]"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"}],6:[{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"},{span:"col-span-2",aspect:"aspect-square"}]})[a]||[])(t.length);return n.jsx("div",{className:"mb-4 rounded-lg overflow-hidden",children:n.jsx("div",{className:"grid grid-cols-6 gap-2",style:{height:"300px"},children:t.slice(0,6).map((a,i)=>{const o=r[i]||{span:"col-span-2"};return n.jsxs("div",{className:`relative group cursor-pointer overflow-hidden rounded-lg ${o.span} h-full`,onClick:()=>e(i),children:[n.jsx("img",{src:a,alt:`Post image ${i+1}`,className:"w-full h-full object-cover transition-all duration-300 group-hover:scale-105",onError:c=>{c.target.style.display="none"}}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:n.jsx(AC,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",size:24})}),i===5&&t.length>6&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-xl",children:["+",t.length-6]})})]},i)})})})}function RK({tags:t}){let e=t;if(typeof t=="string")try{e=JSON.parse(t)}catch(s){return console.error("Error parsing tags:",s),null}return!e||!Array.isArray(e)||e.length===0?null:n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.map(s=>n.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${s.color||"bg-gray-100 text-gray-800 border-gray-200"}`,children:n.jsx("span",{children:s.label})},s.id))})}function DK({mention:t,position:e}){const[s,r]=y.useState(null),[a,i]=y.useState(!0),o=bt();y.useEffect(()=>{(async()=>{if(t){i(!0);try{let m=null,p=null;if(t.entityType==="user")console.log("🔍 Fetching user data for:",t.id),{data:m,error:p}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name").eq("id",t.id).single(),m&&(m.title=m.organization_name||"User Profile");else if(t.entityType==="organization"){console.log("🔍 Fetching organization data for:",t.id);let g,b;if(t.id.includes("-")){const j=t.id.split("-");j.length===2&&(g=j[0],b=parseInt(j[1]))}else{console.log("🔄 Trying fallback lookup for mention ID:",t.id);const{data:j}=await $.from("organizations").select("id, type, slug").eq("slug",t.id).single();if(j)g=j.type,b=j.id,console.log("✅ Found organization by slug:",{orgType:g,orgId:b});else{const w=parseInt(t.id);if(!isNaN(w)){const{data:_}=await $.from("organizations").select("id, type, slug").eq("id",w).single();_&&(g=_.type,b=_.id,console.log("✅ Found organization by ID:",{orgType:g,orgId:b}))}}}if(!g||!b||isNaN(b)){console.error("❌ Could not parse organization mention ID:",t.id),r(null),i(!1);return}if(!["nonprofit","funder","foundation","education","healthcare","government","religious","forprofit"].includes(g)){console.error("❌ Invalid organization type:",g),r(null),i(!1);return}console.log(`🏢 Fetching ${g} data for ID:`,b);let N;if(g==="nonprofit"?N="nonprofits":g==="funder"?N="funders":N="organizations",{data:m,error:p}=await $.from(N).select("id, name, description, image_url, slug, type, location").eq("id",b).single(),m){m.full_name=m.name,m.avatar_url=m.image_url;const w=(k=>({nonprofit:"Nonprofit",funder:"Funder",foundation:"Foundation",education:"Education",healthcare:"Healthcare",government:"Government",religious:"Religious",forprofit:"For-Profit"})[k]||"Organization")(m.type||g),_=m.location;_?m.title=`${w} • ${_}`:m.title=w,m.orgType=g,m.orgId=b}}p?(console.error(`❌ Error fetching ${t.entityType} hover card data:`,p),r(null)):m?(console.log(`✅ Successfully fetched ${t.entityType} data:`,m),r(m)):(console.warn(`⚠️ No data found for ${t.entityType}:`,t.id),r(null))}catch(m){console.error(`💥 Exception fetching ${t.entityType} data:`,m),r(null)}i(!1)}})()},[t]);const c=async(h,m)=>{try{let p;h==="nonprofit"?p="nonprofits":h==="funder"?p="funders":p="organizations";const{data:g,error:b}=await $.from(p).select("slug").eq("id",parseInt(m)).single();return b?(console.error(`Error fetching ${h} slug:`,b),null):g==null?void 0:g.slug}catch(p){return console.error(`Exception fetching ${h} slug:`,p),null}},d=async()=>{if(t)try{if(t.entityType==="user")console.log("🔗 Navigating to user profile:",t.id),o(`/profile/members/${t.id}`);else if(t.entityType==="organization"){console.log("🔗 Attempting to navigate to organization:",t.id);let h,m;if(t.id.includes("-")){const b=t.id.split("-");b.length===2&&(h=b[0],m=parseInt(b[1]))}else if(s!=null&&s.orgType&&(s!=null&&s.orgId))h=s.orgType,m=s.orgId,console.log("🔄 Using entityData for navigation:",{orgType:h,orgId:m});else{console.log("🔄 Attempting fallback lookup for navigation:",t.id);const{data:b}=await $.from("organizations").select("id, type, slug").eq("slug",t.id).single();if(b)h=b.type,m=b.id,console.log("✅ Found organization by slug for navigation:",{orgType:h,orgId:m});else{const v=parseInt(t.id);if(!isNaN(v)){const{data:N}=await $.from("organizations").select("id, type, slug").eq("id",v).single();N&&(h=N.type,m=N.id,console.log("✅ Found organization by ID for navigation:",{orgType:h,orgId:m}))}}}if(!h||!m){console.error("❌ Cannot determine organization type/ID for navigation:",t.id),o(`/organizations/${t.id}`);return}if(!["nonprofit","funder","foundation","education","healthcare","government","religious","forprofit"].includes(h)){console.error("❌ Invalid organization type for navigation:",h),o(`/organizations/${t.id}`);return}if(console.log(`🔗 Navigating to ${h} profile:`,m),s!=null&&s.slug){console.log("✨ Using cached slug for navigation:",s.slug),o(h==="nonprofit"?`/nonprofits/${s.slug}`:h==="funder"?`/funders/${s.slug}`:`/organizations/${s.slug}`);return}const g=await c(h,m);if(g)o(h==="nonprofit"?`/nonprofits/${g}`:h==="funder"?`/funders/${g}`:`/organizations/${g}`);else{console.error(`Could not find slug for ${h} with ID ${m}`);let b;h==="nonprofit"?b=`/nonprofits/${m}`:h==="funder"?b=`/funders/${m}`:b=`/organizations/${m}`,console.log(`🔄 Trying fallback navigation: ${b}`),o(b)}}}catch(h){console.error("💥 Error navigating from hover card:",h),t.entityType==="organization"&&o(`/organizations/${t.id}`)}};return e?n.jsx("div",{className:"absolute z-20 bg-white rounded-lg shadow-xl border border-slate-200 w-80 p-4 animate-fade-in-fast",style:{top:e.top,left:e.left},onClick:h=>h.stopPropagation(),children:a?n.jsx("div",{className:"flex items-center justify-center h-24",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(is,{src:s.avatar_url,fullName:s.full_name,size:"lg"}),n.jsxs("div",{className:"ml-3 overflow-hidden",children:[n.jsx("p",{className:"font-bold text-slate-800 truncate",children:s.full_name}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:s.title||(t.entityType==="user"?"User Profile":"Organization")})]})]}),n.jsx("button",{onClick:d,className:"w-full mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"View Profile"})]}):n.jsx("div",{className:"flex items-center justify-center h-24",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-slate-500 text-sm mb-2",children:"Could not load profile."}),n.jsx("p",{className:"text-xs text-slate-400 mb-3",children:t.entityType==="organization"?"Organization data may be from outdated code.":"Profile may no longer exist."}),n.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",children:"Try to Visit"})]})})}):null}function Y1({content:t,images:e,tags:s,onImageClick:r}){const a=bt(),i=300,o=t&&t.includes("<span")&&t.includes("data-type"),c=t&&t.length>i&&!t.includes("<img")&&!o,[d,h]=y.useState(null),[m,p]=y.useState(null),g=y.useRef(null),b=y.useRef(null),v=y.useRef(!1),N=async(A,M)=>{try{const R=A==="nonprofit"?"nonprofits":"funders",{data:D,error:L}=await $.from(R).select("slug").eq("id",parseInt(M)).single();return L?(console.error(`❌ Error fetching ${A} slug:`,L),null):(console.log(`✅ Found ${A} slug:`,D==null?void 0:D.slug),D==null?void 0:D.slug)}catch(R){return console.error(`💥 Exception fetching ${A} slug:`,R),null}},j=async A=>{const M=A.target;if(M.tagName==="SPAN"&&(M.classList.contains("mention")||M.dataset.type)){A.preventDefault(),A.stopPropagation();const R=M.dataset.id,D=M.dataset.type,L=M.dataset.label;if(!R||!D){console.warn("⚠️ Missing mention data for click navigation");return}console.log("🔗 PostBody: Navigating to mention:",{mentionId:R,mentionType:D,mentionLabel:L});try{if(D==="user")console.log(`👤 Navigating to user profile: /profile/members/${R}`),a(`/profile/members/${R}`);else if(D==="organization")if(console.log("🏢 Organization mention ID:",R),R.includes("-")&&/^\w+-\d+$/.test(R)){const[B,O]=R.split("-");console.log("📄 Old format detected, looking up slug for:",{orgType:B,orgId:O});try{const P=await N(B,O);if(P)B==="nonprofit"?(console.log(`🏛️ Navigating to nonprofit: /nonprofits/${P}`),a(`/nonprofits/${P}`)):B==="funder"&&(console.log(`💰 Navigating to funder: /funders/${P}`),a(`/funders/${P}`));else{console.error(`❌ Could not find slug for ${B} with ID ${O}`);const z=B==="nonprofit"?`/nonprofits/${O}`:`/funders/${O}`;console.log(`🔄 Trying fallback navigation: ${z}`),a(z)}}catch(P){console.error("💥 Error during organization navigation:",P)}}else console.log("✨ New format detected, navigating to slug:",R),a(`/organizations/${R}`)}catch(B){console.error("💥 Error during mention navigation:",B)}}},w=A=>{if(!A)return"";const M=document.createElement("div");return M.innerHTML=A,M.querySelectorAll("span").forEach(D=>{const L=D.dataset.type,B=D.dataset.id,O=D.classList.contains("mention");(L||B)&&!O&&D.classList.add("mention")}),M.innerHTML},_=(A,M)=>{g.current&&(clearTimeout(g.current),g.current=null),h(A),p(M)},k=()=>{g.current=setTimeout(()=>{v.current||(h(null),p(null))},100)},C=()=>{g.current&&(clearTimeout(g.current),g.current=null),h(null),p(null),v.current=!1};y.useEffect(()=>{const A=b.current;if(!A)return;const M=R=>{const D=R.target;if(D.tagName==="SPAN"&&(D.classList.contains("mention")||D.dataset.type)){v.current=!0;const L=D.dataset.id,B=D.dataset.label,O=D.dataset.type;if(!L||!O)return;if(!(d&&d.id===L&&d.entityType===O)){const z={id:L,displayName:B,entityType:O},q=D.getBoundingClientRect(),I={top:q.bottom+window.scrollY+8,left:q.left+window.scrollX};_(z,I)}}else v.current=!1,D.closest(".mention-hover-card-wrapper")||k()};return A.addEventListener("mousemove",M),()=>{A.removeEventListener("mousemove",M),g.current&&clearTimeout(g.current)}},[d]);const E=A=>{if(!A)return null;const M=document.createElement("div");M.innerHTML=A;let R=M.textContent||M.innerText||"";if(R=R.replace(/\s+/g," ").trim(),R.length>i){const D=R.substring(0,i).replace(/\s+\S*$/,"");return n.jsxs(n.Fragment,{children:[D,"..."," ",n.jsx("button",{onClick:()=>r&&r(0),className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline",children:"View more"})]})}return R};return n.jsxs("div",{className:"mb-4",children:[t&&n.jsx("div",{className:"mb-4",children:n.jsxs("div",{ref:b,className:"text-slate-700 leading-relaxed whitespace-pre-wrap",onClick:j,children:[n.jsx("style",{children:`
                            .post-content .mention {
                                background-color: #e0e7ff;
                                color: #3730a3;
                                padding: 1px 4px;
                                border-radius: 4px;
                                font-weight: 500;
                                text-decoration: none;
                                cursor: pointer;
                                transition: all 0.2s ease;
                            }
                            .post-content .mention:hover {
                                background-color: #c7d2fe;
                                text-decoration: underline;
                            }
                            .post-content p {
                                margin: 0;
                                line-height: 1.4;
                            }
                            `}),c?n.jsx("div",{className:"post-content",children:E(t)}):n.jsx("div",{dangerouslySetInnerHTML:{__html:w(t)},className:"post-content"})]})}),e&&e.length>0&&n.jsx(OK,{images:e,onImageClick:r}),s&&n.jsx(RK,{tags:s}),d&&m&&n.jsx("div",{className:"mention-hover-card-wrapper",style:{position:"absolute",top:m.top,left:m.left,zIndex:1e4,pointerEvents:"auto"},onMouseEnter:()=>{v.current=!0,g.current&&(clearTimeout(g.current),g.current=null)},onMouseLeave:()=>{v.current=!1,C()},children:n.jsx(DK,{mention:d,position:{top:0,left:0}})})]})}const zo=[{type:"like",Icon:y0,color:"bg-blue-500",label:"Like"},{type:"love",Icon:Nt,color:"bg-red-500",label:"Love"},{type:"celebrate",Icon:Gw,color:"bg-green-500",label:"Celebrate"},{type:"insightful",Icon:b0,color:"bg-yellow-500",label:"Insightful"}];function K1({onReaction:t,onComment:e,onShare:s,selectedReaction:r,disabled:a=!1}){const[i,o]=y.useState(!1),c=y.useRef(null),d=()=>{clearTimeout(c.current),o(!0)},h=()=>{c.current=setTimeout(()=>o(!1),300)},m=zo.find(g=>g.type===r),p=zo[0].Icon;return n.jsxs("div",{className:"border-t pt-3 flex items-center justify-between",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-slate-100 rounded-lg px-3 py-2 transition-colors",onMouseEnter:d,onMouseLeave:h,onClick:()=>!a&&t("like"),children:[m?n.jsx(m.Icon,{size:18,className:`${m.color.replace("bg-","text-")} fill-current`}):n.jsx(p,{size:18,className:"text-slate-500"}),n.jsx("span",{className:`text-sm font-medium ${m?m.color.replace("bg-","text-"):"text-slate-600"}`,children:m?m.label:"Like"})]}),i&&!a&&n.jsx("div",{className:"absolute bottom-full mb-2 bg-white border rounded-lg shadow-lg px-3 py-2 flex space-x-2 z-30",onMouseEnter:d,onMouseLeave:h,children:zo.map(({type:g,Icon:b,color:v,label:N})=>n.jsx("button",{onClick:()=>t(g),className:`p-2 rounded-full hover:scale-110 transition-transform ${v}`,title:N,children:n.jsx(b,{size:16,className:"text-white"})},g))})]}),n.jsxs("button",{onClick:()=>!a&&e(),className:"flex items-center space-x-2 text-slate-600 hover:text-blue-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-colors",disabled:a,children:[n.jsx($r,{size:18}),n.jsx("span",{className:"text-sm font-medium",children:"Comment"})]}),n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-slate-600 hover:text-green-600 hover:bg-slate-100 rounded-lg px-3 py-2 transition-colors",children:[n.jsx(Ww,{size:18}),n.jsx("span",{className:"text-sm font-medium",children:"Share"})]})]})}var iv={exports:{}},ov={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A6;function PK(){if(A6)return ov;A6=1;var t=bh();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function c(p,g){var b=g(),v=r({inst:{value:b,getSnapshot:g}}),N=v[0].inst,j=v[1];return i(function(){N.value=b,N.getSnapshot=g,d(N)&&j({inst:N})},[p,b,g]),a(function(){return d(N)&&j({inst:N}),p(function(){d(N)&&j({inst:N})})},[p]),o(b),b}function d(p){var g=p.getSnapshot;p=p.value;try{var b=g();return!s(p,b)}catch{return!0}}function h(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return ov.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,ov}var T6;function cT(){return T6||(T6=1,iv.exports=PK()),iv.exports}var dT=cT();function qs(t){this.content=t}qs.prototype={constructor:qs,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,s){var r=s&&s!=t?this.remove(s):this,a=r.find(t),i=r.content.slice();return a==-1?i.push(s||t,e):(i[a+1]=e,s&&(i[a]=s)),new qs(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var s=this.content.slice();return s.splice(e,2),new qs(s)},addToStart:function(t,e){return new qs([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var s=this.remove(t).content.slice();return s.push(t,e),new qs(s)},addBefore:function(t,e,s){var r=this.remove(e),a=r.content.slice(),i=r.find(t);return a.splice(i==-1?a.length:i,0,e,s),new qs(a)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=qs.from(t),t.size?new qs(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=qs.from(t),t.size?new qs(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=qs.from(t);for(var s=0;s<t.content.length;s+=2)e=e.remove(t.content[s]);return e},toObject:function(){var t={};return this.forEach(function(e,s){t[e]=s}),t},get size(){return this.content.length>>1}};qs.from=function(t){if(t instanceof qs)return t;var e=[];if(t)for(var s in t)e.push(s,t[s]);return new qs(e)};function uT(t,e,s){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:s;let a=t.child(r),i=e.child(r);if(a==i){s+=a.nodeSize;continue}if(!a.sameMarkup(i))return s;if(a.isText&&a.text!=i.text){for(let o=0;a.text[o]==i.text[o];o++)s++;return s}if(a.content.size||i.content.size){let o=uT(a.content,i.content,s+1);if(o!=null)return o}s+=a.nodeSize}}function hT(t,e,s,r){for(let a=t.childCount,i=e.childCount;;){if(a==0||i==0)return a==i?null:{a:s,b:r};let o=t.child(--a),c=e.child(--i),d=o.nodeSize;if(o==c){s-=d,r-=d;continue}if(!o.sameMarkup(c))return{a:s,b:r};if(o.isText&&o.text!=c.text){let h=0,m=Math.min(o.text.length,c.text.length);for(;h<m&&o.text[o.text.length-h-1]==c.text[c.text.length-h-1];)h++,s--,r--;return{a:s,b:r}}if(o.content.size||c.content.size){let h=hT(o.content,c.content,s-1,r-1);if(h)return h}s-=d,r-=d}}class ke{constructor(e,s){if(this.content=e,this.size=s||0,s==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,s,r,a=0,i){for(let o=0,c=0;c<s;o++){let d=this.content[o],h=c+d.nodeSize;if(h>e&&r(d,a+c,i||null,o)!==!1&&d.content.size){let m=c+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,s-m),r,a+m)}c=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,s,r,a){let i="",o=!0;return this.nodesBetween(e,s,(c,d)=>{let h=c.isText?c.text.slice(Math.max(e,d)-d,s-d):c.isLeaf?a?typeof a=="function"?a(c):a:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(o?o=!1:i+=r),i+=h},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let s=this.lastChild,r=e.firstChild,a=this.content.slice(),i=0;for(s.isText&&s.sameMarkup(r)&&(a[a.length-1]=s.withText(s.text+r.text),i=1);i<e.content.length;i++)a.push(e.content[i]);return new ke(a,this.size+e.size)}cut(e,s=this.size){if(e==0&&s==this.size)return this;let r=[],a=0;if(s>e)for(let i=0,o=0;o<s;i++){let c=this.content[i],d=o+c.nodeSize;d>e&&((o<e||d>s)&&(c.isText?c=c.cut(Math.max(0,e-o),Math.min(c.text.length,s-o)):c=c.cut(Math.max(0,e-o-1),Math.min(c.content.size,s-o-1))),r.push(c),a+=c.nodeSize),o=d}return new ke(r,a)}cutByIndex(e,s){return e==s?ke.empty:e==0&&s==this.content.length?this:new ke(this.content.slice(e,s))}replaceChild(e,s){let r=this.content[e];if(r==s)return this;let a=this.content.slice(),i=this.size+s.nodeSize-r.nodeSize;return a[e]=s,new ke(a,i)}addToStart(e){return new ke([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ke(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(e.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let s=this.content[e];if(!s)throw new RangeError("Index "+e+" out of range for "+this);return s}maybeChild(e){return this.content[e]||null}forEach(e){for(let s=0,r=0;s<this.content.length;s++){let a=this.content[s];e(a,r,s),r+=a.nodeSize}}findDiffStart(e,s=0){return uT(this,e,s)}findDiffEnd(e,s=this.size,r=e.size){return hT(this,e,s,r)}findIndex(e){if(e==0)return xf(0,e);if(e==this.size)return xf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,r=0;;s++){let a=this.child(s),i=r+a.nodeSize;if(i>=e)return i==e?xf(s+1,i):xf(s,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,s){if(!s)return ke.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new ke(s.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ke.empty;let s,r=0;for(let a=0;a<e.length;a++){let i=e[a];r+=i.nodeSize,a&&i.isText&&e[a-1].sameMarkup(i)?(s||(s=e.slice(0,a)),s[s.length-1]=i.withText(s[s.length-1].text+i.text)):s&&s.push(i)}return new ke(s||e,r)}static from(e){if(!e)return ke.empty;if(e instanceof ke)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ke([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ke.empty=new ke([],0);const lv={index:0,offset:0};function xf(t,e){return lv.index=t,lv.offset=e,lv}function yp(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let s=Array.isArray(t);if(Array.isArray(e)!=s)return!1;if(s){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!yp(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!yp(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ft=class By{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,r=!1;for(let a=0;a<e.length;a++){let i=e[a];if(this.eq(i))return e;if(this.type.excludes(i.type))s||(s=e.slice(0,a));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(s||(s=e.slice(0,a)),s.push(this),r=!0),s&&s.push(i)}}return s||(s=e.slice()),r||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&yp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[s.type];if(!r)throw new RangeError(`There is no mark type ${s.type} in this schema`);let a=r.create(s.attrs);return r.checkAttrs(a.attrs),a}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(s[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return By.none;if(e instanceof By)return[e];let s=e.slice();return s.sort((r,a)=>r.type.rank-a.type.rank),s}};Ft.none=[];class wp extends Error{}class Le{constructor(e,s,r){this.content=e,this.openStart=s,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,s){let r=fT(this.content,e+this.openStart,s);return r&&new Le(r,this.openStart,this.openEnd)}removeBetween(e,s){return new Le(mT(this.content,e+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,s){if(!s)return Le.empty;let r=s.openStart||0,a=s.openEnd||0;if(typeof r!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Le(ke.fromJSON(e,s.content),r,a)}static maxOpen(e,s=!0){let r=0,a=0;for(let i=e.firstChild;i&&!i.isLeaf&&(s||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(s||!i.type.spec.isolating);i=i.lastChild)a++;return new Le(e,r,a)}}Le.empty=new Le(ke.empty,0,0);function mT(t,e,s){let{index:r,offset:a}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:c}=t.findIndex(s);if(a==e||i.isText){if(c!=s&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(s))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(mT(i.content,e-a-1,s-a-1)))}function fT(t,e,s,r){let{index:a,offset:i}=t.findIndex(e),o=t.maybeChild(a);if(i==e||o.isText)return t.cut(0,e).append(s).append(t.cut(e));let c=fT(o.content,e-i-1,s);return c&&t.replaceChild(a,o.copy(c))}function zK(t,e,s){if(s.openStart>t.depth)throw new wp("Inserted content deeper than insertion position");if(t.depth-s.openStart!=e.depth-s.openEnd)throw new wp("Inconsistent open depths");return pT(t,e,s,0)}function pT(t,e,s,r){let a=t.index(r),i=t.node(r);if(a==e.index(r)&&r<t.depth-s.openStart){let o=pT(t,e,s,r+1);return i.copy(i.content.replaceChild(a,o))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,c=o.content;return $o(o,c.cut(0,t.parentOffset).append(s.content).append(c.cut(e.parentOffset)))}else{let{start:o,end:c}=LK(s,t);return $o(i,xT(t,o,c,e,r))}else return $o(i,jp(t,e,r))}function gT(t,e){if(!e.type.compatibleContent(t.type))throw new wp("Cannot join "+e.type.name+" onto "+t.type.name)}function Uy(t,e,s){let r=t.node(s);return gT(r,e.node(s)),r}function Lo(t,e){let s=e.length-1;s>=0&&t.isText&&t.sameMarkup(e[s])?e[s]=t.withText(e[s].text+t.text):e.push(t)}function Ou(t,e,s,r){let a=(e||t).node(s),i=0,o=e?e.index(s):a.childCount;t&&(i=t.index(s),t.depth>s?i++:t.textOffset&&(Lo(t.nodeAfter,r),i++));for(let c=i;c<o;c++)Lo(a.child(c),r);e&&e.depth==s&&e.textOffset&&Lo(e.nodeBefore,r)}function $o(t,e){return t.type.checkContent(e),t.copy(e)}function xT(t,e,s,r,a){let i=t.depth>a&&Uy(t,e,a+1),o=r.depth>a&&Uy(s,r,a+1),c=[];return Ou(null,t,a,c),i&&o&&e.index(a)==s.index(a)?(gT(i,o),Lo($o(i,xT(t,e,s,r,a+1)),c)):(i&&Lo($o(i,jp(t,e,a+1)),c),Ou(e,s,a,c),o&&Lo($o(o,jp(s,r,a+1)),c)),Ou(r,null,a,c),new ke(c)}function jp(t,e,s){let r=[];if(Ou(null,t,s,r),t.depth>s){let a=Uy(t,e,s+1);Lo($o(a,jp(t,e,s+1)),r)}return Ou(e,null,s,r),new ke(r)}function LK(t,e){let s=e.depth-t.openStart,a=e.node(s).copy(t.content);for(let i=s-1;i>=0;i--)a=e.node(i).copy(ke.from(a));return{start:a.resolveNoCache(t.openStart+s),end:a.resolveNoCache(a.content.size-t.openEnd-s)}}class ah{constructor(e,s,r){this.pos=e,this.path=s,this.parentOffset=r,this.depth=s.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,s=this.index(this.depth);if(s==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],a=e.child(s);return r?e.child(s).cut(r):a}get nodeBefore(){let e=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(e).cut(0,s):e==0?null:this.parent.child(e-1)}posAtIndex(e,s){s=this.resolveDepth(s);let r=this.path[s*3],a=s==0?0:this.path[s*3-1]+1;for(let i=0;i<e;i++)a+=r.child(i).nodeSize;return a}marks(){let e=this.parent,s=this.index();if(e.content.size==0)return Ft.none;if(this.textOffset)return e.child(s).marks;let r=e.maybeChild(s-1),a=e.maybeChild(s);if(!r){let c=r;r=a,a=c}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!a||!i[o].isInSet(a.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let r=s.marks,a=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!a||!r[i].isInSet(a.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let s=this.depth;s>0;s--)if(this.start(s)<=e&&this.end(s)>=e)return s;return 0}blockRange(e=this,s){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!s||s(this.node(r))))return new Np(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let s=1;s<=this.depth;s++)e+=(e?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return e+":"+this.parentOffset}static resolve(e,s){if(!(s>=0&&s<=e.content.size))throw new RangeError("Position "+s+" out of range");let r=[],a=0,i=s;for(let o=e;;){let{index:c,offset:d}=o.content.findIndex(i),h=i-d;if(r.push(o,c,a+d),!h||(o=o.child(c),o.isText))break;i=h-1,a+=d+1}return new ah(s,r,i)}static resolveCached(e,s){let r=M6.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==s)return o}else M6.set(e,r=new $K);let a=r.elts[r.i]=ah.resolve(e,s);return r.i=(r.i+1)%FK,a}}class $K{constructor(){this.elts=[],this.i=0}}const FK=12,M6=new WeakMap;class Np{constructor(e,s,r){this.$from=e,this.$to=s,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const IK=Object.create(null);let La=class Vy{constructor(e,s,r,a=Ft.none){this.type=e,this.attrs=s,this.marks=a,this.content=r||ke.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,s,r,a=0){this.content.nodesBetween(e,s,r,a,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,s,r,a){return this.content.textBetween(e,s,r,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,s,r){return this.type==e&&yp(this.attrs,s||e.defaultAttrs||IK)&&Ft.sameSet(this.marks,r||Ft.none)}copy(e=null){return e==this.content?this:new Vy(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Vy(this.type,this.attrs,this.content,e)}cut(e,s=this.content.size){return e==0&&s==this.content.size?this:this.copy(this.content.cut(e,s))}slice(e,s=this.content.size,r=!1){if(e==s)return Le.empty;let a=this.resolve(e),i=this.resolve(s),o=r?0:a.sharedDepth(s),c=a.start(o),h=a.node(o).content.cut(a.pos-c,i.pos-c);return new Le(h,a.depth-o,i.depth-o)}replace(e,s,r){return zK(this.resolve(e),this.resolve(s),r)}nodeAt(e){for(let s=this;;){let{index:r,offset:a}=s.content.findIndex(e);if(s=s.maybeChild(r),!s)return null;if(a==e||s.isText)return s;e-=a+1}}childAfter(e){let{index:s,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(s),index:s,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:s,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(s),index:s,offset:r};let a=this.content.child(s-1);return{node:a,index:s-1,offset:r-a.nodeSize}}resolve(e){return ah.resolveCached(this,e)}resolveNoCache(e){return ah.resolve(this,e)}rangeHasMark(e,s,r){let a=!1;return s>e&&this.nodesBetween(e,s,i=>(r.isInSet(i.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),bT(this.marks,e)}contentMatchAt(e){let s=this.type.contentMatch.matchFragment(this.content,0,e);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(e,s,r=ke.empty,a=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,a,i),c=o&&o.matchFragment(this.content,s);if(!c||!c.validEnd)return!1;for(let d=a;d<i;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,s,r,a){if(a&&!this.type.allowsMarks(a))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,s);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ft.none;for(let s=0;s<this.marks.length;s++){let r=this.marks[s];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ft.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(s=>s.toJSON())),e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let r;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=s.marks.map(e.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(s.text,r)}let a=ke.fromJSON(e,s.content),i=e.nodeType(s.type).create(s.attrs,a,r);return i.type.checkAttrs(i.attrs),i}};La.prototype.text=void 0;class Sp extends La{constructor(e,s,r,a){if(super(e,s,null,a),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bT(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,s){return this.text.slice(e,s)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sp(this.type,this.attrs,e,this.marks)}cut(e=0,s=this.text.length){return e==0&&s==this.text.length?this:this.withText(this.text.slice(e,s))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function bT(t,e){for(let s=t.length-1;s>=0;s--)e=t[s].type.name+"("+e+")";return e}class Yo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,s){let r=new BK(e,s);if(r.next==null)return Yo.empty;let a=vT(r);r.next&&r.err("Unexpected trailing text");let i=YK(WK(a));return KK(i,r),i}matchType(e){for(let s=0;s<this.next.length;s++)if(this.next[s].type==e)return this.next[s].next;return null}matchFragment(e,s=0,r=e.childCount){let a=this;for(let i=s;a&&i<r;i++)a=a.matchType(e.child(i).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:s}=this.next[e];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(e){for(let s=0;s<this.next.length;s++)for(let r=0;r<e.next.length;r++)if(this.next[s].type==e.next[r].type)return!0;return!1}fillBefore(e,s=!1,r=0){let a=[this];function i(o,c){let d=o.matchFragment(e,r);if(d&&(!s||d.validEnd))return ke.from(c.map(h=>h.createAndFill()));for(let h=0;h<o.next.length;h++){let{type:m,next:p}=o.next[h];if(!(m.isText||m.hasRequiredAttrs())&&a.indexOf(p)==-1){a.push(p);let g=i(p,c.concat(m));if(g)return g}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let s=this.computeWrapping(e);return this.wrapCache.push(e,s),s}computeWrapping(e){let s=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let a=r.shift(),i=a.match;if(i.matchType(e)){let o=[];for(let c=a;c.type;c=c.via)o.push(c.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:c,next:d}=i.next[o];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in s)&&(!a.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:a}),s[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function s(r){e.push(r);for(let a=0;a<r.next.length;a++)e.indexOf(r.next[a].next)==-1&&s(r.next[a].next)}return s(this),e.map((r,a)=>{let i=a+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Yo.empty=new Yo(!0);class BK{constructor(e,s){this.string=e,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function vT(t){let e=[];do e.push(UK(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function UK(t){let e=[];do e.push(VK(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function VK(t){let e=GK(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=qK(t,e);else break;return e}function O6(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function qK(t,e){let s=O6(t),r=s;return t.eat(",")&&(t.next!="}"?r=O6(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:s,max:r,expr:e}}function HK(t,e){let s=t.nodeTypes,r=s[e];if(r)return[r];let a=[];for(let i in s){let o=s[i];o.isInGroup(e)&&a.push(o)}return a.length==0&&t.err("No node type or group '"+e+"' found"),a}function GK(t){if(t.eat("(")){let e=vT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=HK(t,t.next).map(s=>(t.inline==null?t.inline=s.isInline:t.inline!=s.isInline&&t.err("Mixing inline and block content"),{type:"name",value:s}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function WK(t){let e=[[]];return a(i(t,0),s()),e;function s(){return e.push([])-1}function r(o,c,d){let h={term:d,to:c};return e[o].push(h),h}function a(o,c){o.forEach(d=>d.to=c)}function i(o,c){if(o.type=="choice")return o.exprs.reduce((d,h)=>d.concat(i(h,c)),[]);if(o.type=="seq")for(let d=0;;d++){let h=i(o.exprs[d],c);if(d==o.exprs.length-1)return h;a(h,c=s())}else if(o.type=="star"){let d=s();return r(c,d),a(i(o.expr,d),d),[r(d)]}else if(o.type=="plus"){let d=s();return a(i(o.expr,c),d),a(i(o.expr,d),d),[r(d)]}else{if(o.type=="opt")return[r(c)].concat(i(o.expr,c));if(o.type=="range"){let d=c;for(let h=0;h<o.min;h++){let m=s();a(i(o.expr,d),m),d=m}if(o.max==-1)a(i(o.expr,d),d);else for(let h=o.min;h<o.max;h++){let m=s();r(d,m),a(i(o.expr,d),m),d=m}return[r(d)]}else{if(o.type=="name")return[r(c,void 0,o.value)];throw new Error("Unknown expr type")}}}}function yT(t,e){return e-t}function R6(t,e){let s=[];return r(e),s.sort(yT);function r(a){let i=t[a];if(i.length==1&&!i[0].term)return r(i[0].to);s.push(a);for(let o=0;o<i.length;o++){let{term:c,to:d}=i[o];!c&&s.indexOf(d)==-1&&r(d)}}}function YK(t){let e=Object.create(null);return s(R6(t,0));function s(r){let a=[];r.forEach(o=>{t[o].forEach(({term:c,to:d})=>{if(!c)return;let h;for(let m=0;m<a.length;m++)a[m][0]==c&&(h=a[m][1]);R6(t,d).forEach(m=>{h||a.push([c,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let i=e[r.join(",")]=new Yo(r.indexOf(t.length-1)>-1);for(let o=0;o<a.length;o++){let c=a[o][1].sort(yT);i.next.push({type:a[o][0],next:e[c.join(",")]||s(c)})}return i}}function KK(t,e){for(let s=0,r=[t];s<r.length;s++){let a=r[s],i=!a.validEnd,o=[];for(let c=0;c<a.next.length;c++){let{type:d,next:h}=a.next[c];o.push(d.name),i&&!(d.isText||d.hasRequiredAttrs())&&(i=!1),r.indexOf(h)==-1&&r.push(h)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function wT(t){let e=Object.create(null);for(let s in t){let r=t[s];if(!r.hasDefault)return null;e[s]=r.default}return e}function jT(t,e){let s=Object.create(null);for(let r in t){let a=e&&e[r];if(a===void 0){let i=t[r];if(i.hasDefault)a=i.default;else throw new RangeError("No value supplied for attribute "+r)}s[r]=a}return s}function NT(t,e,s,r){for(let a in e)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${s} of type ${a}`);for(let a in t){let i=t[a];i.validate&&i.validate(e[a])}}function ST(t,e){let s=Object.create(null);if(e)for(let r in e)s[r]=new XK(t,r,e[r]);return s}let D6=class _T{constructor(e,s,r){this.name=e,this.schema=s,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ST(e,r.attrs),this.defaultAttrs=wT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Yo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jT(this.attrs,e)}create(e=null,s,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new La(this,this.computeAttrs(e),ke.from(s),Ft.setFrom(r))}createChecked(e=null,s,r){return s=ke.from(s),this.checkContent(s),new La(this,this.computeAttrs(e),s,Ft.setFrom(r))}createAndFill(e=null,s,r){if(e=this.computeAttrs(e),s=ke.from(s),s.size){let o=this.contentMatch.fillBefore(s);if(!o)return null;s=o.append(s)}let a=this.contentMatch.matchFragment(s),i=a&&a.fillBefore(ke.empty,!0);return i?new La(this,e,s.append(i),Ft.setFrom(r)):null}validContent(e){let s=this.contentMatch.matchFragment(e);if(!s||!s.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){NT(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let s=0;s<e.length;s++)if(!this.allowsMarkType(e[s].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let s;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?s&&s.push(e[r]):s||(s=e.slice(0,r));return s?s.length?s:Ft.none:e}static compile(e,s){let r=Object.create(null);e.forEach((i,o)=>r[i]=new _T(i,s,o));let a=s.spec.topNode||"doc";if(!r[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function JK(t,e,s){let r=s.split("|");return a=>{let i=a===null?"null":typeof a;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class XK{constructor(e,s,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?JK(e,s,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class P0{constructor(e,s,r,a){this.name=e,this.rank=s,this.schema=r,this.spec=a,this.attrs=ST(e,a.attrs),this.excluded=null;let i=wT(this.attrs);this.instance=i?new Ft(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Ft(this,jT(this.attrs,e))}static compile(e,s){let r=Object.create(null),a=0;return e.forEach((i,o)=>r[i]=new P0(i,a++,s,o)),r}removeFromSet(e){for(var s=0;s<e.length;s++)e[s].type==this&&(e=e.slice(0,s).concat(e.slice(s+1)),s--);return e}isInSet(e){for(let s=0;s<e.length;s++)if(e[s].type==this)return e[s]}checkAttrs(e){NT(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class CT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let a in e)s[a]=e[a];s.nodes=qs.from(e.nodes),s.marks=qs.from(e.marks||{}),this.nodes=D6.compile(this.spec.nodes,this),this.marks=P0.compile(this.spec.marks,this);let r=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let i=this.nodes[a],o=i.spec.content||"",c=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Yo.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=c=="_"?null:c?P6(this,c.split(" ")):c==""||!i.inlineContent?[]:null}for(let a in this.marks){let i=this.marks[a],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:P6(this,o.split(" "))}this.nodeFromJSON=a=>La.fromJSON(this,a),this.markFromJSON=a=>Ft.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,s=null,r,a){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof D6){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(s,r,a)}text(e,s){let r=this.nodes.text;return new Sp(r,r.defaultAttrs,e,Ft.setFrom(s))}mark(e,s){return typeof e=="string"&&(e=this.marks[e]),e.create(s)}nodeType(e){let s=this.nodes[e];if(!s)throw new RangeError("Unknown node type: "+e);return s}}function P6(t,e){let s=[];for(let r=0;r<e.length;r++){let a=e[r],i=t.marks[a],o=i;if(i)s.push(i);else for(let c in t.marks){let d=t.marks[c];(a=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(a)>-1)&&s.push(o=d)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return s}function QK(t){return t.tag!=null}function ZK(t){return t.style!=null}class Oi{constructor(e,s){this.schema=e,this.rules=s,this.tags=[],this.styles=[];let r=this.matchedStyles=[];s.forEach(a=>{if(QK(a))this.tags.push(a);else if(ZK(a)){let i=/[^=]*/.exec(a.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let i=e.nodes[a.node];return i.contentMatch.matchType(i)})}parse(e,s={}){let r=new L6(this,s,!1);return r.addAll(e,Ft.none,s.from,s.to),r.finish()}parseSlice(e,s={}){let r=new L6(this,s,!0);return r.addAll(e,Ft.none,s.from,s.to),Le.maxOpen(r.finish())}matchTag(e,s,r){for(let a=r?this.tags.indexOf(r)+1:0;a<this.tags.length;a++){let i=this.tags[a];if(sJ(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||s.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,s,r,a){for(let i=a?this.styles.indexOf(a)+1:0;i<this.styles.length;i++){let o=this.styles[i],c=o.style;if(!(c.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=s))){if(o.getAttrs){let d=o.getAttrs(s);if(d===!1)continue;o.attrs=d||void 0}return o}}}static schemaRules(e){let s=[];function r(a){let i=a.priority==null?50:a.priority,o=0;for(;o<s.length;o++){let c=s[o];if((c.priority==null?50:c.priority)<i)break}s.splice(o,0,a)}for(let a in e.marks){let i=e.marks[a].spec.parseDOM;i&&i.forEach(o=>{r(o=$6(o)),o.mark||o.ignore||o.clearMark||(o.mark=a)})}for(let a in e.nodes){let i=e.nodes[a].spec.parseDOM;i&&i.forEach(o=>{r(o=$6(o)),o.node||o.ignore||o.mark||(o.node=a)})}return s}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Oi(e,Oi.schemaRules(e)))}}const kT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},eJ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ET={ol:!0,ul:!0},ih=1,qy=2,Ru=4;function z6(t,e,s){return e!=null?(e?ih:0)|(e==="full"?qy:0):t&&t.whitespace=="pre"?ih|qy:s&~Ru}class bf{constructor(e,s,r,a,i,o){this.type=e,this.attrs=s,this.marks=r,this.solid=a,this.options=o,this.content=[],this.activeMarks=Ft.none,this.match=i||(o&Ru?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(ke.from(e));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let r=this.type.contentMatch,a;return(a=r.findWrapping(e.type))?(this.match=r,a):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ih)){let r=this.content[this.content.length-1],a;if(r&&r.isText&&(a=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-a[0].length))}}let s=ke.from(this.content);return!e&&this.match&&(s=s.append(this.match.fillBefore(ke.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!kT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class L6{constructor(e,s,r){this.parser=e,this.options=s,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let a=s.topNode,i,o=z6(null,s.preserveWhitespace,0)|(r?Ru:0);a?i=new bf(a.type,a.attrs,Ft.none,!0,s.topMatch||a.type.contentMatch,o):r?i=new bf(null,null,Ft.none,!0,null,o):i=new bf(e.schema.topNodeType,null,Ft.none,!0,null,o),this.nodes=[i],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,s){e.nodeType==3?this.addTextNode(e,s):e.nodeType==1&&this.addElement(e,s)}addTextNode(e,s){let r=e.nodeValue,a=this.top,i=a.options&qy?"full":this.localPreserveWS||(a.options&ih)>0;if(i==="full"||a.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=a.content[a.content.length-1],c=e.previousSibling;(!o||c&&c.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),s,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,s,r){let a=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),c;ET.hasOwnProperty(o)&&this.parser.normalizeLists&&tJ(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:eJ.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,s);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(kT.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),h=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,s);break e}let p=d&&d.skip?s:this.readStyles(e,s);p&&this.addAll(e,p),h&&this.sync(i),this.needsBlock=m}else{let h=this.readStyles(e,s);h&&this.addElementByRule(e,d,h,d.consuming===!1?c:void 0)}this.localPreserveWS=a}leafFallback(e,s){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),s)}ignoreFallback(e,s){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s,!0)}readStyles(e,s){let r=e.style;if(r&&r.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let i=this.parser.matchedStyles[a],o=r.getPropertyValue(i);if(o)for(let c=void 0;;){let d=this.parser.matchStyle(i,o,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?s=s.filter(h=>!d.clearMark(h)):s=s.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return s}addElementByRule(e,s,r,a){let i,o;if(s.node)if(o=this.parser.schema.nodes[s.node],o.isLeaf)this.insertNode(o.create(s.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(o,s.attrs||null,r,s.preserveWhitespace);d&&(i=!0,r=d)}else{let d=this.parser.schema.marks[s.mark];r=r.concat(d.create(s.attrs))}let c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(a)this.addElement(e,r,a);else if(s.getContent)this.findInside(e),s.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof s.contentElement=="string"?d=e.querySelector(s.contentElement):typeof s.contentElement=="function"?d=s.contentElement(e):s.contentElement&&(d=s.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}i&&this.sync(c)&&this.open--}addAll(e,s,r,a){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,c=a==null?null:e.childNodes[a];o!=c;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,s);this.findAtPoint(e,i)}findPlace(e,s,r){let a,i;for(let o=this.open,c=0;o>=0;o--){let d=this.nodes[o],h=d.findWrapping(e);if(h&&(!a||a.length>h.length+c)&&(a=h,i=d,!h.length))break;if(d.solid){if(r)break;c+=2}}if(!a)return null;this.sync(i);for(let o=0;o<a.length;o++)s=this.enterInner(a[o],null,s,!1);return s}insertNode(e,s,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(s=this.enterInner(i,null,s))}let a=this.findPlace(e,s,r);if(a){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=Ft.none;for(let c of a.concat(e.marks))(i.type?i.type.allowsMarkType(c.type):F6(c.type,e.type))&&(o=c.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,s,r,a){let i=this.findPlace(e.create(s),r,!1);return i&&(i=this.enterInner(e,s,r,!0,a)),i}enterInner(e,s,r,a=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let c=z6(e,i,o.options);o.options&Ru&&o.content.length==0&&(c|=Ru);let d=Ft.none;return r=r.filter(h=>(o.type?o.type.allowsMarkType(h.type):F6(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new bf(e,s,d,a,null,c)),this.open++,r}closeExtra(e=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let s=this.open;s>=0;s--){if(this.nodes[s]==e)return this.open=s,!0;this.localPreserveWS&&(this.nodes[s].options|=ih)}return!1}get currentPos(){this.closeExtra();let e=0;for(let s=this.open;s>=0;s--){let r=this.nodes[s].content;for(let a=r.length-1;a>=0;a--)e+=r[a].nodeSize;s&&e++}return e}findAtPoint(e,s){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==s&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(e,s,r){if(e!=s&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)&&s.compareDocumentPosition(this.find[a].node)&(r?2:4)&&(this.find[a].pos=this.currentPos)}findInText(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&(this.find[s].pos=this.currentPos-(e.nodeValue.length-this.find[s].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let s=e.split("/"),r=this.options.context,a=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(a?0:1),o=(c,d)=>{for(;c>=0;c--){let h=s[c];if(h==""){if(c==s.length-1||c==0)continue;for(;d>=i;d--)if(o(c-1,d))return!0;return!1}else{let m=d>0||d==0&&a?this.nodes[d].type:r&&d>=i?r.node(d-i).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return o(s.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let s=e.depth;s>=0;s--){let r=e.node(s).contentMatchAt(e.indexAfter(s)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let s in this.parser.schema.nodes){let r=this.parser.schema.nodes[s];if(r.isTextblock&&r.defaultAttrs)return r}}}function tJ(t){for(let e=t.firstChild,s=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ET.hasOwnProperty(r)&&s?(s.appendChild(e),e=s):r=="li"?s=e:r&&(s=null)}}function sJ(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function $6(t){let e={};for(let s in t)e[s]=t[s];return e}function F6(t,e){let s=e.schema.nodes;for(let r in s){let a=s[r];if(!a.allowsMarkType(t))continue;let i=[],o=c=>{i.push(c);for(let d=0;d<c.edgeCount;d++){let{type:h,next:m}=c.edge(d);if(h==e||i.indexOf(m)<0&&o(m))return!0}};if(o(a.contentMatch))return!0}}class nl{constructor(e,s){this.nodes=e,this.marks=s}serializeFragment(e,s={},r){r||(r=cv(s).createDocumentFragment());let a=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let c=0,d=0;for(;c<i.length&&d<o.marks.length;){let h=o.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(i[c][0])||h.type.spec.spanning===!1)break;c++,d++}for(;c<i.length;)a=i.pop()[1];for(;d<o.marks.length;){let h=o.marks[d++],m=this.serializeMark(h,o.isInline,s);m&&(i.push([h,a]),a.appendChild(m.dom),a=m.contentDOM||m.dom)}}a.appendChild(this.serializeNodeInner(o,s))}),r}serializeNodeInner(e,s){let{dom:r,contentDOM:a}=Uf(cv(s),this.nodes[e.type.name](e),null,e.attrs);if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,s,a)}return r}serializeNode(e,s={}){let r=this.serializeNodeInner(e,s);for(let a=e.marks.length-1;a>=0;a--){let i=this.serializeMark(e.marks[a],e.isInline,s);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,s,r={}){let a=this.marks[e.type.name];return a&&Uf(cv(r),a(e,s),null,e.attrs)}static renderSpec(e,s,r=null,a){return Uf(e,s,r,a)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new nl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let s=I6(e.nodes);return s.text||(s.text=r=>r.text),s}static marksFromSchema(e){return I6(e.marks)}}function I6(t){let e={};for(let s in t){let r=t[s].spec.toDOM;r&&(e[s]=r)}return e}function cv(t){return t.document||window.document}const B6=new WeakMap;function nJ(t){let e=B6.get(t);return e===void 0&&B6.set(t,e=rJ(t)),e}function rJ(t){let e=null;function s(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let a=0;a<r.length;a++)s(r[a]);else for(let a in r)s(r[a])}return s(t),e}function Uf(t,e,s,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let a=e[0],i;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=nJ(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=a.indexOf(" ");o>0&&(s=a.slice(0,o),a=a.slice(o+1));let c,d=s?t.createElementNS(s,a):t.createElement(a),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let p in h)if(h[p]!=null){let g=p.indexOf(" ");g>0?d.setAttributeNS(p.slice(0,g),p.slice(g+1),h[p]):p=="style"&&d.style?d.style.cssText=h[p]:d.setAttribute(p,h[p])}}for(let p=m;p<e.length;p++){let g=e[p];if(g===0){if(p<e.length-1||p>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:b,contentDOM:v}=Uf(t,g,s,r);if(d.appendChild(b),v){if(c)throw new RangeError("Multiple content holes");c=v}}}return{dom:d,contentDOM:c}}const AT=65535,TT=Math.pow(2,16);function aJ(t,e){return t+e*TT}function U6(t){return t&AT}function iJ(t){return(t-(t&AT))/TT}const MT=1,OT=2,Vf=4,RT=8;class Hy{constructor(e,s,r){this.pos=e,this.delInfo=s,this.recover=r}get deleted(){return(this.delInfo&RT)>0}get deletedBefore(){return(this.delInfo&(MT|Vf))>0}get deletedAfter(){return(this.delInfo&(OT|Vf))>0}get deletedAcross(){return(this.delInfo&Vf)>0}}class Yn{constructor(e,s=!1){if(this.ranges=e,this.inverted=s,!e.length&&Yn.empty)return Yn.empty}recover(e){let s=0,r=U6(e);if(!this.inverted)for(let a=0;a<r;a++)s+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[r*3]+s+iJ(e)}mapResult(e,s=1){return this._map(e,s,!1)}map(e,s=1){return this._map(e,s,!0)}_map(e,s,r){let a=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?a:0);if(d>e)break;let h=this.ranges[c+i],m=this.ranges[c+o],p=d+h;if(e<=p){let g=h?e==d?-1:e==p?1:s:s,b=d+a+(g<0?0:m);if(r)return b;let v=e==(s<0?d:p)?null:aJ(c/3,e-d),N=e==d?OT:e==p?MT:Vf;return(s<0?e!=d:e!=p)&&(N|=RT),new Hy(b,N,v)}a+=m-h}return r?e+a:new Hy(e+a,0,null)}touches(e,s){let r=0,a=U6(s),i=this.inverted?2:1,o=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[c+i],m=d+h;if(e<=m&&c==a*3)return!0;r+=this.ranges[c+o]-h}return!1}forEach(e){let s=this.inverted?2:1,r=this.inverted?1:2;for(let a=0,i=0;a<this.ranges.length;a+=3){let o=this.ranges[a],c=o-(this.inverted?i:0),d=o+(this.inverted?0:i),h=this.ranges[a+s],m=this.ranges[a+r];e(c,c+h,d,d+m),i+=m-h}}invert(){return new Yn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Yn.empty:new Yn(e<0?[0,-e,0]:[0,0,e])}}Yn.empty=new Yn([]);class oh{constructor(e,s,r=0,a=e?e.length:0){this.mirror=s,this.from=r,this.to=a,this._maps=e||[],this.ownData=!(e||s)}get maps(){return this._maps}slice(e=0,s=this.maps.length){return new oh(this._maps,this.mirror,e,s)}appendMap(e,s){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),s!=null&&this.setMirror(this._maps.length-1,s)}appendMapping(e){for(let s=0,r=this._maps.length;s<e._maps.length;s++){let a=e.getMirror(s);this.appendMap(e._maps[s],a!=null&&a<s?r+a:void 0)}}getMirror(e){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==e)return this.mirror[s+(s%2?-1:1)]}}setMirror(e,s){this.mirror||(this.mirror=[]),this.mirror.push(e,s)}appendMappingInverted(e){for(let s=e.maps.length-1,r=this._maps.length+e._maps.length;s>=0;s--){let a=e.getMirror(s);this.appendMap(e._maps[s].invert(),a!=null&&a>s?r-a-1:void 0)}}invert(){let e=new oh;return e.appendMappingInverted(this),e}map(e,s=1){if(this.mirror)return this._map(e,s,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,s);return e}mapResult(e,s=1){return this._map(e,s,!1)}_map(e,s,r){let a=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],c=o.mapResult(e,s);if(c.recover!=null){let d=this.getMirror(i);if(d!=null&&d>i&&d<this.to){i=d,e=this._maps[d].recover(c.recover);continue}}a|=c.delInfo,e=c.pos}return r?e:new Hy(e,a,null)}}const dv=Object.create(null);class on{getMap(){return Yn.empty}merge(e){return null}static fromJSON(e,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=dv[s.stepType];if(!r)throw new RangeError(`No step type ${s.stepType} defined`);return r.fromJSON(e,s)}static jsonID(e,s){if(e in dv)throw new RangeError("Duplicate use of step JSON ID "+e);return dv[e]=s,s.prototype.jsonID=e,s}}class xs{constructor(e,s){this.doc=e,this.failed=s}static ok(e){return new xs(e,null)}static fail(e){return new xs(null,e)}static fromReplace(e,s,r,a){try{return xs.ok(e.replace(s,r,a))}catch(i){if(i instanceof wp)return xs.fail(i.message);throw i}}}function J1(t,e,s){let r=[];for(let a=0;a<t.childCount;a++){let i=t.child(a);i.content.size&&(i=i.copy(J1(i.content,e,i))),i.isInline&&(i=e(i,s,a)),r.push(i)}return ke.fromArray(r)}class Ei extends on{constructor(e,s,r){super(),this.from=e,this.to=s,this.mark=r}apply(e){let s=e.slice(this.from,this.to),r=e.resolve(this.from),a=r.node(r.sharedDepth(this.to)),i=new Le(J1(s.content,(o,c)=>!o.isAtom||!c.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),a),s.openStart,s.openEnd);return xs.fromReplace(e,this.from,this.to,i)}invert(){return new zr(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return s.deleted&&r.deleted||s.pos>=r.pos?null:new Ei(s.pos,r.pos,this.mark)}merge(e){return e instanceof Ei&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ei(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ei(s.from,s.to,e.markFromJSON(s.mark))}}on.jsonID("addMark",Ei);class zr extends on{constructor(e,s,r){super(),this.from=e,this.to=s,this.mark=r}apply(e){let s=e.slice(this.from,this.to),r=new Le(J1(s.content,a=>a.mark(this.mark.removeFromSet(a.marks)),e),s.openStart,s.openEnd);return xs.fromReplace(e,this.from,this.to,r)}invert(){return new Ei(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return s.deleted&&r.deleted||s.pos>=r.pos?null:new zr(s.pos,r.pos,this.mark)}merge(e){return e instanceof zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new zr(s.from,s.to,e.markFromJSON(s.mark))}}on.jsonID("removeMark",zr);class Ai extends on{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return xs.fail("No node at mark step's position");let r=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return xs.fromReplace(e,this.pos,this.pos+1,new Le(ke.from(r),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);if(s){let r=this.mark.addToSet(s.marks);if(r.length==s.marks.length){for(let a=0;a<s.marks.length;a++)if(!s.marks[a].isInSet(r))return new Ai(this.pos,s.marks[a]);return new Ai(this.pos,this.mark)}}return new Ko(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new Ai(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ai(s.pos,e.markFromJSON(s.mark))}}on.jsonID("addNodeMark",Ai);class Ko extends on{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return xs.fail("No node at mark step's position");let r=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return xs.fromReplace(e,this.pos,this.pos+1,new Le(ke.from(r),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new Ai(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new Ko(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ko(s.pos,e.markFromJSON(s.mark))}}on.jsonID("removeNodeMark",Ko);class Ds extends on{constructor(e,s,r,a=!1){super(),this.from=e,this.to=s,this.slice=r,this.structure=a}apply(e){return this.structure&&Gy(e,this.from,this.to)?xs.fail("Structure replace would overwrite content"):xs.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Yn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ds(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let s=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return s.deletedAcross&&r.deletedAcross?null:new Ds(s.pos,Math.max(s.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ds)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let s=this.slice.size+e.slice.size==0?Le.empty:new Le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ds(this.from,this.to+(e.to-e.from),s,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let s=this.slice.size+e.slice.size==0?Le.empty:new Le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ds(e.from,this.to,s,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ds(s.from,s.to,Le.fromJSON(e,s.slice),!!s.structure)}}on.jsonID("replace",Ds);class zs extends on{constructor(e,s,r,a,i,o,c=!1){super(),this.from=e,this.to=s,this.gapFrom=r,this.gapTo=a,this.slice=i,this.insert=o,this.structure=c}apply(e){if(this.structure&&(Gy(e,this.from,this.gapFrom)||Gy(e,this.gapTo,this.to)))return xs.fail("Structure gap-replace would overwrite content");let s=e.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return xs.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,s.content);return r?xs.fromReplace(e,this.from,this.to,r):xs.fail("Content does not fit in gap")}getMap(){return new Yn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let s=this.gapTo-this.gapFrom;return new zs(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let s=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),a=this.from==this.gapFrom?s.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return s.deletedAcross&&r.deletedAcross||a<s.pos||i>r.pos?null:new zs(s.pos,r.pos,a,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zs(s.from,s.to,s.gapFrom,s.gapTo,Le.fromJSON(e,s.slice),s.insert,!!s.structure)}}on.jsonID("replaceAround",zs);function Gy(t,e,s){let r=t.resolve(e),a=s-e,i=r.depth;for(;a>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,a--;if(a>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;a>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,a--}}return!1}function oJ(t,e,s,r){let a=[],i=[],o,c;t.doc.nodesBetween(e,s,(d,h,m)=>{if(!d.isInline)return;let p=d.marks;if(!r.isInSet(p)&&m.type.allowsMarkType(r.type)){let g=Math.max(h,e),b=Math.min(h+d.nodeSize,s),v=r.addToSet(p);for(let N=0;N<p.length;N++)p[N].isInSet(v)||(o&&o.to==g&&o.mark.eq(p[N])?o.to=b:a.push(o=new zr(g,b,p[N])));c&&c.to==g?c.to=b:i.push(c=new Ei(g,b,r))}}),a.forEach(d=>t.step(d)),i.forEach(d=>t.step(d))}function lJ(t,e,s,r){let a=[],i=0;t.doc.nodesBetween(e,s,(o,c)=>{if(!o.isInline)return;i++;let d=null;if(r instanceof P0){let h=o.marks,m;for(;m=r.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else r?r.isInSet(o.marks)&&(d=[r]):d=o.marks;if(d&&d.length){let h=Math.min(c+o.nodeSize,s);for(let m=0;m<d.length;m++){let p=d[m],g;for(let b=0;b<a.length;b++){let v=a[b];v.step==i-1&&p.eq(a[b].style)&&(g=v)}g?(g.to=h,g.step=i):a.push({style:p,from:Math.max(c,e),to:h,step:i})}}}),a.forEach(o=>t.step(new zr(o.from,o.to,o.style)))}function X1(t,e,s,r=s.contentMatch,a=!0){let i=t.doc.nodeAt(e),o=[],c=e+1;for(let d=0;d<i.childCount;d++){let h=i.child(d),m=c+h.nodeSize,p=r.matchType(h.type);if(!p)o.push(new Ds(c,m,Le.empty));else{r=p;for(let g=0;g<h.marks.length;g++)s.allowsMarkType(h.marks[g].type)||t.step(new zr(c,m,h.marks[g]));if(a&&h.isText&&s.whitespace!="pre"){let g,b=/\r?\n|\r/g,v;for(;g=b.exec(h.text);)v||(v=new Le(ke.from(s.schema.text(" ",s.allowedMarks(h.marks))),0,0)),o.push(new Ds(c+g.index,c+g.index+g[0].length,v))}}c=m}if(!r.validEnd){let d=r.fillBefore(ke.empty,!0);t.replace(c,c,new Le(d,0,0))}for(let d=o.length-1;d>=0;d--)t.step(o[d])}function cJ(t,e,s){return(e==0||t.canReplace(e,t.childCount))&&(s==t.childCount||t.canReplace(0,s))}function td(t){let s=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let a=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&a.canReplace(i,o,s))return r;if(r==0||a.type.spec.isolating||!cJ(a,i,o))break}return null}function dJ(t,e,s){let{$from:r,$to:a,depth:i}=e,o=r.before(i+1),c=a.after(i+1),d=o,h=c,m=ke.empty,p=0;for(let v=i,N=!1;v>s;v--)N||r.index(v)>0?(N=!0,m=ke.from(r.node(v).copy(m)),p++):d--;let g=ke.empty,b=0;for(let v=i,N=!1;v>s;v--)N||a.after(v+1)<a.end(v)?(N=!0,g=ke.from(a.node(v).copy(g)),b++):h++;t.step(new zs(d,h,o,c,new Le(m.append(g),p,b),m.size-p,!0))}function Q1(t,e,s=null,r=t){let a=uJ(t,e),i=a&&hJ(r,e);return i?a.map(V6).concat({type:e,attrs:s}).concat(i.map(V6)):null}function V6(t){return{type:t,attrs:null}}function uJ(t,e){let{parent:s,startIndex:r,endIndex:a}=t,i=s.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return s.canReplaceWith(r,a,o)?i:null}function hJ(t,e){let{parent:s,startIndex:r,endIndex:a}=t,i=s.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let d=(o.length?o[o.length-1]:e).contentMatch;for(let h=r;d&&h<a;h++)d=d.matchType(s.child(h).type);return!d||!d.validEnd?null:o}function mJ(t,e,s){let r=ke.empty;for(let o=s.length-1;o>=0;o--){if(r.size){let c=s[o].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ke.from(s[o].type.create(s[o].attrs,r))}let a=e.start,i=e.end;t.step(new zs(a,i,a,i,new Le(r,0,0),s.length,!0))}function fJ(t,e,s,r,a){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,s,(o,c)=>{let d=typeof a=="function"?a(o):a;if(o.isTextblock&&!o.hasMarkup(r,d)&&pJ(t.doc,t.mapping.slice(i).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!v?h=!1:!b&&v&&(h=!0)}h===!1&&PT(t,o,c,i),X1(t,t.mapping.slice(i).map(c,1),r,void 0,h===null);let m=t.mapping.slice(i),p=m.map(c,1),g=m.map(c+o.nodeSize,1);return t.step(new zs(p,g,p+1,g-1,new Le(ke.from(r.create(d,null,o.marks)),0,0),1,!0)),h===!0&&DT(t,o,c,i),!1}})}function DT(t,e,s,r){e.forEach((a,i)=>{if(a.isText){let o,c=/\r?\n|\r/g;for(;o=c.exec(a.text);){let d=t.mapping.slice(r).map(s+1+i+o.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function PT(t,e,s,r){e.forEach((a,i)=>{if(a.type==a.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(s+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function pJ(t,e,s){let r=t.resolve(e),a=r.index();return r.parent.canReplaceWith(a,a+1,s)}function gJ(t,e,s,r,a){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");s||(s=i.type);let o=s.create(r,null,a||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!s.validContent(i.content))throw new RangeError("Invalid content for node type "+s.name);t.step(new zs(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Le(ke.from(o),0,0),1,!0))}function $a(t,e,s=1,r){let a=t.resolve(e),i=a.depth-s,o=r&&r[r.length-1]||a.parent;if(i<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!o.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let h=a.depth-1,m=s-2;h>i;h--,m--){let p=a.node(h),g=a.index(h);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(g,p.childCount),v=r&&r[m+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let N=r&&r[m]||p;if(!p.canReplace(g+1,p.childCount)||!N.type.validContent(b))return!1}let c=a.indexAfter(i),d=r&&r[0];return a.node(i).canReplaceWith(c,c,d?d.type:a.node(i+1).type)}function xJ(t,e,s=1,r){let a=t.doc.resolve(e),i=ke.empty,o=ke.empty;for(let c=a.depth,d=a.depth-s,h=s-1;c>d;c--,h--){i=ke.from(a.node(c).copy(i));let m=r&&r[h];o=ke.from(m?m.type.create(m.attrs,o):a.node(c).copy(o))}t.step(new Ds(e,e,new Le(i.append(o),s,s),!0))}function Yi(t,e){let s=t.resolve(e),r=s.index();return zT(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(r,r+1)}function bJ(t,e){e.content.size||t.type.compatibleContent(e.type);let s=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let a=0;a<e.childCount;a++){let i=e.child(a),o=i.type==r?t.type.schema.nodes.text:i.type;if(s=s.matchType(o),!s||!t.type.allowsMarks(i.marks))return!1}return s.validEnd}function zT(t,e){return!!(t&&e&&!t.isLeaf&&bJ(t,e))}function z0(t,e,s=-1){let r=t.resolve(e);for(let a=r.depth;;a--){let i,o,c=r.index(a);if(a==r.depth?(i=r.nodeBefore,o=r.nodeAfter):s>0?(i=r.node(a+1),c++,o=r.node(a).maybeChild(c)):(i=r.node(a).maybeChild(c-1),o=r.node(a+1)),i&&!i.isTextblock&&zT(i,o)&&r.node(a).canReplace(c,c+1))return e;if(a==0)break;e=s<0?r.before(a):r.after(a)}}function vJ(t,e,s){let r=null,{linebreakReplacement:a}=t.doc.type.schema,i=t.doc.resolve(e-s),o=i.node().type;if(a&&o.inlineContent){let m=o.whitespace=="pre",p=!!o.contentMatch.matchType(a);m&&!p?r=!1:!m&&p&&(r=!0)}let c=t.steps.length;if(r===!1){let m=t.doc.resolve(e+s);PT(t,m.node(),m.before(),c)}o.inlineContent&&X1(t,e+s-1,o,i.node().contentMatchAt(i.index()),r==null);let d=t.mapping.slice(c),h=d.map(e-s);if(t.step(new Ds(h,d.map(e+s,-1),Le.empty,!0)),r===!0){let m=t.doc.resolve(h);DT(t,m.node(),m.before(),t.steps.length)}return t}function yJ(t,e,s){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),s))return e;if(r.parentOffset==0)for(let a=r.depth-1;a>=0;a--){let i=r.index(a);if(r.node(a).canReplaceWith(i,i,s))return r.before(a+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let a=r.depth-1;a>=0;a--){let i=r.indexAfter(a);if(r.node(a).canReplaceWith(i,i,s))return r.after(a+1);if(i<r.node(a).childCount)return null}return null}function LT(t,e,s){let r=t.resolve(e);if(!s.content.size)return e;let a=s.content;for(let i=0;i<s.openStart;i++)a=a.firstChild.content;for(let i=1;i<=(s.openStart==0&&s.size?2:1);i++)for(let o=r.depth;o>=0;o--){let c=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,d=r.index(o)+(c>0?1:0),h=r.node(o),m=!1;if(i==1)m=h.canReplace(d,d,a);else{let p=h.contentMatchAt(d).findWrapping(a.firstChild.type);m=p&&h.canReplaceWith(d,d,p[0])}if(m)return c==0?r.pos:c<0?r.before(o+1):r.after(o+1)}return null}function L0(t,e,s=e,r=Le.empty){if(e==s&&!r.size)return null;let a=t.resolve(e),i=t.resolve(s);return $T(a,i,r)?new Ds(e,s,r):new wJ(a,i,r).fit()}function $T(t,e,s){return!s.openStart&&!s.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),s.content)}class wJ{constructor(e,s,r){this.$from=e,this.$to=s,this.unplaced=r,this.frontier=[],this.placed=ke.empty;for(let a=0;a<=e.depth;a++){let i=e.node(a);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(a))})}for(let a=e.depth;a>0;a--)this.placed=ke.from(e.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,r=this.$from,a=this.close(e<0?this.$to:r.doc.resolve(e));if(!a)return null;let i=this.placed,o=r.depth,c=a.depth;for(;o&&c&&i.childCount==1;)i=i.firstChild.content,o--,c--;let d=new Le(i,o,c);return e>-1?new zs(r.pos,e,this.$to.pos,this.$to.end(),d,s):d.size||r.pos!=this.$to.pos?new Ds(r.pos,a.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let s=this.unplaced.content,r=0,a=this.unplaced.openEnd;r<e;r++){let i=s.firstChild;if(s.childCount>1&&(a=0),i.type.spec.isolating&&a<=r){e=r;break}s=i.content}for(let s=1;s<=2;s++)for(let r=s==1?e:this.unplaced.openStart;r>=0;r--){let a,i=null;r?(i=uv(this.unplaced.content,r-1).firstChild,a=i.content):a=this.unplaced.content;let o=a.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:h}=this.frontier[c],m,p=null;if(s==1&&(o?h.matchType(o.type)||(p=h.fillBefore(ke.from(o),!1)):i&&d.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:c,parent:i,inject:p};if(s==2&&o&&(m=h.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:c,parent:i,wrap:m};if(i&&h.matchType(i.type))break}}}openMore(){let{content:e,openStart:s,openEnd:r}=this.unplaced,a=uv(e,s);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new Le(e,s+1,Math.max(r,a.size+s>=e.size-r?s+1:0)),!0)}dropNode(){let{content:e,openStart:s,openEnd:r}=this.unplaced,a=uv(e,s);if(a.childCount<=1&&s>0){let i=e.size-s<=s+a.size;this.unplaced=new Le(xu(e,s-1,1),s-1,i?s-1:r)}else this.unplaced=new Le(xu(e,s,1),s,r)}placeNodes({sliceDepth:e,frontierDepth:s,parent:r,inject:a,wrap:i}){for(;this.depth>s;)this.closeFrontierNode();if(i)for(let N=0;N<i.length;N++)this.openFrontierNode(i[N]);let o=this.unplaced,c=r?r.content:o.content,d=o.openStart-e,h=0,m=[],{match:p,type:g}=this.frontier[s];if(a){for(let N=0;N<a.childCount;N++)m.push(a.child(N));p=p.matchFragment(a)}let b=c.size+e-(o.content.size-o.openEnd);for(;h<c.childCount;){let N=c.child(h),j=p.matchType(N.type);if(!j)break;h++,(h>1||d==0||N.content.size)&&(p=j,m.push(FT(N.mark(g.allowedMarks(N.marks)),h==1?d:0,h==c.childCount?b:-1)))}let v=h==c.childCount;v||(b=-1),this.placed=bu(this.placed,s,ke.from(m)),this.frontier[s].match=p,v&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let N=0,j=c;N<b;N++){let w=j.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),j=w.content}this.unplaced=v?e==0?Le.empty:new Le(xu(o.content,e-1,1),e-1,b<0?o.openEnd:e-1):new Le(xu(o.content,e,h),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],s;if(!e.type.isTextblock||!hv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:r}=this.$to,a=this.$to.after(r);for(;r>1&&a==this.$to.end(--r);)++a;return a}findCloseLevel(e){e:for(let s=Math.min(this.depth,e.depth);s>=0;s--){let{match:r,type:a}=this.frontier[s],i=s<e.depth&&e.end(s+1)==e.pos+(e.depth-(s+1)),o=hv(e,s,a,r,i);if(o){for(let c=s-1;c>=0;c--){let{match:d,type:h}=this.frontier[c],m=hv(e,c,h,d,!0);if(!m||m.childCount)continue e}return{depth:s,fit:o,move:i?e.doc.resolve(e.after(s+1)):e}}}}close(e){let s=this.findCloseLevel(e);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=bu(this.placed,s.depth,s.fit)),e=s.move;for(let r=s.depth+1;r<=e.depth;r++){let a=e.node(r),i=a.type.contentMatch.fillBefore(a.content,!0,e.index(r));this.openFrontierNode(a.type,a.attrs,i)}return e}openFrontierNode(e,s=null,r){let a=this.frontier[this.depth];a.match=a.match.matchType(e),this.placed=bu(this.placed,this.depth,ke.from(e.create(s,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(ke.empty,!0);s.childCount&&(this.placed=bu(this.placed,this.frontier.length,s))}}function xu(t,e,s){return e==0?t.cutByIndex(s,t.childCount):t.replaceChild(0,t.firstChild.copy(xu(t.firstChild.content,e-1,s)))}function bu(t,e,s){return e==0?t.append(s):t.replaceChild(t.childCount-1,t.lastChild.copy(bu(t.lastChild.content,e-1,s)))}function uv(t,e){for(let s=0;s<e;s++)t=t.firstChild.content;return t}function FT(t,e,s){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,FT(r.firstChild,e-1,r.childCount==1?s-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),s<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ke.empty,!0)))),t.copy(r)}function hv(t,e,s,r,a){let i=t.node(e),o=a?t.indexAfter(e):t.index(e);if(o==i.childCount&&!s.compatibleContent(i.type))return null;let c=r.fillBefore(i.content,!0,o);return c&&!jJ(s,i.content,o)?c:null}function jJ(t,e,s){for(let r=s;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function NJ(t){return t.spec.defining||t.spec.definingForContent}function SJ(t,e,s,r){if(!r.size)return t.deleteRange(e,s);let a=t.doc.resolve(e),i=t.doc.resolve(s);if($T(a,i,r))return t.step(new Ds(e,s,r));let o=BT(a,t.doc.resolve(s));o[o.length-1]==0&&o.pop();let c=-(a.depth+1);o.unshift(c);for(let g=a.depth,b=a.pos-1;g>0;g--,b--){let v=a.node(g).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(g)>-1?c=g:a.before(g)==b&&o.splice(1,0,-g)}let d=o.indexOf(c),h=[],m=r.openStart;for(let g=r.content,b=0;;b++){let v=g.firstChild;if(h.push(v),b==r.openStart)break;g=v.content}for(let g=m-1;g>=0;g--){let b=h[g],v=NJ(b.type);if(v&&!b.sameMarkup(a.node(Math.abs(c)-1)))m=g;else if(v||!b.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let b=(g+m+1)%(r.openStart+1),v=h[b];if(v)for(let N=0;N<o.length;N++){let j=o[(N+d)%o.length],w=!0;j<0&&(w=!1,j=-j);let _=a.node(j-1),k=a.index(j-1);if(_.canReplaceWith(k,k,v.type,v.marks))return t.replace(a.before(j),w?i.after(j):s,new Le(IT(r.content,0,r.openStart,b),b,r.openEnd))}}let p=t.steps.length;for(let g=o.length-1;g>=0&&(t.replace(e,s,r),!(t.steps.length>p));g--){let b=o[g];b<0||(e=a.before(b),s=i.after(b))}}function IT(t,e,s,r,a){if(e<s){let i=t.firstChild;t=t.replaceChild(0,i.copy(IT(i.content,e+1,s,r,i)))}if(e>r){let i=a.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(ke.empty,!0))}return t}function _J(t,e,s,r){if(!r.isInline&&e==s&&t.doc.resolve(e).parent.content.size){let a=yJ(t.doc,e,r.type);a!=null&&(e=s=a)}t.replaceRange(e,s,new Le(ke.from(r),0,0))}function CJ(t,e,s){let r=t.doc.resolve(e),a=t.doc.resolve(s),i=BT(r,a);for(let o=0;o<i.length;o++){let c=i[o],d=o==i.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),a.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),a.indexAfter(c-1))))return t.delete(r.before(c),a.after(c))}for(let o=1;o<=r.depth&&o<=a.depth;o++)if(e-r.start(o)==r.depth-o&&s>r.end(o)&&a.end(o)-s!=a.depth-o&&r.start(o-1)==a.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),a.index(o-1)))return t.delete(r.before(o),s);t.delete(e,s)}function BT(t,e){let s=[],r=Math.min(t.depth,e.depth);for(let a=r;a>=0;a--){let i=t.start(a);if(i<t.pos-(t.depth-a)||e.end(a)>e.pos+(e.depth-a)||t.node(a).type.spec.isolating||e.node(a).type.spec.isolating)break;(i==e.start(a)||a==t.depth&&a==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&a&&e.start(a-1)==i-1)&&s.push(a)}return s}class jc extends on{constructor(e,s,r){super(),this.pos=e,this.attr=s,this.value=r}apply(e){let s=e.nodeAt(this.pos);if(!s)return xs.fail("No node at attribute step's position");let r=Object.create(null);for(let i in s.attrs)r[i]=s.attrs[i];r[this.attr]=this.value;let a=s.type.create(r,null,s.marks);return xs.fromReplace(e,this.pos,this.pos+1,new Le(ke.from(a),0,s.isLeaf?0:1))}getMap(){return Yn.empty}invert(e){return new jc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new jc(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new jc(s.pos,s.attr,s.value)}}on.jsonID("attr",jc);class lh extends on{constructor(e,s){super(),this.attr=e,this.value=s}apply(e){let s=Object.create(null);for(let a in e.attrs)s[a]=e.attrs[a];s[this.attr]=this.value;let r=e.type.create(s,e.content,e.marks);return xs.ok(r)}getMap(){return Yn.empty}invert(e){return new lh(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new lh(s.attr,s.value)}}on.jsonID("docAttr",lh);let Mc=class extends Error{};Mc=function t(e){let s=Error.call(this,e);return s.__proto__=t.prototype,s};Mc.prototype=Object.create(Error.prototype);Mc.prototype.constructor=Mc;Mc.prototype.name="TransformError";class UT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new oh}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let s=this.maybeStep(e);if(s.failed)throw new Mc(s.failed);return this}maybeStep(e){let s=e.apply(this.doc);return s.failed||this.addStep(e,s.doc),s}get docChanged(){return this.steps.length>0}addStep(e,s){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=s}replace(e,s=e,r=Le.empty){let a=L0(this.doc,e,s,r);return a&&this.step(a),this}replaceWith(e,s,r){return this.replace(e,s,new Le(ke.from(r),0,0))}delete(e,s){return this.replace(e,s,Le.empty)}insert(e,s){return this.replaceWith(e,e,s)}replaceRange(e,s,r){return SJ(this,e,s,r),this}replaceRangeWith(e,s,r){return _J(this,e,s,r),this}deleteRange(e,s){return CJ(this,e,s),this}lift(e,s){return dJ(this,e,s),this}join(e,s=1){return vJ(this,e,s),this}wrap(e,s){return mJ(this,e,s),this}setBlockType(e,s=e,r,a=null){return fJ(this,e,s,r,a),this}setNodeMarkup(e,s,r=null,a){return gJ(this,e,s,r,a),this}setNodeAttribute(e,s,r){return this.step(new jc(e,s,r)),this}setDocAttribute(e,s){return this.step(new lh(e,s)),this}addNodeMark(e,s){return this.step(new Ai(e,s)),this}removeNodeMark(e,s){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(s instanceof Ft)s.isInSet(r.marks)&&this.step(new Ko(e,s));else{let a=r.marks,i,o=[];for(;i=s.isInSet(a);)o.push(new Ko(e,i)),a=i.removeFromSet(a);for(let c=o.length-1;c>=0;c--)this.step(o[c])}return this}split(e,s=1,r){return xJ(this,e,s,r),this}addMark(e,s,r){return oJ(this,e,s,r),this}removeMark(e,s,r){return lJ(this,e,s,r),this}clearIncompatible(e,s,r){return X1(this,e,s,r),this}}const mv=Object.create(null);class ut{constructor(e,s,r){this.$anchor=e,this.$head=s,this.ranges=r||[new kJ(e.min(s),e.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let s=0;s<e.length;s++)if(e[s].$from.pos!=e[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,s=Le.empty){let r=s.content.lastChild,a=null;for(let c=0;c<s.openEnd;c++)a=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let c=0;c<o.length;c++){let{$from:d,$to:h}=o[c],m=e.mapping.slice(i);e.replaceRange(m.map(d.pos),m.map(h.pos),c?Le.empty:s),c==0&&G6(e,i,(r?r.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(e,s){let r=e.steps.length,a=this.ranges;for(let i=0;i<a.length;i++){let{$from:o,$to:c}=a[i],d=e.mapping.slice(r),h=d.map(o.pos),m=d.map(c.pos);i?e.deleteRange(h,m):(e.replaceRangeWith(h,m,s),G6(e,r,s.isInline?-1:1))}}static findFrom(e,s,r=!1){let a=e.parent.inlineContent?new at(e):cc(e.node(0),e.parent,e.pos,e.index(),s,r);if(a)return a;for(let i=e.depth-1;i>=0;i--){let o=s<0?cc(e.node(0),e.node(i),e.before(i+1),e.index(i),s,r):cc(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,s,r);if(o)return o}return null}static near(e,s=1){return this.findFrom(e,s)||this.findFrom(e,-s)||new Qn(e.node(0))}static atStart(e){return cc(e,e,0,0,1)||new Qn(e)}static atEnd(e){return cc(e,e,e.content.size,e.childCount,-1)||new Qn(e)}static fromJSON(e,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=mv[s.type];if(!r)throw new RangeError(`No selection type ${s.type} defined`);return r.fromJSON(e,s)}static jsonID(e,s){if(e in mv)throw new RangeError("Duplicate use of selection JSON ID "+e);return mv[e]=s,s.prototype.jsonID=e,s}getBookmark(){return at.between(this.$anchor,this.$head).getBookmark()}}ut.prototype.visible=!0;class kJ{constructor(e,s){this.$from=e,this.$to=s}}let q6=!1;function H6(t){!q6&&!t.parent.inlineContent&&(q6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class at extends ut{constructor(e,s=e){H6(e),H6(s),super(e,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,s){let r=e.resolve(s.map(this.head));if(!r.parent.inlineContent)return ut.near(r);let a=e.resolve(s.map(this.anchor));return new at(a.parent.inlineContent?a:r,r)}replace(e,s=Le.empty){if(super.replace(e,s),s==Le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof at&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new $0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new at(e.resolve(s.anchor),e.resolve(s.head))}static create(e,s,r=s){let a=e.resolve(s);return new this(a,r==s?a:e.resolve(r))}static between(e,s,r){let a=e.pos-s.pos;if((!r||a)&&(r=a>=0?1:-1),!s.parent.inlineContent){let i=ut.findFrom(s,r,!0)||ut.findFrom(s,-r,!0);if(i)s=i.$head;else return ut.near(s,r)}return e.parent.inlineContent||(a==0?e=s:(e=(ut.findFrom(e,-r,!0)||ut.findFrom(e,r,!0)).$anchor,e.pos<s.pos!=a<0&&(e=s))),new at(e,s)}}ut.jsonID("text",at);class $0{constructor(e,s){this.anchor=e,this.head=s}map(e){return new $0(e.map(this.anchor),e.map(this.head))}resolve(e){return at.between(e.resolve(this.anchor),e.resolve(this.head))}}class Je extends ut{constructor(e){let s=e.nodeAfter,r=e.node(0).resolve(e.pos+s.nodeSize);super(e,r),this.node=s}map(e,s){let{deleted:r,pos:a}=s.mapResult(this.anchor),i=e.resolve(a);return r?ut.near(i):new Je(i)}content(){return new Le(ke.from(this.node),0,0)}eq(e){return e instanceof Je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Z1(this.anchor)}static fromJSON(e,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Je(e.resolve(s.anchor))}static create(e,s){return new Je(e.resolve(s))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Je.prototype.visible=!1;ut.jsonID("node",Je);class Z1{constructor(e){this.anchor=e}map(e){let{deleted:s,pos:r}=e.mapResult(this.anchor);return s?new $0(r,r):new Z1(r)}resolve(e){let s=e.resolve(this.anchor),r=s.nodeAfter;return r&&Je.isSelectable(r)?new Je(s):ut.near(s)}}class Qn extends ut{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,s=Le.empty){if(s==Le.empty){e.delete(0,e.doc.content.size);let r=ut.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,s)}toJSON(){return{type:"all"}}static fromJSON(e){return new Qn(e)}map(e){return new Qn(e)}eq(e){return e instanceof Qn}getBookmark(){return EJ}}ut.jsonID("all",Qn);const EJ={map(){return this},resolve(t){return new Qn(t)}};function cc(t,e,s,r,a,i=!1){if(e.inlineContent)return at.create(t,s);for(let o=r-(a>0?0:1);a>0?o<e.childCount:o>=0;o+=a){let c=e.child(o);if(c.isAtom){if(!i&&Je.isSelectable(c))return Je.create(t,s-(a<0?c.nodeSize:0))}else{let d=cc(t,c,s+a,a<0?c.childCount:0,a,i);if(d)return d}s+=c.nodeSize*a}return null}function G6(t,e,s){let r=t.steps.length-1;if(r<e)return;let a=t.steps[r];if(!(a instanceof Ds||a instanceof zs))return;let i=t.mapping.maps[r],o;i.forEach((c,d,h,m)=>{o==null&&(o=m)}),t.setSelection(ut.near(t.doc.resolve(o),s))}const W6=1,vf=2,Y6=4;class AJ extends UT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|W6)&~vf,this.storedMarks=null,this}get selectionSet(){return(this.updated&W6)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vf,this}ensureMarks(e){return Ft.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vf)>0}addStep(e,s){super.addStep(e,s),this.updated=this.updated&~vf,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,s=!0){let r=this.selection;return s&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ft.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,s,r){let a=this.doc.type.schema;if(s==null)return e?this.replaceSelectionWith(a.text(e),!0):this.deleteSelection();{if(r==null&&(r=s),r=r??s,!e)return this.deleteRange(s,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(s);i=r==s?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(s,r,a.text(e,i)),this.selection.empty||this.setSelection(ut.near(this.selection.$to)),this}}setMeta(e,s){return this.meta[typeof e=="string"?e:e.key]=s,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Y6,this}get scrolledIntoView(){return(this.updated&Y6)>0}}function K6(t,e){return!e||!t?t:t.bind(e)}class vu{constructor(e,s,r){this.name=e,this.init=K6(s.init,r),this.apply=K6(s.apply,r)}}const TJ=[new vu("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new vu("selection",{init(t,e){return t.selection||ut.atStart(e.doc)},apply(t){return t.selection}}),new vu("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,s,r){return r.selection.$cursor?t.storedMarks:null}}),new vu("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class fv{constructor(e,s){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=TJ.slice(),s&&s.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new vu(r.key,r.spec.state,r))})}}class vc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,s=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=s){let a=this.config.plugins[r];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let s=[e],r=this.applyInner(e),a=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let c=this.config.plugins[o];if(c.spec.appendTransaction){let d=a?a[o].n:0,h=a?a[o].state:this,m=d<s.length&&c.spec.appendTransaction.call(c,d?s.slice(d):s,h,r);if(m&&r.filterTransaction(m,o)){if(m.setMeta("appendedTransaction",e),!a){a=[];for(let p=0;p<this.config.plugins.length;p++)a.push(p<o?{state:r,n:s.length}:{state:this,n:0})}s.push(m),r=r.applyInner(m),i=!0}a&&(a[o]={state:r,n:s.length})}}if(!i)return{state:r,transactions:s}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new vc(this.config),r=this.config.fields;for(let a=0;a<r.length;a++){let i=r[a];s[i.name]=i.apply(e,this[i.name],this,s)}return s}get tr(){return new AJ(this)}static create(e){let s=new fv(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new vc(s);for(let a=0;a<s.fields.length;a++)r[s.fields[a].name]=s.fields[a].init(e,r);return r}reconfigure(e){let s=new fv(this.schema,e.plugins),r=s.fields,a=new vc(s);for(let i=0;i<r.length;i++){let o=r[i].name;a[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,a)}return a}toJSON(e){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let a=e[r],i=a.spec.state;i&&i.toJSON&&(s[r]=i.toJSON.call(a,this[a.key]))}return s}static fromJSON(e,s,r){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let a=new fv(e.schema,e.plugins),i=new vc(a);return a.fields.forEach(o=>{if(o.name=="doc")i.doc=La.fromJSON(e.schema,s.doc);else if(o.name=="selection")i.selection=ut.fromJSON(i.doc,s.selection);else if(o.name=="storedMarks")s.storedMarks&&(i.storedMarks=s.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],h=d.spec.state;if(d.key==o.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(s,c)){i[o.name]=h.fromJSON.call(d,e,s[c],i);return}}i[o.name]=o.init(e,i)}}),i}}function VT(t,e,s){for(let r in t){let a=t[r];a instanceof Function?a=a.bind(e):r=="handleDOMEvents"&&(a=VT(a,e,{})),s[r]=a}return s}class Qt{constructor(e){this.spec=e,this.props={},e.props&&VT(e.props,this,this.props),this.key=e.key?e.key.key:qT("plugin")}getState(e){return e[this.key]}}const pv=Object.create(null);function qT(t){return t in pv?t+"$"+ ++pv[t]:(pv[t]=0,t+"$")}class ys{constructor(e="key"){this.key=qT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ws=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Oc=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Wy=null;const Oa=function(t,e,s){let r=Wy||(Wy=document.createRange());return r.setEnd(t,s??t.nodeValue.length),r.setStart(t,e||0),r},MJ=function(){Wy=null},Jo=function(t,e,s,r){return s&&(J6(t,e,s,r,-1)||J6(t,e,s,r,1))},OJ=/^(img|br|input|textarea|hr)$/i;function J6(t,e,s,r,a){for(var i;;){if(t==s&&e==r)return!0;if(e==(a<0?0:xr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Th(t)||OJ.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ws(t)+(a<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(a<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=a;else return!1;else t=o,e=a<0?xr(t):0}else return!1}}function xr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function RJ(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=xr(t)}else if(t.parentNode&&!Th(t))e=Ws(t),t=t.parentNode;else return null}}function DJ(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Th(t))e=Ws(t)+1,t=t.parentNode;else return null}}function PJ(t,e,s){for(let r=e==0,a=e==xr(t);r||a;){if(t==s)return!0;let i=Ws(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,a=a&&i==xr(t)}}function Th(t){let e;for(let s=t;s&&!(e=s.pmViewDesc);s=s.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const F0=function(t){return t.focusNode&&Jo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Co(t,e){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=t,s.key=s.code=e,s}function zJ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LJ(t,e,s){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,s);if(r)return{node:r.offsetNode,offset:Math.min(xr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,s);if(r)return{node:r.startContainer,offset:Math.min(xr(r.startContainer),r.startOffset)}}}const oa=typeof navigator<"u"?navigator:null,X6=typeof document<"u"?document:null,Ki=oa&&oa.userAgent||"",Yy=/Edge\/(\d+)/.exec(Ki),HT=/MSIE \d/.exec(Ki),Ky=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ki),Rn=!!(HT||Ky||Yy),Ri=HT?document.documentMode:Ky?+Ky[1]:Yy?+Yy[1]:0,Fr=!Rn&&/gecko\/(\d+)/i.test(Ki);Fr&&+(/Firefox\/(\d+)/.exec(Ki)||[0,0])[1];const Jy=!Rn&&/Chrome\/(\d+)/.exec(Ki),nn=!!Jy,GT=Jy?+Jy[1]:0,gn=!Rn&&!!oa&&/Apple Computer/.test(oa.vendor),Rc=gn&&(/Mobile\/\w+/.test(Ki)||!!oa&&oa.maxTouchPoints>2),gr=Rc||(oa?/Mac/.test(oa.platform):!1),$J=oa?/Win/.test(oa.platform):!1,Ra=/Android \d/.test(Ki),Mh=!!X6&&"webkitFontSmoothing"in X6.documentElement.style,FJ=Mh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function IJ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ca(t,e){return typeof t=="number"?t:t[e]}function BJ(t){let e=t.getBoundingClientRect(),s=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*s,top:e.top,bottom:e.top+t.clientHeight*r}}function Q6(t,e,s){let r=t.someProp("scrollThreshold")||0,a=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=s||t.dom;o;){if(o.nodeType!=1){o=Oc(o);continue}let c=o,d=c==i.body,h=d?IJ(i):BJ(c),m=0,p=0;if(e.top<h.top+Ca(r,"top")?p=-(h.top-e.top+Ca(a,"top")):e.bottom>h.bottom-Ca(r,"bottom")&&(p=e.bottom-e.top>h.bottom-h.top?e.top+Ca(a,"top")-h.top:e.bottom-h.bottom+Ca(a,"bottom")),e.left<h.left+Ca(r,"left")?m=-(h.left-e.left+Ca(a,"left")):e.right>h.right-Ca(r,"right")&&(m=e.right-h.right+Ca(a,"right")),m||p)if(d)i.defaultView.scrollBy(m,p);else{let b=c.scrollLeft,v=c.scrollTop;p&&(c.scrollTop+=p),m&&(c.scrollLeft+=m);let N=c.scrollLeft-b,j=c.scrollTop-v;e={left:e.left-N,top:e.top-j,right:e.right-N,bottom:e.bottom-j}}let g=d?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Oc(o)}}function UJ(t){let e=t.dom.getBoundingClientRect(),s=Math.max(0,e.top),r,a;for(let i=(e.left+e.right)/2,o=s+1;o<Math.min(innerHeight,e.bottom);o+=5){let c=t.root.elementFromPoint(i,o);if(!c||c==t.dom||!t.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=s-20){r=c,a=d.top;break}}return{refDOM:r,refTop:a,stack:WT(t.dom)}}function WT(t){let e=[],s=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=s);r=Oc(r));return e}function VJ({refDOM:t,refTop:e,stack:s}){let r=t?t.getBoundingClientRect().top:0;YT(s,r==0?0:r-e)}function YT(t,e){for(let s=0;s<t.length;s++){let{dom:r,top:a,left:i}=t[s];r.scrollTop!=a+e&&(r.scrollTop=a+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let nc=null;function qJ(t){if(t.setActive)return t.setActive();if(nc)return t.focus(nc);let e=WT(t);t.focus(nc==null?{get preventScroll(){return nc={preventScroll:!0},!0}}:void 0),nc||(nc=!1,YT(e,0))}function KT(t,e){let s,r=2e8,a,i=0,o=e.top,c=e.top,d,h;for(let m=t.firstChild,p=0;m;m=m.nextSibling,p++){let g;if(m.nodeType==1)g=m.getClientRects();else if(m.nodeType==3)g=Oa(m).getClientRects();else continue;for(let b=0;b<g.length;b++){let v=g[b];if(v.top<=o&&v.bottom>=c){o=Math.max(v.bottom,o),c=Math.min(v.top,c);let N=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(N<r){s=m,r=N,a=N&&s.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,m.nodeType==1&&N&&(i=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!d&&v.left<=e.left&&v.right>=e.left&&(d=m,h={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!s&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=p+1)}}return!s&&d&&(s=d,a=h,r=0),s&&s.nodeType==3?HJ(s,a):!s||r&&s.nodeType==1?{node:t,offset:i}:KT(s,a)}function HJ(t,e){let s=t.nodeValue.length,r=document.createRange();for(let a=0;a<s;a++){r.setEnd(t,a+1),r.setStart(t,a);let i=yi(r,1);if(i.top!=i.bottom&&ej(e,i))return{node:t,offset:a+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function ej(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function GJ(t,e){let s=t.parentNode;return s&&/^li$/i.test(s.nodeName)&&e.left<t.getBoundingClientRect().left?s:t}function WJ(t,e,s){let{node:r,offset:a}=KT(e,s),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&s.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,a,i)}function YJ(t,e,s,r){let a=-1;for(let i=e,o=!1;i!=t.dom;){let c=t.docView.nearestDesc(i,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&(!o&&d.left>r.left||d.top>r.top?a=c.posBefore:(!o&&d.right<r.left||d.bottom<r.top)&&(a=c.posAfter),o=!0),!c.contentDOM&&a<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;i=c.dom.parentNode}return a>-1?a:t.docView.posFromDOM(e,s,-1)}function JT(t,e,s){let r=t.childNodes.length;if(r&&s.top<s.bottom)for(let a=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-s.top)/(s.bottom-s.top))-2)),i=a;;){let o=t.childNodes[i];if(o.nodeType==1){let c=o.getClientRects();for(let d=0;d<c.length;d++){let h=c[d];if(ej(e,h))return JT(o,e,h)}}if((i=(i+1)%r)==a)break}return t}function KJ(t,e){let s=t.dom.ownerDocument,r,a=0,i=LJ(s,e.left,e.top);i&&({node:r,offset:a}=i);let o=(t.root.elementFromPoint?t.root:s).elementFromPoint(e.left,e.top),c;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let h=t.dom.getBoundingClientRect();if(!ej(e,h)||(o=JT(t.dom,e,h),!o))return null}if(gn)for(let h=o;r&&h;h=Oc(h))h.draggable&&(r=void 0);if(o=GJ(o,e),r){if(Fr&&r.nodeType==1&&(a=Math.min(a,r.childNodes.length),a<r.childNodes.length)){let m=r.childNodes[a],p;m.nodeName=="IMG"&&(p=m.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&a++}let h;Mh&&a&&r.nodeType==1&&(h=r.childNodes[a-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&a--,r==t.dom&&a==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(a==0||r.nodeType!=1||r.childNodes[a-1].nodeName!="BR")&&(c=YJ(t,r,a,e))}c==null&&(c=WJ(t,o,e));let d=t.docView.nearestDesc(o,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function Z6(t){return t.top<t.bottom||t.left<t.right}function yi(t,e){let s=t.getClientRects();if(s.length){let r=s[e<0?0:s.length-1];if(Z6(r))return r}return Array.prototype.find.call(s,Z6)||t.getBoundingClientRect()}const JJ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function XT(t,e,s){let{node:r,offset:a,atom:i}=t.docView.domFromPos(e,s<0?-1:1),o=Mh||Fr;if(r.nodeType==3)if(o&&(JJ.test(r.nodeValue)||(s<0?!a:a==r.nodeValue.length))){let d=yi(Oa(r,a,a),s);if(Fr&&a&&/\s/.test(r.nodeValue[a-1])&&a<r.nodeValue.length){let h=yi(Oa(r,a-1,a-1),-1);if(h.top==d.top){let m=yi(Oa(r,a,a+1),-1);if(m.top!=d.top)return ou(m,m.left<h.left)}}return d}else{let d=a,h=a,m=s<0?1:-1;return s<0&&!a?(h++,m=-1):s>=0&&a==r.nodeValue.length?(d--,m=1):s<0?d--:h++,ou(yi(Oa(r,d,h),m),m<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&a&&(s<0||a==xr(r))){let d=r.childNodes[a-1];if(d.nodeType==1)return gv(d.getBoundingClientRect(),!1)}if(i==null&&a<xr(r)){let d=r.childNodes[a];if(d.nodeType==1)return gv(d.getBoundingClientRect(),!0)}return gv(r.getBoundingClientRect(),s>=0)}if(i==null&&a&&(s<0||a==xr(r))){let d=r.childNodes[a-1],h=d.nodeType==3?Oa(d,xr(d)-(o?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return ou(yi(h,1),!1)}if(i==null&&a<xr(r)){let d=r.childNodes[a];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?Oa(d,0,o?0:1):d.nodeType==1?d:null:null;if(h)return ou(yi(h,-1),!0)}return ou(yi(r.nodeType==3?Oa(r):r,-s),s>=0)}function ou(t,e){if(t.width==0)return t;let s=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:s,right:s}}function gv(t,e){if(t.height==0)return t;let s=e?t.top:t.bottom;return{top:s,bottom:s,left:t.left,right:t.right}}function QT(t,e,s){let r=t.state,a=t.root.activeElement;r!=e&&t.updateState(e),a!=t.dom&&t.focus();try{return s()}finally{r!=e&&t.updateState(r),a!=t.dom&&a&&a.focus()}}function XJ(t,e,s){let r=e.selection,a=s=="up"?r.$from:r.$to;return QT(t,e,()=>{let{node:i}=t.docView.domFromPos(a.pos,s=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(i,!0);if(!c)break;if(c.node.isBlock){i=c.contentDOM||c.dom;break}i=c.dom.parentNode}let o=XT(t,a.pos,1);for(let c=i.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=Oa(c,0,c.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(s=="up"?o.top-m.top>(m.bottom-o.top)*2:m.bottom-o.bottom>(o.bottom-m.top)*2))return!1}}return!0})}const QJ=/[\u0590-\u08ac]/;function ZJ(t,e,s){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let a=r.parentOffset,i=!a,o=a==r.parent.content.size,c=t.domSelection();return c?!QJ.test(r.parent.textContent)||!c.modify?s=="left"||s=="backward"?i:o:QT(t,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:p}=t.domSelectionRange(),g=c.caretBidiLevel;c.modify("move",s,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:N}=t.domSelectionRange(),j=v&&!b.contains(v.nodeType==1?v:v.parentNode)||d==v&&h==N;try{c.collapse(m,p),d&&(d!=m||h!=p)&&c.extend&&c.extend(d,h)}catch{}return g!=null&&(c.caretBidiLevel=g),j}):r.pos==r.start()||r.pos==r.end()}let e5=null,t5=null,s5=!1;function eX(t,e,s){return e5==e&&t5==s?s5:(e5=e,t5=s,s5=s=="up"||s=="down"?XJ(t,e,s):ZJ(t,e,s))}const yr=0,n5=1,Ao=2,la=3;class Oh{constructor(e,s,r,a){this.parent=e,this.children=s,this.dom=r,this.contentDOM=a,this.dirty=yr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,s,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let s=0;s<this.children.length;s++)e+=this.children[s].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let s=0,r=this.posAtStart;;s++){let a=this.children[s];if(a==e)return r;r+=a.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,s,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[s-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[s];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let a;if(e==this.dom&&this.contentDOM)a=s>Ws(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!1;break}if(i.previousSibling)break}if(a==null&&s==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!0;break}if(i.nextSibling)break}}return a??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,s=!1){for(let r=!0,a=e;a;a=a.parentNode){let i=this.getDesc(a),o;if(i&&(!s||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let s=e.pmViewDesc;for(let r=s;r;r=r.parent)if(r==this)return s}posFromDOM(e,s,r){for(let a=e;a;a=a.parentNode){let i=this.getDesc(a);if(i)return i.localPosFromDOM(e,s,r)}return-1}descAt(e){for(let s=0,r=0;s<this.children.length;s++){let a=this.children[s],i=r+a.size;if(r==e&&i!=r){for(;!a.border&&a.children.length;)for(let o=0;o<a.children.length;o++){let c=a.children[o];if(c.size){a=c;break}}return a}if(e<i)return a.descAt(e-r-a.border);r=i}}domFromPos(e,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,a=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],c=i+o.size;if(c>e||o instanceof eM){a=e-i;break}i=c}if(a)return this.children[r].domFromPos(a-this.children[r].border,s);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof ZT&&i.side>=0;r--);if(s<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&s&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,s):{node:this.contentDOM,offset:i?Ws(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,s):{node:this.contentDOM,offset:i?Ws(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,s,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let a=-1,i=-1;for(let o=r,c=0;;c++){let d=this.children[c],h=o+d.size;if(a==-1&&e<=h){let m=o+d.border;if(e>=m&&s<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,s,m);e=o;for(let p=c;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){a=Ws(g.dom)+1;break}e-=g.size}a==-1&&(a=0)}if(a>-1&&(h>s||c==this.children.length-1)){s=h;for(let m=c+1;m<this.children.length;m++){let p=this.children[m];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=Ws(p.dom);break}s+=p.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=h}return{node:this.contentDOM,from:e,to:s,fromOffset:a,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[e<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(e)}domAfterPos(e){let{node:s,offset:r}=this.domFromPos(e,0);if(s.nodeType!=1||r==s.childNodes.length)throw new RangeError("No node after pos "+e);return s.childNodes[r]}setSelection(e,s,r,a=!1){let i=Math.min(e,s),o=Math.max(e,s);for(let b=0,v=0;b<this.children.length;b++){let N=this.children[b],j=v+N.size;if(i>v&&o<j)return N.setSelection(e-v-N.border,s-v-N.border,r,a);v=j}let c=this.domFromPos(e,e?-1:1),d=s==e?c:this.domFromPos(s,s?-1:1),h=r.root.getSelection(),m=r.domSelectionRange(),p=!1;if((Fr||gn)&&e==s){let{node:b,offset:v}=c;if(b.nodeType==3){if(p=!!(v&&b.nodeValue[v-1]==`
`),p&&v==b.nodeValue.length)for(let N=b,j;N;N=N.parentNode){if(j=N.nextSibling){j.nodeName=="BR"&&(c=d={node:j.parentNode,offset:Ws(j)+1});break}let w=N.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let N=b.childNodes[v-1];p=N&&(N.nodeName=="BR"||N.contentEditable=="false")}}if(Fr&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let b=m.focusNode.childNodes[m.focusOffset];b&&b.contentEditable=="false"&&(a=!0)}if(!(a||p&&gn)&&Jo(c.node,c.offset,m.anchorNode,m.anchorOffset)&&Jo(d.node,d.offset,m.focusNode,m.focusOffset))return;let g=!1;if((h.extend||e==s)&&!p){h.collapse(c.node,c.offset);try{e!=s&&h.extend(d.node,d.offset),g=!0}catch{}}if(!g){if(e>s){let v=c;c=d,d=v}let b=document.createRange();b.setEnd(d.node,d.offset),b.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,s){for(let r=0,a=0;a<this.children.length;a++){let i=this.children[a],o=r+i.size;if(r==o?e<=o&&s>=r:e<o&&s>r){let c=r+i.border,d=o-i.border;if(e>=c&&s<=d){this.dirty=e==r||s==o?Ao:n5,e==c&&s==d&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=la:i.markDirty(e-c,s-c);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Ao:la}r=o}this.dirty=Ao}markParentsDirty(){let e=1;for(let s=this.parent;s;s=s.parent,e++){let r=e==1?Ao:n5;s.dirty<r&&(s.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class ZT extends Oh{constructor(e,s,r,a){let i,o=s.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return a;if(i.parent)return i.parent.posBeforeChild(i)})),!s.type.spec.raw){if(o.nodeType!=1){let c=document.createElement("span");c.appendChild(o),o=c}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=s,this.widget=s,i=this}matchesWidget(e){return this.dirty==yr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let s=this.widget.spec.stopEvent;return s?s(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class tX extends Oh{constructor(e,s,r,a){super(e,[],s,null),this.textDOM=r,this.text=a}get size(){return this.text.length}localPosFromDOM(e,s){return e!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xo extends Oh{constructor(e,s,r,a,i){super(e,[],r,a),this.mark=s,this.spec=i}static create(e,s,r,a){let i=a.nodeViews[s.type.name],o=i&&i(s,a,r);return(!o||!o.dom)&&(o=nl.renderSpec(document,s.type.spec.toDOM(s,r),null,s.attrs)),new Xo(e,s,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&la||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=la&&this.mark.eq(e)}markDirty(e,s){if(super.markDirty(e,s),this.dirty!=yr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=yr}}slice(e,s,r){let a=Xo.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;s<o&&(i=Qy(i,s,o,r)),e>0&&(i=Qy(i,0,e,r));for(let c=0;c<i.length;c++)i[c].parent=a;return a.children=i,a}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Di extends Oh{constructor(e,s,r,a,i,o,c,d,h){super(e,[],i,o),this.node=s,this.outerDeco=r,this.innerDeco=a,this.nodeDOM=c}static create(e,s,r,a,i,o){let c=i.nodeViews[s.type.name],d,h=c&&c(s,i,()=>{if(!d)return o;if(d.parent)return d.parent.posBeforeChild(d)},r,a),m=h&&h.dom,p=h&&h.contentDOM;if(s.isText){if(!m)m=document.createTextNode(s.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:p}=nl.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!p&&!s.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),s.type.spec.draggable&&(m.draggable=!0));let g=m;return m=nM(m,r,s),h?d=new sX(e,s,r,a,m,p||null,g,h,i,o+1):s.isText?new I0(e,s,r,a,m,g,i):new Di(e,s,r,a,m,p||null,g,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let r=this.children[s];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ke.empty)}return e}matchesNode(e,s,r){return this.dirty==yr&&e.eq(this.node)&&_p(s,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,s){let r=this.node.inlineContent,a=s,i=e.composing?this.localCompositionInfo(e,s):null,o=i&&i.pos>-1?i:null,c=i&&i.pos<0,d=new rX(this,o&&o.node,e);oX(this.node,this.innerDeco,(h,m,p)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!p&&d.syncToMarks(m==this.node.childCount?Ft.none:this.node.child(m).marks,r,e),d.placeWidget(h,e,a)},(h,m,p,g)=>{d.syncToMarks(h.marks,r,e);let b;d.findNodeMatch(h,m,p,g)||c&&e.state.selection.from>a&&e.state.selection.to<a+h.nodeSize&&(b=d.findIndexWithChild(i.node))>-1&&d.updateNodeAt(h,m,p,b,e)||d.updateNextNode(h,m,p,e,g,a)||d.addNode(h,m,p,e,a),a+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ao)&&(o&&this.protectLocalComposition(e,o),tM(this.contentDOM,this.children,e),Rc&&lX(this.dom))}localCompositionInfo(e,s){let{from:r,to:a}=e.state.selection;if(!(e.state.selection instanceof at)||r<s||a>s+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,c=cX(this.node.content,o,r-s,a-s);return c<0?null:{node:i,pos:c,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:s,pos:r,text:a}){if(this.getDesc(s))return;let i=s;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new tX(this,i,s,a);e.input.compositionNodes.push(o),this.children=Qy(this.children,r,r+a.length,e,o)}update(e,s,r,a){return this.dirty==la||!e.sameMarkup(this.node)?!1:(this.updateInner(e,s,r,a),!0)}updateInner(e,s,r,a){this.updateOuterDeco(s),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=yr}updateOuterDeco(e){if(_p(e,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=sM(this.dom,this.nodeDOM,Xy(this.outerDeco,this.node,s),Xy(e,this.node,s)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function r5(t,e,s,r,a){nM(r,e,t);let i=new Di(void 0,t,e,s,r,r,r,a,0);return i.contentDOM&&i.updateChildren(a,0),i}class I0 extends Di{constructor(e,s,r,a,i,o,c){super(e,s,r,a,i,null,o,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,s,r,a){return this.dirty==la||this.dirty!=yr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=yr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=e,this.dirty=yr,!0)}inParent(){let e=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,s,r){return e==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(e,s,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,s,r){let a=this.node.cut(e,s),i=document.createTextNode(a.text);return new I0(this.parent,a,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,s){super.markDirty(e,s),this.dom!=this.nodeDOM&&(e==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=la)}get domAtom(){return!1}isText(e){return this.node.text==e}}class eM extends Oh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sX extends Di{constructor(e,s,r,a,i,o,c,d,h,m){super(e,s,r,a,i,o,c,h,m),this.spec=d}update(e,s,r,a){if(this.dirty==la)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,s,r);return i&&this.updateInner(e,s,r,a),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,s,r,a)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,s,r,a){this.spec.setSelection?this.spec.setSelection(e,s,r.root):super.setSelection(e,s,r,a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function tM(t,e,s){let r=t.firstChild,a=!1;for(let i=0;i<e.length;i++){let o=e[i],c=o.dom;if(c.parentNode==t){for(;c!=r;)r=a5(r),a=!0;r=r.nextSibling}else a=!0,t.insertBefore(c,r);if(o instanceof Xo){let d=r?r.previousSibling:t.lastChild;tM(o.contentDOM,o.children,s),r=d?d.nextSibling:t.firstChild}}for(;r;)r=a5(r),a=!0;a&&s.trackWrites==t&&(s.trackWrites=null)}const Du=function(t){t&&(this.nodeName=t)};Du.prototype=Object.create(null);const To=[new Du];function Xy(t,e,s){if(t.length==0)return To;let r=s?To[0]:new Du,a=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&a.push(r=new Du(o.nodeName));for(let c in o){let d=o[c];d!=null&&(s&&a.length==1&&a.push(r=new Du(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return a}function sM(t,e,s,r){if(s==To&&r==To)return e;let a=e;for(let i=0;i<r.length;i++){let o=r[i],c=s[i];if(i){let d;c&&c.nodeName==o.nodeName&&a!=t&&(d=a.parentNode)&&d.nodeName.toLowerCase()==o.nodeName||(d=document.createElement(o.nodeName),d.pmIsDeco=!0,d.appendChild(a),c=To[0]),a=d}nX(a,c||To[0],o)}return a}function nX(t,e,s){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in s)&&t.removeAttribute(r);for(let r in s)r!="class"&&r!="style"&&r!="nodeName"&&s[r]!=e[r]&&t.setAttribute(r,s[r]);if(e.class!=s.class){let r=e.class?e.class.split(" ").filter(Boolean):[],a=s.class?s.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)a.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<a.length;i++)r.indexOf(a[i])==-1&&t.classList.add(a[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=s.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,a;for(;a=r.exec(e.style);)t.style.removeProperty(a[1])}s.style&&(t.style.cssText+=s.style)}}function nM(t,e,s){return sM(t,t,To,Xy(e,s,t.nodeType!=1))}function _p(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].type.eq(e[s].type))return!1;return!0}function a5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class rX{constructor(e,s,r){this.lock=s,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=aX(e.node.content,e)}destroyBetween(e,s){if(e!=s){for(let r=e;r<s;r++)this.top.children[r].destroy();this.top.children.splice(e,s-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,s,r){let a=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;a<o&&(a==i-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<i;)this.destroyRest(),this.top.dirty=yr,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[i])&&!this.isLocked(h.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=Xo.create(this.top,e[i],s,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,i++}}findNodeMatch(e,s,r,a){let i=-1,o;if(a>=this.preMatch.index&&(o=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&o.matchesNode(e,s,r))i=this.top.children.indexOf(o,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let h=this.top.children[c];if(h.matchesNode(e,s,r)&&!this.preMatch.matched.has(h)){i=c;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,s,r,a,i){let o=this.top.children[a];return o.dirty==la&&o.dom==o.contentDOM&&(o.dirty=Ao),o.update(e,s,r,i)?(this.destroyBetween(this.index,a),this.index++,!0):!1}findIndexWithChild(e){for(;;){let s=e.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==r)return a}return-1}e=s}}updateNextNode(e,s,r,a,i,o){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof Di){let h=this.preMatch.matched.get(d);if(h!=null&&h!=i)return!1;let m=d.dom,p,g=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=la&&_p(s,d.outerDeco));if(!g&&d.update(e,s,r,a))return this.destroyBetween(this.index,c),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(d,e,s,r,a,o)))return this.destroyBetween(this.index,c),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=Ao,p.updateChildren(a,o+1),p.dirty=yr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,s,r,a,i,o){if(e.dirty||s.isAtom||!e.children.length||!e.node.content.eq(s.content)||!_p(r,e.outerDeco)||!a.eq(e.innerDeco))return null;let c=Di.create(this.top,s,r,a,i,o);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,s,r,a,i){let o=Di.create(this.top,e,s,r,a,i);o.contentDOM&&o.updateChildren(a,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,s,r){let a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{let i=new ZT(this.top,e,s,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],s=this.top;for(;e instanceof Xo;)s=e,e=s.children[s.children.length-1];(!e||!(e instanceof I0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((gn||nn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(e,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let a=new eM(this.top,[],r,null);s!=this.top?s.children.push(a):s.children.splice(this.index++,0,a),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function aX(t,e){let s=e,r=s.children.length,a=t.childCount,i=new Map,o=[];e:for(;a>0;){let c;for(;;)if(r){let h=s.children[r-1];if(h instanceof Xo)s=h,r=h.children.length;else{c=h,r--;break}}else{if(s==e)break e;r=s.parent.children.indexOf(s),s=s.parent}let d=c.node;if(d){if(d!=t.child(a-1))break;--a,i.set(c,a),o.push(c)}}return{index:a,matched:i,matches:o.reverse()}}function iX(t,e){return t.type.side-e.type.side}function oX(t,e,s,r){let a=e.locals(t),i=0;if(a.length==0){for(let h=0;h<t.childCount;h++){let m=t.child(h);r(m,a,e.forChild(i,m),h),i+=m.nodeSize}return}let o=0,c=[],d=null;for(let h=0;;){let m,p;for(;o<a.length&&a[o].to==i;){let j=a[o++];j.widget&&(m?(p||(p=[m])).push(j):m=j)}if(m)if(p){p.sort(iX);for(let j=0;j<p.length;j++)s(p[j],h,!!d)}else s(m,h,!!d);let g,b;if(d)b=-1,g=d,d=null;else if(h<t.childCount)b=h,g=t.child(h++);else break;for(let j=0;j<c.length;j++)c[j].to<=i&&c.splice(j--,1);for(;o<a.length&&a[o].from<=i&&a[o].to>i;)c.push(a[o++]);let v=i+g.nodeSize;if(g.isText){let j=v;o<a.length&&a[o].from<j&&(j=a[o].from);for(let w=0;w<c.length;w++)c[w].to<j&&(j=c[w].to);j<v&&(d=g.cut(j-i),g=g.cut(0,j-i),v=j,b=-1)}else for(;o<a.length&&a[o].to<v;)o++;let N=g.isInline&&!g.isLeaf?c.filter(j=>!j.inline):c.slice();r(g,N,e.forChild(i,g),b),i=v}}function lX(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function cX(t,e,s,r){for(let a=0,i=0;a<t.childCount&&i<=r;){let o=t.child(a++),c=i;if(i+=o.nodeSize,!o.isText)continue;let d=o.text;for(;a<t.childCount;){let h=t.child(a++);if(i+=h.nodeSize,!h.isText)break;d+=h.text}if(i>=s){if(i>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let h=c<r?d.lastIndexOf(e,r-c-1):-1;if(h>=0&&h+e.length+c>=s)return c+h;if(s==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function Qy(t,e,s,r,a){let i=[];for(let o=0,c=0;o<t.length;o++){let d=t[o],h=c,m=c+=d.size;h>=s||m<=e?i.push(d):(h<e&&i.push(d.slice(0,e-h,r)),a&&(i.push(a),a=void 0),m>s&&i.push(d.slice(s-h,d.size,r)))}return i}function tj(t,e=null){let s=t.domSelectionRange(),r=t.state.doc;if(!s.focusNode)return null;let a=t.docView.nearestDesc(s.focusNode),i=a&&a.size==0,o=t.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(o<0)return null;let c=r.resolve(o),d,h;if(F0(s)){for(d=o;a&&!a.node;)a=a.parent;let p=a.node;if(a&&p.isAtom&&Je.isSelectable(p)&&a.parent&&!(p.isInline&&PJ(s.focusNode,s.focusOffset,a.dom))){let g=a.posBefore;h=new Je(o==g?c:r.resolve(g))}}else{if(s instanceof t.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let p=o,g=o;for(let b=0;b<s.rangeCount;b++){let v=s.getRangeAt(b);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),g=Math.max(g,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[d,o]=g==t.state.selection.anchor?[g,p]:[p,g],c=r.resolve(o)}else d=t.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(d<0)return null}let m=r.resolve(d);if(!h){let p=e=="pointer"||t.state.selection.head<c.pos&&!i?1:-1;h=sj(t,m,c,p)}return h}function rM(t){return t.editable?t.hasFocus():iM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Fa(t,e=!1){let s=t.state.selection;if(aM(t,s),!!rM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&nn){let r=t.domSelectionRange(),a=t.domObserver.currentSelection;if(r.anchorNode&&a.anchorNode&&Jo(r.anchorNode,r.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)uX(t);else{let{anchor:r,head:a}=s,i,o;i5&&!(s instanceof at)&&(s.$from.parent.inlineContent||(i=o5(t,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(o=o5(t,s.to))),t.docView.setSelection(r,a,t,e),i5&&(i&&l5(i),o&&l5(o)),s.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dX(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const i5=gn||nn&&GT<63;function o5(t,e){let{node:s,offset:r}=t.docView.domFromPos(e,0),a=r<s.childNodes.length?s.childNodes[r]:null,i=r?s.childNodes[r-1]:null;if(gn&&a&&a.contentEditable=="false")return xv(a);if((!a||a.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(a)return xv(a);if(i)return xv(i)}}function xv(t){return t.contentEditable="true",gn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function l5(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function dX(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let s=t.domSelectionRange(),r=s.anchorNode,a=s.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(s.anchorNode!=r||s.anchorOffset!=a)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!rM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function uX(t){let e=t.domSelection(),s=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,a=r.nodeName=="IMG";a?s.setStart(r.parentNode,Ws(r)+1):s.setStart(r,0),s.collapse(!0),e.removeAllRanges(),e.addRange(s),!a&&!t.state.selection.visible&&Rn&&Ri<=11&&(r.disabled=!0,r.disabled=!1)}function aM(t,e){if(e instanceof Je){let s=t.docView.descAt(e.from);s!=t.lastSelectedViewDesc&&(c5(t),s&&s.selectNode(),t.lastSelectedViewDesc=s)}else c5(t)}function c5(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function sj(t,e,s,r){return t.someProp("createSelectionBetween",a=>a(t,e,s))||at.between(e,s,r)}function d5(t){return t.editable&&!t.hasFocus()?!1:iM(t)}function iM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function hX(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),s=t.domSelectionRange();return Jo(e.node,e.offset,s.anchorNode,s.anchorOffset)}function Zy(t,e){let{$anchor:s,$head:r}=t.selection,a=e>0?s.max(r):s.min(r),i=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return i&&ut.findFrom(i,e)}function ji(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function u5(t,e,s){let r=t.state.selection;if(r instanceof at)if(s.indexOf("s")>-1){let{$head:a}=r,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(a.pos+i.nodeSize*(e<0?-1:1));return ji(t,new at(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let a=Zy(t.state,e);return a&&a instanceof Je?ji(t,a):!1}else if(!(gr&&s.indexOf("m")>-1)){let a=r.$head,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,o;if(!i||i.isText)return!1;let c=e<0?a.pos-i.nodeSize:a.pos;return i.isAtom||(o=t.docView.descAt(c))&&!o.contentDOM?Je.isSelectable(i)?ji(t,new Je(e<0?t.state.doc.resolve(a.pos-i.nodeSize):a)):Mh?ji(t,new at(t.state.doc.resolve(e<0?c:c+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Je&&r.node.isInline)return ji(t,new at(e>0?r.$to:r.$from));{let a=Zy(t.state,e);return a?ji(t,a):!1}}}function Cp(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pu(t,e){let s=t.pmViewDesc;return s&&s.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function rc(t,e){return e<0?mX(t):fX(t)}function mX(t){let e=t.domSelectionRange(),s=e.focusNode,r=e.focusOffset;if(!s)return;let a,i,o=!1;for(Fr&&s.nodeType==1&&r<Cp(s)&&Pu(s.childNodes[r],-1)&&(o=!0);;)if(r>0){if(s.nodeType!=1)break;{let c=s.childNodes[r-1];if(Pu(c,-1))a=s,i=--r;else if(c.nodeType==3)s=c,r=s.nodeValue.length;else break}}else{if(oM(s))break;{let c=s.previousSibling;for(;c&&Pu(c,-1);)a=s.parentNode,i=Ws(c),c=c.previousSibling;if(c)s=c,r=Cp(s);else{if(s=s.parentNode,s==t.dom)break;r=0}}}o?ew(t,s,r):a&&ew(t,a,i)}function fX(t){let e=t.domSelectionRange(),s=e.focusNode,r=e.focusOffset;if(!s)return;let a=Cp(s),i,o;for(;;)if(r<a){if(s.nodeType!=1)break;let c=s.childNodes[r];if(Pu(c,1))i=s,o=++r;else break}else{if(oM(s))break;{let c=s.nextSibling;for(;c&&Pu(c,1);)i=c.parentNode,o=Ws(c)+1,c=c.nextSibling;if(c)s=c,r=0,a=Cp(s);else{if(s=s.parentNode,s==t.dom)break;r=a=0}}}i&&ew(t,i,o)}function oM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function pX(t,e){for(;t&&e==t.childNodes.length&&!Th(t);)e=Ws(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let s=t.childNodes[e];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,e=0}}function gX(t,e){for(;t&&!e&&!Th(t);)e=Ws(t),t=t.parentNode;for(;t&&e;){let s=t.childNodes[e-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,e=t.childNodes.length}}function ew(t,e,s){if(e.nodeType!=3){let i,o;(o=pX(e,s))?(e=o,s=0):(i=gX(e,s))&&(e=i,s=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(F0(r)){let i=document.createRange();i.setEnd(e,s),i.setStart(e,s),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,s);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&Fa(t)},50)}function h5(t,e){let s=t.state.doc.resolve(e);if(!(nn||$J)&&s.parent.inlineContent){let a=t.coordsAtPos(e);if(e>s.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left<a.left?"ltr":"rtl"}if(e<s.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>a.top&&o<a.bottom&&Math.abs(i.left-a.left)>1)return i.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function m5(t,e,s){let r=t.state.selection;if(r instanceof at&&!r.empty||s.indexOf("s")>-1||gr&&s.indexOf("m")>-1)return!1;let{$from:a,$to:i}=r;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Zy(t.state,e);if(o&&o instanceof Je)return ji(t,o)}if(!a.parent.inlineContent){let o=e<0?a:i,c=r instanceof Qn?ut.near(o,e):ut.findFrom(o,e);return c?ji(t,c):!1}return!1}function f5(t,e){if(!(t.state.selection instanceof at))return!0;let{$head:s,$anchor:r,empty:a}=t.state.selection;if(!s.sameParent(r))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!s.textOffset&&(e<0?s.nodeBefore:s.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(s.pos-i.nodeSize,s.pos):o.delete(s.pos,s.pos+i.nodeSize),t.dispatch(o),!0}return!1}function p5(t,e,s){t.domObserver.stop(),e.contentEditable=s,t.domObserver.start()}function xX(t){if(!gn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:s}=t.domSelectionRange();if(e&&e.nodeType==1&&s==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;p5(t,r,"true"),setTimeout(()=>p5(t,r,"false"),20)}return!1}function bX(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function vX(t,e){let s=e.keyCode,r=bX(e);if(s==8||gr&&s==72&&r=="c")return f5(t,-1)||rc(t,-1);if(s==46&&!e.shiftKey||gr&&s==68&&r=="c")return f5(t,1)||rc(t,1);if(s==13||s==27)return!0;if(s==37||gr&&s==66&&r=="c"){let a=s==37?h5(t,t.state.selection.from)=="ltr"?-1:1:-1;return u5(t,a,r)||rc(t,a)}else if(s==39||gr&&s==70&&r=="c"){let a=s==39?h5(t,t.state.selection.from)=="ltr"?1:-1:1;return u5(t,a,r)||rc(t,a)}else{if(s==38||gr&&s==80&&r=="c")return m5(t,-1,r)||rc(t,-1);if(s==40||gr&&s==78&&r=="c")return xX(t)||m5(t,1,r)||rc(t,1);if(r==(gr?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function nj(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let s=[],{content:r,openStart:a,openEnd:i}=e;for(;a>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){a--,i--;let b=r.firstChild;s.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=t.someProp("clipboardSerializer")||nl.fromSchema(t.state.schema),c=mM(),d=c.createElement("div");d.appendChild(o.serializeFragment(r,{document:c}));let h=d.firstChild,m,p=0;for(;h&&h.nodeType==1&&(m=hM[h.nodeName.toLowerCase()]);){for(let b=m.length-1;b>=0;b--){let v=c.createElement(m[b]);for(;d.firstChild;)v.appendChild(d.firstChild);d.appendChild(v),p++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${a} ${i}${p?` -${p}`:""} ${JSON.stringify(s)}`);let g=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:g,slice:e}}function lM(t,e,s,r,a){let i=a.parent.type.spec.code,o,c;if(!s&&!e)return null;let d=e&&(r||i||!s);if(d){if(t.someProp("transformPastedText",g=>{e=g(e,i||r,t)}),i)return e?new Le(ke.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Le.empty;let p=t.someProp("clipboardTextParser",g=>g(e,a,r,t));if(p)c=p;else{let g=a.marks(),{schema:b}=t.state,v=nl.fromSchema(b);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(N=>{let j=o.appendChild(document.createElement("p"));N&&j.appendChild(v.serializeNode(b.text(N,g)))})}}else t.someProp("transformPastedHTML",p=>{s=p(s,t)}),o=NX(s),Mh&&SX(o);let h=o&&o.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let p=+m[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Oi.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(d||m),context:a,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!yX.test(g.parentNode.nodeName)?{ignore:!0}:null}})),m)c=_X(g5(c,+m[1],+m[2]),m[4]);else if(c=Le.maxOpen(wX(c.content,a),!0),c.openStart||c.openEnd){let p=0,g=0;for(let b=c.content.firstChild;p<c.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=c.content.lastChild;g<c.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);c=g5(c,p,g)}return t.someProp("transformPasted",p=>{c=p(c,t)}),c}const yX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function wX(t,e){if(t.childCount<2)return t;for(let s=e.depth;s>=0;s--){let a=e.node(s).contentMatchAt(e.index(s)),i,o=[];if(t.forEach(c=>{if(!o)return;let d=a.findWrapping(c.type),h;if(!d)return o=null;if(h=o.length&&i.length&&dM(d,i,c,o[o.length-1],0))o[o.length-1]=h;else{o.length&&(o[o.length-1]=uM(o[o.length-1],i.length));let m=cM(c,d);o.push(m),a=a.matchType(m.type),i=d}}),o)return ke.from(o)}return t}function cM(t,e,s=0){for(let r=e.length-1;r>=s;r--)t=e[r].create(null,ke.from(t));return t}function dM(t,e,s,r,a){if(a<t.length&&a<e.length&&t[a]==e[a]){let i=dM(t,e,s,r.lastChild,a+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(a==t.length-1?s.type:t[a+1]))return r.copy(r.content.append(ke.from(cM(s,t,a+1))))}}function uM(t,e){if(e==0)return t;let s=t.content.replaceChild(t.childCount-1,uM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ke.empty,!0);return t.copy(s.append(r))}function tw(t,e,s,r,a,i){let o=e<0?t.firstChild:t.lastChild,c=o.content;return t.childCount>1&&(i=0),a<r-1&&(c=tw(c,e,s,r,a+1,i)),a>=s&&(c=e<0?o.contentMatchAt(0).fillBefore(c,i<=a).append(c):c.append(o.contentMatchAt(o.childCount).fillBefore(ke.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(c))}function g5(t,e,s){return e<t.openStart&&(t=new Le(tw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),s<t.openEnd&&(t=new Le(tw(t.content,1,s,t.openEnd,0,0),t.openStart,s)),t}const hM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let x5=null;function mM(){return x5||(x5=document.implementation.createHTMLDocument("title"))}let bv=null;function jX(t){let e=window.trustedTypes;return e?(bv||(bv=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),bv.createHTML(t)):t}function NX(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let s=mM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),a;if((a=r&&hM[r[1].toLowerCase()])&&(t=a.map(i=>"<"+i+">").join("")+t+a.map(i=>"</"+i+">").reverse().join("")),s.innerHTML=jX(t),a)for(let i=0;i<a.length;i++)s=s.querySelector(a[i])||s;return s}function SX(t){let e=t.querySelectorAll(nn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<e.length;s++){let r=e[s];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function _X(t,e){if(!t.size)return t;let s=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:a,openStart:i,openEnd:o}=t;for(let c=r.length-2;c>=0;c-=2){let d=s.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;a=ke.from(d.create(r[c+1],a)),i++,o++}return new Le(a,i,o)}const xn={},bn={},CX={touchstart:!0,touchmove:!0};class kX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function EX(t){for(let e in xn){let s=xn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{TX(t,r)&&!rj(t,r)&&(t.editable||!(r.type in bn))&&s(t,r)},CX[e]?{passive:!0}:void 0)}gn&&t.dom.addEventListener("input",()=>null),sw(t)}function Ti(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function AX(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function sw(t){t.someProp("handleDOMEvents",e=>{for(let s in e)t.input.eventHandlers[s]||t.dom.addEventListener(s,t.input.eventHandlers[s]=r=>rj(t,r))})}function rj(t,e){return t.someProp("handleDOMEvents",s=>{let r=s[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function TX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target;s!=t.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(e))return!1;return!0}function MX(t,e){!rj(t,e)&&xn[e.type]&&(t.editable||!(e.type in bn))&&xn[e.type](t,e)}bn.keydown=(t,e)=>{let s=e;if(t.input.shiftKey=s.keyCode==16||s.shiftKey,!pM(t,s)&&(t.input.lastKeyCode=s.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ra&&nn&&s.keyCode==13)))if(s.keyCode!=229&&t.domObserver.forceFlush(),Rc&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",a=>a(t,Co(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,s))||vX(t,s)?s.preventDefault():Ti(t,"key")};bn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};bn.keypress=(t,e)=>{let s=e;if(pM(t,s)||!s.charCode||s.ctrlKey&&!s.altKey||gr&&s.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,s))){s.preventDefault();return}let r=t.state.selection;if(!(r instanceof at)||!r.$from.sameParent(r.$to)){let a=String.fromCharCode(s.charCode),i=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,a,i))&&t.dispatch(i()),s.preventDefault()}};function B0(t){return{left:t.clientX,top:t.clientY}}function OX(t,e){let s=e.x-t.clientX,r=e.y-t.clientY;return s*s+r*r<100}function aj(t,e,s,r,a){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,c=>o>i.depth?c(t,s,i.nodeAfter,i.before(o),a,!0):c(t,s,i.node(o),i.before(o),a,!1)))return!0;return!1}function Nc(t,e,s){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function RX(t,e){if(e==-1)return!1;let s=t.state.doc.resolve(e),r=s.nodeAfter;return r&&r.isAtom&&Je.isSelectable(r)?(Nc(t,new Je(s)),!0):!1}function DX(t,e){if(e==-1)return!1;let s=t.state.selection,r,a;s instanceof Je&&(r=s.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let c=o>i.depth?i.nodeAfter:i.node(o);if(Je.isSelectable(c)){r&&s.$from.depth>0&&o>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?a=i.before(s.$from.depth):a=i.before(o);break}}return a!=null?(Nc(t,Je.create(t.state.doc,a)),!0):!1}function PX(t,e,s,r,a){return aj(t,"handleClickOn",e,s,r)||t.someProp("handleClick",i=>i(t,e,r))||(a?DX(t,s):RX(t,s))}function zX(t,e,s,r){return aj(t,"handleDoubleClickOn",e,s,r)||t.someProp("handleDoubleClick",a=>a(t,e,r))}function LX(t,e,s,r){return aj(t,"handleTripleClickOn",e,s,r)||t.someProp("handleTripleClick",a=>a(t,e,r))||$X(t,s,r)}function $X(t,e,s){if(s.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Nc(t,at.create(r,0,r.content.size)),!0):!1;let a=r.resolve(e);for(let i=a.depth+1;i>0;i--){let o=i>a.depth?a.nodeAfter:a.node(i),c=a.before(i);if(o.inlineContent)Nc(t,at.create(r,c+1,c+1+o.content.size));else if(Je.isSelectable(o))Nc(t,Je.create(r,c));else continue;return!0}}function ij(t){return kp(t)}const fM=gr?"metaKey":"ctrlKey";xn.mousedown=(t,e)=>{let s=e;t.input.shiftKey=s.shiftKey;let r=ij(t),a=Date.now(),i="singleClick";a-t.input.lastClick.time<500&&OX(s,t.input.lastClick)&&!s[fM]&&t.input.lastClick.button==s.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:a,x:s.clientX,y:s.clientY,type:i,button:s.button};let o=t.posAtCoords(B0(s));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new FX(t,o,s,!!r)):(i=="doubleClick"?zX:LX)(t,o.pos,o.inside,s)?s.preventDefault():Ti(t,"pointer"))};class FX{constructor(e,s,r,a){this.view=e,this.pos=s,this.event=r,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fM],this.allowDefault=r.shiftKey;let i,o;if(s.inside>-1)i=e.state.doc.nodeAt(s.inside),o=s.inside;else{let m=e.state.doc.resolve(s.pos);i=m.parent,o=m.depth?m.before():0}const c=a?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:h}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||h instanceof Je&&h.from<=o&&h.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ti(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(B0(e))),this.updateAllowDefault(e),this.allowDefault||!s?Ti(this.view,"pointer"):PX(this.view,s.pos,s.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||gn&&this.mightDrag&&!this.mightDrag.node.isAtom||nn&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(Nc(this.view,ut.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):Ti(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ti(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}xn.touchstart=t=>{t.input.lastTouch=Date.now(),ij(t),Ti(t,"pointer")};xn.touchmove=t=>{t.input.lastTouch=Date.now(),Ti(t,"pointer")};xn.contextmenu=t=>ij(t);function pM(t,e){return t.composing?!0:gn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const IX=Ra?5e3:-1;bn.compositionstart=bn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,s=e.selection.$to;if(e.selection instanceof at&&(e.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||s.marks(),kp(t,!0),t.markCursor=null;else if(kp(t,!e.selection.empty),Fr&&e.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let r=t.domSelectionRange();for(let a=r.focusNode,i=r.focusOffset;a&&a.nodeType==1&&i!=0;){let o=i<0?a.lastChild:a.childNodes[i-1];if(!o)break;if(o.nodeType==3){let c=t.domSelection();c&&c.collapse(o,o.nodeValue.length);break}else a=o,i=-1}}t.input.composing=!0}gM(t,IX)};bn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,gM(t,20))};function gM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>kp(t),e))}function xM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=UX());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function BX(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let s=RJ(e.focusNode,e.focusOffset),r=DJ(e.focusNode,e.focusOffset);if(s&&r&&s!=r){let a=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(s==i||r==i)return i;if(!a||!a.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=s.pmViewDesc;if(!(!o||!o.isText(s.nodeValue)))return r}}return s||r}function UX(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function kp(t,e=!1){if(!(Ra&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),xM(t),e||t.docView&&t.docView.dirty){let s=tj(t),r=t.state.selection;return s&&!s.eq(r)?t.dispatch(t.state.tr.setSelection(s)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function VX(t,e){if(!t.dom.parentNode)return;let s=t.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(e),s.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),a=document.createRange();a.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(a),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),t.focus()},50)}const ch=Rn&&Ri<15||Rc&&FJ<604;xn.copy=bn.cut=(t,e)=>{let s=e,r=t.state.selection,a=s.type=="cut";if(r.empty)return;let i=ch?null:s.clipboardData,o=r.content(),{dom:c,text:d}=nj(t,o);i?(s.preventDefault(),i.clearData(),i.setData("text/html",c.innerHTML),i.setData("text/plain",d)):VX(t,c),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function qX(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function HX(t,e){if(!t.dom.parentNode)return;let s=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),s?dh(t,r.value,null,a,e):dh(t,r.textContent,r.innerHTML,a,e)},50)}function dh(t,e,s,r,a){let i=lM(t,e,s,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,a,i||Le.empty)))return!0;if(!i)return!1;let o=qX(i),c=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function bM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let s=t.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}bn.paste=(t,e)=>{let s=e;if(t.composing&&!Ra)return;let r=ch?null:s.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&dh(t,bM(r),r.getData("text/html"),a,s)?s.preventDefault():HX(t,s)};class vM{constructor(e,s,r){this.slice=e,this.move=s,this.node=r}}const GX=gr?"altKey":"ctrlKey";function yM(t,e){let s=t.someProp("dragCopies",r=>!r(e));return s??!e[GX]}xn.dragstart=(t,e)=>{let s=e,r=t.input.mouseDown;if(r&&r.done(),!s.dataTransfer)return;let a=t.state.selection,i=a.empty?null:t.posAtCoords(B0(s)),o;if(!(i&&i.pos>=a.from&&i.pos<=(a instanceof Je?a.to-1:a.to))){if(r&&r.mightDrag)o=Je.create(t.state.doc,r.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let p=t.docView.nearestDesc(s.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(o=Je.create(t.state.doc,p.posBefore))}}let c=(o||t.state.selection).content(),{dom:d,text:h,slice:m}=nj(t,c);(!s.dataTransfer.files.length||!nn||GT>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(ch?"Text":"text/html",d.innerHTML),s.dataTransfer.effectAllowed="copyMove",ch||s.dataTransfer.setData("text/plain",h),t.dragging=new vM(m,yM(t,s),o)};xn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};bn.dragover=bn.dragenter=(t,e)=>e.preventDefault();bn.drop=(t,e)=>{let s=e,r=t.dragging;if(t.dragging=null,!s.dataTransfer)return;let a=t.posAtCoords(B0(s));if(!a)return;let i=t.state.doc.resolve(a.pos),o=r&&r.slice;o?t.someProp("transformPasted",v=>{o=v(o,t)}):o=lM(t,bM(s.dataTransfer),ch?null:s.dataTransfer.getData("text/html"),!1,i);let c=!!(r&&yM(t,s));if(t.someProp("handleDrop",v=>v(t,s,o||Le.empty,c))){s.preventDefault();return}if(!o)return;s.preventDefault();let d=o?LT(t.state.doc,i.pos,o):i.pos;d==null&&(d=i.pos);let h=t.state.tr;if(c){let{node:v}=r;v?v.replace(h):h.deleteSelection()}let m=h.mapping.map(d),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=h.doc;if(p?h.replaceRangeWith(m,m,o.content.firstChild):h.replaceRange(m,m,o),h.doc.eq(g))return;let b=h.doc.resolve(m);if(p&&Je.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))h.setSelection(new Je(b));else{let v=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((N,j,w,_)=>v=_),h.setSelection(sj(t,b,h.doc.resolve(v)))}t.focus(),t.dispatch(h.setMeta("uiEvent","drop"))};xn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Fa(t)},20))};xn.blur=(t,e)=>{let s=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),s.relatedTarget&&t.dom.contains(s.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};xn.beforeinput=(t,e)=>{if(nn&&Ra&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Co(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in bn)xn[t]=bn[t];function uh(t,e){if(t==e)return!0;for(let s in t)if(t[s]!==e[s])return!1;for(let s in e)if(!(s in t))return!1;return!0}class Ep{constructor(e,s){this.toDOM=e,this.spec=s||Fo,this.side=this.spec.side||0}map(e,s,r,a){let{pos:i,deleted:o}=e.mapResult(s.from+a,this.side<0?-1:1);return o?null:new rn(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ep&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&uh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Pi{constructor(e,s){this.attrs=e,this.spec=s||Fo}map(e,s,r,a){let i=e.map(s.from+a,this.spec.inclusiveStart?-1:1)-r,o=e.map(s.to+a,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new rn(i,o,this)}valid(e,s){return s.from<s.to}eq(e){return this==e||e instanceof Pi&&uh(this.attrs,e.attrs)&&uh(this.spec,e.spec)}static is(e){return e.type instanceof Pi}destroy(){}}class oj{constructor(e,s){this.attrs=e,this.spec=s||Fo}map(e,s,r,a){let i=e.mapResult(s.from+a,1);if(i.deleted)return null;let o=e.mapResult(s.to+a,-1);return o.deleted||o.pos<=i.pos?null:new rn(i.pos-r,o.pos-r,this)}valid(e,s){let{index:r,offset:a}=e.content.findIndex(s.from),i;return a==s.from&&!(i=e.child(r)).isText&&a+i.nodeSize==s.to}eq(e){return this==e||e instanceof oj&&uh(this.attrs,e.attrs)&&uh(this.spec,e.spec)}destroy(){}}class rn{constructor(e,s,r){this.from=e,this.to=s,this.type=r}copy(e,s){return new rn(e,s,this.type)}eq(e,s=0){return this.type.eq(e.type)&&this.from+s==e.from&&this.to+s==e.to}map(e,s,r){return this.type.map(e,this,s,r)}static widget(e,s,r){return new rn(e,e,new Ep(s,r))}static inline(e,s,r,a){return new rn(e,s,new Pi(r,a))}static node(e,s,r,a){return new rn(e,s,new oj(r,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof Pi}get widget(){return this.type instanceof Ep}}const dc=[],Fo={};class Ht{constructor(e,s){this.local=e.length?e:dc,this.children=s.length?s:dc}static create(e,s){return s.length?Ap(s,e,0,Fo):en}find(e,s,r){let a=[];return this.findInner(e??0,s??1e9,a,0,r),a}findInner(e,s,r,a,i){for(let o=0;o<this.local.length;o++){let c=this.local[o];c.from<=s&&c.to>=e&&(!i||i(c.spec))&&r.push(c.copy(c.from+a,c.to+a))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<s&&this.children[o+1]>e){let c=this.children[o]+1;this.children[o+2].findInner(e-c,s-c,r,a+c,i)}}map(e,s,r){return this==en||e.maps.length==0?this:this.mapInner(e,s,0,0,r||Fo)}mapInner(e,s,r,a,i){let o;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,a);d&&d.type.valid(s,d)?(o||(o=[])).push(d):i.onRemove&&i.onRemove(this.local[c].spec)}return this.children.length?WX(this.children,o||[],e,s,r,a,i):o?new Ht(o.sort(Io),dc):en}add(e,s){return s.length?this==en?Ht.create(e,s):this.addInner(e,s,0):this}addInner(e,s,r){let a,i=0;e.forEach((c,d)=>{let h=d+r,m;if(m=jM(s,c,h)){for(a||(a=this.children.slice());i<a.length&&a[i]<d;)i+=3;a[i]==d?a[i+2]=a[i+2].addInner(c,m,h+1):a.splice(i,0,d,d+c.nodeSize,Ap(m,c,h+1,Fo)),i+=3}});let o=wM(i?NM(s):s,-r);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||o.splice(c--,1);return new Ht(o.length?this.local.concat(o).sort(Io):this.local,a||this.children)}remove(e){return e.length==0||this==en?this:this.removeInner(e,0)}removeInner(e,s){let r=this.children,a=this.local;for(let i=0;i<r.length;i+=3){let o,c=r[i]+s,d=r[i+1]+s;for(let m=0,p;m<e.length;m++)(p=e[m])&&p.from>c&&p.to<d&&(e[m]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let h=r[i+2].removeInner(o,c+1);h!=en?r[i+2]=h:(r.splice(i,3),i-=3)}if(a.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let c=0;c<a.length;c++)a[c].eq(o,s)&&(a==this.local&&(a=this.local.slice()),a.splice(c--,1))}return r==this.children&&a==this.local?this:a.length||r.length?new Ht(a,r):en}forChild(e,s){if(this==en)return this;if(s.isLeaf)return Ht.empty;let r,a;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let i=e+1,o=i+s.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<o&&d.to>i&&d.type instanceof Pi){let h=Math.max(i,d.from)-i,m=Math.min(o,d.to)-i;h<m&&(a||(a=[])).push(d.copy(h,m))}}if(a){let c=new Ht(a.sort(Io),dc);return r?new Ci([c,r]):c}return r||en}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(e.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=e.children[s]||this.children[s+1]!=e.children[s+1]||!this.children[s+2].eq(e.children[s+2]))return!1;return!0}locals(e){return lj(this.localsInner(e))}localsInner(e){if(this==en)return dc;if(e.inlineContent||!this.local.some(Pi.is))return this.local;let s=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Pi||s.push(this.local[r]);return s}forEachSet(e){e(this)}}Ht.empty=new Ht([],[]);Ht.removeOverlap=lj;const en=Ht.empty;class Ci{constructor(e){this.members=e}map(e,s){const r=this.members.map(a=>a.map(e,s,Fo));return Ci.from(r)}forChild(e,s){if(s.isLeaf)return Ht.empty;let r=[];for(let a=0;a<this.members.length;a++){let i=this.members[a].forChild(e,s);i!=en&&(i instanceof Ci?r=r.concat(i.members):r.push(i))}return Ci.from(r)}eq(e){if(!(e instanceof Ci)||e.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(e.members[s]))return!1;return!0}locals(e){let s,r=!0;for(let a=0;a<this.members.length;a++){let i=this.members[a].localsInner(e);if(i.length)if(!s)s=i;else{r&&(s=s.slice(),r=!1);for(let o=0;o<i.length;o++)s.push(i[o])}}return s?lj(r?s:s.sort(Io)):dc}static from(e){switch(e.length){case 0:return en;case 1:return e[0];default:return new Ci(e.every(s=>s instanceof Ht)?e:e.reduce((s,r)=>s.concat(r instanceof Ht?r:r.members),[]))}}forEachSet(e){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(e)}}function WX(t,e,s,r,a,i,o){let c=t.slice();for(let h=0,m=i;h<s.maps.length;h++){let p=0;s.maps[h].forEach((g,b,v,N)=>{let j=N-v-(b-g);for(let w=0;w<c.length;w+=3){let _=c[w+1];if(_<0||g>_+m-p)continue;let k=c[w]+m-p;b>=k?c[w+1]=g<=k?-2:-1:g>=m&&j&&(c[w]+=j,c[w+1]+=j)}p+=j}),m=s.maps[h].map(m,-1)}let d=!1;for(let h=0;h<c.length;h+=3)if(c[h+1]<0){if(c[h+1]==-2){d=!0,c[h+1]=-1;continue}let m=s.map(t[h]+i),p=m-a;if(p<0||p>=r.content.size){d=!0;continue}let g=s.map(t[h+1]+i,-1),b=g-a,{index:v,offset:N}=r.content.findIndex(p),j=r.maybeChild(v);if(j&&N==p&&N+j.nodeSize==b){let w=c[h+2].mapInner(s,j,m+1,t[h]+i+1,o);w!=en?(c[h]=p,c[h+1]=b,c[h+2]=w):(c[h+1]=-2,d=!0)}else d=!0}if(d){let h=YX(c,t,e,s,a,i,o),m=Ap(h,r,0,o);e=m.local;for(let p=0;p<c.length;p+=3)c[p+1]<0&&(c.splice(p,3),p-=3);for(let p=0,g=0;p<m.children.length;p+=3){let b=m.children[p];for(;g<c.length&&c[g]<b;)g+=3;c.splice(g,0,m.children[p],m.children[p+1],m.children[p+2])}}return new Ht(e.sort(Io),c)}function wM(t,e){if(!e||!t.length)return t;let s=[];for(let r=0;r<t.length;r++){let a=t[r];s.push(new rn(a.from+e,a.to+e,a.type))}return s}function YX(t,e,s,r,a,i,o){function c(d,h){for(let m=0;m<d.local.length;m++){let p=d.local[m].map(r,a,h);p?s.push(p):o.onRemove&&o.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)c(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],e[d]+i+1);return s}function jM(t,e,s){if(e.isLeaf)return null;let r=s+e.nodeSize,a=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>s&&o.to<r&&((a||(a=[])).push(o),t[i]=null);return a}function NM(t){let e=[];for(let s=0;s<t.length;s++)t[s]!=null&&e.push(t[s]);return e}function Ap(t,e,s,r){let a=[],i=!1;e.forEach((c,d)=>{let h=jM(t,c,d+s);if(h){i=!0;let m=Ap(h,c,s+d+1,r);m!=en&&a.push(d,d+c.nodeSize,m)}});let o=wM(i?NM(t):t,-s).sort(Io);for(let c=0;c<o.length;c++)o[c].type.valid(e,o[c])||(r.onRemove&&r.onRemove(o[c].spec),o.splice(c--,1));return o.length||a.length?new Ht(o,a):en}function Io(t,e){return t.from-e.from||t.to-e.to}function lj(t){let e=t;for(let s=0;s<e.length-1;s++){let r=e[s];if(r.from!=r.to)for(let a=s+1;a<e.length;a++){let i=e[a];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[a]=i.copy(i.from,r.to),b5(e,a+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[s]=r.copy(r.from,i.from),b5(e,a,r.copy(i.from,r.to)));break}}}return e}function b5(t,e,s){for(;e<t.length&&Io(s,t[e])>0;)e++;t.splice(e,0,s)}function vv(t){let e=[];return t.someProp("decorations",s=>{let r=s(t.state);r&&r!=en&&e.push(r)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),Ci.from(e)}const KX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},JX=Rn&&Ri<=11;class XX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class QX{constructor(e,s){this.view=e,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new XX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let a=0;a<r.length;a++)this.queue.push(r[a]);Rn&&Ri<=11&&r.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),JX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,KX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let s=0;s<e.length;s++)this.queue.push(e[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(d5(this.view)){if(this.suppressingSelectionUpdates)return Fa(this.view);if(Rn&&Ri<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Jo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let s=new Set,r;for(let i=e.focusNode;i;i=Oc(i))s.add(i);for(let i=e.anchorNode;i;i=Oc(i))if(s.has(i)){r=i;break}let a=r&&this.view.docView.nearestDesc(r);if(a&&a.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let r=e.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&d5(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,c=!1,d=[];if(e.editable)for(let m=0;m<s.length;m++){let p=this.registerMutation(s[m],d);p&&(i=i<0?p.from:Math.min(p.from,i),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(c=!0))}if(Fr&&d.length){let m=d.filter(p=>p.nodeName=="BR");if(m.length==2){let[p,g]=m;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of m){let b=g.parentNode;b&&b.nodeName=="LI"&&(!p||tQ(e,p)!=b)&&g.remove()}}}let h=null;i<0&&a&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&F0(r)&&(h=tj(e))&&h.eq(ut.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Fa(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||a)&&(i>-1&&(e.docView.markDirty(i,o),ZX(e)),this.handleDOMChange(i,o,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Fa(e),this.currentSelection.set(r))}registerMutation(e,s){if(s.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let p=e.addedNodes[m];s.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let a=e.previousSibling,i=e.nextSibling;if(Rn&&Ri<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:p,nextSibling:g}=e.addedNodes[m];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(a=p),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g)}let o=a&&a.parentNode==e.target?Ws(a)+1:0,c=r.localPosFromDOM(e.target,o,-1),d=i&&i.parentNode==e.target?Ws(i):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:c,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let v5=new WeakMap,y5=!1;function ZX(t){if(!v5.has(t)&&(v5.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Fr,y5)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),y5=!0}}function w5(t,e){let s=e.startContainer,r=e.startOffset,a=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Jo(o.node,o.offset,a,i)&&([s,r,a,i]=[a,i,s,r]),{anchorNode:s,anchorOffset:r,focusNode:a,focusOffset:i}}function eQ(t,e){if(e.getComposedRanges){let a=e.getComposedRanges(t.root)[0];if(a)return w5(t,a)}let s;function r(a){a.preventDefault(),a.stopImmediatePropagation(),s=a.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),s?w5(t,s):null}function tQ(t,e){for(let s=e.parentNode;s&&s!=t.dom;s=s.parentNode){let r=t.docView.nearestDesc(s,!0);if(r&&r.node.isBlock)return s}return null}function sQ(t,e,s){let{node:r,fromOffset:a,toOffset:i,from:o,to:c}=t.docView.parseRange(e,s),d=t.domSelectionRange(),h,m=d.anchorNode;if(m&&t.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],F0(d)||h.push({node:d.focusNode,offset:d.focusOffset})),nn&&t.input.lastKeyCode===8)for(let j=i;j>a;j--){let w=r.childNodes[j-1],_=w.pmViewDesc;if(w.nodeName=="BR"&&!_){i=j;break}if(!_||_.size)break}let p=t.state.doc,g=t.someProp("domParser")||Oi.fromSchema(t.state.schema),b=p.resolve(o),v=null,N=g.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:i,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:nQ,context:b});if(h&&h[0].pos!=null){let j=h[0].pos,w=h[1]&&h[1].pos;w==null&&(w=j),v={anchor:j+o,head:w+o}}return{doc:N,sel:v,from:o,to:c}}function nQ(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(gn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(t.parentNode.lastChild==t||gn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const rQ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function aQ(t,e,s,r,a){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=tj(t,R);if(D&&!t.state.selection.eq(D)){if(nn&&Ra&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",B=>B(t,Co(13,"Enter"))))return;let L=t.state.tr.setSelection(D);R=="pointer"?L.setMeta("pointer",!0):R=="key"&&L.scrollIntoView(),i&&L.setMeta("composition",i),t.dispatch(L)}return}let o=t.state.doc.resolve(e),c=o.sharedDepth(s);e=o.before(c+1),s=t.state.doc.resolve(s).after(c+1);let d=t.state.selection,h=sQ(t,e,s),m=t.state.doc,p=m.slice(h.from,h.to),g,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(g=t.state.selection.to,b="end"):(g=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let v=lQ(p.content,h.doc.content,h.from,g,b);if(v&&t.input.domChangeCount++,(Rc&&t.input.lastIOSEnter>Date.now()-225||Ra)&&a.some(R=>R.nodeType==1&&!rQ.test(R.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",R=>R(t,Co(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&d instanceof at&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))v={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let R=j5(t,t.state.doc,h.sel);if(R&&!R.eq(t.state.selection)){let D=t.state.tr.setSelection(R);i&&D.setMeta("composition",i),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof at&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),Rn&&Ri<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>h.from&&h.doc.textBetween(v.start-h.from-1,v.start-h.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let N=h.doc.resolveNoCache(v.start-h.from),j=h.doc.resolveNoCache(v.endB-h.from),w=m.resolve(v.start),_=N.sameParent(j)&&N.parent.inlineContent&&w.end()>=v.endA,k;if((Rc&&t.input.lastIOSEnter>Date.now()-225&&(!_||a.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!_&&N.pos<h.doc.content.size&&(!N.sameParent(j)||!N.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(N.pos,j.pos,"",""))&&(k=ut.findFrom(h.doc.resolve(N.pos+1),1,!0))&&k.head>N.pos)&&t.someProp("handleKeyDown",R=>R(t,Co(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&oQ(m,v.start,v.endA,N,j)&&t.someProp("handleKeyDown",R=>R(t,Co(8,"Backspace")))){Ra&&nn&&t.domObserver.suppressSelectionUpdates();return}nn&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),Ra&&!_&&N.start()!=j.start()&&j.parentOffset==0&&N.depth==j.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==v.endA&&(v.endB-=2,j=h.doc.resolveNoCache(v.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,Co(13,"Enter"))})},20));let C=v.start,E=v.endA,A=R=>{let D=R||t.state.tr.replace(C,E,h.doc.slice(v.start-h.from,v.endB-h.from));if(h.sel){let L=j5(t,D.doc,h.sel);L&&!(nn&&t.composing&&L.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==C||L.head==D.mapping.map(E)-1)||Rn&&L.empty&&L.head==C)&&D.setSelection(L)}return i&&D.setMeta("composition",i),D.scrollIntoView()},M;if(_){if(N.pos==j.pos){Rn&&Ri<=11&&N.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fa(t),20));let R=A(t.state.tr.delete(C,E)),D=m.resolve(v.start).marksAcross(m.resolve(v.endA));D&&R.ensureMarks(D),t.dispatch(R)}else if(v.endA==v.endB&&(M=iQ(N.parent.content.cut(N.parentOffset,j.parentOffset),w.parent.content.cut(w.parentOffset,v.endA-w.start())))){let R=A(t.state.tr);M.type=="add"?R.addMark(C,E,M.mark):R.removeMark(C,E,M.mark),t.dispatch(R)}else if(N.parent.child(N.index()).isText&&N.index()==j.index()-(j.textOffset?0:1)){let R=N.parent.textBetween(N.parentOffset,j.parentOffset),D=()=>A(t.state.tr.insertText(R,C,E));t.someProp("handleTextInput",L=>L(t,C,E,R,D))||t.dispatch(D())}}else t.dispatch(A())}function j5(t,e,s){return Math.max(s.anchor,s.head)>e.content.size?null:sj(t,e.resolve(s.anchor),e.resolve(s.head))}function iQ(t,e){let s=t.firstChild.marks,r=e.firstChild.marks,a=s,i=r,o,c,d;for(let m=0;m<r.length;m++)a=r[m].removeFromSet(a);for(let m=0;m<s.length;m++)i=s[m].removeFromSet(i);if(a.length==1&&i.length==0)c=a[0],o="add",d=m=>m.mark(c.addToSet(m.marks));else if(a.length==0&&i.length==1)c=i[0],o="remove",d=m=>m.mark(c.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(ke.from(h).eq(t))return{mark:c,type:o}}function oQ(t,e,s,r,a){if(s-e<=a.pos-r.pos||yv(r,!0,!1)<a.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let c=i.nodeAfter;return c!=null&&s==e+c.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(yv(i,!0,!0));return!o.parent.isTextblock||o.pos>s||yv(o,!0,!1)<s?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function yv(t,e,s){let r=t.depth,a=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,a++,e=!1;if(s){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,a++}return a}function lQ(t,e,s,r,a){let i=t.findDiffStart(e,s);if(i==null)return null;let{a:o,b:c}=t.findDiffEnd(e,s+t.size,s+e.size);if(a=="end"){let d=Math.max(0,i-Math.min(o,c));r-=o+d-i}if(o<i&&t.size<e.size){let d=r<=i&&r>=o?i-r:0;i-=d,i&&i<e.size&&N5(e.textBetween(i-1,i+1))&&(i+=d?1:-1),c=i+(c-o),o=i}else if(c<i){let d=r<=i&&r>=c?i-r:0;i-=d,i&&i<t.size&&N5(t.textBetween(i-1,i+1))&&(i+=d?1:-1),o=i+(o-c),c=i}return{start:i,endA:o,endB:c}}function N5(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),s=t.charCodeAt(1);return e>=56320&&e<=57343&&s>=55296&&s<=56319}class SM{constructor(e,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(E5),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=C5(this),_5(this),this.nodeViews=k5(this),this.docView=r5(this.state.doc,S5(this),vv(this),this.dom,this),this.domObserver=new QX(this,(r,a,i,o)=>aQ(this,r,a,i,o)),this.domObserver.start(),EX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let s in e)this._props[s]=e[s];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&sw(this);let s=this._props;this._props=e,e.plugins&&(e.plugins.forEach(E5),this.directPlugins=e.plugins),this.updateStateInner(e.state,s)}setProps(e){let s={};for(let r in this._props)s[r]=this._props[r];s.state=this.state;for(let r in e)s[r]=e[r];this.update(s)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,s){var r;let a=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(xM(this),o=!0),this.state=e;let c=a.plugins!=e.plugins||this._props.plugins!=s.plugins;if(c||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let b=k5(this);dQ(b,this.nodeViews)&&(this.nodeViews=b,i=!0)}(c||s.handleDOMEvents!=this._props.handleDOMEvents)&&sw(this),this.editable=C5(this),_5(this);let d=vv(this),h=S5(this),m=a.plugins!=e.plugins&&!a.doc.eq(e.doc)?"reset":e.scrollToSelection>a.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,h,d);(p||!e.selection.eq(a.selection))&&(o=!0);let g=m=="preserve"&&o&&this.dom.style.overflowAnchor==null&&UJ(this);if(o){this.domObserver.stop();let b=p&&(Rn||nn)&&!this.composing&&!a.selection.empty&&!e.selection.empty&&cQ(a.selection,e.selection);if(p){let v=nn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=BX(this)),(i||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=r5(e.doc,h,d,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hX(this))?Fa(this,b):(aM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((r=this.dragging)===null||r===void 0)&&r.node&&!a.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,a),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():g&&VJ(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof Je){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&Q6(this,s.getBoundingClientRect(),e)}else Q6(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let r=this.directPlugins[s];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let r=this.state.plugins[s];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let r=this.pluginViews[s];r.update&&r.update(this,e)}}updateDraggedNode(e,s){let r=e.node,a=-1;if(this.state.doc.nodeAt(r.from)==r.node)a=r.from;else{let i=r.from+(this.state.doc.content.size-s.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(a=i)}this.dragging=new vM(e.slice,e.move,a<0?void 0:Je.create(this.state.doc,a))}someProp(e,s){let r=this._props&&this._props[e],a;if(r!=null&&(a=s?s(r):r))return a;for(let o=0;o<this.directPlugins.length;o++){let c=this.directPlugins[o].props[e];if(c!=null&&(a=s?s(c):c))return a}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let c=i[o].props[e];if(c!=null&&(a=s?s(c):c))return a}}hasFocus(){if(Rn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&qJ(this.dom),Fa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return e||document}updateRoot(){this._root=null}posAtCoords(e){return KJ(this,e)}coordsAtPos(e,s=1){return XT(this,e,s)}domAtPos(e,s=0){return this.docView.domFromPos(e,s)}nodeDOM(e){let s=this.docView.descAt(e);return s?s.nodeDOM:null}posAtDOM(e,s,r=-1){let a=this.docView.posFromDOM(e,s,r);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(e,s){return eX(this,s||this.state,e)}pasteHTML(e,s){return dh(this,"",e,!1,s||new ClipboardEvent("paste"))}pasteText(e,s){return dh(this,e,null,!0,s||new ClipboardEvent("paste"))}serializeForClipboard(e){return nj(this,e)}destroy(){this.docView&&(AX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,MJ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return MX(this,e)}domSelectionRange(){let e=this.domSelection();return e?gn&&this.root.nodeType===11&&zJ(this.dom.ownerDocument)==this.dom&&eQ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}SM.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function S5(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(t.state)),s)for(let r in s)r=="class"?e.class+=" "+s[r]:r=="style"?e.style=(e.style?e.style+";":"")+s[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(s[r]))}),e.translate||(e.translate="no"),[rn.node(0,t.state.doc.content.size,e)]}function _5(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:rn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function C5(t){return!t.someProp("editable",e=>e(t.state)===!1)}function cQ(t,e){let s=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(s)!=e.$anchor.start(s)}function k5(t){let e=Object.create(null);function s(r){for(let a in r)Object.prototype.hasOwnProperty.call(e,a)||(e[a]=r[a])}return t.someProp("nodeViews",s),t.someProp("markViews",s),e}function dQ(t,e){let s=0,r=0;for(let a in t){if(t[a]!=e[a])return!0;s++}for(let a in e)r++;return s!=r}function E5(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ii={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),hQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ys=0;Ys<10;Ys++)Ii[48+Ys]=Ii[96+Ys]=String(Ys);for(var Ys=1;Ys<=24;Ys++)Ii[Ys+111]="F"+Ys;for(var Ys=65;Ys<=90;Ys++)Ii[Ys]=String.fromCharCode(Ys+32),Tp[Ys]=String.fromCharCode(Ys);for(var wv in Ii)Tp.hasOwnProperty(wv)||(Tp[wv]=Ii[wv]);function mQ(t){var e=uQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||hQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?Tp:Ii)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const fQ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),pQ=typeof navigator<"u"&&/Win/.test(navigator.platform);function gQ(t){let e=t.split(/-(?!$)/),s=e[e.length-1];s=="Space"&&(s=" ");let r,a,i,o;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))o=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))fQ?o=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(s="Alt-"+s),a&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function xQ(t){let e=Object.create(null);for(let s in t)e[gQ(s)]=t[s];return e}function jv(t,e,s=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s&&e.shiftKey&&(t="Shift-"+t),t}function bQ(t){return new Qt({props:{handleKeyDown:_M(t)}})}function _M(t){let e=xQ(t);return function(s,r){let a=mQ(r),i,o=e[jv(a,r)];if(o&&o(s.state,s.dispatch,s))return!0;if(a.length==1&&a!=" "){if(r.shiftKey){let c=e[jv(a,r,!1)];if(c&&c(s.state,s.dispatch,s))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(pQ&&r.ctrlKey&&r.altKey)&&(i=Ii[r.keyCode])&&i!=a){let c=e[jv(i,r)];if(c&&c(s.state,s.dispatch,s))return!0}}return!1}}const cj=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CM(t,e){let{$cursor:s}=t.selection;return!s||(e?!e.endOfTextblock("backward",t):s.parentOffset>0)?null:s}const kM=(t,e,s)=>{let r=CM(t,s);if(!r)return!1;let a=dj(r);if(!a){let o=r.blockRange(),c=o&&td(o);return c==null?!1:(e&&e(t.tr.lift(o,c).scrollIntoView()),!0)}let i=a.nodeBefore;if(zM(t,a,e,-1))return!0;if(r.parent.content.size==0&&(Dc(i,"end")||Je.isSelectable(i)))for(let o=r.depth;;o--){let c=L0(t.doc,r.before(o),r.after(o),Le.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=t.tr.step(c);d.setSelection(Dc(i,"end")?ut.findFrom(d.doc.resolve(d.mapping.map(a.pos,-1)),-1):Je.create(d.doc,a.pos-i.nodeSize)),e(d.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&a.depth==r.depth-1?(e&&e(t.tr.delete(a.pos-i.nodeSize,a.pos).scrollIntoView()),!0):!1},vQ=(t,e,s)=>{let r=CM(t,s);if(!r)return!1;let a=dj(r);return a?EM(t,a,e):!1},yQ=(t,e,s)=>{let r=TM(t,s);if(!r)return!1;let a=uj(r);return a?EM(t,a,e):!1};function EM(t,e,s){let r=e.nodeBefore,a=r,i=e.pos-1;for(;!a.isTextblock;i--){if(a.type.spec.isolating)return!1;let m=a.lastChild;if(!m)return!1;a=m}let o=e.nodeAfter,c=o,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let m=c.firstChild;if(!m)return!1;c=m}let h=L0(t.doc,i,d,Le.empty);if(!h||h.from!=i||h instanceof Ds&&h.slice.size>=d-i)return!1;if(s){let m=t.tr.step(h);m.setSelection(at.create(m.doc,i)),s(m.scrollIntoView())}return!0}function Dc(t,e,s=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(s&&r.childCount!=1)return!1}return!1}const AM=(t,e,s)=>{let{$head:r,empty:a}=t.selection,i=r;if(!a)return!1;if(r.parent.isTextblock){if(s?!s.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=dj(r)}let o=i&&i.nodeBefore;return!o||!Je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Je.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function dj(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function TM(t,e){let{$cursor:s}=t.selection;return!s||(e?!e.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)?null:s}const MM=(t,e,s)=>{let r=TM(t,s);if(!r)return!1;let a=uj(r);if(!a)return!1;let i=a.nodeAfter;if(zM(t,a,e,1))return!0;if(r.parent.content.size==0&&(Dc(i,"start")||Je.isSelectable(i))){let o=L0(t.doc,r.before(),r.after(),Le.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=t.tr.step(o);c.setSelection(Dc(i,"start")?ut.findFrom(c.doc.resolve(c.mapping.map(a.pos)),1):Je.create(c.doc,c.mapping.map(a.pos))),e(c.scrollIntoView())}return!0}}return i.isAtom&&a.depth==r.depth-1?(e&&e(t.tr.delete(a.pos,a.pos+i.nodeSize).scrollIntoView()),!0):!1},OM=(t,e,s)=>{let{$head:r,empty:a}=t.selection,i=r;if(!a)return!1;if(r.parent.isTextblock){if(s?!s.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=uj(r)}let o=i&&i.nodeAfter;return!o||!Je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Je.create(t.doc,i.pos)).scrollIntoView()),!0)};function uj(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let s=t.node(e);if(t.index(e)+1<s.childCount)return t.doc.resolve(t.after(e+1));if(s.type.spec.isolating)break}return null}const wQ=(t,e)=>{let s=t.selection,r=s instanceof Je,a;if(r){if(s.node.isTextblock||!Yi(t.doc,s.from))return!1;a=s.from}else if(a=z0(t.doc,s.from,-1),a==null)return!1;if(e){let i=t.tr.join(a);r&&i.setSelection(Je.create(i.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},jQ=(t,e)=>{let s=t.selection,r;if(s instanceof Je){if(s.node.isTextblock||!Yi(t.doc,s.to))return!1;r=s.to}else if(r=z0(t.doc,s.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},NQ=(t,e)=>{let{$from:s,$to:r}=t.selection,a=s.blockRange(r),i=a&&td(a);return i==null?!1:(e&&e(t.tr.lift(a,i).scrollIntoView()),!0)},RM=(t,e)=>{let{$head:s,$anchor:r}=t.selection;return!s.parent.type.spec.code||!s.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function hj(t){for(let e=0;e<t.edgeCount;e++){let{type:s}=t.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const SQ=(t,e)=>{let{$head:s,$anchor:r}=t.selection;if(!s.parent.type.spec.code||!s.sameParent(r))return!1;let a=s.node(-1),i=s.indexAfter(-1),o=hj(a.contentMatchAt(i));if(!o||!a.canReplaceWith(i,i,o))return!1;if(e){let c=s.after(),d=t.tr.replaceWith(c,c,o.createAndFill());d.setSelection(ut.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},DM=(t,e)=>{let s=t.selection,{$from:r,$to:a}=s;if(s instanceof Qn||r.parent.inlineContent||a.parent.inlineContent)return!1;let i=hj(a.parent.contentMatchAt(a.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&a.index()<a.parent.childCount?r:a).pos,c=t.tr.insert(o,i.createAndFill());c.setSelection(at.create(c.doc,o+1)),e(c.scrollIntoView())}return!0},PM=(t,e)=>{let{$cursor:s}=t.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let i=s.before();if($a(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=s.blockRange(),a=r&&td(r);return a==null?!1:(e&&e(t.tr.lift(r,a).scrollIntoView()),!0)};function _Q(t){return(e,s)=>{let{$from:r,$to:a}=e.selection;if(e.selection instanceof Je&&e.selection.node.isBlock)return!r.parentOffset||!$a(e.doc,r.pos)?!1:(s&&s(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,c,d=!1,h=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){d=r.end(b)==r.pos+(r.depth-b),h=r.start(b)==r.pos-(r.depth-b),c=hj(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),i.unshift(d&&c?{type:c}:null),o=b;break}else{if(b==1)return!1;i.unshift(null)}let m=e.tr;(e.selection instanceof at||e.selection instanceof Qn)&&m.deleteSelection();let p=m.mapping.map(r.pos),g=$a(m.doc,p,i.length,i);if(g||(i[0]=c?{type:c}:null,g=$a(m.doc,p,i.length,i)),!g)return!1;if(m.split(p,i.length,i),!d&&h&&r.node(o).type!=c){let b=m.mapping.map(r.before(o)),v=m.doc.resolve(b);c&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,c)&&m.setNodeMarkup(m.mapping.map(r.before(o)),c)}return s&&s(m.scrollIntoView()),!0}}const CQ=_Q(),kQ=(t,e)=>{let{$from:s,to:r}=t.selection,a,i=s.sharedDepth(r);return i==0?!1:(a=s.before(i),e&&e(t.tr.setSelection(Je.create(t.doc,a))),!0)};function EQ(t,e,s){let r=e.nodeBefore,a=e.nodeAfter,i=e.index();return!r||!a||!r.type.compatibleContent(a.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(s&&s(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(a.isTextblock||Yi(t.doc,e.pos))?!1:(s&&s(t.tr.join(e.pos).scrollIntoView()),!0)}function zM(t,e,s,r){let a=e.nodeBefore,i=e.nodeAfter,o,c,d=a.type.spec.isolating||i.type.spec.isolating;if(!d&&EQ(t,e,s))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(o=(c=a.contentMatchAt(a.childCount)).findWrapping(i.type))&&c.matchType(o[0]||i.type).validEnd){if(s){let b=e.pos+i.nodeSize,v=ke.empty;for(let w=o.length-1;w>=0;w--)v=ke.from(o[w].create(null,v));v=ke.from(a.copy(v));let N=t.tr.step(new zs(e.pos-1,b,e.pos,b,new Le(v,1,0),o.length,!0)),j=N.doc.resolve(b+2*o.length);j.nodeAfter&&j.nodeAfter.type==a.type&&Yi(N.doc,j.pos)&&N.join(j.pos),s(N.scrollIntoView())}return!0}let m=i.type.spec.isolating||r>0&&d?null:ut.findFrom(e,1),p=m&&m.$from.blockRange(m.$to),g=p&&td(p);if(g!=null&&g>=e.depth)return s&&s(t.tr.lift(p,g).scrollIntoView()),!0;if(h&&Dc(i,"start",!0)&&Dc(a,"end")){let b=a,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let N=i,j=1;for(;!N.isTextblock;N=N.firstChild)j++;if(b.canReplace(b.childCount,b.childCount,N.content)){if(s){let w=ke.empty;for(let k=v.length-1;k>=0;k--)w=ke.from(v[k].copy(w));let _=t.tr.step(new zs(e.pos-v.length,e.pos+i.nodeSize,e.pos+j,e.pos+i.nodeSize-j,new Le(w,v.length,0),0,!0));s(_.scrollIntoView())}return!0}}return!1}function LM(t){return function(e,s){let r=e.selection,a=t<0?r.$from:r.$to,i=a.depth;for(;a.node(i).isInline;){if(!i)return!1;i--}return a.node(i).isTextblock?(s&&s(e.tr.setSelection(at.create(e.doc,t<0?a.start(i):a.end(i)))),!0):!1}}const AQ=LM(-1),TQ=LM(1);function MQ(t,e=null){return function(s,r){let{$from:a,$to:i}=s.selection,o=a.blockRange(i),c=o&&Q1(o,t,e);return c?(r&&r(s.tr.wrap(o,c).scrollIntoView()),!0):!1}}function A5(t,e=null){return function(s,r){let a=!1;for(let i=0;i<s.selection.ranges.length&&!a;i++){let{$from:{pos:o},$to:{pos:c}}=s.selection.ranges[i];s.doc.nodesBetween(o,c,(d,h)=>{if(a)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)a=!0;else{let m=s.doc.resolve(h),p=m.index();a=m.parent.canReplaceWith(p,p+1,t)}})}if(!a)return!1;if(r){let i=s.tr;for(let o=0;o<s.selection.ranges.length;o++){let{$from:{pos:c},$to:{pos:d}}=s.selection.ranges[o];i.setBlockType(c,d,t,e)}r(i.scrollIntoView())}return!0}}function mj(...t){return function(e,s,r){for(let a=0;a<t.length;a++)if(t[a](e,s,r))return!0;return!1}}mj(cj,kM,AM);mj(cj,MM,OM);mj(RM,DM,PM,CQ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OQ(t,e=null){return function(s,r){let{$from:a,$to:i}=s.selection,o=a.blockRange(i);if(!o)return!1;let c=r?s.tr:null;return RQ(c,o,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function RQ(t,e,s,r=null){let a=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(s)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=o.resolve(e.start-2);i=new Np(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Np(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),a=!0}let c=Q1(i,s,r,e);return c?(t&&DQ(t,e,c,a,s),!0):!1}function DQ(t,e,s,r,a){let i=ke.empty;for(let m=s.length-1;m>=0;m--)i=ke.from(s[m].type.create(s[m].attrs,i));t.step(new zs(e.start-(r?2:0),e.end,e.start,e.end,new Le(i,0,0),s.length,!0));let o=0;for(let m=0;m<s.length;m++)s[m].type==a&&(o=m+1);let c=s.length-o,d=e.start+s.length-(r?2:0),h=e.parent;for(let m=e.startIndex,p=e.endIndex,g=!0;m<p;m++,g=!1)!g&&$a(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=h.child(m).nodeSize;return t}function PQ(t){return function(e,s){let{$from:r,$to:a}=e.selection,i=r.blockRange(a,o=>o.childCount>0&&o.firstChild.type==t);return i?s?r.node(i.depth-1).type==t?zQ(e,s,t,i):LQ(e,s,i):!0:!1}}function zQ(t,e,s,r){let a=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(a.step(new zs(i-1,o,i,o,new Le(ke.from(s.create(null,r.parent.copy())),1,0),1,!0)),r=new Np(a.doc.resolve(r.$from.pos),a.doc.resolve(o),r.depth));const c=td(r);if(c==null)return!1;a.lift(r,c);let d=a.doc.resolve(a.mapping.map(i,-1)-1);return Yi(a.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&a.join(d.pos),e(a.scrollIntoView()),!0}function LQ(t,e,s){let r=t.tr,a=s.parent;for(let b=s.end,v=s.endIndex-1,N=s.startIndex;v>N;v--)b-=a.child(v).nodeSize,r.delete(b-1,b+1);let i=r.doc.resolve(s.start),o=i.nodeAfter;if(r.mapping.map(s.end)!=s.start+i.nodeAfter.nodeSize)return!1;let c=s.startIndex==0,d=s.endIndex==a.childCount,h=i.node(-1),m=i.index(-1);if(!h.canReplace(m+(c?0:1),m+1,o.content.append(d?ke.empty:ke.from(a))))return!1;let p=i.pos,g=p+o.nodeSize;return r.step(new zs(p-(c?1:0),g+(d?1:0),p+1,g-1,new Le((c?ke.empty:ke.from(a.copy(ke.empty))).append(d?ke.empty:ke.from(a.copy(ke.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function $Q(t){return function(e,s){let{$from:r,$to:a}=e.selection,i=r.blockRange(a,h=>h.childCount>0&&h.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let c=i.parent,d=c.child(o-1);if(d.type!=t)return!1;if(s){let h=d.lastChild&&d.lastChild.type==c.type,m=ke.from(h?t.create():null),p=new Le(ke.from(t.create(null,ke.from(c.type.create(null,m)))),h?3:1,0),g=i.start,b=i.end;s(e.tr.step(new zs(g-(h?3:1),b,g,b,p,1,!0)).scrollIntoView())}return!0}}var FQ=Object.defineProperty,$M=(t,e)=>{for(var s in e)FQ(t,s,{get:e[s],enumerable:!0})};function U0(t){const{state:e,transaction:s}=t;let{selection:r}=s,{doc:a}=s,{storedMarks:i}=s;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return a},get tr(){return r=s.selection,a=s.doc,i=s.storedMarks,s}}}var V0=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:s}=this,{view:r}=e,{tr:a}=s,i=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([o,c])=>[o,(...h)=>{const m=c(...h)(i);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(a),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:s,editor:r,state:a}=this,{view:i}=r,o=[],c=!!t,d=t||a.tr,h=()=>(!c&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(d),o.every(p=>p===!0)),m={...Object.fromEntries(Object.entries(s).map(([p,g])=>[p,(...v)=>{const N=this.buildProps(d,e),j=g(...v)(N);return o.push(j),m}])),run:h};return m}createCan(t){const{rawCommands:e,state:s}=this,r=!1,a=t||s.tr,i=this.buildProps(a,r);return{...Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...h)=>d(...h)({...i,dispatch:void 0})])),chain:()=>this.createChain(a,r)}}buildProps(t,e=!0){const{rawCommands:s,editor:r,state:a}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:U0({state:a,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(s).map(([c,d])=>[c,(...h)=>d(...h)(o)]))}};return o}},IQ=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const s=this.callbacks[t];return s&&s.forEach(r=>r.apply(this,e)),this}off(t,e){const s=this.callbacks[t];return s&&(e?this.callbacks[t]=s.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const s=(...r)=>{this.off(t,s),e.apply(this,r)};return this.on(t,s)}removeAllListeners(){this.callbacks={}}};function FM(t,e){const s=new UT(t);return e.forEach(r=>{r.steps.forEach(a=>{s.step(a)})}),s}var IM=t=>{const e=t.childNodes;for(let s=e.length-1;s>=0;s-=1){const r=e[s];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&IM(r)}return t};function yf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,s=new window.DOMParser().parseFromString(e,"text/html").body;return IM(s)}function hh(t,e,s){if(t instanceof La||t instanceof ke)return t;s={slice:!0,parseOptions:{},...s};const r=typeof t=="object"&&t!==null,a=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ke.fromArray(t.map(c=>e.nodeFromJSON(c)));const o=e.nodeFromJSON(t);return s.errorOnInvalidContent&&o.check(),o}catch(i){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),hh("",e,s)}if(a){if(s.errorOnInvalidContent){let o=!1,c="";const d=new CT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(o=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(s.slice?Oi.fromSchema(d).parseSlice(yf(t),s.parseOptions):Oi.fromSchema(d).parse(yf(t),s.parseOptions),s.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const i=Oi.fromSchema(e);return s.slice?i.parseSlice(yf(t),s.parseOptions).content:i.parse(yf(t),s.parseOptions)}return hh("",e,s)}function nw(t,e,s={},r={}){return hh(t,e,{slice:!1,parseOptions:s,errorOnInvalidContent:r.errorOnInvalidContent})}function BQ(t){for(let e=0;e<t.edgeCount;e+=1){const{type:s}=t.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function UQ(t,e,s){const r=[];return t.nodesBetween(e.from,e.to,(a,i)=>{s(a)&&r.push({node:a,pos:i})}),r}function VQ(t,e){for(let s=t.depth;s>0;s-=1){const r=t.node(s);if(e(r))return{pos:s>0?t.before(s):0,start:t.start(s),depth:s,node:r}}}function q0(t){return e=>VQ(e.$from,t)}function Ge(t,e,s){return t.config[e]===void 0&&t.parent?Ge(t.parent,e,s):typeof t.config[e]=="function"?t.config[e].bind({...s,parent:t.parent?Ge(t.parent,e,s):null}):t.config[e]}function fj(t){return t.map(e=>{const s={name:e.name,options:e.options,storage:e.storage},r=Ge(e,"addExtensions",s);return r?[e,...fj(r())]:e}).flat(10)}function pj(t,e){const s=nl.fromSchema(e).serializeFragment(t),a=document.implementation.createHTMLDocument().createElement("div");return a.appendChild(s),a.innerHTML}function BM(t){return typeof t=="function"}function Rt(t,e=void 0,...s){return BM(t)?e?t.bind(e)(...s):t(...s):t}function qQ(t={}){return Object.keys(t).length===0&&t.constructor===Object}function mh(t){const e=t.filter(a=>a.type==="extension"),s=t.filter(a=>a.type==="node"),r=t.filter(a=>a.type==="mark");return{baseExtensions:e,nodeExtensions:s,markExtensions:r}}function UM(t){const e=[],{nodeExtensions:s,markExtensions:r}=mh(t),a=[...s,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const c={name:o.name,options:o.options,storage:o.storage,extensions:a},d=Ge(o,"addGlobalAttributes",c);if(!d)return;d().forEach(m=>{m.types.forEach(p=>{Object.entries(m.attributes).forEach(([g,b])=>{e.push({type:p,name:g,attribute:{...i,...b}})})})})}),a.forEach(o=>{const c={name:o.name,options:o.options,storage:o.storage},d=Ge(o,"addAttributes",c);if(!d)return;const h=d();Object.entries(h).forEach(([m,p])=>{const g={...i,...p};typeof(g==null?void 0:g.default)=="function"&&(g.default=g.default()),g!=null&&g.isRequired&&(g==null?void 0:g.default)===void 0&&delete g.default,e.push({type:o.name,name:m,attribute:g})})}),e}function Gt(...t){return t.filter(e=>!!e).reduce((e,s)=>{const r={...e};return Object.entries(s).forEach(([a,i])=>{if(!r[a]){r[a]=i;return}if(a==="class"){const c=i?String(i).split(" "):[],d=r[a]?r[a].split(" "):[],h=c.filter(m=>!d.includes(m));r[a]=[...d,...h].join(" ")}else if(a==="style"){const c=i?i.split(";").map(m=>m.trim()).filter(Boolean):[],d=r[a]?r[a].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[p,g]=m.split(":").map(b=>b.trim());h.set(p,g)}),c.forEach(m=>{const[p,g]=m.split(":").map(b=>b.trim());h.set(p,g)}),r[a]=Array.from(h.entries()).map(([m,p])=>`${m}: ${p}`).join("; ")}else r[a]=i}),r},{})}function Mp(t,e){return e.filter(s=>s.type===t.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(t.attrs)||{}:{[s.name]:t.attrs[s.name]}).reduce((s,r)=>Gt(s,r),{})}function HQ(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function T5(t,e){return"style"in t?t:{...t,getAttrs:s=>{const r=t.getAttrs?t.getAttrs(s):t.attrs;if(r===!1)return!1;const a=e.reduce((i,o)=>{const c=o.attribute.parseHTML?o.attribute.parseHTML(s):HQ(s.getAttribute(o.name));return c==null?i:{...i,[o.name]:c}},{});return{...r,...a}}}}function M5(t){return Object.fromEntries(Object.entries(t).filter(([e,s])=>e==="attrs"&&qQ(s)?!1:s!=null))}function GQ(t,e){var s;const r=UM(t),{nodeExtensions:a,markExtensions:i}=mh(t),o=(s=a.find(h=>Ge(h,"topNode")))==null?void 0:s.name,c=Object.fromEntries(a.map(h=>{const m=r.filter(w=>w.type===h.name),p={name:h.name,options:h.options,storage:h.storage,editor:e},g=t.reduce((w,_)=>{const k=Ge(_,"extendNodeSchema",p);return{...w,...k?k(h):{}}},{}),b=M5({...g,content:Rt(Ge(h,"content",p)),marks:Rt(Ge(h,"marks",p)),group:Rt(Ge(h,"group",p)),inline:Rt(Ge(h,"inline",p)),atom:Rt(Ge(h,"atom",p)),selectable:Rt(Ge(h,"selectable",p)),draggable:Rt(Ge(h,"draggable",p)),code:Rt(Ge(h,"code",p)),whitespace:Rt(Ge(h,"whitespace",p)),linebreakReplacement:Rt(Ge(h,"linebreakReplacement",p)),defining:Rt(Ge(h,"defining",p)),isolating:Rt(Ge(h,"isolating",p)),attrs:Object.fromEntries(m.map(w=>{var _,k;return[w.name,{default:(_=w==null?void 0:w.attribute)==null?void 0:_.default,validate:(k=w==null?void 0:w.attribute)==null?void 0:k.validate}]}))}),v=Rt(Ge(h,"parseHTML",p));v&&(b.parseDOM=v.map(w=>T5(w,m)));const N=Ge(h,"renderHTML",p);N&&(b.toDOM=w=>N({node:w,HTMLAttributes:Mp(w,m)}));const j=Ge(h,"renderText",p);return j&&(b.toText=j),[h.name,b]})),d=Object.fromEntries(i.map(h=>{const m=r.filter(j=>j.type===h.name),p={name:h.name,options:h.options,storage:h.storage,editor:e},g=t.reduce((j,w)=>{const _=Ge(w,"extendMarkSchema",p);return{...j,..._?_(h):{}}},{}),b=M5({...g,inclusive:Rt(Ge(h,"inclusive",p)),excludes:Rt(Ge(h,"excludes",p)),group:Rt(Ge(h,"group",p)),spanning:Rt(Ge(h,"spanning",p)),code:Rt(Ge(h,"code",p)),attrs:Object.fromEntries(m.map(j=>{var w,_;return[j.name,{default:(w=j==null?void 0:j.attribute)==null?void 0:w.default,validate:(_=j==null?void 0:j.attribute)==null?void 0:_.validate}]}))}),v=Rt(Ge(h,"parseHTML",p));v&&(b.parseDOM=v.map(j=>T5(j,m)));const N=Ge(h,"renderHTML",p);return N&&(b.toDOM=j=>N({mark:j,HTMLAttributes:Mp(j,m)})),[h.name,b]}));return new CT({topNode:o,nodes:c,marks:d})}function WQ(t){const e=t.filter((s,r)=>t.indexOf(s)!==r);return Array.from(new Set(e))}function gj(t){return t.sort((s,r)=>{const a=Ge(s,"priority")||100,i=Ge(r,"priority")||100;return a>i?-1:a<i?1:0})}function VM(t){const e=gj(fj(t)),s=WQ(e.map(r=>r.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function qM(t,e,s){const{from:r,to:a}=e,{blockSeparator:i=`

`,textSerializers:o={}}=s||{};let c="";return t.nodesBetween(r,a,(d,h,m,p)=>{var g;d.isBlock&&h>r&&(c+=i);const b=o==null?void 0:o[d.type.name];if(b)return m&&(c+=b({node:d,pos:h,parent:m,index:p,range:e})),!1;d.isText&&(c+=(g=d==null?void 0:d.text)==null?void 0:g.slice(Math.max(r,h)-h,a-h))}),c}function YQ(t,e){const s={from:0,to:t.content.size};return qM(t,s,e)}function HM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,s])=>[e,s.spec.toText]))}function Ga(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function GM(t,e){const s=Ga(e,t.schema),{from:r,to:a,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,a,d=>{o.push(...d.marks)});const c=o.find(d=>d.type.name===s.name);return c?{...c.attrs}:{}}function vs(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function KQ(t,e){const s=vs(e,t.schema),{from:r,to:a}=t.selection,i=[];t.doc.nodesBetween(r,a,c=>{i.push(c)});const o=i.reverse().find(c=>c.type.name===s.name);return o?{...o.attrs}:{}}function H0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function WM(t,e){const s=H0(typeof e=="string"?e:e.name,t.schema);return s==="node"?KQ(t,e):s==="mark"?GM(t,e):{}}function JQ(t,e=JSON.stringify){const s={};return t.filter(r=>{const a=e(r);return Object.prototype.hasOwnProperty.call(s,a)?!1:s[a]=!0})}function XQ(t){const e=JQ(t);return e.length===1?e:e.filter((s,r)=>!e.filter((i,o)=>o!==r).some(i=>s.oldRange.from>=i.oldRange.from&&s.oldRange.to<=i.oldRange.to&&s.newRange.from>=i.newRange.from&&s.newRange.to<=i.newRange.to))}function YM(t){const{mapping:e,steps:s}=t,r=[];return e.maps.forEach((a,i)=>{const o=[];if(a.ranges.length)a.forEach((c,d)=>{o.push({from:c,to:d})});else{const{from:c,to:d}=s[i];if(c===void 0||d===void 0)return;o.push({from:c,to:d})}o.forEach(({from:c,to:d})=>{const h=e.slice(i).map(c,-1),m=e.slice(i).map(d),p=e.invert().map(h,-1),g=e.invert().map(m);r.push({oldRange:{from:p,to:g},newRange:{from:h,to:m}})})}),XQ(r)}function xj(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Op(t,e,s={strict:!0}){const r=Object.keys(e);return r.length?r.every(a=>s.strict?e[a]===t[a]:xj(e[a])?e[a].test(t[a]):e[a]===t[a]):!0}function KM(t,e,s={}){return t.find(r=>r.type===e&&Op(Object.fromEntries(Object.keys(s).map(a=>[a,r.attrs[a]])),s))}function O5(t,e,s={}){return!!KM(t,e,s)}function bj(t,e,s){var r;if(!t||!e)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(m=>m.type===e))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(m=>m.type===e)||(s=s||((r=a.node.marks[0])==null?void 0:r.attrs),!KM([...a.node.marks],e,s)))return;let o=a.index,c=t.start()+a.offset,d=o+1,h=c+a.node.nodeSize;for(;o>0&&O5([...t.parent.child(o-1).marks],e,s);)o-=1,c-=t.parent.child(o).nodeSize;for(;d<t.parent.childCount&&O5([...t.parent.child(d).marks],e,s);)h+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:h}}function vj(t,e,s){const r=[];return t===e?s.resolve(t).marks().forEach(a=>{const i=s.resolve(t),o=bj(i,a.type);o&&r.push({mark:a,...o})}):s.nodesBetween(t,e,(a,i)=>{!a||(a==null?void 0:a.nodeSize)===void 0||r.push(...a.marks.map(o=>({from:i,to:i+a.nodeSize,mark:o})))}),r}var QQ=(t,e,s,r=20)=>{const a=t.doc.resolve(s);let i=r,o=null;for(;i>0&&o===null;){const c=a.node(i);(c==null?void 0:c.type.name)===e?o=c:i-=1}return[o,i]};function Nv(t,e){return e.nodes[t]||e.marks[t]||null}function qf(t,e,s){return Object.fromEntries(Object.entries(s).filter(([r])=>{const a=t.find(i=>i.type===e&&i.name===r);return a?a.attribute.keepOnSplit:!1}))}var ZQ=(t,e=500)=>{let s="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(a,i,o,c)=>{var d,h;const m=((h=(d=a.type.spec).toText)==null?void 0:h.call(d,{node:a,pos:i,parent:o,index:c}))||a.textContent||"%leaf%";s+=a.isAtom&&!a.isText?m:m.slice(0,Math.max(0,r-i))}),s};function rw(t,e,s={}){const{empty:r,ranges:a}=t.selection,i=e?Ga(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>i?i.name===p.type.name:!0).find(p=>Op(p.attrs,s,{strict:!1}));let o=0;const c=[];if(a.forEach(({$from:p,$to:g})=>{const b=p.pos,v=g.pos;t.doc.nodesBetween(b,v,(N,j)=>{if(!N.isText&&!N.marks.length)return;const w=Math.max(b,j),_=Math.min(v,j+N.nodeSize),k=_-w;o+=k,c.push(...N.marks.map(C=>({mark:C,from:w,to:_})))})}),o===0)return!1;const d=c.filter(p=>i?i.name===p.mark.type.name:!0).filter(p=>Op(p.mark.attrs,s,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),h=c.filter(p=>i?p.mark.type!==i&&p.mark.type.excludes(i):!0).reduce((p,g)=>p+g.to-g.from,0);return(d>0?d+h:d)>=o}function Bi(t,e,s={}){const{from:r,to:a,empty:i}=t.selection,o=e?vs(e,t.schema):null,c=[];t.doc.nodesBetween(r,a,(p,g)=>{if(p.isText)return;const b=Math.max(r,g),v=Math.min(a,g+p.nodeSize);c.push({node:p,from:b,to:v})});const d=a-r,h=c.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Op(p.node.attrs,s,{strict:!1}));return i?!!h.length:h.reduce((p,g)=>p+g.to-g.from,0)>=d}function eZ(t,e,s={}){if(!e)return Bi(t,null,s)||rw(t,null,s);const r=H0(e,t.schema);return r==="node"?Bi(t,e,s):r==="mark"?rw(t,e,s):!1}var tZ=(t,e)=>{const{$from:s,$to:r,$anchor:a}=t.selection;if(e){const i=q0(c=>c.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return a.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||s.pos!==r.pos)},sZ=t=>{const{$from:e,$to:s}=t.selection;return!(e.parentOffset>0||e.pos!==s.pos)};function R5(t,e){return Array.isArray(e)?e.some(s=>(typeof s=="string"?s:s.name)===t.name):e}function D5(t,e){const{nodeExtensions:s}=mh(e),r=s.find(o=>o.name===t);if(!r)return!1;const a={name:r.name,options:r.options,storage:r.storage},i=Rt(Ge(r,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function G0(t,{checkChildren:e=!0,ignoreWhitespace:s=!1}={}){var r;if(s){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let a=!0;return t.content.forEach(i=>{a!==!1&&(G0(i,{ignoreWhitespace:s,checkChildren:e})||(a=!1))}),a}return!1}function JM(t){return t instanceof Je}function XM(t){return t instanceof at}function Mo(t=0,e=0,s=0){return Math.min(Math.max(t,e),s)}function QM(t,e=null){if(!e)return null;const s=ut.atStart(t),r=ut.atEnd(t);if(e==="start"||e===!0)return s;if(e==="end")return r;const a=s.from,i=r.to;return e==="all"?at.create(t,Mo(0,a,i),Mo(t.content.size,a,i)):at.create(t,Mo(e,a,i),Mo(e,a,i))}function nZ(t,e,s){const r=t.steps.length-1;if(r<e)return;const a=t.steps[r];if(!(a instanceof Ds||a instanceof zs))return;const i=t.mapping.maps[r];let o=0;i.forEach((c,d,h,m)=>{o===0&&(o=m)}),t.setSelection(ut.near(t.doc.resolve(o),s))}var W0=class{constructor(t){this.find=t.find,this.handler=t.handler}},rZ=(t,e)=>{if(xj(e))return e.exec(t);const s=e(t);if(!s)return null;const r=[s.text];return r.index=s.index,r.input=t,r.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(s.replaceWith)),r};function wf(t){var e;const{editor:s,from:r,to:a,text:i,rules:o,plugin:c}=t,{view:d}=s;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(g=>g.type.spec.code))return!1;let m=!1;const p=ZQ(h)+i;return o.forEach(g=>{if(m)return;const b=rZ(p,g.find);if(!b)return;const v=d.state.tr,N=U0({state:d.state,transaction:v}),j={from:r-(b[0].length-i.length),to:a},{commands:w,chain:_,can:k}=new V0({editor:s,state:N});g.handler({state:N,range:j,match:b,commands:w,chain:_,can:k})===null||!v.steps.length||(v.setMeta(c,{transform:v,from:r,to:a,text:i}),d.dispatch(v),m=!0)}),m}function aZ(t){const{editor:e,rules:s}=t,r=new Qt({state:{init(){return null},apply(a,i,o){const c=a.getMeta(r);if(c)return c;const d=a.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=pj(ke.from(m),o.schema);const{from:p}=d,g=p+m.length;wf({editor:e,from:p,to:g,text:m,rules:s,plugin:r})}),a.selectionSet||a.docChanged?null:i}},props:{handleTextInput(a,i,o,c){return wf({editor:e,from:i,to:o,text:c,rules:s,plugin:r})},handleDOMEvents:{compositionend:a=>(setTimeout(()=>{const{$cursor:i}=a.state.selection;i&&wf({editor:e,from:i.pos,to:i.pos,text:"",rules:s,plugin:r})}),!1)},handleKeyDown(a,i){if(i.key!=="Enter")return!1;const{$cursor:o}=a.state.selection;return o?wf({editor:e,from:o.pos,to:o.pos,text:`
`,rules:s,plugin:r}):!1}},isInputRules:!0});return r}function iZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function jf(t){return iZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ZM(t,e){const s={...t};return jf(t)&&jf(e)&&Object.keys(e).forEach(r=>{jf(e[r])&&jf(t[r])?s[r]=ZM(t[r],e[r]):s[r]=e[r]}),s}var yj=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Rt(Ge(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Rt(Ge(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ZM(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},rl=class eO extends yj{constructor(){super(...arguments),this.type="mark"}static create(e={}){const s=typeof e=="function"?e():e;return new eO(s)}static handleExit({editor:e,mark:s}){const{tr:r}=e.state,a=e.state.selection.$from;if(a.pos===a.end()){const o=a.marks();if(!!!o.find(h=>(h==null?void 0:h.type.name)===s.name))return!1;const d=o.find(h=>(h==null?void 0:h.type.name)===s.name);return d&&r.removeStoredMark(d),r.insertText(" ",a.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}};function oZ(t){return typeof t=="number"}var lZ=class{constructor(t){this.find=t.find,this.handler=t.handler}},cZ=(t,e,s)=>{if(xj(e))return[...t.matchAll(e)];const r=e(t,s);return r?r.map(a=>{const i=[a.text];return i.index=a.index,i.input=t,i.data=a.data,a.replaceWith&&(a.text.includes(a.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(a.replaceWith)),i}):[]};function dZ(t){const{editor:e,state:s,from:r,to:a,rule:i,pasteEvent:o,dropEvent:c}=t,{commands:d,chain:h,can:m}=new V0({editor:e,state:s}),p=[];return s.doc.nodesBetween(r,a,(b,v)=>{if(!b.isTextblock||b.type.spec.code)return;const N=Math.max(r,v),j=Math.min(a,v+b.content.size),w=b.textBetween(N-v,j-v,void 0,"￼");cZ(w,i.find,o).forEach(k=>{if(k.index===void 0)return;const C=N+k.index+1,E=C+k[0].length,A={from:s.tr.mapping.map(C),to:s.tr.mapping.map(E)},M=i.handler({state:s,range:A,match:k,commands:d,chain:h,can:m,pasteEvent:o,dropEvent:c});p.push(M)})}),p.every(b=>b!==null)}var Nf=null,uZ=t=>{var e;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=s.clipboardData)==null||e.setData("text/html",t),s};function hZ(t){const{editor:e,rules:s}=t;let r=null,a=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:m,from:p,to:g,rule:b,pasteEvt:v})=>{const N=m.tr,j=U0({state:m,transaction:N});if(!(!dZ({editor:e,state:j,from:Math.max(p-1,0),to:g.b-1,rule:b,pasteEvent:v,dropEvent:c})||!N.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,N}};return s.map(m=>new Qt({view(p){const g=v=>{var N;r=(N=p.dom.parentElement)!=null&&N.contains(v.target)?p.dom.parentElement:null,r&&(Nf=e)},b=()=>{Nf&&(Nf=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(i=r===p.dom.parentElement,c=g,!i){const b=Nf;b!=null&&b.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,g)=>{var b;const v=(b=g.clipboardData)==null?void 0:b.getData("text/html");return o=g,a=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(p,g,b)=>{const v=p[0],N=v.getMeta("uiEvent")==="paste"&&!a,j=v.getMeta("uiEvent")==="drop"&&!i,w=v.getMeta("applyPasteRules"),_=!!w;if(!N&&!j&&!_)return;if(_){let{text:E}=w;typeof E=="string"?E=E:E=pj(ke.from(E),b.schema);const{from:A}=w,M=A+E.length,R=uZ(E);return d({rule:m,state:b,from:A,to:{b:M},pasteEvt:R})}const k=g.doc.content.findDiffStart(b.doc.content),C=g.doc.content.findDiffEnd(b.doc.content);if(!(!oZ(k)||!C||k===C.b))return d({rule:m,state:b,from:k,to:C,pasteEvt:o})}}))}var Y0=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=VM(t),this.schema=GQ(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nv(e.name,this.schema)},r=Ge(e,"addCommands",s);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=gj([...this.extensions].reverse()),s=[],r=[],a=e.map(i=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Nv(i.name,this.schema)},c=[],d=Ge(i,"addKeyboardShortcuts",o);let h={};if(i.type==="mark"&&Ge(i,"exitable",o)&&(h.ArrowRight=()=>rl.handleExit({editor:t,mark:i})),d){const v=Object.fromEntries(Object.entries(d()).map(([N,j])=>[N,()=>j({editor:t})]));h={...h,...v}}const m=bQ(h);c.push(m);const p=Ge(i,"addInputRules",o);R5(i,t.options.enableInputRules)&&p&&s.push(...p());const g=Ge(i,"addPasteRules",o);R5(i,t.options.enablePasteRules)&&g&&r.push(...g());const b=Ge(i,"addProseMirrorPlugins",o);if(b){const v=b();c.push(...v)}return c}).flat();return[aZ({editor:t,rules:s}),...hZ({editor:t,rules:r}),...a]}get attributes(){return UM(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=mh(this.extensions);return Object.fromEntries(e.filter(s=>!!Ge(s,"addNodeView")).map(s=>{const r=this.attributes.filter(c=>c.type===s.name),a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:vs(s.name,this.schema)},i=Ge(s,"addNodeView",a);if(!i)return[];const o=(c,d,h,m,p)=>{const g=Mp(c,r);return i()({node:c,view:d,getPos:h,decorations:m,innerDecorations:p,editor:t,extension:s,HTMLAttributes:g})};return[s.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=mh(this.extensions);return Object.fromEntries(e.filter(s=>!!Ge(s,"addMarkView")).map(s=>{const r=this.attributes.filter(c=>c.type===s.name),a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:Ga(s.name,this.schema)},i=Ge(s,"addMarkView",a);if(!i)return[];const o=(c,d,h)=>{const m=Mp(c,r);return i()({mark:c,view:d,inline:h,editor:t,extension:s,HTMLAttributes:m,updateAttributes:p=>{Aee(c,t,p)}})};return[s.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var s;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nv(e.name,this.schema)};e.type==="mark"&&((s=Rt(Ge(e,"keepOnSplit",r)))==null||s)&&this.splittableMarks.push(e.name);const a=Ge(e,"onBeforeCreate",r),i=Ge(e,"onCreate",r),o=Ge(e,"onUpdate",r),c=Ge(e,"onSelectionUpdate",r),d=Ge(e,"onTransaction",r),h=Ge(e,"onFocus",r),m=Ge(e,"onBlur",r),p=Ge(e,"onDestroy",r);a&&this.editor.on("beforeCreate",a),i&&this.editor.on("create",i),o&&this.editor.on("update",o),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),p&&this.editor.on("destroy",p)})}};Y0.resolve=VM;Y0.sort=gj;Y0.flatten=fj;var mZ={};$M(mZ,{ClipboardTextSerializer:()=>sO,Commands:()=>aO,Delete:()=>iO,Drop:()=>oO,Editable:()=>lO,FocusEvents:()=>dO,Keymap:()=>uO,Paste:()=>hO,Tabindex:()=>mO,focusEventsPluginKey:()=>cO});var ws=class tO extends yj{constructor(){super(...arguments),this.type="extension"}static create(e={}){const s=typeof e=="function"?e():e;return new tO(s)}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}},sO=ws.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Qt({key:new ys("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:s}=t,{doc:r,selection:a}=e,{ranges:i}=a,o=Math.min(...i.map(m=>m.$from.pos)),c=Math.max(...i.map(m=>m.$to.pos)),d=HM(s);return qM(r,{from:o,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),nO={};$M(nO,{blur:()=>fZ,clearContent:()=>pZ,clearNodes:()=>gZ,command:()=>xZ,createParagraphNear:()=>bZ,cut:()=>vZ,deleteCurrentNode:()=>yZ,deleteNode:()=>wZ,deleteRange:()=>jZ,deleteSelection:()=>NZ,enter:()=>SZ,exitCode:()=>_Z,extendMarkRange:()=>CZ,first:()=>kZ,focus:()=>AZ,forEach:()=>TZ,insertContent:()=>MZ,insertContentAt:()=>RZ,joinBackward:()=>zZ,joinDown:()=>PZ,joinForward:()=>LZ,joinItemBackward:()=>$Z,joinItemForward:()=>FZ,joinTextblockBackward:()=>IZ,joinTextblockForward:()=>BZ,joinUp:()=>DZ,keyboardShortcut:()=>VZ,lift:()=>qZ,liftEmptyBlock:()=>HZ,liftListItem:()=>GZ,newlineInCode:()=>WZ,resetAttributes:()=>YZ,scrollIntoView:()=>KZ,selectAll:()=>JZ,selectNodeBackward:()=>XZ,selectNodeForward:()=>QZ,selectParentNode:()=>ZZ,selectTextblockEnd:()=>eee,selectTextblockStart:()=>tee,setContent:()=>see,setMark:()=>ree,setMeta:()=>aee,setNode:()=>iee,setNodeSelection:()=>oee,setTextSelection:()=>lee,sinkListItem:()=>cee,splitBlock:()=>dee,splitListItem:()=>uee,toggleList:()=>hee,toggleMark:()=>mee,toggleNode:()=>fee,toggleWrap:()=>pee,undoInputRule:()=>gee,unsetAllMarks:()=>xee,unsetMark:()=>bee,updateAttributes:()=>vee,wrapIn:()=>yee,wrapInList:()=>wee});var fZ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var s;t.isDestroyed||(e.dom.blur(),(s=window==null?void 0:window.getSelection())==null||s.removeAllRanges())}),!0),pZ=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),gZ=()=>({state:t,tr:e,dispatch:s})=>{const{selection:r}=e,{ranges:a}=r;return s&&a.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(c,d)=>{if(c.type.isText)return;const{doc:h,mapping:m}=e,p=h.resolve(m.map(d)),g=h.resolve(m.map(d+c.nodeSize)),b=p.blockRange(g);if(!b)return;const v=td(b);if(c.type.isTextblock){const{defaultType:N}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(b.start,N)}(v||v===0)&&e.lift(b,v)})}),!0},xZ=t=>e=>t(e),bZ=()=>({state:t,dispatch:e})=>DM(t,e),vZ=(t,e)=>({editor:s,tr:r})=>{const{state:a}=s,i=a.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new at(r.doc.resolve(Math.max(o-1,0)))),!0},yZ=()=>({tr:t,dispatch:e})=>{const{selection:s}=t,r=s.$anchor.node();if(r.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===r.type){if(e){const c=a.before(i),d=a.after(i);t.delete(c,d).scrollIntoView()}return!0}return!1},wZ=t=>({tr:e,state:s,dispatch:r})=>{const a=vs(t,s.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===a){if(r){const d=i.before(o),h=i.after(o);e.delete(d,h).scrollIntoView()}return!0}return!1},jZ=t=>({tr:e,dispatch:s})=>{const{from:r,to:a}=t;return s&&e.delete(r,a),!0},NZ=()=>({state:t,dispatch:e})=>cj(t,e),SZ=()=>({commands:t})=>t.keyboardShortcut("Enter"),_Z=()=>({state:t,dispatch:e})=>SQ(t,e),CZ=(t,e={})=>({tr:s,state:r,dispatch:a})=>{const i=Ga(t,r.schema),{doc:o,selection:c}=s,{$from:d,from:h,to:m}=c;if(a){const p=bj(d,i,e);if(p&&p.from<=h&&p.to>=m){const g=at.create(o,p.from,p.to);s.setSelection(g)}}return!0},kZ=t=>e=>{const s=typeof t=="function"?t(e):t;for(let r=0;r<s.length;r+=1)if(s[r](e))return!0;return!1};function EZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function wj(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var AZ=(t=null,e={})=>({editor:s,view:r,tr:a,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(wj()||EZ())&&r.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&s.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!XM(s.state.selection))return o(),!0;const c=QM(a.doc,t)||s.state.selection,d=s.state.selection.eq(c);return i&&(d||a.setSelection(c),d&&a.storedMarks&&a.setStoredMarks(a.storedMarks),o()),!0},TZ=(t,e)=>s=>t.every((r,a)=>e(r,{...s,index:a})),MZ=(t,e)=>({tr:s,commands:r})=>r.insertContentAt({from:s.selection.from,to:s.selection.to},t,e),OZ=t=>!("type"in t),RZ=(t,e,s)=>({tr:r,dispatch:a,editor:i})=>{var o;if(a){s={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let c;const{selection:d}=i.state,h=w=>{i.emit("contentError",{editor:i,error:w,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},m={preserveWhitespace:"full",...s.parseOptions};if(!s.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{hh(e,i.schema,{parseOptions:m,errorOnInvalidContent:!0})}catch(w){h(w)}try{c=hh(e,i.schema,{parseOptions:m,errorOnInvalidContent:(o=s.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(w){return h(w),!1}let{from:p,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},b=!0,v=!0;if((OZ(c)?c:[c]).forEach(w=>{w.check(),b=b?w.isText&&w.marks.length===0:!1,v=v?w.isBlock:!1}),p===g&&v){const{parent:w}=r.doc.resolve(p);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(p-=1,g+=1)}let j;if(b){if(Array.isArray(e))j=e.map(w=>w.text||"").join("");else if(e instanceof ke){let w="";e.forEach(_=>{_.text&&(w+=_.text)}),j=w}else typeof e=="object"&&e&&e.text?j=e.text:j=e;r.insertText(j,p,g)}else{j=c;const w=d.$from.parentOffset===0,_=d.$from.node().isText||d.$from.node().isTextblock,k=d.$from.node().content.size>0;w&&_&&k&&(p=Math.max(0,p-1)),r.replaceWith(p,g,j)}s.updateSelection&&nZ(r,r.steps.length-1,-1),s.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:j}),s.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:j})}return!0},DZ=()=>({state:t,dispatch:e})=>wQ(t,e),PZ=()=>({state:t,dispatch:e})=>jQ(t,e),zZ=()=>({state:t,dispatch:e})=>kM(t,e),LZ=()=>({state:t,dispatch:e})=>MM(t,e),$Z=()=>({state:t,dispatch:e,tr:s})=>{try{const r=z0(t.doc,t.selection.$from.pos,-1);return r==null?!1:(s.join(r,2),e&&e(s),!0)}catch{return!1}},FZ=()=>({state:t,dispatch:e,tr:s})=>{try{const r=z0(t.doc,t.selection.$from.pos,1);return r==null?!1:(s.join(r,2),e&&e(s),!0)}catch{return!1}},IZ=()=>({state:t,dispatch:e})=>vQ(t,e),BZ=()=>({state:t,dispatch:e})=>yQ(t,e);function rO(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function UZ(t){const e=t.split(/-(?!$)/);let s=e[e.length-1];s==="Space"&&(s=" ");let r,a,i,o;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))o=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))wj()||rO()?o=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(s=`Alt-${s}`),a&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}var VZ=t=>({editor:e,view:s,tr:r,dispatch:a})=>{const i=UZ(t).split(/-(?!$)/),o=i.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{s.someProp("handleKeyDown",h=>h(s,c))});return d==null||d.steps.forEach(h=>{const m=h.map(r.mapping);m&&a&&r.maybeStep(m)}),!0},qZ=(t,e={})=>({state:s,dispatch:r})=>{const a=vs(t,s.schema);return Bi(s,a,e)?NQ(s,r):!1},HZ=()=>({state:t,dispatch:e})=>PM(t,e),GZ=t=>({state:e,dispatch:s})=>{const r=vs(t,e.schema);return PQ(r)(e,s)},WZ=()=>({state:t,dispatch:e})=>RM(t,e);function P5(t,e){const s=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,a)=>(s.includes(a)||(r[a]=t[a]),r),{})}var YZ=(t,e)=>({tr:s,state:r,dispatch:a})=>{let i=null,o=null;const c=H0(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(i=vs(t,r.schema)),c==="mark"&&(o=Ga(t,r.schema)),a&&s.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{i&&i===h.type&&s.setNodeMarkup(m,void 0,P5(h.attrs,e)),o&&h.marks.length&&h.marks.forEach(p=>{o===p.type&&s.addMark(m,m+h.nodeSize,o.create(P5(p.attrs,e)))})})}),!0):!1},KZ=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),JZ=()=>({tr:t,dispatch:e})=>{if(e){const s=new Qn(t.doc);t.setSelection(s)}return!0},XZ=()=>({state:t,dispatch:e})=>AM(t,e),QZ=()=>({state:t,dispatch:e})=>OM(t,e),ZZ=()=>({state:t,dispatch:e})=>kQ(t,e),eee=()=>({state:t,dispatch:e})=>TQ(t,e),tee=()=>({state:t,dispatch:e})=>AQ(t,e),see=(t,{errorOnInvalidContent:e,emitUpdate:s=!0,parseOptions:r={}}={})=>({editor:a,tr:i,dispatch:o,commands:c})=>{const{doc:d}=i;if(r.preserveWhitespace!=="full"){const h=nw(t,a.schema,r,{errorOnInvalidContent:e??a.options.enableContentCheck});return o&&i.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!s),!0}return o&&i.setMeta("preventUpdate",!s),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??a.options.enableContentCheck})};function nee(t,e,s){var r;const{selection:a}=e;let i=null;if(XM(a)&&(i=a.$cursor),i){const c=(r=t.storedMarks)!=null?r:i.marks();return!!s.isInSet(c)||!c.some(d=>d.type.excludes(s))}const{ranges:o}=a;return o.some(({$from:c,$to:d})=>{let h=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(s):!1;return t.doc.nodesBetween(c.pos,d.pos,(m,p,g)=>{if(h)return!1;if(m.isInline){const b=!g||g.type.allowsMarkType(s),v=!!s.isInSet(m.marks)||!m.marks.some(N=>N.type.excludes(s));h=b&&v}return!h}),h})}var ree=(t,e={})=>({tr:s,state:r,dispatch:a})=>{const{selection:i}=s,{empty:o,ranges:c}=i,d=Ga(t,r.schema);if(a)if(o){const h=GM(r,d);s.addStoredMark(d.create({...h,...e}))}else c.forEach(h=>{const m=h.$from.pos,p=h.$to.pos;r.doc.nodesBetween(m,p,(g,b)=>{const v=Math.max(b,m),N=Math.min(b+g.nodeSize,p);g.marks.find(w=>w.type===d)?g.marks.forEach(w=>{d===w.type&&s.addMark(v,N,d.create({...w.attrs,...e}))}):s.addMark(v,N,d.create(e))})});return nee(r,s,d)},aee=(t,e)=>({tr:s})=>(s.setMeta(t,e),!0),iee=(t,e={})=>({state:s,dispatch:r,chain:a})=>{const i=vs(t,s.schema);let o;return s.selection.$anchor.sameParent(s.selection.$head)&&(o=s.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:c})=>A5(i,{...o,...e})(s)?!0:c.clearNodes()).command(({state:c})=>A5(i,{...o,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},oee=t=>({tr:e,dispatch:s})=>{if(s){const{doc:r}=e,a=Mo(t,0,r.content.size),i=Je.create(r,a);e.setSelection(i)}return!0},lee=t=>({tr:e,dispatch:s})=>{if(s){const{doc:r}=e,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,o=at.atStart(r).from,c=at.atEnd(r).to,d=Mo(a,o,c),h=Mo(i,o,c),m=at.create(r,d,h);e.setSelection(m)}return!0},cee=t=>({state:e,dispatch:s})=>{const r=vs(t,e.schema);return $Q(r)(e,s)};function z5(t,e){const s=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(s){const r=s.filter(a=>e==null?void 0:e.includes(a.type.name));t.tr.ensureMarks(r)}}var dee=({keepMarks:t=!0}={})=>({tr:e,state:s,dispatch:r,editor:a})=>{const{selection:i,doc:o}=e,{$from:c,$to:d}=i,h=a.extensionManager.attributes,m=qf(h,c.node().type.name,c.node().attrs);if(i instanceof Je&&i.node.isBlock)return!c.parentOffset||!$a(o,c.pos)?!1:(r&&(t&&z5(s,a.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const p=d.parentOffset===d.parent.content.size,g=c.depth===0?void 0:BQ(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=p&&g?[{type:g,attrs:m}]:void 0,v=$a(e.doc,e.mapping.map(c.pos),1,b);if(!b&&!v&&$a(e.doc,e.mapping.map(c.pos),1,g?[{type:g}]:void 0)&&(v=!0,b=g?[{type:g,attrs:m}]:void 0),r){if(v&&(i instanceof at&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,b),g&&!p&&!c.parentOffset&&c.parent.type!==g)){const N=e.mapping.map(c.before()),j=e.doc.resolve(N);c.node(-1).canReplaceWith(j.index(),j.index()+1,g)&&e.setNodeMarkup(e.mapping.map(c.before()),g)}t&&z5(s,a.extensionManager.splittableMarks),e.scrollIntoView()}return v},uee=(t,e={})=>({tr:s,state:r,dispatch:a,editor:i})=>{var o;const c=vs(t,r.schema),{$from:d,$to:h}=r.selection,m=r.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const p=d.node(-1);if(p.type!==c)return!1;const g=i.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(a){let w=ke.empty;const _=d.index(-1)?1:d.index(-2)?2:3;for(let R=d.depth-_;R>=d.depth-3;R-=1)w=ke.from(d.node(R).copy(w));const k=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,C={...qf(g,d.node().type.name,d.node().attrs),...e},E=((o=c.contentMatch.defaultType)==null?void 0:o.createAndFill(C))||void 0;w=w.append(ke.from(c.createAndFill(null,E)||void 0));const A=d.before(d.depth-(_-1));s.replace(A,d.after(-k),new Le(w,4-_,0));let M=-1;s.doc.nodesBetween(A,s.doc.content.size,(R,D)=>{if(M>-1)return!1;R.isTextblock&&R.content.size===0&&(M=D+1)}),M>-1&&s.setSelection(at.near(s.doc.resolve(M))),s.scrollIntoView()}return!0}const b=h.pos===d.end()?p.contentMatchAt(0).defaultType:null,v={...qf(g,p.type.name,p.attrs),...e},N={...qf(g,d.node().type.name,d.node().attrs),...e};s.delete(d.pos,h.pos);const j=b?[{type:c,attrs:v},{type:b,attrs:N}]:[{type:c,attrs:v}];if(!$a(s.doc,d.pos,2))return!1;if(a){const{selection:w,storedMarks:_}=r,{splittableMarks:k}=i.extensionManager,C=_||w.$to.parentOffset&&w.$from.marks();if(s.split(d.pos,2,j).scrollIntoView(),!C||!a)return!0;const E=C.filter(A=>k.includes(A.type.name));s.ensureMarks(E)}return!0},Sv=(t,e)=>{const s=q0(o=>o.type===e)(t.selection);if(!s)return!0;const r=t.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(r===void 0)return!0;const a=t.doc.nodeAt(r);return s.node.type===(a==null?void 0:a.type)&&Yi(t.doc,s.pos)&&t.join(s.pos),!0},_v=(t,e)=>{const s=q0(o=>o.type===e)(t.selection);if(!s)return!0;const r=t.doc.resolve(s.start).after(s.depth);if(r===void 0)return!0;const a=t.doc.nodeAt(r);return s.node.type===(a==null?void 0:a.type)&&Yi(t.doc,r)&&t.join(r),!0},hee=(t,e,s,r={})=>({editor:a,tr:i,state:o,dispatch:c,chain:d,commands:h,can:m})=>{const{extensions:p,splittableMarks:g}=a.extensionManager,b=vs(t,o.schema),v=vs(e,o.schema),{selection:N,storedMarks:j}=o,{$from:w,$to:_}=N,k=w.blockRange(_),C=j||N.$to.parentOffset&&N.$from.marks();if(!k)return!1;const E=q0(A=>D5(A.type.name,p))(N);if(k.depth>=1&&E&&k.depth-E.depth<=1){if(E.node.type===b)return h.liftListItem(v);if(D5(E.node.type.name,p)&&b.validContent(E.node.content)&&c)return d().command(()=>(i.setNodeMarkup(E.pos,b),!0)).command(()=>Sv(i,b)).command(()=>_v(i,b)).run()}return!s||!C||!c?d().command(()=>m().wrapInList(b,r)?!0:h.clearNodes()).wrapInList(b,r).command(()=>Sv(i,b)).command(()=>_v(i,b)).run():d().command(()=>{const A=m().wrapInList(b,r),M=C.filter(R=>g.includes(R.type.name));return i.ensureMarks(M),A?!0:h.clearNodes()}).wrapInList(b,r).command(()=>Sv(i,b)).command(()=>_v(i,b)).run()},mee=(t,e={},s={})=>({state:r,commands:a})=>{const{extendEmptyMarkRange:i=!1}=s,o=Ga(t,r.schema);return rw(r,o,e)?a.unsetMark(o,{extendEmptyMarkRange:i}):a.setMark(o,e)},fee=(t,e,s={})=>({state:r,commands:a})=>{const i=vs(t,r.schema),o=vs(e,r.schema),c=Bi(r,i,s);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?a.setNode(o,d):a.setNode(i,{...d,...s})},pee=(t,e={})=>({state:s,commands:r})=>{const a=vs(t,s.schema);return Bi(s,a,e)?r.lift(a):r.wrapIn(a,e)},gee=()=>({state:t,dispatch:e})=>{const s=t.plugins;for(let r=0;r<s.length;r+=1){const a=s[r];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(e){const o=t.tr,c=i.transform;for(let d=c.steps.length-1;d>=0;d-=1)o.step(c.steps[d].invert(c.docs[d]));if(i.text){const d=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,d))}else o.delete(i.from,i.to)}return!0}}return!1},xee=()=>({tr:t,dispatch:e})=>{const{selection:s}=t,{empty:r,ranges:a}=s;return r||e&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},bee=(t,e={})=>({tr:s,state:r,dispatch:a})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:c}=s,d=Ga(t,r.schema),{$from:h,empty:m,ranges:p}=c;if(!a)return!0;if(m&&o){let{from:g,to:b}=c;const v=(i=h.marks().find(j=>j.type===d))==null?void 0:i.attrs,N=bj(h,d,v);N&&(g=N.from,b=N.to),s.removeMark(g,b,d)}else p.forEach(g=>{s.removeMark(g.$from.pos,g.$to.pos,d)});return s.removeStoredMark(d),!0},vee=(t,e={})=>({tr:s,state:r,dispatch:a})=>{let i=null,o=null;const c=H0(typeof t=="string"?t:t.name,r.schema);return c?(c==="node"&&(i=vs(t,r.schema)),c==="mark"&&(o=Ga(t,r.schema)),a&&s.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let p,g,b,v;s.selection.empty?r.doc.nodesBetween(h,m,(N,j)=>{i&&i===N.type&&(b=Math.max(j,h),v=Math.min(j+N.nodeSize,m),p=j,g=N)}):r.doc.nodesBetween(h,m,(N,j)=>{j<h&&i&&i===N.type&&(b=Math.max(j,h),v=Math.min(j+N.nodeSize,m),p=j,g=N),j>=h&&j<=m&&(i&&i===N.type&&s.setNodeMarkup(j,void 0,{...N.attrs,...e}),o&&N.marks.length&&N.marks.forEach(w=>{if(o===w.type){const _=Math.max(j,h),k=Math.min(j+N.nodeSize,m);s.addMark(_,k,o.create({...w.attrs,...e}))}}))}),g&&(p!==void 0&&s.setNodeMarkup(p,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(N=>{o===N.type&&s.addMark(b,v,o.create({...N.attrs,...e}))}))}),!0):!1},yee=(t,e={})=>({state:s,dispatch:r})=>{const a=vs(t,s.schema);return MQ(a,e)(s,r)},wee=(t,e={})=>({state:s,dispatch:r})=>{const a=vs(t,s.schema);return OQ(a,e)(s,r)},aO=ws.create({name:"commands",addCommands(){return{...nO}}}),iO=ws.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var s,r,a;const i=()=>{var o,c,d,h;if((h=(d=(c=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?h:t.getMeta("y-sync$"))return;const m=FM(t.before,[t,...e]);YM(m).forEach(b=>{m.mapping.mapResult(b.oldRange.from).deletedAfter&&m.mapping.mapResult(b.oldRange.to).deletedBefore&&m.before.nodesBetween(b.oldRange.from,b.oldRange.to,(v,N)=>{const j=N+v.nodeSize-2,w=b.oldRange.from<=N&&j<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:N,to:j,newFrom:m.mapping.map(N),newTo:m.mapping.map(j),deletedRange:b.oldRange,newRange:b.newRange,partial:!w,editor:this.editor,transaction:t,combinedTransform:m})})});const g=m.mapping;m.steps.forEach((b,v)=>{var N,j;if(b instanceof zr){const w=g.slice(v).map(b.from,-1),_=g.slice(v).map(b.to),k=g.invert().map(w,-1),C=g.invert().map(_),E=(N=m.doc.nodeAt(w-1))==null?void 0:N.marks.some(M=>M.eq(b.mark)),A=(j=m.doc.nodeAt(_))==null?void 0:j.marks.some(M=>M.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:k,to:C},newRange:{from:w,to:_},partial:!!(A||E),editor:this.editor,transaction:t,combinedTransform:m})}})};(a=(r=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:r.async)==null||a?setTimeout(i,0):i()}}),oO=ws.create({name:"drop",addProseMirrorPlugins(){return[new Qt({key:new ys("tiptapDrop"),props:{handleDrop:(t,e,s,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:s,moved:r})}}})]}}),lO=ws.create({name:"editable",addProseMirrorPlugins(){return[new Qt({key:new ys("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cO=new ys("focusEvents"),dO=ws.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Qt({key:cO,props:{handleDOMEvents:{focus:(e,s)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,s)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),uO=ws.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:c})=>{const{selection:d,doc:h}=c,{empty:m,$anchor:p}=d,{pos:g,parent:b}=p,v=p.parent.isTextblock&&g>0?c.doc.resolve(g-1):p,N=v.parent.type.spec.isolating,j=p.pos-p.parentOffset,w=N&&v.parent.childCount===1?j===p.pos:ut.atStart(h).from===g;return!m||!b.type.isTextblock||b.textContent.length||!w||w&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},a={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return wj()||rO()?i:a},addProseMirrorPlugins(){return[new Qt({key:new ys("clearDocument"),appendTransaction:(t,e,s)=>{if(t.some(N=>N.getMeta("composition")))return;const r=t.some(N=>N.docChanged)&&!e.doc.eq(s.doc),a=t.some(N=>N.getMeta("preventClearDocument"));if(!r||a)return;const{empty:i,from:o,to:c}=e.selection,d=ut.atStart(e.doc).from,h=ut.atEnd(e.doc).to;if(i||!(o===d&&c===h)||!G0(s.doc))return;const g=s.tr,b=U0({state:s,transaction:g}),{commands:v}=new V0({editor:this.editor,state:b});if(v.clearNodes(),!!g.steps.length)return g}})]}}),hO=ws.create({name:"paste",addProseMirrorPlugins(){return[new Qt({key:new ys("tiptapPaste"),props:{handlePaste:(t,e,s)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:s})}}})]}}),mO=ws.create({name:"tabindex",addProseMirrorPlugins(){return[new Qt({key:new ys("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),jee=class uc{constructor(e,s,r=!1,a=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=s,this.currentNode=a}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let s=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:s,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(e);return new uc(s,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new uc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new uc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((s,r)=>{const a=s.isBlock&&!s.isTextblock,i=s.isAtom&&!s.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(o);if(!a&&c.depth<=this.depth)return;const d=new uc(c,this.editor,a,a?s:null);a&&(d.actualDepth=this.depth+1),e.push(new uc(c,this.editor,a,a?s:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,s={}){let r=null,a=this.parent;for(;a&&!r;){if(a.node.type.name===e)if(Object.keys(s).length>0){const i=a.node.attrs,o=Object.keys(s);for(let c=0;c<o.length;c+=1){const d=o[c];if(i[d]!==s[d])break}}else r=a;a=a.parent}return r}querySelector(e,s={}){return this.querySelectorAll(e,s,!0)[0]||null}querySelectorAll(e,s={},r=!1){let a=[];if(!this.children||this.children.length===0)return a;const i=Object.keys(s);return this.children.forEach(o=>{r&&a.length>0||(o.node.type.name===e&&i.every(d=>s[d]===o.node.attrs[d])&&a.push(o),!(r&&a.length>0)&&(a=a.concat(o.querySelectorAll(e,s,r))))}),a}setAttribute(e){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(s)}},Nee=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function See(t,e,s){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const a=document.createElement("style");return e&&a.setAttribute("nonce",e),a.setAttribute("data-tiptap-style",""),a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a),a}var _ee=class extends IQ{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:a,moved:i})=>this.options.onDrop(r,a,i)),this.on("paste",({event:r,slice:a})=>this.options.onPaste(r,a)),this.on("delete",this.options.onDelete);const e=this.createDoc(),s=QM(e,this.options.autofocus);this.editorState=vc.create({doc:e,schema:this.schema,selection:s||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){var t;if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}this.editorView=null,this.isInitialized=!1,(t=this.css)==null||t.remove(),this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=See(Nee,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.editorState=this.state.apply(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const s=BM(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:s});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let s=e;if([].concat(t).forEach(a=>{const i=typeof a=="string"?`${a}$`:a.key;s=s.filter(o=>!o.key.startsWith(i))}),e.length===s.length)return;const r=this.state.reconfigure({plugins:s});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[lO,sO.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),aO,dO,uO,mO,oO,hO,iO].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Y0(r,this)}createCommandManager(){this.commandManager=new V0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=nw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(s=>s.name!=="collaboration"),this.createExtensionManager()}}),t=nw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new SM(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(h)});return}const{state:e,transactions:s}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),a=s.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!a)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:s.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=s.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),c=o==null?void 0:o.getMeta("focus"),d=o==null?void 0:o.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:o}),d&&this.emit("blur",{editor:this,event:d.event,transaction:o}),!(t.getMeta("preventUpdate")||!s.some(h=>h.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:s.slice(1)})}getAttributes(t){return WM(this.state,t)}isActive(t,e){const s=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return eZ(this.state,s,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return pj(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:s={}}=t||{};return YQ(this.state.doc,{blockSeparator:e,textSerializers:{...HM(this.schema),...s}})}get isEmpty(){return G0(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var s;return((s=this.$doc)==null?void 0:s.querySelector(t,e))||null}$nodes(t,e){var s;return((s=this.$doc)==null?void 0:s.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new jee(e,this)}get $doc(){return this.$pos(0)}};function Pc(t){return new W0({find:t.find,handler:({state:e,range:s,match:r})=>{const a=Rt(t.getAttributes,void 0,r);if(a===!1||a===null)return null;const{tr:i}=e,o=r[r.length-1],c=r[0];if(o){const d=c.search(/\S/),h=s.from+c.indexOf(o),m=h+o.length;if(vj(s.from,s.to,e.doc).filter(b=>b.mark.type.excluded.find(N=>N===t.type&&N!==b.mark.type)).filter(b=>b.to>h).length)return null;m<s.to&&i.delete(m,s.to),h>s.from&&i.delete(s.from+d,h);const g=s.from+d+o.length;i.addMark(s.from+d,g,t.type.create(a||{})),i.removeStoredMark(t.type)}}})}function Cee(t){return new W0({find:t.find,handler:({state:e,range:s,match:r})=>{const a=Rt(t.getAttributes,void 0,r)||{},{tr:i}=e,o=s.from;let c=s.to;const d=t.type.create(a);if(r[1]){const h=r[0].lastIndexOf(r[1]);let m=o+h;m>c?m=c:c=m+r[1].length;const p=r[0][r[0].length-1];i.insertText(p,o+r[0].length-1),i.replaceWith(m,c,d)}else if(r[0]){const h=t.type.isInline?o:o-1;i.insert(h,t.type.create(a)).delete(i.mapping.map(o),i.mapping.map(c))}i.scrollIntoView()}})}function aw(t){return new W0({find:t.find,handler:({state:e,range:s,match:r})=>{const a=e.doc.resolve(s.from),i=Rt(t.getAttributes,void 0,r)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;e.tr.delete(s.from,s.to).setBlockType(s.from,s.from,t.type,i)}})}function zc(t){return new W0({find:t.find,handler:({state:e,range:s,match:r,chain:a})=>{const i=Rt(t.getAttributes,void 0,r)||{},o=e.tr.delete(s.from,s.to),d=o.doc.resolve(s.from).blockRange(),h=d&&Q1(d,t.type,i);if(!h)return null;if(o.wrap(d,h),t.keepMarks&&t.editor){const{selection:p,storedMarks:g}=e,{splittableMarks:b}=t.editor.extensionManager,v=g||p.$to.parentOffset&&p.$from.marks();if(v){const N=v.filter(j=>b.includes(j.type.name));o.ensureMarks(N)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(p,i).run()}const m=o.doc.resolve(s.from-1).nodeBefore;m&&m.type===t.type&&Yi(o.doc,s.from-1)&&(!t.joinPredicate||t.joinPredicate(r,m))&&o.join(s.from-1)}})}function kee(t,e){const{selection:s}=t,{$from:r}=s;if(s instanceof Je){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let a=r.depth;for(;a>=0;){const i=r.index(a);if(r.node(a).contentMatchAt(i).matchType(e))return!0;a-=1}return!1}function Eee(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Aee(t,e,s={}){const{state:r}=e,{doc:a,tr:i}=r,o=t;a.descendants((c,d)=>{const h=i.mapping.map(d),m=i.mapping.map(d)+c.nodeSize;let p=null;if(c.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let g=!1;if(Object.keys(s).forEach(b=>{s[b]!==p.attrs[b]&&(g=!0)}),g){const b=t.type.create({...t.attrs,...s});i.removeMark(h,m,t.type),i.addMark(h,m,b)}}),i.docChanged&&e.view.dispatch(i)}var $n=class fO extends yj{constructor(){super(...arguments),this.type="node"}static create(e={}){const s=typeof e=="function"?e():e;return new fO(s)}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}};function Qo(t){return new lZ({find:t.find,handler:({state:e,range:s,match:r,pasteEvent:a})=>{const i=Rt(t.getAttributes,void 0,r,a);if(i===!1||i===null)return null;const{tr:o}=e,c=r[r.length-1],d=r[0];let h=s.to;if(c){const m=d.search(/\S/),p=s.from+d.indexOf(c),g=p+c.length;if(vj(s.from,s.to,e.doc).filter(v=>v.mark.type.excluded.find(j=>j===t.type&&j!==v.mark.type)).filter(v=>v.to>p).length)return null;g<s.to&&o.delete(g,s.to),p>s.from&&o.delete(s.from+m,p),h=s.from+m+c.length,o.addMark(s.from+m,h,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}var Cv,L5;function Tee(){return L5||(L5=1,Cv=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(a=r;a--!==0;)if(!t(e[a],s[a]))return!1;return!0}if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(a of e.entries())if(!s.has(a[0]))return!1;for(a of e.entries())if(!t(a[1],s.get(a[0])))return!1;return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(a of e.entries())if(!s.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if(r=e.length,r!=s.length)return!1;for(a=r;a--!==0;)if(e[a]!==s[a])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(s).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(s,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),Cv}var Mee=Tee();const Oee=Uc(Mee);var kv={exports:{}},Ev={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $5;function Ree(){if($5)return Ev;$5=1;var t=bh(),e=cT();function s(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:s,a=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,d=t.useDebugValue;return Ev.useSyncExternalStoreWithSelector=function(h,m,p,g,b){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=c(function(){function w(A){if(!_){if(_=!0,k=A,A=g(A),b!==void 0&&N.hasValue){var M=N.value;if(b(M,A))return C=M}return C=A}if(M=C,r(k,A))return M;var R=g(A);return b!==void 0&&b(M,R)?(k=A,M):(k=A,C=R)}var _=!1,k,C,E=p===void 0?null:p;return[function(){return w(m())},E===null?void 0:function(){return w(E())}]},[m,p,g,b]);var j=a(h,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=j},[j]),d(j),j},Ev}var F5;function Dee(){return F5||(F5=1,kv.exports=Ree()),kv.exports}var Pee=Dee(),zee=(...t)=>e=>{t.forEach(s=>{typeof s=="function"?s(e):s&&(s.current=e)})},Lee=({contentComponent:t})=>{const e=dT.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return n.jsx(n.Fragment,{children:Object.values(e)})};function $ee(){const t=new Set;let e={};return{subscribe(s){return t.add(s),()=>{t.delete(s)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(s,r){e={...e,[s]:Tz.createPortal(r.reactElement,r.element,s)},t.forEach(a=>a())},removeRenderer(s){const r={...e};delete r[s],e=r,t.forEach(a=>a())}}}var Fee=class extends Ps.Component{constructor(t){var e;super(t),this.editorContentRef=Ps.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=$ee(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((t=e.options.element)!=null&&t.firstChild)))return;const s=document.createElement("div");s.append(...e.options.element.childNodes),e.setOptions({element:s})}render(){const{editor:t,innerRef:e,...s}=this.props;return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:zee(e,this.editorContentRef),...s}),(t==null?void 0:t.contentComponent)&&n.jsx(Lee,{contentComponent:t.contentComponent})]})}},Iee=y.forwardRef((t,e)=>{const s=Ps.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ps.createElement(Fee,{key:s,innerRef:e,...t})}),K0=Ps.memo(Iee),Bee=typeof window<"u"?y.useLayoutEffect:y.useEffect,Uee=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},s=this.editor;return s.on("transaction",e),()=>{s.off("transaction",e)}}}};function Vee(t){var e;const[s]=y.useState(()=>new Uee(t.editor)),r=Pee.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Oee);return Bee(()=>s.watch(t.editor),[t.editor,s]),y.useDebugValue(r),r}var qee=!1,iw=typeof window>"u",Hee=iw||!!(typeof window<"u"&&window.next),Gee=class pO{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(s=>s())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?iw||Hee?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var a,i;return(i=(a=this.options.current).onBeforeCreate)==null?void 0:i.call(a,...r)},onBlur:(...r)=>{var a,i;return(i=(a=this.options.current).onBlur)==null?void 0:i.call(a,...r)},onCreate:(...r)=>{var a,i;return(i=(a=this.options.current).onCreate)==null?void 0:i.call(a,...r)},onDestroy:(...r)=>{var a,i;return(i=(a=this.options.current).onDestroy)==null?void 0:i.call(a,...r)},onFocus:(...r)=>{var a,i;return(i=(a=this.options.current).onFocus)==null?void 0:i.call(a,...r)},onSelectionUpdate:(...r)=>{var a,i;return(i=(a=this.options.current).onSelectionUpdate)==null?void 0:i.call(a,...r)},onTransaction:(...r)=>{var a,i;return(i=(a=this.options.current).onTransaction)==null?void 0:i.call(a,...r)},onUpdate:(...r)=>{var a,i;return(i=(a=this.options.current).onUpdate)==null?void 0:i.call(a,...r)},onContentError:(...r)=>{var a,i;return(i=(a=this.options.current).onContentError)==null?void 0:i.call(a,...r)},onDrop:(...r)=>{var a,i;return(i=(a=this.options.current).onDrop)==null?void 0:i.call(a,...r)},onPaste:(...r)=>{var a,i;return(i=(a=this.options.current).onPaste)==null?void 0:i.call(a,...r)},onDelete:(...r)=>{var a,i;return(i=(a=this.options.current).onDelete)==null?void 0:i.call(a,...r)}};return new _ee(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,s){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&s.extensions?e.extensions.length!==s.extensions.length?!1:e.extensions.every((a,i)=>{var o;return a===((o=s.extensions)==null?void 0:o[i])}):e[r]===s[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?pO.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,a)=>r===e[a]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,s=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){s&&s.setOptions(this.options.current);return}s&&!s.isDestroyed&&(s.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function J0(t={},e=[]){const s=y.useRef(t);s.current=t;const[r]=y.useState(()=>new Gee(s)),a=dT.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return y.useDebugValue(a),y.useEffect(r.onRender(e)),Vee({editor:a,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),a}var Wee=y.createContext({editor:null});Wee.Consumer;var Yee=y.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Kee=()=>y.useContext(Yee);Ps.forwardRef((t,e)=>{const{onDragStart:s}=Kee(),r=t.as||"div";return n.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:s,style:{whiteSpace:"normal",...t.style}})});function I5(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function B5(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function Jee(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function Xee(t){if(I5(t)||B5(t))return!0;if(Jee(t)){const e=t.type;if(e)return I5(e)||B5(e)}return!1}function Qee(){try{if(y.version)return parseInt(y.version.split(".")[0],10)>=19}catch{}return!1}var X0=class{constructor(t,{editor:e,props:s={},as:r="div",className:a=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=s,this.element=document.createElement(r),this.element.classList.add("react-renderer"),a&&this.element.classList.add(...a.split(" ")),this.editor.isInitialized?Rw.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var t;const e=this.component,s=this.props,r=this.editor,a=Qee(),i=Xee(e),o={...s};o.ref&&!(a||i)&&delete o.ref,!o.ref&&(a||i)&&(o.ref=c=>{this.ref=c}),this.reactElement=n.jsx(e,{...o}),(t=r==null?void 0:r.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;(t=e==null?void 0:e.contentComponent)==null||t.removeRenderer(this.id)}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};Ps.createContext({markViewContentRef:()=>{}});var Rp=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:s,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,s]},Zee=/^\s*>\s$/,ete=$n.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Rp("blockquote",{...Gt(this.options.HTMLAttributes,t),children:Rp("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[zc({find:Zee,type:this.type})]}}),tte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ste=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,nte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,rte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,ate=rl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Rp("strong",{...Gt(this.options.HTMLAttributes,t),children:Rp("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Pc({find:tte,type:this.type}),Pc({find:nte,type:this.type})]},addPasteRules(){return[Qo({find:ste,type:this.type}),Qo({find:rte,type:this.type})]}}),ite=/(^|[^`])`([^`]+)`(?!`)/,ote=/(^|[^`])`([^`]+)`(?!`)/g,lte=rl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Pc({find:ite,type:this.type})]},addPasteRules(){return[Qo({find:ote,type:this.type})]}}),cte=/^```([a-z]+)?[\s\n]$/,dte=/^~~~([a-z]+)?[\s\n]$/,ute=$n.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:s}=this.options,i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(s)).map(o=>o.replace(s,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Gt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!t||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:s}=e,{$from:r,empty:a}=s;if(!a||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:s,doc:r}=e,{$from:a,empty:i}=s;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const c=a.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:h})=>(h.setSelection(ut.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[aw({find:cte,type:this.type,getAttributes:t=>({language:t[1]})}),aw({find:dte,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Qt({key:new ys("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),a=r?JSON.parse(r):void 0,i=a==null?void 0:a.mode;if(!s||!i)return!1;const{tr:o,schema:c}=t.state,d=c.text(s.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},d)),o.selection.$from.parent.type!==this.type&&o.setSelection(at.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),hte=$n.create({name:"doc",topNode:!0,content:"block+"}),mte=$n.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Gt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:s,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=s;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:c}=r.extensionManager,d=i||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&o){const p=d.filter(g=>c.includes(g.type.name));h.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fte=$n.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>aw({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),pte=$n.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Gt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!kee(e,e.schema.nodes[this.name]))return!1;const{selection:s}=e,{$to:r}=s,a=t();return JM(s)?a.insertContentAt(r.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:i,dispatch:o})=>{var c;if(o){const{$to:d}=i.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?i.setSelection(at.create(i.doc,d.pos+1)):d.nodeAfter.isBlock?i.setSelection(Je.create(i.doc,d.pos)):i.setSelection(at.create(i.doc,d.pos));else{const m=(c=d.parent.type.contentMatch.defaultType)==null?void 0:c.create();m&&(i.insert(h,m),i.setSelection(at.create(i.doc,h+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Cee({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),gte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,xte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,bte=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vte=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,yte=rl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Pc({find:gte,type:this.type}),Pc({find:bte,type:this.type})]},addPasteRules(){return[Qo({find:xte,type:this.type}),Qo({find:vte,type:this.type})]}});const wte="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",jte="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Lc=(t,e)=>{for(const s in e)t[s]=e[s];return t},ow="numeric",lw="ascii",cw="alpha",zu="asciinumeric",yu="alphanumeric",dw="domain",gO="emoji",Nte="scheme",Ste="slashscheme",Av="whitespace";function _te(t,e){return t in e||(e[t]=[]),e[t]}function Oo(t,e,s){e[ow]&&(e[zu]=!0,e[yu]=!0),e[lw]&&(e[zu]=!0,e[cw]=!0),e[zu]&&(e[yu]=!0),e[cw]&&(e[yu]=!0),e[yu]&&(e[dw]=!0),e[gO]&&(e[dw]=!0);for(const r in e){const a=_te(r,s);a.indexOf(t)<0&&a.push(t)}}function Cte(t,e){const s={};for(const r in e)e[r].indexOf(t)>=0&&(s[r]=!0);return s}function En(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}En.groups={};En.prototype={accepts(){return!!this.t},go(t){const e=this,s=e.j[t];if(s)return s;for(let r=0;r<e.jr.length;r++){const a=e.jr[r][0],i=e.jr[r][1];if(i&&a.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,s,r){for(let a=0;a<t.length;a++)this.tt(t[a],e,s,r)},tr(t,e,s,r){r=r||En.groups;let a;return e&&e.j?a=e:(a=new En(e),s&&r&&Oo(e,s,r)),this.jr.push([t,a]),a},ts(t,e,s,r){let a=this;const i=t.length;if(!i)return a;for(let o=0;o<i-1;o++)a=a.tt(t[o]);return a.tt(t[i-1],e,s,r)},tt(t,e,s,r){r=r||En.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const i=e;let o,c=a.go(t);if(c?(o=new En,Lc(o.j,c.j),o.jr.push.apply(o.jr,c.jr),o.jd=c.jd,o.t=c.t):o=new En,i){if(r)if(o.t&&typeof o.t=="string"){const d=Lc(Cte(o.t,r),s);Oo(i,d,r)}else s&&Oo(i,s,r);o.t=i}return a.j[t]=o,o}};const ht=(t,e,s,r,a)=>t.ta(e,s,r,a),ts=(t,e,s,r,a)=>t.tr(e,s,r,a),U5=(t,e,s,r,a)=>t.ts(e,s,r,a),Ae=(t,e,s,r,a)=>t.tt(e,s,r,a),Ta="WORD",uw="UWORD",xO="ASCIINUMERICAL",bO="ALPHANUMERICAL",fh="LOCALHOST",hw="TLD",mw="UTLD",Hf="SCHEME",hc="SLASH_SCHEME",jj="NUM",fw="WS",Nj="NL",Lu="OPENBRACE",$u="CLOSEBRACE",Dp="OPENBRACKET",Pp="CLOSEBRACKET",zp="OPENPAREN",Lp="CLOSEPAREN",$p="OPENANGLEBRACKET",Fp="CLOSEANGLEBRACKET",Ip="FULLWIDTHLEFTPAREN",Bp="FULLWIDTHRIGHTPAREN",Up="LEFTCORNERBRACKET",Vp="RIGHTCORNERBRACKET",qp="LEFTWHITECORNERBRACKET",Hp="RIGHTWHITECORNERBRACKET",Gp="FULLWIDTHLESSTHAN",Wp="FULLWIDTHGREATERTHAN",Yp="AMPERSAND",Kp="APOSTROPHE",Jp="ASTERISK",Ni="AT",Xp="BACKSLASH",Qp="BACKTICK",Zp="CARET",ki="COLON",Sj="COMMA",e0="DOLLAR",Yr="DOT",t0="EQUALS",_j="EXCLAMATION",pr="HYPHEN",Fu="PERCENT",s0="PIPE",n0="PLUS",r0="POUND",Iu="QUERY",Cj="QUOTE",vO="FULLWIDTHMIDDLEDOT",kj="SEMI",Kr="SLASH",Bu="TILDE",a0="UNDERSCORE",yO="EMOJI",i0="SYM";var wO=Object.freeze({__proto__:null,ALPHANUMERICAL:bO,AMPERSAND:Yp,APOSTROPHE:Kp,ASCIINUMERICAL:xO,ASTERISK:Jp,AT:Ni,BACKSLASH:Xp,BACKTICK:Qp,CARET:Zp,CLOSEANGLEBRACKET:Fp,CLOSEBRACE:$u,CLOSEBRACKET:Pp,CLOSEPAREN:Lp,COLON:ki,COMMA:Sj,DOLLAR:e0,DOT:Yr,EMOJI:yO,EQUALS:t0,EXCLAMATION:_j,FULLWIDTHGREATERTHAN:Wp,FULLWIDTHLEFTPAREN:Ip,FULLWIDTHLESSTHAN:Gp,FULLWIDTHMIDDLEDOT:vO,FULLWIDTHRIGHTPAREN:Bp,HYPHEN:pr,LEFTCORNERBRACKET:Up,LEFTWHITECORNERBRACKET:qp,LOCALHOST:fh,NL:Nj,NUM:jj,OPENANGLEBRACKET:$p,OPENBRACE:Lu,OPENBRACKET:Dp,OPENPAREN:zp,PERCENT:Fu,PIPE:s0,PLUS:n0,POUND:r0,QUERY:Iu,QUOTE:Cj,RIGHTCORNERBRACKET:Vp,RIGHTWHITECORNERBRACKET:Hp,SCHEME:Hf,SEMI:kj,SLASH:Kr,SLASH_SCHEME:hc,SYM:i0,TILDE:Bu,TLD:hw,UNDERSCORE:a0,UTLD:mw,UWORD:uw,WORD:Ta,WS:fw});const ka=/[a-z]/,lu=new RegExp("\\p{L}","u"),Tv=new RegExp("\\p{Emoji}","u"),Ea=/\d/,Mv=/\s/,V5="\r",Ov=`
`,kte="️",Ete="‍",Rv="￼";let Sf=null,_f=null;function Ate(t=[]){const e={};En.groups=e;const s=new En;Sf==null&&(Sf=q5(wte)),_f==null&&(_f=q5(jte)),Ae(s,"'",Kp),Ae(s,"{",Lu),Ae(s,"}",$u),Ae(s,"[",Dp),Ae(s,"]",Pp),Ae(s,"(",zp),Ae(s,")",Lp),Ae(s,"<",$p),Ae(s,">",Fp),Ae(s,"（",Ip),Ae(s,"）",Bp),Ae(s,"「",Up),Ae(s,"」",Vp),Ae(s,"『",qp),Ae(s,"』",Hp),Ae(s,"＜",Gp),Ae(s,"＞",Wp),Ae(s,"&",Yp),Ae(s,"*",Jp),Ae(s,"@",Ni),Ae(s,"`",Qp),Ae(s,"^",Zp),Ae(s,":",ki),Ae(s,",",Sj),Ae(s,"$",e0),Ae(s,".",Yr),Ae(s,"=",t0),Ae(s,"!",_j),Ae(s,"-",pr),Ae(s,"%",Fu),Ae(s,"|",s0),Ae(s,"+",n0),Ae(s,"#",r0),Ae(s,"?",Iu),Ae(s,'"',Cj),Ae(s,"/",Kr),Ae(s,";",kj),Ae(s,"~",Bu),Ae(s,"_",a0),Ae(s,"\\",Xp),Ae(s,"・",vO);const r=ts(s,Ea,jj,{[ow]:!0});ts(r,Ea,r);const a=ts(r,ka,xO,{[zu]:!0}),i=ts(r,lu,bO,{[yu]:!0}),o=ts(s,ka,Ta,{[lw]:!0});ts(o,Ea,a),ts(o,ka,o),ts(a,Ea,a),ts(a,ka,a);const c=ts(s,lu,uw,{[cw]:!0});ts(c,ka),ts(c,Ea,i),ts(c,lu,c),ts(i,Ea,i),ts(i,ka),ts(i,lu,i);const d=Ae(s,Ov,Nj,{[Av]:!0}),h=Ae(s,V5,fw,{[Av]:!0}),m=ts(s,Mv,fw,{[Av]:!0});Ae(s,Rv,m),Ae(h,Ov,d),Ae(h,Rv,m),ts(h,Mv,m),Ae(m,V5),Ae(m,Ov),ts(m,Mv,m),Ae(m,Rv,m);const p=ts(s,Tv,yO,{[gO]:!0});Ae(p,"#"),ts(p,Tv,p),Ae(p,kte,p);const g=Ae(p,Ete);Ae(g,"#"),ts(g,Tv,p);const b=[[ka,o],[Ea,a]],v=[[ka,null],[lu,c],[Ea,i]];for(let N=0;N<Sf.length;N++)xi(s,Sf[N],hw,Ta,b);for(let N=0;N<_f.length;N++)xi(s,_f[N],mw,uw,v);Oo(hw,{tld:!0,ascii:!0},e),Oo(mw,{utld:!0,alpha:!0},e),xi(s,"file",Hf,Ta,b),xi(s,"mailto",Hf,Ta,b),xi(s,"http",hc,Ta,b),xi(s,"https",hc,Ta,b),xi(s,"ftp",hc,Ta,b),xi(s,"ftps",hc,Ta,b),Oo(Hf,{scheme:!0,ascii:!0},e),Oo(hc,{slashscheme:!0,ascii:!0},e),t=t.sort((N,j)=>N[0]>j[0]?1:-1);for(let N=0;N<t.length;N++){const j=t[N][0],_=t[N][1]?{[Nte]:!0}:{[Ste]:!0};j.indexOf("-")>=0?_[dw]=!0:ka.test(j)?Ea.test(j)?_[zu]=!0:_[lw]=!0:_[ow]=!0,U5(s,j,j,_)}return U5(s,"localhost",fh,{ascii:!0}),s.jd=new En(i0),{start:s,tokens:Lc({groups:e},wO)}}function jO(t,e){const s=Tte(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=s.length,a=[];let i=0,o=0;for(;o<r;){let c=t,d=null,h=0,m=null,p=-1,g=-1;for(;o<r&&(d=c.go(s[o]));)c=d,c.accepts()?(p=0,g=0,m=c):p>=0&&(p+=s[o].length,g++),h+=s[o].length,i+=s[o].length,o++;i-=p,o-=g,h-=p,a.push({t:m.t,v:e.slice(i-h,i),s:i-h,e:i})}return a}function Tte(t){const e=[],s=t.length;let r=0;for(;r<s;){let a=t.charCodeAt(r),i,o=a<55296||a>56319||r+1===s||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function xi(t,e,s,r,a){let i;const o=e.length;for(let c=0;c<o-1;c++){const d=e[c];t.j[d]?i=t.j[d]:(i=new En(r),i.jr=a.slice(),t.j[d]=i),t=i}return i=new En(s),i.jr=a.slice(),t.j[e[o-1]]=i,i}function q5(t){const e=[],s=[];let r=0,a="0123456789";for(;r<t.length;){let i=0;for(;a.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(s.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)s.pop();r+=i}else s.push(t[r]),r++}return e}const ph={defaultProtocol:"http",events:null,format:H5,formatHref:H5,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ej(t,e=null){let s=Lc({},ph);t&&(s=Lc(s,t instanceof Ej?t.o:t));const r=s.ignoreTags,a=[];for(let i=0;i<r.length;i++)a.push(r[i].toUpperCase());this.o=s,e&&(this.defaultRender=e),this.ignoreTags=a}Ej.prototype={o:ph,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,s){const r=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=s.t in a?a[s.t]:ph[t],typeof a=="function"&&r&&(a=a(e,s))):typeof a=="function"&&r&&(a=a(e,s.t,s)),a)},getObj(t,e,s){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,s.t,s)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function H5(t){return t}function NO(t,e){this.t="token",this.v=t,this.tk=e}NO.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),s=t.get("truncate",e,this),r=t.get("format",e,this);return s&&r.length>s?r.substring(0,s)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=ph.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,s=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",s,this),a=t.get("tagName",s,e),i=this.toFormattedString(t),o={},c=t.get("className",s,e),d=t.get("target",s,e),h=t.get("rel",s,e),m=t.getObj("attributes",s,e),p=t.getObj("events",s,e);return o.href=r,c&&(o.class=c),d&&(o.target=d),h&&(o.rel=h),m&&Lc(o,m),{tagName:a,attributes:o,content:i,eventListeners:p}}};function Q0(t,e){class s extends NO{constructor(a,i){super(a,i),this.t=t}}for(const r in e)s.prototype[r]=e[r];return s.t=t,s}const G5=Q0("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),W5=Q0("text"),Mte=Q0("nl"),Cf=Q0("url",{isLink:!0,toHref(t=ph.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==fh&&t[1].t===ki}}),mr=t=>new En(t);function Ote({groups:t}){const e=t.domain.concat([Yp,Jp,Ni,Xp,Qp,Zp,e0,t0,pr,jj,Fu,s0,n0,r0,Kr,i0,Bu,a0]),s=[Kp,ki,Sj,Yr,_j,Fu,Iu,Cj,kj,$p,Fp,Lu,$u,Pp,Dp,zp,Lp,Ip,Bp,Up,Vp,qp,Hp,Gp,Wp],r=[Yp,Kp,Jp,Xp,Qp,Zp,e0,t0,pr,Lu,$u,Fu,s0,n0,r0,Iu,Kr,i0,Bu,a0],a=mr(),i=Ae(a,Bu);ht(i,r,i),ht(i,t.domain,i);const o=mr(),c=mr(),d=mr();ht(a,t.domain,o),ht(a,t.scheme,c),ht(a,t.slashscheme,d),ht(o,r,i),ht(o,t.domain,o);const h=Ae(o,Ni);Ae(i,Ni,h),Ae(c,Ni,h),Ae(d,Ni,h);const m=Ae(i,Yr);ht(m,r,i),ht(m,t.domain,i);const p=mr();ht(h,t.domain,p),ht(p,t.domain,p);const g=Ae(p,Yr);ht(g,t.domain,p);const b=mr(G5);ht(g,t.tld,b),ht(g,t.utld,b),Ae(h,fh,b);const v=Ae(p,pr);Ae(v,pr,v),ht(v,t.domain,p),ht(b,t.domain,p),Ae(b,Yr,g),Ae(b,pr,v);const N=Ae(b,ki);ht(N,t.numeric,G5);const j=Ae(o,pr),w=Ae(o,Yr);Ae(j,pr,j),ht(j,t.domain,o),ht(w,r,i),ht(w,t.domain,o);const _=mr(Cf);ht(w,t.tld,_),ht(w,t.utld,_),ht(_,t.domain,o),ht(_,r,i),Ae(_,Yr,w),Ae(_,pr,j),Ae(_,Ni,h);const k=Ae(_,ki),C=mr(Cf);ht(k,t.numeric,C);const E=mr(Cf),A=mr();ht(E,e,E),ht(E,s,A),ht(A,e,E),ht(A,s,A),Ae(_,Kr,E),Ae(C,Kr,E);const M=Ae(c,ki),R=Ae(d,ki),D=Ae(R,Kr),L=Ae(D,Kr);ht(c,t.domain,o),Ae(c,Yr,w),Ae(c,pr,j),ht(d,t.domain,o),Ae(d,Yr,w),Ae(d,pr,j),ht(M,t.domain,E),Ae(M,Kr,E),Ae(M,Iu,E),ht(L,t.domain,E),ht(L,e,E),Ae(L,Kr,E);const B=[[Lu,$u],[Dp,Pp],[zp,Lp],[$p,Fp],[Ip,Bp],[Up,Vp],[qp,Hp],[Gp,Wp]];for(let O=0;O<B.length;O++){const[P,z]=B[O],q=Ae(E,P);Ae(A,P,q),Ae(q,z,E);const I=mr(Cf);ht(q,e,I);const V=mr();ht(q,s),ht(I,e,I),ht(I,s,V),ht(V,e,I),ht(V,s,V),Ae(I,z,E),Ae(V,z,E)}return Ae(a,fh,_),Ae(a,Nj,Mte),{start:a,tokens:wO}}function Rte(t,e,s){let r=s.length,a=0,i=[],o=[];for(;a<r;){let c=t,d=null,h=null,m=0,p=null,g=-1;for(;a<r&&!(d=c.go(s[a].t));)o.push(s[a++]);for(;a<r&&(h=d||c.go(s[a].t));)d=null,c=h,c.accepts()?(g=0,p=c):g>=0&&g++,a++,m++;if(g<0)a-=m,a<r&&(o.push(s[a]),a++);else{o.length>0&&(i.push(Dv(W5,e,o)),o=[]),a-=g,m-=g;const b=p.t,v=s.slice(a-m,a);i.push(Dv(b,e,v))}}return o.length>0&&i.push(Dv(W5,e,o)),i}function Dv(t,e,s){const r=s[0].s,a=s[s.length-1].e,i=e.slice(r,a);return new t(i,s)}const Dte=typeof console<"u"&&console&&console.warn||(()=>{}),Pte="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Vt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function zte(){return En.groups={},Vt.scanner=null,Vt.parser=null,Vt.tokenQueue=[],Vt.pluginQueue=[],Vt.customSchemes=[],Vt.initialized=!1,Vt}function Y5(t,e=!1){if(Vt.initialized&&Dte(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Pte}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Vt.customSchemes.push([t,e])}function Lte(){Vt.scanner=Ate(Vt.customSchemes);for(let t=0;t<Vt.tokenQueue.length;t++)Vt.tokenQueue[t][1]({scanner:Vt.scanner});Vt.parser=Ote(Vt.scanner.tokens);for(let t=0;t<Vt.pluginQueue.length;t++)Vt.pluginQueue[t][1]({scanner:Vt.scanner,parser:Vt.parser});return Vt.initialized=!0,Vt}function Aj(t){return Vt.initialized||Lte(),Rte(Vt.parser.start,t,jO(Vt.scanner.start,t))}Aj.scan=jO;function SO(t,e=null,s=null){if(e&&typeof e=="object"){if(s)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);s=e,e=null}const r=new Ej(s),a=Aj(t),i=[];for(let o=0;o<a.length;o++){const c=a[o];c.isLink&&(!e||c.t===e)&&r.check(c)&&i.push(c.toFormattedObject(r))}return i}var Tj="[\0-   ᠎ -\u2029 　]",$te=new RegExp(Tj),Fte=new RegExp(`${Tj}$`),Ite=new RegExp(Tj,"g");function Bte(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Ute(t){return new Qt({key:new ys("autolink"),appendTransaction:(e,s,r)=>{const a=e.some(h=>h.docChanged)&&!s.doc.eq(r.doc),i=e.some(h=>h.getMeta("preventAutolink"));if(!a||i)return;const{tr:o}=r,c=FM(s.doc,[...e]);if(YM(c).forEach(({newRange:h})=>{const m=UQ(r.doc,h,b=>b.isTextblock);let p,g;if(m.length>1)p=m[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(m.length){const b=r.doc.textBetween(h.from,h.to," "," ");if(!Fte.test(b))return;p=m[0],g=r.doc.textBetween(p.pos,h.to,void 0," ")}if(p&&g){const b=g.split($te).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],N=p.pos+g.lastIndexOf(v);if(!v)return!1;const j=Aj(v).map(w=>w.toObject(t.defaultProtocol));if(!Bte(j))return!1;j.filter(w=>w.isLink).map(w=>({...w,from:N+w.start+1,to:N+w.end+1})).filter(w=>r.schema.marks.code?!r.doc.rangeHasMark(w.from,w.to,r.schema.marks.code):!0).filter(w=>t.validate(w.value)).filter(w=>t.shouldAutoLink(w.value)).forEach(w=>{vj(w.from,w.to,r.doc).some(_=>_.mark.type===t.type)||o.addMark(w.from,w.to,t.type.create({href:w.href}))})}}),!!o.steps.length)return o}})}function Vte(t){return new Qt({key:new ys("handleClickLink"),props:{handleClick:(e,s,r)=>{var a,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let m=r.target;const p=[];for(;m.nodeName!=="DIV";)p.push(m),m=m.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const c=WM(e.state,t.type.name),d=(a=o==null?void 0:o.href)!=null?a:c.href,h=(i=o==null?void 0:o.target)!=null?i:c.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&d?(window.open(d,h),!0):!1}}})}function qte(t){return new Qt({key:new ys("handlePasteLink"),props:{handlePaste:(e,s,r)=>{const{state:a}=e,{selection:i}=a,{empty:o}=i;if(o)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const d=SO(c,{defaultProtocol:t.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!d?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function yo(t,e){const s=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const a=typeof r=="string"?r:r.scheme;a&&s.push(a)}),!t||t.replace(Ite,"").match(new RegExp(`^(?:(?:${s.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Hte=rl.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Y5(t);return}Y5(t.scheme,t.optionalSlashes)})},onDestroy(){zte()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!yo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:s=>!!yo(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!yo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Gt(this.options.HTMLAttributes,t),0]:["a",Gt(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:s}=t;return this.options.isAllowedUri(s,{defaultValidate:r=>!!yo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:s}=t||{};return s&&!this.options.isAllowedUri(s,{defaultValidate:r=>!!yo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qo({find:t=>{const e=[];if(t){const{protocols:s,defaultProtocol:r}=this.options,a=SO(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!yo(o,s),protocols:s,defaultProtocol:r}));a.length&&a.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:s}=this.options;return this.options.autolink&&t.push(Ute({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:a=>!!yo(a,e),protocols:e,defaultProtocol:s}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Vte({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(qte({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Gte=Object.defineProperty,Wte=(t,e)=>{for(var s in e)Gte(t,s,{get:e[s],enumerable:!0})},Yte="listItem",K5="textStyle",J5=/^\s*([-+*])\s$/,_O=$n.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Yte,this.editor.getAttributes(K5)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=zc({find:J5,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zc({find:J5,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(K5),editor:this.editor})),[t]}}),CO=$n.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Gt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Kte={};Wte(Kte,{findListItemPos:()=>Rh,getNextListDepth:()=>Mj,handleBackspace:()=>pw,handleDelete:()=>gw,hasListBefore:()=>kO,hasListItemAfter:()=>Jte,hasListItemBefore:()=>EO,listItemHasSubList:()=>AO,nextListIsDeeper:()=>TO,nextListIsHigher:()=>MO});var Rh=(t,e)=>{const{$from:s}=e.selection,r=vs(t,e.schema);let a=null,i=s.depth,o=s.pos,c=null;for(;i>0&&c===null;)a=s.node(i),a.type===r?c=i:(i-=1,o-=1);return c===null?null:{$pos:e.doc.resolve(o),depth:c}},Mj=(t,e)=>{const s=Rh(t,e);if(!s)return!1;const[,r]=QQ(e,t,s.$pos.pos+4);return r},kO=(t,e,s)=>{const{$anchor:r}=t.selection,a=Math.max(0,r.pos-2),i=t.doc.resolve(a).node();return!(!i||!s.includes(i.type.name))},EO=(t,e)=>{var s;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-2);return!(a.index()===0||((s=a.nodeBefore)==null?void 0:s.type.name)!==t)},AO=(t,e,s)=>{if(!s)return!1;const r=vs(t,e.schema);let a=!1;return s.descendants(i=>{i.type===r&&(a=!0)}),a},pw=(t,e,s)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Bi(t.state,e)&&kO(t.state,e,s)){const{$anchor:c}=t.state.selection,d=t.state.doc.resolve(c.before()-1),h=[];d.node().descendants((g,b)=>{g.type.name===e&&h.push({node:g,pos:b})});const m=h.at(-1);if(!m)return!1;const p=t.state.doc.resolve(d.start()+m.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},p.end()).joinForward().run()}if(!Bi(t.state,e)||!sZ(t.state))return!1;const r=Rh(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=AO(e,t.state,i);return EO(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},TO=(t,e)=>{const s=Mj(t,e),r=Rh(t,e);return!r||!s?!1:s>r.depth},MO=(t,e)=>{const s=Mj(t,e),r=Rh(t,e);return!r||!s?!1:s<r.depth},gw=(t,e)=>{if(!Bi(t.state,e)||!tZ(t.state,e))return!1;const{selection:s}=t.state,{$from:r,$to:a}=s;return!s.empty&&r.sameParent(a)?!1:TO(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():MO(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Jte=(t,e)=>{var s;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-r.parentOffset-2);return!(a.index()===a.parent.childCount-1||((s=a.nodeAfter)==null?void 0:s.type.name)!==t)},OO=ws.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&gw(t,s)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&gw(t,s)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:r})=>{t.state.schema.nodes[s]!==void 0&&pw(t,s,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:r})=>{t.state.schema.nodes[s]!==void 0&&pw(t,s,r)&&(e=!0)}),e}}}}),Xte="listItem",X5="textStyle",Q5=/^(\d+)\.\s$/,RO=$n.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...s}=t;return e===1?["ol",Gt(this.options.HTMLAttributes,s),0]:["ol",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Xte,this.editor.getAttributes(X5)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=zc({find:Q5,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=zc({find:Q5,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(X5)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[t]}}),Qte=/^\s*(\[([( |x])?\])\s$/,Zte=$n.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Gt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:s,editor:r})=>{const a=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div"),h=()=>{var m,p;c.ariaLabel=((p=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:p.call(m,t,c.checked))||`Task item checkbox for ${t.textContent||"empty task item"}`};return h(),i.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",m=>m.preventDefault()),c.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:p}=m.target;r.isEditable&&typeof s=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const b=s();if(typeof b!="number")return!1;const v=g.doc.nodeAt(b);return g.setNodeMarkup(b,void 0,{...v==null?void 0:v.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,p)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,p])=>{a.setAttribute(m,p)}),a.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,i.append(c,o),a.append(i,d),Object.entries(e).forEach(([m,p])=>{a.setAttribute(m,p)}),{dom:a,contentDOM:d,update:m=>m.type!==this.type?!1:(a.dataset.checked=m.attrs.checked,c.checked=m.attrs.checked,h(),!0)}}},addInputRules(){return[zc({find:Qte,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),ese=$n.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Gt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ws.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(_O.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(CO.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(OO.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(RO.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Zte.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(ese.configure(this.options.taskList)),t}});var tse=$n.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),sse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,nse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,rse=rl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Pc({find:sse,type:this.type})]},addPasteRules(){return[Qo({find:nse,type:this.type})]}}),ase=$n.create({name:"text",group:"inline"}),ise=rl.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function ose(t={}){return new Qt({view(e){return new lse(e,t)}})}class lse{constructor(e,s){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=o=>{this[a](o)};return e.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,r,a=this.editorView.dom,i=a.getBoundingClientRect(),o=i.width/a.offsetWidth,c=i.height/a.offsetHeight;if(s){let p=e.nodeBefore,g=e.nodeAfter;if(p||g){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let v=b.getBoundingClientRect(),N=p?v.bottom:v.top;p&&g&&(N=(N+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let j=this.width/2*c;r={left:v.left,right:v.right,top:N-j,bottom:N+j}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let p=d.getBoundingClientRect(),g=p.width/d.offsetWidth,b=p.height/d.offsetHeight;h=p.left-d.scrollLeft*g,m=p.top-d.scrollTop*b}this.element.style.left=(r.left-h)/o+"px",this.element.style.top=(r.top-m)/c+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),a=r&&r.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,s,e):a;if(s&&!i){let o=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=LT(this.editorView.state.doc,o,this.editorView.dragging.slice);c!=null&&(o=c)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class rs extends ut{constructor(e){super(e,e)}map(e,s){let r=e.resolve(s.map(this.head));return rs.valid(r)?new rs(r):ut.near(r)}content(){return Le.empty}eq(e){return e instanceof rs&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rs(e.resolve(s.pos))}getBookmark(){return new Oj(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!cse(e)||!dse(e))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let a=s.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,s,r=!1){e:for(;;){if(!r&&rs.valid(e))return e;let a=e.pos,i=null;for(let o=e.depth;;o--){let c=e.node(o);if(s>0?e.indexAfter(o)<c.childCount:e.index(o)>0){i=c.child(s>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;a+=s;let d=e.doc.resolve(a);if(rs.valid(d))return d}for(;;){let o=s>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Je.isSelectable(i)){e=e.doc.resolve(a+i.nodeSize*s),r=!1;continue e}break}i=o,a+=s;let c=e.doc.resolve(a);if(rs.valid(c))return c}return null}}}rs.prototype.visible=!1;rs.findFrom=rs.findGapCursorFrom;ut.jsonID("gapcursor",rs);class Oj{constructor(e){this.pos=e}map(e){return new Oj(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return rs.valid(s)?new rs(s):ut.near(s)}}function cse(t){for(let e=t.depth;e>=0;e--){let s=t.index(e),r=t.node(e);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(s-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||a.isAtom||a.type.spec.isolating)return!0;if(a.inlineContent)return!1}}return!0}function dse(t){for(let e=t.depth;e>=0;e--){let s=t.indexAfter(e),r=t.node(e);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(s);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||a.isAtom||a.type.spec.isolating)return!0;if(a.inlineContent)return!1}}return!0}function use(){return new Qt({props:{decorations:pse,createSelectionBetween(t,e,s){return e.pos==s.pos&&rs.valid(s)?new rs(s):null},handleClick:mse,handleKeyDown:hse,handleDOMEvents:{beforeinput:fse}}})}const hse=_M({ArrowLeft:kf("horiz",-1),ArrowRight:kf("horiz",1),ArrowUp:kf("vert",-1),ArrowDown:kf("vert",1)});function kf(t,e){const s=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,a,i){let o=r.selection,c=e>0?o.$to:o.$from,d=o.empty;if(o instanceof at){if(!i.endOfTextblock(s)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let h=rs.findGapCursorFrom(c,e,d);return h?(a&&a(r.tr.setSelection(new rs(h))),!0):!1}}function mse(t,e,s){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!rs.valid(r))return!1;let a=t.posAtCoords({left:s.clientX,top:s.clientY});return a&&a.inside>-1&&Je.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new rs(r))),!0)}function fse(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof rs))return!1;let{$from:s}=t.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let a=ke.empty;for(let o=r.length-1;o>=0;o--)a=ke.from(r[o].createAndFill(null,a));let i=t.state.tr.replace(s.pos,s.pos,new Le(a,0,0));return i.setSelection(at.near(i.doc.resolve(s.pos+1))),t.dispatch(i),!1}function pse(t){if(!(t.selection instanceof rs))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[rn.widget(t.selection.head,e,{key:"gapcursor"})])}var o0=200,Ls=function(){};Ls.prototype.append=function(e){return e.length?(e=Ls.from(e),!this.length&&e||e.length<o0&&this.leafAppend(e)||this.length<o0&&e.leafPrepend(this)||this.appendInner(e)):this};Ls.prototype.prepend=function(e){return e.length?Ls.from(e).append(this):this};Ls.prototype.appendInner=function(e){return new gse(this,e)};Ls.prototype.slice=function(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?Ls.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))};Ls.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ls.prototype.forEach=function(e,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length),s<=r?this.forEachInner(e,s,r,0):this.forEachInvertedInner(e,s,r,0)};Ls.prototype.map=function(e,s,r){s===void 0&&(s=0),r===void 0&&(r=this.length);var a=[];return this.forEach(function(i,o){return a.push(e(i,o))},s,r),a};Ls.from=function(e){return e instanceof Ls?e:e&&e.length?new DO(e):Ls.empty};var DO=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new e(this.values.slice(a,i))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,i,o,c){for(var d=i;d<o;d++)if(a(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(a,i,o,c){for(var d=i-1;d>=o;d--)if(a(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=o0)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=o0)return new e(a.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e}(Ls);Ls.empty=new DO([]);var gse=function(t){function e(s,r){t.call(this),this.left=s,this.right=r,this.length=s.length+r.length,this.depth=Math.max(s.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,a,i,o){var c=this.left.length;if(a<c&&this.left.forEachInner(r,a,Math.min(i,c),o)===!1||i>c&&this.right.forEachInner(r,Math.max(a-c,0),Math.min(this.length,i)-c,o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,a,i,o){var c=this.left.length;if(a>c&&this.right.forEachInvertedInner(r,a-c,Math.max(i,c)-c,o+c)===!1||i<c&&this.left.forEachInvertedInner(r,Math.min(a,c),i,o)===!1)return!1},e.prototype.sliceInner=function(r,a){if(r==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(r,a):r>=i?this.right.slice(r-i,a-i):this.left.slice(r,i).append(this.right.slice(0,a-i))},e.prototype.leafAppend=function(r){var a=this.right.leafAppend(r);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(r){var a=this.left.leafPrepend(r);if(a)return new e(a,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ls);const xse=500;class Pr{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let a,i;s&&(a=this.remapping(r,this.items.length),i=a.maps.length);let o=e.tr,c,d,h=[],m=[];return this.items.forEach((p,g)=>{if(!p.step){a||(a=this.remapping(r,g+1),i=a.maps.length),i--,m.push(p);return}if(a){m.push(new Jr(p.map));let b=p.step.map(a.slice(i)),v;b&&o.maybeStep(b).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],h.push(new Jr(v,void 0,void 0,h.length+m.length))),i--,v&&a.appendMap(v,i)}else o.maybeStep(p.step);if(p.selection)return c=a?p.selection.map(a.slice(i)):p.selection,d=new Pr(this.items.slice(0,r).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:o,selection:c}}addTransform(e,s,r,a){let i=[],o=this.eventCount,c=this.items,d=!a&&c.length?c.get(c.length-1):null;for(let m=0;m<e.steps.length;m++){let p=e.steps[m].invert(e.docs[m]),g=new Jr(e.mapping.maps[m],p,s),b;(b=d&&d.merge(g))&&(g=b,m?i.pop():c=c.slice(0,c.length-1)),i.push(g),s&&(o++,s=void 0),a||(d=g)}let h=o-r.depth;return h>vse&&(c=bse(c,h),o-=h),new Pr(c.append(i),o)}remapping(e,s){let r=new oh;return this.items.forEach((a,i)=>{let o=a.mirrorOffset!=null&&i-a.mirrorOffset>=e?r.maps.length-a.mirrorOffset:void 0;r.appendMap(a.map,o)},e,s),r}addMaps(e){return this.eventCount==0?this:new Pr(this.items.append(e.map(s=>new Jr(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let r=[],a=Math.max(0,this.items.length-s),i=e.mapping,o=e.steps.length,c=this.eventCount;this.items.forEach(g=>{g.selection&&c--},a);let d=s;this.items.forEach(g=>{let b=i.getMirror(--d);if(b==null)return;o=Math.min(o,b);let v=i.maps[b];if(g.step){let N=e.steps[b].invert(e.docs[b]),j=g.selection&&g.selection.map(i.slice(d+1,b));j&&c++,r.push(new Jr(v,N,j))}else r.push(new Jr(v))},a);let h=[];for(let g=s;g<o;g++)h.push(new Jr(i.maps[g]));let m=this.items.slice(0,a).append(h).append(r),p=new Pr(m,c);return p.emptyItemCount()>xse&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),r=s.maps.length,a=[],i=0;return this.items.forEach((o,c)=>{if(c>=e)a.push(o),o.selection&&i++;else if(o.step){let d=o.step.map(s.slice(r)),h=d&&d.getMap();if(r--,h&&s.appendMap(h,r),d){let m=o.selection&&o.selection.map(s.slice(r));m&&i++;let p=new Jr(h.invert(),d,m),g,b=a.length-1;(g=a.length&&a[b].merge(p))?a[b]=g:a.push(p)}}else o.map&&r--},this.items.length,0),new Pr(Ls.from(a.reverse()),i)}}Pr.empty=new Pr(Ls.empty,0);function bse(t,e){let s;return t.forEach((r,a)=>{if(r.selection&&e--==0)return s=a,!1}),t.slice(s)}class Jr{constructor(e,s,r,a){this.map=e,this.step=s,this.selection=r,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new Jr(s.getMap().invert(),s,this.selection)}}}class Si{constructor(e,s,r,a,i){this.done=e,this.undone=s,this.prevRanges=r,this.prevTime=a,this.prevComposition=i}}const vse=20;function yse(t,e,s,r){let a=s.getMeta(Bo),i;if(a)return a.historyState;s.getMeta(Nse)&&(t=new Si(t.done,t.undone,null,0,-1));let o=s.getMeta("appendedTransaction");if(s.steps.length==0)return t;if(o&&o.getMeta(Bo))return o.getMeta(Bo).redo?new Si(t.done.addTransform(s,void 0,r,Gf(e)),t.undone,Z5(s.mapping.maps),t.prevTime,t.prevComposition):new Si(t.done,t.undone.addTransform(s,void 0,r,Gf(e)),null,t.prevTime,t.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let c=s.getMeta("composition"),d=t.prevTime==0||!o&&t.prevComposition!=c&&(t.prevTime<(s.time||0)-r.newGroupDelay||!wse(s,t.prevRanges)),h=o?Pv(t.prevRanges,s.mapping):Z5(s.mapping.maps);return new Si(t.done.addTransform(s,d?e.selection.getBookmark():void 0,r,Gf(e)),Pr.empty,h,s.time,c??t.prevComposition)}else return(i=s.getMeta("rebased"))?new Si(t.done.rebased(s,i),t.undone.rebased(s,i),Pv(t.prevRanges,s.mapping),t.prevTime,t.prevComposition):new Si(t.done.addMaps(s.mapping.maps),t.undone.addMaps(s.mapping.maps),Pv(t.prevRanges,s.mapping),t.prevTime,t.prevComposition)}function wse(t,e){if(!e)return!1;if(!t.docChanged)return!0;let s=!1;return t.mapping.maps[0].forEach((r,a)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&a>=e[i]&&(s=!0)}),s}function Z5(t){let e=[];for(let s=t.length-1;s>=0&&e.length==0;s--)t[s].forEach((r,a,i,o)=>e.push(i,o));return e}function Pv(t,e){if(!t)return null;let s=[];for(let r=0;r<t.length;r+=2){let a=e.map(t[r],1),i=e.map(t[r+1],-1);a<=i&&s.push(a,i)}return s}function jse(t,e,s){let r=Gf(e),a=Bo.get(e).spec.config,i=(s?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),c=(s?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),a,r),d=new Si(s?c:i.remaining,s?i.remaining:c,null,0,-1);return i.transform.setSelection(o).setMeta(Bo,{redo:s,historyState:d})}let zv=!1,e4=null;function Gf(t){let e=t.plugins;if(e4!=e){zv=!1,e4=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){zv=!0;break}}return zv}const Bo=new ys("history"),Nse=new ys("closeHistory");function Sse(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Qt({key:Bo,state:{init(){return new Si(Pr.empty,Pr.empty,null,0,-1)},apply(e,s,r){return yse(s,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,s){let r=s.inputType,a=r=="historyUndo"?zO:r=="historyRedo"?LO:null;return a?(s.preventDefault(),a(e.state,e.dispatch)):!1}}}})}function PO(t,e){return(s,r)=>{let a=Bo.getState(s);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(r){let i=jse(a,s,t);i&&r(e?i.scrollIntoView():i)}return!0}}const zO=PO(!1,!0),LO=PO(!0,!0);ws.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,s=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(s)}},addProseMirrorPlugins(){let t=!1;return[new Qt({key:new ys("characterCount"),appendTransaction:(e,s,r)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>a){const o=i-a,c=0,d=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(c,d);return t=!0,h}t=!0},filterTransaction:(e,s)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const a=this.storage.characters({node:s.doc}),i=this.storage.characters({node:e.doc});if(i<=r||a>r&&i>r&&i<=a)return!0;if(a>r&&i>r&&i>a||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,d=i-r,h=c-d,m=c;return e.deleteRange(h,m),!(this.storage.characters({node:e.doc})>r)}})]}});var _se=ws.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ose(this.options)]}});ws.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Qt({key:new ys("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:s,isFocused:r}=this.editor,{anchor:a}=e,i=[];if(!s||!r)return Ht.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((d,h)=>{if(d.isText)return;if(!(a>=h&&a<=h+d.nodeSize-1))return!1;o+=1});let c=0;return t.descendants((d,h)=>{if(d.isText||!(a>=h&&a<=h+d.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&o-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";i.push(rn.node(h,h+d.nodeSize,{class:this.options.className}))}),Ht.create(t,i)}}})]}});var Cse=ws.create({name:"gapCursor",addProseMirrorPlugins(){return[use()]},extendNodeSchema(t){var e;const s={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Rt(Ge(t,"allowGapCursor",s)))!=null?e:null}}}),kse=ws.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Qt({key:new ys("placeholder"),props:{decorations:({doc:t,selection:e})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,a=[];if(!s)return null;const i=this.editor.isEmpty;return t.descendants((o,c)=>{const d=r>=c&&r<=c+o.nodeSize,h=!o.isLeaf&&G0(o);if((d||!this.options.showOnlyCurrent)&&h){const m=[this.options.emptyNodeClass];i&&m.push(this.options.emptyEditorClass);const p=rn.node(c,c+o.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:c,hasAnchor:d}):this.options.placeholder});a.push(p)}return this.options.includeChildren}),Ht.create(t,a)}}})]}});ws.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Qt({key:new ys("selection"),props:{decorations(s){return s.selection.empty||t.isFocused||!t.isEditable||JM(s.selection)||t.view.dragging?null:Ht.create(s.doc,[rn.inline(s.selection.from,s.selection.to,{class:e.className})])}}})]}});function t4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Ese=ws.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new ys(this.name),e=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(this.options.node).includes(s.name));return[new Qt({key:t,appendTransaction:(s,r,a)=>{const{doc:i,tr:o,schema:c}=a,d=t.getState(a),h=i.content.size,m=c.nodes[this.options.node];if(d)return o.insert(h,m.create())},state:{init:(s,r)=>{const a=r.tr.doc.lastChild;return!t4({node:a,types:e})},apply:(s,r)=>{if(!s.docChanged)return r;const a=s.doc.lastChild;return!t4({node:a,types:e})}}})]}}),Ase=ws.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>zO(t,e),redo:()=>({state:t,dispatch:e})=>LO(t,e)}},addProseMirrorPlugins(){return[Sse(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Tse=ws.create({name:"starterKit",addExtensions(){var t,e,s,r;const a=[];return this.options.bold!==!1&&a.push(ate.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(ete.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(_O.configure(this.options.bulletList)),this.options.code!==!1&&a.push(lte.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(ute.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(hte.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(_se.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(Cse.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(mte.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(fte.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(Ase.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push(pte.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push(yte.configure(this.options.italic)),this.options.listItem!==!1&&a.push(CO.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(OO.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(Hte.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(RO.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(tse.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(rse.configure(this.options.strike)),this.options.text!==!1&&a.push(ase.configure(this.options.text)),this.options.underline!==!1&&a.push(ise.configure((s=this.options)==null?void 0:s.underline)),this.options.trailingNode!==!1&&a.push(Ese.configure((r=this.options)==null?void 0:r.trailingNode)),a}}),Z0=Tse;function Mse(t){var e;const{char:s,allowSpaces:r,allowToIncludeChar:a,allowedPrefixes:i,startOfLine:o,$position:c}=t,d=r&&!a,h=Eee(s),m=new RegExp(`\\s${h}$`),p=o?"^":"",g=a?"":h,b=d?new RegExp(`${p}${h}.*?(?=\\s${g}|$)`,"gm"):new RegExp(`${p}(?:^)?${h}[^\\s${g}]*`,"gm"),v=((e=c.nodeBefore)==null?void 0:e.isText)&&c.nodeBefore.text;if(!v)return null;const N=c.pos-v.length,j=Array.from(v.matchAll(b)).pop();if(!j||j.input===void 0||j.index===void 0)return null;const w=j.input.slice(Math.max(0,j.index-1),j.index),_=new RegExp(`^[${i==null?void 0:i.join("")}\0]?$`).test(w);if(i!==null&&!_)return null;const k=N+j.index;let C=k+j[0].length;return d&&m.test(v.slice(C-1,C+1))&&(j[0]+=" ",C+=1),k<c.pos&&C>=c.pos?{range:{from:k,to:C},query:j[0].slice(s.length),text:j[0]}:null}var Ose=new ys("suggestion");function Rse({pluginKey:t=Ose,editor:e,char:s="@",allowSpaces:r=!1,allowToIncludeChar:a=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:c="span",decorationClass:d="suggestion",decorationContent:h="",decorationEmptyClass:m="is-empty",command:p=()=>null,items:g=()=>[],render:b=()=>({}),allow:v=()=>!0,findSuggestionMatch:N=Mse}){let j;const w=b==null?void 0:b(),_=new Qt({key:t,view(){return{update:async(k,C)=>{var E,A,M,R,D,L,B;const O=(E=this.key)==null?void 0:E.getState(C),P=(A=this.key)==null?void 0:A.getState(k.state),z=O.active&&P.active&&O.range.from!==P.range.from,q=!O.active&&P.active,I=O.active&&!P.active,V=!q&&!I&&O.query!==P.query,H=q||z&&V,Y=V||z,U=I||z&&V;if(!H&&!Y&&!U)return;const K=U&&!H?O:P,J=k.dom.querySelector(`[data-decoration-id="${K.decorationId}"]`);j={editor:e,range:K.range,query:K.query,text:K.text,items:[],command:W=>p({editor:e,range:K.range,props:W}),decorationNode:J,clientRect:J?()=>{var W;const{decorationId:ee}=(W=this.key)==null?void 0:W.getState(e.state),ne=k.dom.querySelector(`[data-decoration-id="${ee}"]`);return(ne==null?void 0:ne.getBoundingClientRect())||null}:null},H&&((M=w==null?void 0:w.onBeforeStart)==null||M.call(w,j)),Y&&((R=w==null?void 0:w.onBeforeUpdate)==null||R.call(w,j)),(Y||H)&&(j.items=await g({editor:e,query:K.query})),U&&((D=w==null?void 0:w.onExit)==null||D.call(w,j)),Y&&((L=w==null?void 0:w.onUpdate)==null||L.call(w,j)),H&&((B=w==null?void 0:w.onStart)==null||B.call(w,j))},destroy:()=>{var k;j&&((k=w==null?void 0:w.onExit)==null||k.call(w,j))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(k,C,E,A){const{isEditable:M}=e,{composing:R}=e.view,{selection:D}=k,{empty:L,from:B}=D,O={...C};if(O.composing=R,M&&(L||e.view.composing)){(B<C.range.from||B>C.range.to)&&!R&&!C.composing&&(O.active=!1);const P=N({char:s,allowSpaces:r,allowToIncludeChar:a,allowedPrefixes:i,startOfLine:o,$position:D.$from}),z=`id_${Math.floor(Math.random()*4294967295)}`;P&&v({editor:e,state:A,range:P.range,isActive:C.active})?(O.active=!0,O.decorationId=C.decorationId?C.decorationId:z,O.range=P.range,O.query=P.query,O.text=P.text):O.active=!1}else O.active=!1;return O.active||(O.decorationId=null,O.range={from:0,to:0},O.query=null,O.text=null),O}},props:{handleKeyDown(k,C){var E;const{active:A,range:M}=_.getState(k.state);return A&&((E=w==null?void 0:w.onKeyDown)==null?void 0:E.call(w,{view:k,event:C,range:M}))||!1},decorations(k){const{active:C,range:E,decorationId:A,query:M}=_.getState(k);if(!C)return null;const R=!(M!=null&&M.length),D=[d];return R&&D.push(m),Ht.create(k.doc,[rn.inline(E.from,E.to,{nodeName:c,class:D.join(" "),"data-decoration-id":A,"data-decoration-content":h})])}}});return _}var Dse=Rse;function Pse({editor:t,overrideSuggestionOptions:e,extensionName:s,char:r="@"}){const a=new ys;return{editor:t,char:r,pluginKey:a,command:({editor:i,range:o,props:c})=>{var d,h,m;const p=i.view.state.selection.$to.nodeAfter;((d=p==null?void 0:p.text)==null?void 0:d.startsWith(" "))&&(o.to+=1),i.chain().focus().insertContentAt(o,[{type:s,attrs:{...c,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),(m=(h=i.view.dom.ownerDocument.defaultView)==null?void 0:h.getSelection())==null||m.collapseToEnd()},allow:({state:i,range:o})=>{const c=i.doc.resolve(o.from),d=i.schema.nodes[s];return!!c.parent.type.contentMatch.matchType(d)},...e}}function $O(t){return(t.options.suggestions.length?t.options.suggestions:[t.options.suggestion]).map(e=>Pse({editor:t.editor,overrideSuggestionOptions:e,extensionName:t.name,char:e.char}))}function s4(t,e){const s=$O(t),r=s.find(a=>a.char===e);return r||(s.length?s[0]:null)}var zse=$n.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:t,suggestion:e}){var s,r;return`${(s=e==null?void 0:e.char)!=null?s:"@"}${(r=t.attrs.label)!=null?r:t.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:t,node:e,suggestion:s}){var r,a;return["span",Gt(this.HTMLAttributes,t.HTMLAttributes),`${(r=s==null?void 0:s.char)!=null?r:"@"}${(a=e.attrs.label)!=null?a:e.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:t=>t.getAttribute("data-mention-suggestion-char"),renderHTML:t=>({"data-mention-suggestion-char":t.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:e}){const s=s4(this,t.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Gt({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:t,suggestion:s})];const r={...this.options};r.HTMLAttributes=Gt({"data-type":this.name},this.options.HTMLAttributes,e);const a=this.options.renderHTML({options:r,node:t,suggestion:s});return typeof a=="string"?["span",Gt({"data-type":this.name},this.options.HTMLAttributes,e),a]:a},renderText({node:t}){const e={options:this.options,node:t,suggestion:s4(this,t.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(e)):this.options.renderText(e)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let s=!1;const{selection:r}=e,{empty:a,anchor:i}=r;if(!a)return!1;let o=new La,c=0;return e.doc.nodesBetween(i-1,i,(d,h)=>{if(d.type.name===this.name)return s=!0,o=d,c=h,!1}),s&&t.insertText(this.options.deleteTriggerWithBackspace?"":o.attrs.mentionSuggestionChar,c,c+o.nodeSize),s})}},addProseMirrorPlugins(){return $O(this).map(Dse)}}),eg=zse,Dn="top",Sr="bottom",_r="right",Pn="left",Rj="auto",Dh=[Dn,Sr,_r,Pn],$c="start",gh="end",Lse="clippingParents",FO="viewport",cu="popper",$se="reference",n4=Dh.reduce(function(t,e){return t.concat([e+"-"+$c,e+"-"+gh])},[]),IO=[].concat(Dh,[Rj]).reduce(function(t,e){return t.concat([e,e+"-"+$c,e+"-"+gh])},[]),Fse="beforeRead",Ise="read",Bse="afterRead",Use="beforeMain",Vse="main",qse="afterMain",Hse="beforeWrite",Gse="write",Wse="afterWrite",Yse=[Fse,Ise,Bse,Use,Vse,qse,Hse,Gse,Wse];function ca(t){return t?(t.nodeName||"").toLowerCase():null}function tr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Zo(t){var e=tr(t).Element;return t instanceof e||t instanceof Element}function wr(t){var e=tr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Dj(t){if(typeof ShadowRoot>"u")return!1;var e=tr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Kse(t){var e=t.state;Object.keys(e.elements).forEach(function(s){var r=e.styles[s]||{},a=e.attributes[s]||{},i=e.elements[s];!wr(i)||!ca(i)||(Object.assign(i.style,r),Object.keys(a).forEach(function(o){var c=a[o];c===!1?i.removeAttribute(o):i.setAttribute(o,c===!0?"":c)}))})}function Jse(t){var e=t.state,s={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,s.popper),e.styles=s,e.elements.arrow&&Object.assign(e.elements.arrow.style,s.arrow),function(){Object.keys(e.elements).forEach(function(r){var a=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:s[r]),c=o.reduce(function(d,h){return d[h]="",d},{});!wr(a)||!ca(a)||(Object.assign(a.style,c),Object.keys(i).forEach(function(d){a.removeAttribute(d)}))})}}const BO={name:"applyStyles",enabled:!0,phase:"write",fn:Kse,effect:Jse,requires:["computeStyles"]};function ra(t){return t.split("-")[0]}var Uo=Math.max,l0=Math.min,Fc=Math.round;function xw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function UO(){return!/^((?!chrome|android).)*safari/i.test(xw())}function Ic(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);var r=t.getBoundingClientRect(),a=1,i=1;e&&wr(t)&&(a=t.offsetWidth>0&&Fc(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Fc(r.height)/t.offsetHeight||1);var o=Zo(t)?tr(t):window,c=o.visualViewport,d=!UO()&&s,h=(r.left+(d&&c?c.offsetLeft:0))/a,m=(r.top+(d&&c?c.offsetTop:0))/i,p=r.width/a,g=r.height/i;return{width:p,height:g,top:m,right:h+p,bottom:m+g,left:h,x:h,y:m}}function Pj(t){var e=Ic(t),s=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-s)<=1&&(s=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:s,height:r}}function VO(t,e){var s=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(s&&Dj(s)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function qa(t){return tr(t).getComputedStyle(t)}function Xse(t){return["table","td","th"].indexOf(ca(t))>=0}function Ji(t){return((Zo(t)?t.ownerDocument:t.document)||window.document).documentElement}function tg(t){return ca(t)==="html"?t:t.assignedSlot||t.parentNode||(Dj(t)?t.host:null)||Ji(t)}function r4(t){return!wr(t)||qa(t).position==="fixed"?null:t.offsetParent}function Qse(t){var e=/firefox/i.test(xw()),s=/Trident/i.test(xw());if(s&&wr(t)){var r=qa(t);if(r.position==="fixed")return null}var a=tg(t);for(Dj(a)&&(a=a.host);wr(a)&&["html","body"].indexOf(ca(a))<0;){var i=qa(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Ph(t){for(var e=tr(t),s=r4(t);s&&Xse(s)&&qa(s).position==="static";)s=r4(s);return s&&(ca(s)==="html"||ca(s)==="body"&&qa(s).position==="static")?e:s||Qse(t)||e}function zj(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Uu(t,e,s){return Uo(t,l0(e,s))}function Zse(t,e,s){var r=Uu(t,e,s);return r>s?s:r}function qO(){return{top:0,right:0,bottom:0,left:0}}function HO(t){return Object.assign({},qO(),t)}function GO(t,e){return e.reduce(function(s,r){return s[r]=t,s},{})}var ene=function(e,s){return e=typeof e=="function"?e(Object.assign({},s.rects,{placement:s.placement})):e,HO(typeof e!="number"?e:GO(e,Dh))};function tne(t){var e,s=t.state,r=t.name,a=t.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,c=ra(s.placement),d=zj(c),h=[Pn,_r].indexOf(c)>=0,m=h?"height":"width";if(!(!i||!o)){var p=ene(a.padding,s),g=Pj(i),b=d==="y"?Dn:Pn,v=d==="y"?Sr:_r,N=s.rects.reference[m]+s.rects.reference[d]-o[d]-s.rects.popper[m],j=o[d]-s.rects.reference[d],w=Ph(i),_=w?d==="y"?w.clientHeight||0:w.clientWidth||0:0,k=N/2-j/2,C=p[b],E=_-g[m]-p[v],A=_/2-g[m]/2+k,M=Uu(C,A,E),R=d;s.modifiersData[r]=(e={},e[R]=M,e.centerOffset=M-A,e)}}function sne(t){var e=t.state,s=t.options,r=s.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||VO(e.elements.popper,a)&&(e.elements.arrow=a))}const nne={name:"arrow",enabled:!0,phase:"main",fn:tne,effect:sne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bc(t){return t.split("-")[1]}var rne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ane(t,e){var s=t.x,r=t.y,a=e.devicePixelRatio||1;return{x:Fc(s*a)/a||0,y:Fc(r*a)/a||0}}function a4(t){var e,s=t.popper,r=t.popperRect,a=t.placement,i=t.variation,o=t.offsets,c=t.position,d=t.gpuAcceleration,h=t.adaptive,m=t.roundOffsets,p=t.isFixed,g=o.x,b=g===void 0?0:g,v=o.y,N=v===void 0?0:v,j=typeof m=="function"?m({x:b,y:N}):{x:b,y:N};b=j.x,N=j.y;var w=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),k=Pn,C=Dn,E=window;if(h){var A=Ph(s),M="clientHeight",R="clientWidth";if(A===tr(s)&&(A=Ji(s),qa(A).position!=="static"&&c==="absolute"&&(M="scrollHeight",R="scrollWidth")),A=A,a===Dn||(a===Pn||a===_r)&&i===gh){C=Sr;var D=p&&A===E&&E.visualViewport?E.visualViewport.height:A[M];N-=D-r.height,N*=d?1:-1}if(a===Pn||(a===Dn||a===Sr)&&i===gh){k=_r;var L=p&&A===E&&E.visualViewport?E.visualViewport.width:A[R];b-=L-r.width,b*=d?1:-1}}var B=Object.assign({position:c},h&&rne),O=m===!0?ane({x:b,y:N},tr(s)):{x:b,y:N};if(b=O.x,N=O.y,d){var P;return Object.assign({},B,(P={},P[C]=_?"0":"",P[k]=w?"0":"",P.transform=(E.devicePixelRatio||1)<=1?"translate("+b+"px, "+N+"px)":"translate3d("+b+"px, "+N+"px, 0)",P))}return Object.assign({},B,(e={},e[C]=_?N+"px":"",e[k]=w?b+"px":"",e.transform="",e))}function ine(t){var e=t.state,s=t.options,r=s.gpuAcceleration,a=r===void 0?!0:r,i=s.adaptive,o=i===void 0?!0:i,c=s.roundOffsets,d=c===void 0?!0:c,h={placement:ra(e.placement),variation:Bc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,a4(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,a4(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const one={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ine,data:{}};var Ef={passive:!0};function lne(t){var e=t.state,s=t.instance,r=t.options,a=r.scroll,i=a===void 0?!0:a,o=r.resize,c=o===void 0?!0:o,d=tr(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&h.forEach(function(m){m.addEventListener("scroll",s.update,Ef)}),c&&d.addEventListener("resize",s.update,Ef),function(){i&&h.forEach(function(m){m.removeEventListener("scroll",s.update,Ef)}),c&&d.removeEventListener("resize",s.update,Ef)}}const cne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lne,data:{}};var dne={left:"right",right:"left",bottom:"top",top:"bottom"};function Wf(t){return t.replace(/left|right|bottom|top/g,function(e){return dne[e]})}var une={start:"end",end:"start"};function i4(t){return t.replace(/start|end/g,function(e){return une[e]})}function Lj(t){var e=tr(t),s=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:s,scrollTop:r}}function $j(t){return Ic(Ji(t)).left+Lj(t).scrollLeft}function hne(t,e){var s=tr(t),r=Ji(t),a=s.visualViewport,i=r.clientWidth,o=r.clientHeight,c=0,d=0;if(a){i=a.width,o=a.height;var h=UO();(h||!h&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:i,height:o,x:c+$j(t),y:d}}function mne(t){var e,s=Ji(t),r=Lj(t),a=(e=t.ownerDocument)==null?void 0:e.body,i=Uo(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Uo(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-r.scrollLeft+$j(t),d=-r.scrollTop;return qa(a||s).direction==="rtl"&&(c+=Uo(s.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:c,y:d}}function Fj(t){var e=qa(t),s=e.overflow,r=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(s+a+r)}function WO(t){return["html","body","#document"].indexOf(ca(t))>=0?t.ownerDocument.body:wr(t)&&Fj(t)?t:WO(tg(t))}function Vu(t,e){var s;e===void 0&&(e=[]);var r=WO(t),a=r===((s=t.ownerDocument)==null?void 0:s.body),i=tr(r),o=a?[i].concat(i.visualViewport||[],Fj(r)?r:[]):r,c=e.concat(o);return a?c:c.concat(Vu(tg(o)))}function bw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function fne(t,e){var s=Ic(t,!1,e==="fixed");return s.top=s.top+t.clientTop,s.left=s.left+t.clientLeft,s.bottom=s.top+t.clientHeight,s.right=s.left+t.clientWidth,s.width=t.clientWidth,s.height=t.clientHeight,s.x=s.left,s.y=s.top,s}function o4(t,e,s){return e===FO?bw(hne(t,s)):Zo(e)?fne(e,s):bw(mne(Ji(t)))}function pne(t){var e=Vu(tg(t)),s=["absolute","fixed"].indexOf(qa(t).position)>=0,r=s&&wr(t)?Ph(t):t;return Zo(r)?e.filter(function(a){return Zo(a)&&VO(a,r)&&ca(a)!=="body"}):[]}function gne(t,e,s,r){var a=e==="clippingParents"?pne(t):[].concat(e),i=[].concat(a,[s]),o=i[0],c=i.reduce(function(d,h){var m=o4(t,h,r);return d.top=Uo(m.top,d.top),d.right=l0(m.right,d.right),d.bottom=l0(m.bottom,d.bottom),d.left=Uo(m.left,d.left),d},o4(t,o,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function YO(t){var e=t.reference,s=t.element,r=t.placement,a=r?ra(r):null,i=r?Bc(r):null,o=e.x+e.width/2-s.width/2,c=e.y+e.height/2-s.height/2,d;switch(a){case Dn:d={x:o,y:e.y-s.height};break;case Sr:d={x:o,y:e.y+e.height};break;case _r:d={x:e.x+e.width,y:c};break;case Pn:d={x:e.x-s.width,y:c};break;default:d={x:e.x,y:e.y}}var h=a?zj(a):null;if(h!=null){var m=h==="y"?"height":"width";switch(i){case $c:d[h]=d[h]-(e[m]/2-s[m]/2);break;case gh:d[h]=d[h]+(e[m]/2-s[m]/2);break}}return d}function xh(t,e){e===void 0&&(e={});var s=e,r=s.placement,a=r===void 0?t.placement:r,i=s.strategy,o=i===void 0?t.strategy:i,c=s.boundary,d=c===void 0?Lse:c,h=s.rootBoundary,m=h===void 0?FO:h,p=s.elementContext,g=p===void 0?cu:p,b=s.altBoundary,v=b===void 0?!1:b,N=s.padding,j=N===void 0?0:N,w=HO(typeof j!="number"?j:GO(j,Dh)),_=g===cu?$se:cu,k=t.rects.popper,C=t.elements[v?_:g],E=gne(Zo(C)?C:C.contextElement||Ji(t.elements.popper),d,m,o),A=Ic(t.elements.reference),M=YO({reference:A,element:k,placement:a}),R=bw(Object.assign({},k,M)),D=g===cu?R:A,L={top:E.top-D.top+w.top,bottom:D.bottom-E.bottom+w.bottom,left:E.left-D.left+w.left,right:D.right-E.right+w.right},B=t.modifiersData.offset;if(g===cu&&B){var O=B[a];Object.keys(L).forEach(function(P){var z=[_r,Sr].indexOf(P)>=0?1:-1,q=[Dn,Sr].indexOf(P)>=0?"y":"x";L[P]+=O[q]*z})}return L}function xne(t,e){e===void 0&&(e={});var s=e,r=s.placement,a=s.boundary,i=s.rootBoundary,o=s.padding,c=s.flipVariations,d=s.allowedAutoPlacements,h=d===void 0?IO:d,m=Bc(r),p=m?c?n4:n4.filter(function(v){return Bc(v)===m}):Dh,g=p.filter(function(v){return h.indexOf(v)>=0});g.length===0&&(g=p);var b=g.reduce(function(v,N){return v[N]=xh(t,{placement:N,boundary:a,rootBoundary:i,padding:o})[ra(N)],v},{});return Object.keys(b).sort(function(v,N){return b[v]-b[N]})}function bne(t){if(ra(t)===Rj)return[];var e=Wf(t);return[i4(t),e,i4(e)]}function vne(t){var e=t.state,s=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var a=s.mainAxis,i=a===void 0?!0:a,o=s.altAxis,c=o===void 0?!0:o,d=s.fallbackPlacements,h=s.padding,m=s.boundary,p=s.rootBoundary,g=s.altBoundary,b=s.flipVariations,v=b===void 0?!0:b,N=s.allowedAutoPlacements,j=e.options.placement,w=ra(j),_=w===j,k=d||(_||!v?[Wf(j)]:bne(j)),C=[j].concat(k).reduce(function(ee,ne){return ee.concat(ra(ne)===Rj?xne(e,{placement:ne,boundary:m,rootBoundary:p,padding:h,flipVariations:v,allowedAutoPlacements:N}):ne)},[]),E=e.rects.reference,A=e.rects.popper,M=new Map,R=!0,D=C[0],L=0;L<C.length;L++){var B=C[L],O=ra(B),P=Bc(B)===$c,z=[Dn,Sr].indexOf(O)>=0,q=z?"width":"height",I=xh(e,{placement:B,boundary:m,rootBoundary:p,altBoundary:g,padding:h}),V=z?P?_r:Pn:P?Sr:Dn;E[q]>A[q]&&(V=Wf(V));var H=Wf(V),Y=[];if(i&&Y.push(I[O]<=0),c&&Y.push(I[V]<=0,I[H]<=0),Y.every(function(ee){return ee})){D=B,R=!1;break}M.set(B,Y)}if(R)for(var U=v?3:1,K=function(ne){var X=C.find(function(Q){var de=M.get(Q);if(de)return de.slice(0,ne).every(function(ve){return ve})});if(X)return D=X,"break"},J=U;J>0;J--){var W=K(J);if(W==="break")break}e.placement!==D&&(e.modifiersData[r]._skip=!0,e.placement=D,e.reset=!0)}}const yne={name:"flip",enabled:!0,phase:"main",fn:vne,requiresIfExists:["offset"],data:{_skip:!1}};function l4(t,e,s){return s===void 0&&(s={x:0,y:0}),{top:t.top-e.height-s.y,right:t.right-e.width+s.x,bottom:t.bottom-e.height+s.y,left:t.left-e.width-s.x}}function c4(t){return[Dn,_r,Sr,Pn].some(function(e){return t[e]>=0})}function wne(t){var e=t.state,s=t.name,r=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=xh(e,{elementContext:"reference"}),c=xh(e,{altBoundary:!0}),d=l4(o,r),h=l4(c,a,i),m=c4(d),p=c4(h);e.modifiersData[s]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:m,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":p})}const jne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wne};function Nne(t,e,s){var r=ra(t),a=[Pn,Dn].indexOf(r)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},e,{placement:t})):s,o=i[0],c=i[1];return o=o||0,c=(c||0)*a,[Pn,_r].indexOf(r)>=0?{x:c,y:o}:{x:o,y:c}}function Sne(t){var e=t.state,s=t.options,r=t.name,a=s.offset,i=a===void 0?[0,0]:a,o=IO.reduce(function(m,p){return m[p]=Nne(p,e.rects,i),m},{}),c=o[e.placement],d=c.x,h=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=o}const _ne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Sne};function Cne(t){var e=t.state,s=t.name;e.modifiersData[s]=YO({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const kne={name:"popperOffsets",enabled:!0,phase:"read",fn:Cne,data:{}};function Ene(t){return t==="x"?"y":"x"}function Ane(t){var e=t.state,s=t.options,r=t.name,a=s.mainAxis,i=a===void 0?!0:a,o=s.altAxis,c=o===void 0?!1:o,d=s.boundary,h=s.rootBoundary,m=s.altBoundary,p=s.padding,g=s.tether,b=g===void 0?!0:g,v=s.tetherOffset,N=v===void 0?0:v,j=xh(e,{boundary:d,rootBoundary:h,padding:p,altBoundary:m}),w=ra(e.placement),_=Bc(e.placement),k=!_,C=zj(w),E=Ene(C),A=e.modifiersData.popperOffsets,M=e.rects.reference,R=e.rects.popper,D=typeof N=="function"?N(Object.assign({},e.rects,{placement:e.placement})):N,L=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(A){if(i){var P,z=C==="y"?Dn:Pn,q=C==="y"?Sr:_r,I=C==="y"?"height":"width",V=A[C],H=V+j[z],Y=V-j[q],U=b?-R[I]/2:0,K=_===$c?M[I]:R[I],J=_===$c?-R[I]:-M[I],W=e.elements.arrow,ee=b&&W?Pj(W):{width:0,height:0},ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:qO(),X=ne[z],Q=ne[q],de=Uu(0,M[I],ee[I]),ve=k?M[I]/2-U-de-X-L.mainAxis:K-de-X-L.mainAxis,Pe=k?-M[I]/2+U+de+Q+L.mainAxis:J+de+Q+L.mainAxis,He=e.elements.arrow&&Ph(e.elements.arrow),Qe=He?C==="y"?He.clientTop||0:He.clientLeft||0:0,be=(P=B==null?void 0:B[C])!=null?P:0,se=V+ve-be-Qe,le=V+Pe-be,ge=Uu(b?l0(H,se):H,V,b?Uo(Y,le):Y);A[C]=ge,O[C]=ge-V}if(c){var te,xe=C==="x"?Dn:Pn,De=C==="x"?Sr:_r,Ee=A[E],ce=E==="y"?"height":"width",ye=Ee+j[xe],Oe=Ee-j[De],Me=[Dn,Pn].indexOf(w)!==-1,it=(te=B==null?void 0:B[E])!=null?te:0,ft=Me?ye:Ee-M[ce]-R[ce]-it+L.altAxis,Te=Me?Ee+M[ce]+R[ce]-it-L.altAxis:Oe,ze=b&&Me?Zse(ft,Ee,Te):Uu(b?ft:ye,Ee,b?Te:Oe);A[E]=ze,O[E]=ze-Ee}e.modifiersData[r]=O}}const Tne={name:"preventOverflow",enabled:!0,phase:"main",fn:Ane,requiresIfExists:["offset"]};function Mne(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function One(t){return t===tr(t)||!wr(t)?Lj(t):Mne(t)}function Rne(t){var e=t.getBoundingClientRect(),s=Fc(e.width)/t.offsetWidth||1,r=Fc(e.height)/t.offsetHeight||1;return s!==1||r!==1}function Dne(t,e,s){s===void 0&&(s=!1);var r=wr(e),a=wr(e)&&Rne(e),i=Ji(e),o=Ic(t,a,s),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!s)&&((ca(e)!=="body"||Fj(i))&&(c=One(e)),wr(e)?(d=Ic(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):i&&(d.x=$j(i))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function Pne(t){var e=new Map,s=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function a(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(c){if(!s.has(c)){var d=e.get(c);d&&a(d)}}),r.push(i)}return t.forEach(function(i){s.has(i.name)||a(i)}),r}function zne(t){var e=Pne(t);return Yse.reduce(function(s,r){return s.concat(e.filter(function(a){return a.phase===r}))},[])}function Lne(t){var e;return function(){return e||(e=new Promise(function(s){Promise.resolve().then(function(){e=void 0,s(t())})})),e}}function $ne(t){var e=t.reduce(function(s,r){var a=s[r.name];return s[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,s},{});return Object.keys(e).map(function(s){return e[s]})}var d4={placement:"bottom",modifiers:[],strategy:"absolute"};function u4(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Fne(t){t===void 0&&(t={});var e=t,s=e.defaultModifiers,r=s===void 0?[]:s,a=e.defaultOptions,i=a===void 0?d4:a;return function(c,d,h){h===void 0&&(h=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},d4,i),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},p=[],g=!1,b={state:m,setOptions:function(w){var _=typeof w=="function"?w(m.options):w;N(),m.options=Object.assign({},i,m.options,_),m.scrollParents={reference:Zo(c)?Vu(c):c.contextElement?Vu(c.contextElement):[],popper:Vu(d)};var k=zne($ne([].concat(r,m.options.modifiers)));return m.orderedModifiers=k.filter(function(C){return C.enabled}),v(),b.update()},forceUpdate:function(){if(!g){var w=m.elements,_=w.reference,k=w.popper;if(u4(_,k)){m.rects={reference:Dne(_,Ph(k),m.options.strategy==="fixed"),popper:Pj(k)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(L){return m.modifiersData[L.name]=Object.assign({},L.data)});for(var C=0;C<m.orderedModifiers.length;C++){if(m.reset===!0){m.reset=!1,C=-1;continue}var E=m.orderedModifiers[C],A=E.fn,M=E.options,R=M===void 0?{}:M,D=E.name;typeof A=="function"&&(m=A({state:m,options:R,name:D,instance:b})||m)}}}},update:Lne(function(){return new Promise(function(j){b.forceUpdate(),j(m)})}),destroy:function(){N(),g=!0}};if(!u4(c,d))return b;b.setOptions(h).then(function(j){!g&&h.onFirstUpdate&&h.onFirstUpdate(j)});function v(){m.orderedModifiers.forEach(function(j){var w=j.name,_=j.options,k=_===void 0?{}:_,C=j.effect;if(typeof C=="function"){var E=C({state:m,name:w,instance:b,options:k}),A=function(){};p.push(E||A)}})}function N(){p.forEach(function(j){return j()}),p=[]}return b}}var Ine=[cne,kne,one,BO,_ne,yne,Tne,nne,jne],Bne=Fne({defaultModifiers:Ine}),Une="tippy-box",KO="tippy-content",Vne="tippy-backdrop",JO="tippy-arrow",XO="tippy-svg-arrow",So={passive:!0,capture:!0},QO=function(){return document.body};function Lv(t,e,s){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(s)?s[e]:s)}return t}function Ij(t,e){var s={}.toString.call(t);return s.indexOf("[object")===0&&s.indexOf(e+"]")>-1}function ZO(t,e){return typeof t=="function"?t.apply(void 0,e):t}function h4(t,e){if(e===0)return t;var s;return function(r){clearTimeout(s),s=setTimeout(function(){t(r)},e)}}function qne(t){return t.split(/\s+/).filter(Boolean)}function mc(t){return[].concat(t)}function m4(t,e){t.indexOf(e)===-1&&t.push(e)}function Hne(t){return t.filter(function(e,s){return t.indexOf(e)===s})}function Gne(t){return t.split("-")[0]}function c0(t){return[].slice.call(t)}function f4(t){return Object.keys(t).reduce(function(e,s){return t[s]!==void 0&&(e[s]=t[s]),e},{})}function qu(){return document.createElement("div")}function sg(t){return["Element","Fragment"].some(function(e){return Ij(t,e)})}function Wne(t){return Ij(t,"NodeList")}function Yne(t){return Ij(t,"MouseEvent")}function Kne(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Jne(t){return sg(t)?[t]:Wne(t)?c0(t):Array.isArray(t)?t:c0(document.querySelectorAll(t))}function $v(t,e){t.forEach(function(s){s&&(s.style.transitionDuration=e+"ms")})}function p4(t,e){t.forEach(function(s){s&&s.setAttribute("data-state",e)})}function Xne(t){var e,s=mc(t),r=s[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Qne(t,e){var s=e.clientX,r=e.clientY;return t.every(function(a){var i=a.popperRect,o=a.popperState,c=a.props,d=c.interactiveBorder,h=Gne(o.placement),m=o.modifiersData.offset;if(!m)return!0;var p=h==="bottom"?m.top.y:0,g=h==="top"?m.bottom.y:0,b=h==="right"?m.left.x:0,v=h==="left"?m.right.x:0,N=i.top-r+p>d,j=r-i.bottom-g>d,w=i.left-s+b>d,_=s-i.right-v>d;return N||j||w||_})}function Fv(t,e,s){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(a){t[r](a,s)})}function g4(t,e){for(var s=e;s;){var r;if(t.contains(s))return!0;s=s.getRootNode==null||(r=s.getRootNode())==null?void 0:r.host}return!1}var Zr={isTouch:!1},x4=0;function Zne(){Zr.isTouch||(Zr.isTouch=!0,window.performance&&document.addEventListener("mousemove",eR))}function eR(){var t=performance.now();t-x4<20&&(Zr.isTouch=!1,document.removeEventListener("mousemove",eR)),x4=t}function ere(){var t=document.activeElement;if(Kne(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function tre(){document.addEventListener("touchstart",Zne,So),window.addEventListener("blur",ere)}var sre=typeof window<"u"&&typeof document<"u",nre=sre?!!window.msCrypto:!1,rre={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},are={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Lr=Object.assign({appendTo:QO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},rre,are),ire=Object.keys(Lr),ore=function(e){var s=Object.keys(e);s.forEach(function(r){Lr[r]=e[r]})};function tR(t){var e=t.plugins||[],s=e.reduce(function(r,a){var i=a.name,o=a.defaultValue;if(i){var c;r[i]=t[i]!==void 0?t[i]:(c=Lr[i])!=null?c:o}return r},{});return Object.assign({},t,s)}function lre(t,e){var s=e?Object.keys(tR(Object.assign({},Lr,{plugins:e}))):ire,r=s.reduce(function(a,i){var o=(t.getAttribute("data-tippy-"+i)||"").trim();if(!o)return a;if(i==="content")a[i]=o;else try{a[i]=JSON.parse(o)}catch{a[i]=o}return a},{});return r}function b4(t,e){var s=Object.assign({},e,{content:ZO(e.content,[t])},e.ignoreAttributes?{}:lre(t,e.plugins));return s.aria=Object.assign({},Lr.aria,s.aria),s.aria={expanded:s.aria.expanded==="auto"?e.interactive:s.aria.expanded,content:s.aria.content==="auto"?e.interactive?null:"describedby":s.aria.content},s}var cre=function(){return"innerHTML"};function vw(t,e){t[cre()]=e}function v4(t){var e=qu();return t===!0?e.className=JO:(e.className=XO,sg(t)?e.appendChild(t):vw(e,t)),e}function y4(t,e){sg(e.content)?(vw(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?vw(t,e.content):t.textContent=e.content)}function yw(t){var e=t.firstElementChild,s=c0(e.children);return{box:e,content:s.find(function(r){return r.classList.contains(KO)}),arrow:s.find(function(r){return r.classList.contains(JO)||r.classList.contains(XO)}),backdrop:s.find(function(r){return r.classList.contains(Vne)})}}function sR(t){var e=qu(),s=qu();s.className=Une,s.setAttribute("data-state","hidden"),s.setAttribute("tabindex","-1");var r=qu();r.className=KO,r.setAttribute("data-state","hidden"),y4(r,t.props),e.appendChild(s),s.appendChild(r),a(t.props,t.props);function a(i,o){var c=yw(e),d=c.box,h=c.content,m=c.arrow;o.theme?d.setAttribute("data-theme",o.theme):d.removeAttribute("data-theme"),typeof o.animation=="string"?d.setAttribute("data-animation",o.animation):d.removeAttribute("data-animation"),o.inertia?d.setAttribute("data-inertia",""):d.removeAttribute("data-inertia"),d.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?d.setAttribute("role",o.role):d.removeAttribute("role"),(i.content!==o.content||i.allowHTML!==o.allowHTML)&&y4(h,t.props),o.arrow?m?i.arrow!==o.arrow&&(d.removeChild(m),d.appendChild(v4(o.arrow))):d.appendChild(v4(o.arrow)):m&&d.removeChild(m)}return{popper:e,onUpdate:a}}sR.$$tippy=!0;var dre=1,Af=[],Iv=[];function ure(t,e){var s=b4(t,Object.assign({},Lr,tR(f4(e)))),r,a,i,o=!1,c=!1,d=!1,h=!1,m,p,g,b=[],v=h4(se,s.interactiveDebounce),N,j=dre++,w=null,_=Hne(s.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},C={id:j,reference:t,popper:qu(),popperInstance:w,props:s,state:k,plugins:_,clearDelayTimeouts:ft,setProps:Te,setContent:ze,show:ae,hide:_e,hideWithInteractivity:Fe,enable:Me,disable:it,unmount:$e,destroy:Ce};if(!s.render)return C;var E=s.render(C),A=E.popper,M=E.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+C.id,C.popper=A,t._tippy=C,A._tippy=C;var R=_.map(function(me){return me.fn(C)}),D=t.hasAttribute("aria-expanded");return He(),U(),V(),H("onCreate",[C]),s.showOnCreate&&ye(),A.addEventListener("mouseenter",function(){C.props.interactive&&C.state.isVisible&&C.clearDelayTimeouts()}),A.addEventListener("mouseleave",function(){C.props.interactive&&C.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",v)}),C;function L(){var me=C.props.touch;return Array.isArray(me)?me:[me,0]}function B(){return L()[0]==="hold"}function O(){var me;return!!((me=C.props.render)!=null&&me.$$tippy)}function P(){return N||t}function z(){var me=P().parentNode;return me?Xne(me):document}function q(){return yw(A)}function I(me){return C.state.isMounted&&!C.state.isVisible||Zr.isTouch||m&&m.type==="focus"?0:Lv(C.props.delay,me?0:1,Lr.delay)}function V(me){me===void 0&&(me=!1),A.style.pointerEvents=C.props.interactive&&!me?"":"none",A.style.zIndex=""+C.props.zIndex}function H(me,Re,Be){if(Be===void 0&&(Be=!0),R.forEach(function(gt){gt[me]&&gt[me].apply(gt,Re)}),Be){var pt;(pt=C.props)[me].apply(pt,Re)}}function Y(){var me=C.props.aria;if(me.content){var Re="aria-"+me.content,Be=A.id,pt=mc(C.props.triggerTarget||t);pt.forEach(function(gt){var ls=gt.getAttribute(Re);if(C.state.isVisible)gt.setAttribute(Re,ls?ls+" "+Be:Be);else{var ks=ls&&ls.replace(Be,"").trim();ks?gt.setAttribute(Re,ks):gt.removeAttribute(Re)}})}}function U(){if(!(D||!C.props.aria.expanded)){var me=mc(C.props.triggerTarget||t);me.forEach(function(Re){C.props.interactive?Re.setAttribute("aria-expanded",C.state.isVisible&&Re===P()?"true":"false"):Re.removeAttribute("aria-expanded")})}}function K(){z().removeEventListener("mousemove",v),Af=Af.filter(function(me){return me!==v})}function J(me){if(!(Zr.isTouch&&(d||me.type==="mousedown"))){var Re=me.composedPath&&me.composedPath()[0]||me.target;if(!(C.props.interactive&&g4(A,Re))){if(mc(C.props.triggerTarget||t).some(function(Be){return g4(Be,Re)})){if(Zr.isTouch||C.state.isVisible&&C.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[C,me]);C.props.hideOnClick===!0&&(C.clearDelayTimeouts(),C.hide(),c=!0,setTimeout(function(){c=!1}),C.state.isMounted||X())}}}function W(){d=!0}function ee(){d=!1}function ne(){var me=z();me.addEventListener("mousedown",J,!0),me.addEventListener("touchend",J,So),me.addEventListener("touchstart",ee,So),me.addEventListener("touchmove",W,So)}function X(){var me=z();me.removeEventListener("mousedown",J,!0),me.removeEventListener("touchend",J,So),me.removeEventListener("touchstart",ee,So),me.removeEventListener("touchmove",W,So)}function Q(me,Re){ve(me,function(){!C.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&Re()})}function de(me,Re){ve(me,Re)}function ve(me,Re){var Be=q().box;function pt(gt){gt.target===Be&&(Fv(Be,"remove",pt),Re())}if(me===0)return Re();Fv(Be,"remove",p),Fv(Be,"add",pt),p=pt}function Pe(me,Re,Be){Be===void 0&&(Be=!1);var pt=mc(C.props.triggerTarget||t);pt.forEach(function(gt){gt.addEventListener(me,Re,Be),b.push({node:gt,eventType:me,handler:Re,options:Be})})}function He(){B()&&(Pe("touchstart",be,{passive:!0}),Pe("touchend",le,{passive:!0})),qne(C.props.trigger).forEach(function(me){if(me!=="manual")switch(Pe(me,be),me){case"mouseenter":Pe("mouseleave",le);break;case"focus":Pe(nre?"focusout":"blur",ge);break;case"focusin":Pe("focusout",ge);break}})}function Qe(){b.forEach(function(me){var Re=me.node,Be=me.eventType,pt=me.handler,gt=me.options;Re.removeEventListener(Be,pt,gt)}),b=[]}function be(me){var Re,Be=!1;if(!(!C.state.isEnabled||te(me)||c)){var pt=((Re=m)==null?void 0:Re.type)==="focus";m=me,N=me.currentTarget,U(),!C.state.isVisible&&Yne(me)&&Af.forEach(function(gt){return gt(me)}),me.type==="click"&&(C.props.trigger.indexOf("mouseenter")<0||o)&&C.props.hideOnClick!==!1&&C.state.isVisible?Be=!0:ye(me),me.type==="click"&&(o=!Be),Be&&!pt&&Oe(me)}}function se(me){var Re=me.target,Be=P().contains(Re)||A.contains(Re);if(!(me.type==="mousemove"&&Be)){var pt=ce().concat(A).map(function(gt){var ls,ks=gt._tippy,Fs=(ls=ks.popperInstance)==null?void 0:ls.state;return Fs?{popperRect:gt.getBoundingClientRect(),popperState:Fs,props:s}:null}).filter(Boolean);Qne(pt,me)&&(K(),Oe(me))}}function le(me){var Re=te(me)||C.props.trigger.indexOf("click")>=0&&o;if(!Re){if(C.props.interactive){C.hideWithInteractivity(me);return}Oe(me)}}function ge(me){C.props.trigger.indexOf("focusin")<0&&me.target!==P()||C.props.interactive&&me.relatedTarget&&A.contains(me.relatedTarget)||Oe(me)}function te(me){return Zr.isTouch?B()!==me.type.indexOf("touch")>=0:!1}function xe(){De();var me=C.props,Re=me.popperOptions,Be=me.placement,pt=me.offset,gt=me.getReferenceClientRect,ls=me.moveTransition,ks=O()?yw(A).arrow:null,Fs=gt?{getBoundingClientRect:gt,contextElement:gt.contextElement||P()}:t,sr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Qi){var Ur=Qi.state;if(O()){var sd=q(),il=sd.box;["placement","reference-hidden","escaped"].forEach(function(ol){ol==="placement"?il.setAttribute("data-placement",Ur.placement):Ur.attributes.popper["data-popper-"+ol]?il.setAttribute("data-"+ol,""):il.removeAttribute("data-"+ol)}),Ur.attributes.popper={}}}},Fn=[{name:"offset",options:{offset:pt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ls}},sr];O()&&ks&&Fn.push({name:"arrow",options:{element:ks,padding:3}}),Fn.push.apply(Fn,(Re==null?void 0:Re.modifiers)||[]),C.popperInstance=Bne(Fs,A,Object.assign({},Re,{placement:Be,onFirstUpdate:g,modifiers:Fn}))}function De(){C.popperInstance&&(C.popperInstance.destroy(),C.popperInstance=null)}function Ee(){var me=C.props.appendTo,Re,Be=P();C.props.interactive&&me===QO||me==="parent"?Re=Be.parentNode:Re=ZO(me,[Be]),Re.contains(A)||Re.appendChild(A),C.state.isMounted=!0,xe()}function ce(){return c0(A.querySelectorAll("[data-tippy-root]"))}function ye(me){C.clearDelayTimeouts(),me&&H("onTrigger",[C,me]),ne();var Re=I(!0),Be=L(),pt=Be[0],gt=Be[1];Zr.isTouch&&pt==="hold"&&gt&&(Re=gt),Re?r=setTimeout(function(){C.show()},Re):C.show()}function Oe(me){if(C.clearDelayTimeouts(),H("onUntrigger",[C,me]),!C.state.isVisible){X();return}if(!(C.props.trigger.indexOf("mouseenter")>=0&&C.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(me.type)>=0&&o)){var Re=I(!1);Re?a=setTimeout(function(){C.state.isVisible&&C.hide()},Re):i=requestAnimationFrame(function(){C.hide()})}}function Me(){C.state.isEnabled=!0}function it(){C.hide(),C.state.isEnabled=!1}function ft(){clearTimeout(r),clearTimeout(a),cancelAnimationFrame(i)}function Te(me){if(!C.state.isDestroyed){H("onBeforeUpdate",[C,me]),Qe();var Re=C.props,Be=b4(t,Object.assign({},Re,f4(me),{ignoreAttributes:!0}));C.props=Be,He(),Re.interactiveDebounce!==Be.interactiveDebounce&&(K(),v=h4(se,Be.interactiveDebounce)),Re.triggerTarget&&!Be.triggerTarget?mc(Re.triggerTarget).forEach(function(pt){pt.removeAttribute("aria-expanded")}):Be.triggerTarget&&t.removeAttribute("aria-expanded"),U(),V(),M&&M(Re,Be),C.popperInstance&&(xe(),ce().forEach(function(pt){requestAnimationFrame(pt._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[C,me])}}function ze(me){C.setProps({content:me})}function ae(){var me=C.state.isVisible,Re=C.state.isDestroyed,Be=!C.state.isEnabled,pt=Zr.isTouch&&!C.props.touch,gt=Lv(C.props.duration,0,Lr.duration);if(!(me||Re||Be||pt)&&!P().hasAttribute("disabled")&&(H("onShow",[C],!1),C.props.onShow(C)!==!1)){if(C.state.isVisible=!0,O()&&(A.style.visibility="visible"),V(),ne(),C.state.isMounted||(A.style.transition="none"),O()){var ls=q(),ks=ls.box,Fs=ls.content;$v([ks,Fs],0)}g=function(){var Fn;if(!(!C.state.isVisible||h)){if(h=!0,A.offsetHeight,A.style.transition=C.props.moveTransition,O()&&C.props.animation){var al=q(),Qi=al.box,Ur=al.content;$v([Qi,Ur],gt),p4([Qi,Ur],"visible")}Y(),U(),m4(Iv,C),(Fn=C.popperInstance)==null||Fn.forceUpdate(),H("onMount",[C]),C.props.animation&&O()&&de(gt,function(){C.state.isShown=!0,H("onShown",[C])})}},Ee()}}function _e(){var me=!C.state.isVisible,Re=C.state.isDestroyed,Be=!C.state.isEnabled,pt=Lv(C.props.duration,1,Lr.duration);if(!(me||Re||Be)&&(H("onHide",[C],!1),C.props.onHide(C)!==!1)){if(C.state.isVisible=!1,C.state.isShown=!1,h=!1,o=!1,O()&&(A.style.visibility="hidden"),K(),X(),V(!0),O()){var gt=q(),ls=gt.box,ks=gt.content;C.props.animation&&($v([ls,ks],pt),p4([ls,ks],"hidden"))}Y(),U(),C.props.animation?O()&&Q(pt,C.unmount):C.unmount()}}function Fe(me){z().addEventListener("mousemove",v),m4(Af,v),v(me)}function $e(){C.state.isVisible&&C.hide(),C.state.isMounted&&(De(),ce().forEach(function(me){me._tippy.unmount()}),A.parentNode&&A.parentNode.removeChild(A),Iv=Iv.filter(function(me){return me!==C}),C.state.isMounted=!1,H("onHidden",[C]))}function Ce(){C.state.isDestroyed||(C.clearDelayTimeouts(),C.unmount(),Qe(),delete t._tippy,C.state.isDestroyed=!0,H("onDestroy",[C]))}}function Xi(t,e){e===void 0&&(e={});var s=Lr.plugins.concat(e.plugins||[]);tre();var r=Object.assign({},e,{plugins:s}),a=Jne(t),i=a.reduce(function(o,c){var d=c&&ure(c,r);return d&&o.push(d),o},[]);return sg(t)?i[0]:i}Xi.defaultProps=Lr;Xi.setDefaultProps=ore;Xi.currentInput=Zr;Object.assign({},BO,{effect:function(e){var s=e.state,r={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(s.elements.popper.style,r.popper),s.styles=r,s.elements.arrow&&Object.assign(s.elements.arrow.style,r.arrow)}});Xi.setDefaultProps({render:sR});const ng=y.forwardRef((t,e)=>{const[s,r]=y.useState(0),a=c=>{const d=t.items[c];d&&(console.log("🎯 MentionList: Selecting item:",d),t.command({id:d.id,label:d.name,type:d.type}))},i=({event:c})=>c.key==="ArrowUp"?(r(d=>(d+t.items.length-1)%t.items.length),!0):c.key==="ArrowDown"?(r(d=>(d+1)%t.items.length),!0):c.key==="Enter"?(c.preventDefault(),a(s),!0):!1;if(y.useImperativeHandle(e,()=>({onKeyDown:i})),y.useEffect(()=>r(0),[t.items]),!t.items||!t.items.length)return n.jsx("div",{className:"mention-dropdown-empty",style:{padding:"16px",textAlign:"center",color:"#65676b"},children:"No results"});const o=c=>c.type==="user"?c.title&&c.organization_name?`${c.title} at ${c.organization_name}`:c.title?c.title:c.organization_name?c.organization_name:"User":(h=>({nonprofit:"Nonprofit",funder:"Funder",foundation:"Foundation",education:"Education",healthcare:"Healthcare",government:"Government",religious:"Religious",forprofit:"For-Profit"})[h]||"Organization")(c.role);return n.jsxs("div",{className:"mention-dropdown",style:{minWidth:"300px",maxWidth:"400px",maxHeight:"300px",overflowY:"auto",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",fontSize:"14px"},children:[n.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e1e5e9",fontSize:"12px",color:"#65676b",backgroundColor:"#f8f9fa"},children:["💬 ",t.items.length," result",t.items.length!==1?"s":"",' for "',t.query,'"']}),t.items.map((c,d)=>n.jsxs("div",{onClick:()=>a(d),onMouseEnter:()=>r(d),className:`mention-item ${d===s?"is-selected":""}`,style:{padding:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px",backgroundColor:d===s?"#e3f2fd":"transparent",borderBottom:d<t.items.length-1?"1px solid #f0f2f5":"none"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#e4e6ea",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0,overflow:"hidden"},children:c.avatar_url?n.jsx(is,{src:c.avatar_url,fullName:c.name,size:"md"}):n.jsx("span",{children:c.type==="user"?"👤":"🏢"})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontWeight:"600",color:"#1c1e21",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.name}),n.jsx("div",{style:{fontSize:"12px",color:"#65676b",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o(c)})]}),n.jsx("div",{style:{fontSize:"20px",opacity:.6},children:c.type==="user"?"👤":"🏢"})]},`${c.type}-${c.id}`)),n.jsx("div",{style:{padding:"8px 12px",borderTop:"1px solid #e1e5e9",fontSize:"11px",color:"#8a8d91",backgroundColor:"#f8f9fa",textAlign:"center"},children:"↑↓ to navigate • Enter to select • Esc to close"})]})});function nR({post:t,onSave:e,onCancel:s}){const[r,a]=y.useState([]),[i,o]=y.useState([]),[c,d]=y.useState(!1),[h,m]=y.useState(""),[p,g]=y.useState([]),[b,v]=y.useState(!1),N=y.useRef(null),j=y.useRef(!0),w=J0({extensions:[Z0,eg.extend({name:"mention",addAttributes(){var O;return{...(O=this.parent)==null?void 0:O.call(this),type:{default:null,parseHTML:P=>P.getAttribute("data-type"),renderHTML:P=>P.type?{"data-type":P.type}:{}}}},renderHTML({node:O,HTMLAttributes:P}){const{id:z,label:q,type:I}=O.attrs;return["span",{...P,class:"mention","data-id":z,"data-label":q,"data-type":I},`@${q}`]},parseHTML(){return[{tag:"span[data-type][data-id]",getAttrs:O=>({id:O.getAttribute("data-id"),label:O.getAttribute("data-label"),type:O.getAttribute("data-type")})}]}}).configure({suggestion:{items:async({query:O})=>{try{if(!O||O.length<2)return[];const P=`%${O.trim()}%`,{data:z,error:q}=await $.from("profiles").select("id, full_name, title, organization_name, avatar_url, role").or(`full_name.ilike.${P},title.ilike.${P},organization_name.ilike.${P}`).limit(5);q&&console.error("Error searching profiles:",q);const{data:I,error:V}=await $.from("organizations").select("id, name, type, tagline, image_url").ilike("name",P).limit(5);V&&console.error("Error searching organizations:",V);const H=(z||[]).map(U=>({id:U.id,name:U.full_name,type:"user",avatar_url:U.avatar_url,title:U.title,organization_name:U.organization_name,role:U.role})),Y=(I||[]).map(U=>({id:`${U.type}-${U.id}`,name:U.name,type:"organization",avatar_url:U.image_url,title:U.tagline,organization_name:U.type==="nonprofit"?"Nonprofit":"Funder",role:U.type}));return[...H,...Y]}catch(P){return console.error("Exception during mention search:",P),[]}},render:()=>{let O,P;return{onStart:z=>{O=new X0(ng,{props:z,editor:z.editor}),P=Xi("body",{getReferenceClientRect:z.clientRect,appendTo:()=>document.body,content:O.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",duration:0})},onUpdate:z=>{O.updateProps(z),P[0].setProps({getReferenceClientRect:z.clientRect})},onKeyDown:z=>{var q;return z.event.key==="Escape"?(P[0].hide(),!0):(q=O.ref)==null?void 0:q.onKeyDown(z)},onExit:()=>{P&&P[0]&&P[0].destroy(),O&&O.destroy(),P=null,O=null}}}}})],content:t.content||"",editorProps:{attributes:{class:"prose-sm outline-none border border-slate-200 rounded-lg p-3 min-h-[7.5rem] focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-700",style:"resize: vertical; white-space: pre-wrap;"}}});y.useEffect(()=>{j.current=!0;const O=t.image_urls&&t.image_urls.length>0?t.image_urls:[];o(O);const P=t.tags?typeof t.tags=="string"?JSON.parse(t.tags):t.tags:[];return a(P),()=>{j.current=!1}},[t]);const _=[{id:"funding",label:"Funding",color:"bg-blue-100 text-blue-800 border-blue-200"},{id:"collaboration",label:"Collaboration",color:"bg-green-100 text-green-800 border-green-200"},{id:"volunteer",label:"Volunteer",color:"bg-purple-100 text-purple-800 border-purple-200"},{id:"event",label:"Event",color:"bg-yellow-100 text-yellow-800 border-yellow-200"},{id:"announcement",label:"Announcement",color:"bg-red-100 text-red-800 border-red-200"},{id:"grant",label:"Grant",color:"bg-indigo-100 text-indigo-800 border-indigo-200"},{id:"partnership",label:"Partnership",color:"bg-pink-100 text-pink-800 border-pink-200"},{id:"success-story",label:"Success Story",color:"bg-emerald-100 text-emerald-800 border-emerald-200"}],k=()=>{const O=["bg-slate-100 text-slate-800 border-slate-200","bg-gray-100 text-gray-800 border-gray-200","bg-zinc-100 text-zinc-800 border-zinc-200","bg-stone-100 text-stone-800 border-stone-200","bg-orange-100 text-orange-800 border-orange-200","bg-amber-100 text-amber-800 border-amber-200","bg-lime-100 text-lime-800 border-lime-200","bg-cyan-100 text-cyan-800 border-cyan-200","bg-sky-100 text-sky-800 border-sky-200","bg-violet-100 text-violet-800 border-violet-200","bg-fuchsia-100 text-fuchsia-800 border-fuchsia-200","bg-rose-100 text-rose-800 border-rose-200"];return O[Math.floor(Math.random()*O.length)]},C=O=>{r.find(P=>P.id===O.id)||a(P=>[...P,O]),d(!1)},E=()=>{if(h.trim()&&!r.find(O=>O.label.toLowerCase()===h.trim().toLowerCase())){const O={id:`custom-${Date.now()}`,label:h.trim(),color:k(),isCustom:!0};a(P=>[...P,O]),m("")}},A=O=>a(P=>P.filter(z=>z.id!==O)),M=O=>o(P=>P.filter(z=>z!==O)),R=O=>g(P=>{const z=P.filter(I=>I.id!==O),q=P.find(I=>I.id===O);return q&&URL.revokeObjectURL(q.preview),z}),D=O=>{const P=Array.from(O.target.files),z=6;if(i.length+p.length+P.length>z){alert(`You can only have up to ${z} images per post.`);return}const q=P.filter(I=>I.type.startsWith("image/")&&I.size<=10*1024*1024);if(q.length<P.length&&alert("Some images were invalid (must be under 10MB)."),q.length>0){const I=q.map(V=>({file:V,preview:URL.createObjectURL(V),id:Math.random().toString(36).substr(2,9)}));g(V=>[...V,...I])}},L=async()=>{if(p.length===0)return[];const O=p.map(async P=>{const z=P.file.name.split(".").pop(),q=`${Math.random().toString(36).substring(2)}.${z}`,{data:I,error:V}=await $.storage.from("post-images").upload(q,P.file);if(V)throw V;const{data:H}=$.storage.from("post-images").getPublicUrl(q);return H.publicUrl});return Promise.all(O)},B=async()=>{if(w){v(!0);try{let O=[...i];if(p.length>0){const V=await L();O=[...O,...V]}const P=w.getHTML(),z=[],q=w.getJSON();q!=null&&q.content&&q.content.forEach(V=>{V.content&&V.content.forEach(H=>{if(H.type==="mention"&&H.attrs){const{id:Y,label:U,type:K}=H.attrs;Y&&U&&K&&z.push({displayName:U,id:Y,type:K})}})});const I={content:P.trim(),image_urls:O.length>0?O:null,tags:r.length>0?JSON.stringify(r):null,mentions:z.length>0?JSON.stringify(z):null,updated_at:new Date().toISOString()};e(I)}catch(O){console.error("Error saving post:",O),alert("Failed to save post. Please try again.")}finally{v(!1)}}};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border border-slate-200 rounded-lg p-4",children:n.jsx(K0,{editor:w})}),(i.length>0||p.length>0)&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[i.map((O,P)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:O,alt:`Existing ${P+1}`,className:"w-full h-32 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>M(O),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:n.jsx(Ke,{size:14})})]},`existing-${P}`)),p.map(O=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:O.preview,alt:"New preview",className:"w-full h-32 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>R(O.id),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:n.jsx(Ke,{size:14})})]},`new-${O.id}`))]}),r.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(O=>n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${O.color}`,children:[O.label,n.jsx("button",{onClick:()=>A(O.id),className:"ml-2 hover:text-red-600 transition-colors",children:n.jsx(Ke,{size:14})})]},O.id))}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:()=>{var O;return(O=N.current)==null?void 0:O.click()},className:"flex items-center space-x-2 px-3 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-50 rounded-lg transition-colors",disabled:b,children:[n.jsx(hn,{size:18}),n.jsx("span",{className:"text-sm",children:"Add Photos"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>d(!c),className:"flex items-center space-x-2 px-3 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-50 rounded-lg transition-colors",disabled:b,children:[n.jsx("span",{className:"text-sm",children:"#"}),n.jsx("span",{className:"text-sm",children:"Tags"})]}),c&&n.jsxs("div",{className:"absolute bottom-full left-0 mb-2 p-4 bg-white border border-slate-200 rounded-lg shadow-lg z-10 min-w-64",children:[n.jsx("h4",{className:"font-medium text-slate-800 mb-3",children:"Add Tags"}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Popular Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(O=>n.jsx("button",{onClick:()=>C(O),disabled:r.find(P=>P.id===O.id),className:`px-2 py-1 text-xs rounded-full border transition-colors ${r.find(P=>P.id===O.id)?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":`${O.color} hover:opacity-80 cursor-pointer`}`,children:O.label},O.id))})]}),n.jsxs("div",{className:"border-t border-slate-100 pt-3",children:[n.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:"Custom Tag"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:h,onChange:O=>m(O.target.value),onKeyPress:O=>O.key==="Enter"&&E(),placeholder:"Enter tag name",className:"flex-1 px-2 py-1 text-sm border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("button",{onClick:E,disabled:!h.trim(),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:s,disabled:b,className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:B,disabled:b,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]}),n.jsx("input",{ref:N,type:"file",accept:"image/*",multiple:!0,onChange:D,className:"hidden"})]})}const du=[{type:"like",Icon:y0,color:"bg-blue-500",label:"Like"},{type:"love",Icon:Nt,color:"bg-red-500",label:"Love"},{type:"celebrate",Icon:Gw,color:"bg-green-500",label:"Celebrate"},{type:"insightful",Icon:b0,color:"bg-yellow-500",label:"Insightful"}],hre=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let s=e/31536e3;return s>1?Math.floor(s)+"y":(s=e/2592e3,s>1?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):(s=e/86400,s>1?Math.floor(s)+"d":(s=e/3600,s>1?Math.floor(s)+"h":(s=e/60,s>1?Math.floor(s)+"m":Math.floor(e)+"s"))))};function mre({comment:t,currentUserProfile:e,isOrganizationPost:s,onOpenReactionsModal:r}){const[a,i]=y.useState(null),[o,c]=y.useState([]),[d,h]=y.useState(t.likes_count||0),[m,p]=y.useState(!1),[g,b]=y.useState(!1),[v,N]=y.useState([]),[j,w]=y.useState(!1),_=y.useRef(null),k=y.useRef(null),C=s?"organization_post_comment_likes":"post_comment_likes";y.useEffect(()=>{let O=!0;return(async()=>{if(t!=null&&t.id)try{if(e!=null&&e.id){const{data:I,error:V}=await $.from(C).select("reaction_type").eq("comment_id",t.id).eq("user_id",e.id).maybeSingle();V&&console.error("Error loading user reaction:",V),O&&i((I==null?void 0:I.reaction_type)||null)}const{data:z,error:q}=await $.from(C).select("reaction_type").eq("comment_id",t.id);if(q)console.error("Error loading reactions:",q);else if(z&&O){const I={};z.forEach(H=>{const Y=H.reaction_type||"like";I[Y]=(I[Y]||0)+1});const V=Object.entries(I).map(([H,Y])=>({type:H,count:Y}));c(V),h(z.length)}}catch(z){console.error("Error loading comment reactions:",z)}})(),()=>{O=!1}},[t==null?void 0:t.id,e==null?void 0:e.id,C]);const E=async O=>{if(!(!(e!=null&&e.id)||!(t!=null&&t.id)||j)){w(!0);try{if(a===O){const{error:P}=await $.from(C).delete().eq("comment_id",t.id).eq("user_id",e.id);if(P)throw P;i(null),h(z=>Math.max(0,z-1)),c(z=>z.map(q=>q.type===O?{...q,count:Math.max(0,q.count-1)}:q).filter(q=>q.count>0))}else{const{error:P}=await $.from(C).upsert({comment_id:t.id,user_id:e.id,reaction_type:O},{onConflict:"comment_id,user_id"});if(P)throw P;const z=!a,q=a;i(O),z?(h(I=>I+1),c(I=>I.find(H=>H.type===O)?I.map(H=>H.type===O?{...H,count:H.count+1}:H):[...I,{type:O,count:1}])):q!==O&&c(I=>I.map(V=>V.type===q?{...V,count:Math.max(0,V.count-1)}:V.type===O?{...V,count:V.count+1}:V).filter(V=>V.count>0))}p(!1)}catch(P){console.error("Error handling comment reaction:",P)}finally{w(!1)}}},A=()=>{clearTimeout(_.current),p(!0)},M=()=>{_.current=setTimeout(()=>p(!1),300)},R=async()=>{if(clearTimeout(k.current),d>0&&!j){try{const{data:O}=await $.from(C).select("reaction_type, user_id").eq("comment_id",t.id).limit(5);if(O&&O.length>0){const P=O.map(q=>q.user_id),{data:z}=await $.from("profiles").select("id, full_name, avatar_url, organization_name").in("id",P);if(z){const q=O.map(I=>{const V=z.find(H=>H.id===I.user_id);return{...V,reaction_type:I.reaction_type,profile_id:V==null?void 0:V.id,user_id:I.user_id}});N(q)}}}catch(O){console.error("Error loading reactors:",O)}b(!0)}},D=()=>{k.current=setTimeout(()=>b(!1),300)},L=du.find(O=>O.type===a),B=du[0].Icon;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"relative",onMouseEnter:A,onMouseLeave:M,children:[n.jsxs("button",{onClick:()=>E("like"),className:"flex items-center space-x-1 text-xs text-slate-500 hover:text-blue-600 transition-colors px-2 py-1 rounded hover:bg-slate-100",disabled:!(e!=null&&e.id)||j,children:[L?n.jsx(L.Icon,{size:14,className:`${L.color.replace("bg-","text-")} fill-current`}):n.jsx(B,{size:14}),n.jsx("span",{children:L?L.label:"Like"})]}),m&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 bg-white rounded-lg shadow-lg border p-2 flex space-x-1 z-30",onMouseEnter:A,onMouseLeave:M,children:du.map(O=>n.jsx("button",{onClick:()=>E(O.type),className:`p-2 rounded-lg hover:bg-slate-100 transition-colors ${O.color} text-white hover:scale-110 transform transition-transform`,title:O.label,disabled:j,children:n.jsx(O.Icon,{size:16})},O.type))})]}),d>0&&n.jsxs("div",{className:"relative flex items-center cursor-pointer",onMouseEnter:R,onMouseLeave:D,children:[n.jsx("div",{className:"flex items-center -space-x-1 mr-1",onClick:()=>r&&r(t),children:o.sort((O,P)=>P.count-O.count).slice(0,3).map(({type:O})=>{const P=du.find(z=>z.type===O);return P?n.jsx("div",{className:`p-0.5 rounded-full ${P.color} border border-white`,children:n.jsx(P.Icon,{size:8,className:"text-white"})},O):null})}),n.jsx("span",{className:"text-xs text-slate-500 hover:underline",onClick:()=>r&&r(t),children:d}),g&&d>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-48 bg-white rounded-lg shadow-lg border z-20 p-2",children:n.jsxs("div",{className:"space-y-1",children:[v.slice(0,3).map((O,P)=>n.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[n.jsx(is,{src:O.avatar_url,fullName:O.full_name,size:"xs"}),n.jsx("span",{className:"font-medium text-slate-700 truncate",children:O.full_name}),O.reaction_type&&n.jsx("div",{className:"ml-auto",children:(()=>{const z=du.find(q=>q.type===O.reaction_type);return z?n.jsx("div",{className:`p-0.5 rounded-full ${z.color}`,children:n.jsx(z.Icon,{size:6,className:"text-white"})}):null})()})]},P)),d>3&&n.jsxs("div",{className:"text-xs text-blue-600 pt-1 border-t cursor-pointer hover:underline",onClick:()=>r&&r(t),children:["Click to see all ",d," reactions"]})]})})]})]})}function fre({comment:t,currentUserProfile:e,onEdit:s,onDelete:r,onReply:a,showReply:i=!1}){const o=(e==null?void 0:e.id)===t.profile_id;return n.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[i&&n.jsxs("button",{onClick:()=>a&&a(t),className:"flex items-center space-x-1 text-xs text-slate-500 hover:text-blue-600 transition-colors px-2 py-1 rounded hover:bg-slate-100",children:[n.jsx(M3,{size:12}),n.jsx("span",{children:"Reply"})]}),o&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>s&&s(t),className:"flex items-center space-x-1 text-xs text-slate-500 hover:text-blue-600 transition-colors px-2 py-1 rounded hover:bg-slate-100",title:"Edit comment",children:[n.jsx(Gi,{size:12}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:()=>r&&r(t.id),className:"flex items-center space-x-1 text-xs text-slate-500 hover:text-red-600 transition-colors px-2 py-1 rounded hover:bg-slate-100",title:"Delete comment",children:[n.jsx(tn,{size:12}),n.jsx("span",{children:"Delete"})]})]})]})}function pre({comment:t,isOrganizationPost:e,onSave:s,onCancel:r}){const[a,i]=y.useState([]),[o,c]=y.useState([]),[d,h]=y.useState(!1),m=y.useRef(null),p=y.useRef(!0),g=J0({extensions:[Z0,eg.extend({name:"mention",addAttributes(){var _;return{...(_=this.parent)==null?void 0:_.call(this),type:{default:null,parseHTML:k=>k.getAttribute("data-type"),renderHTML:k=>k.type?{"data-type":k.type}:{}}}},renderHTML({node:_,HTMLAttributes:k}){const{id:C,label:E,type:A}=_.attrs;return["span",{...k,class:"mention","data-id":C,"data-label":E,"data-type":A},`@${E}`]},parseHTML(){return[{tag:"span[data-type][data-id]",getAttrs:_=>({id:_.getAttribute("data-id"),label:_.getAttribute("data-label"),type:_.getAttribute("data-type")})}]}}).configure({suggestion:{items:async({query:_})=>{try{if(!_||_.length<2)return[];const k=`%${_.trim()}%`,{data:C,error:E}=await $.from("profiles").select("id, full_name, title, organization_name, avatar_url, role").or(`full_name.ilike.${k},title.ilike.${k},organization_name.ilike.${k}`).limit(5);E&&console.error("Error searching profiles:",E);const{data:A,error:M}=await $.from("organizations").select("id, name, type, tagline, image_url").ilike("name",k).limit(5);M&&console.error("Error searching organizations:",M);const R=(C||[]).map(L=>({id:L.id,name:L.full_name,type:"user",avatar_url:L.avatar_url,title:L.title,organization_name:L.organization_name,role:L.role})),D=(A||[]).map(L=>({id:`${L.type}-${L.id}`,name:L.name,type:"organization",avatar_url:L.image_url,title:L.tagline,organization_name:L.type==="nonprofit"?"Nonprofit":"Funder",role:L.type}));return[...R,...D]}catch(k){return console.error("Exception during mention search:",k),[]}},render:()=>{let _,k;return{onStart:C=>{_=new X0(ng,{props:C,editor:C.editor}),k=Xi("body",{getReferenceClientRect:C.clientRect,appendTo:()=>document.body,content:_.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",duration:0})},onUpdate:C=>{_.updateProps(C),k[0].setProps({getReferenceClientRect:C.clientRect})},onKeyDown:C=>{var E;return C.event.key==="Escape"?(k[0].hide(),!0):(E=_.ref)==null?void 0:E.onKeyDown(C)},onExit:()=>{k&&k[0]&&k[0].destroy(),_&&_.destroy(),k=null,_=null}}}}})],content:t.content||"",editorProps:{attributes:{class:"prose-sm outline-none border border-slate-200 rounded-lg p-3 min-h-[3rem] focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-700 bg-white",style:"resize: vertical; white-space: pre-wrap;"}}});y.useEffect(()=>{p.current=!0;const _=t.image_urls||[];return i(_),()=>{p.current=!1}},[t]);const b=_=>i(k=>k.filter(C=>C!==_)),v=_=>c(k=>{const C=k.filter(A=>A.id!==_),E=k.find(A=>A.id===_);return E&&URL.revokeObjectURL(E.preview),C}),N=_=>{const k=Array.from(_.target.files),C=1;if(a.length+o.length+k.length>C){alert(`You can only have ${C} image per comment.`);return}const E=k.filter(A=>A.type.startsWith("image/")&&A.size<=10*1024*1024);if(E.length<k.length&&alert("Some images were invalid (must be under 10MB)."),E.length>0){const A=E.map(M=>({file:M,preview:URL.createObjectURL(M),id:Math.random().toString(36).substr(2,9)}));c(M=>[...M,...A])}},j=async()=>{if(o.length===0)return[];const _=o.map(async k=>{const C=k.file.name.split(".").pop(),E=`comment_${Math.random().toString(36).substring(2)}.${C}`,{data:A,error:M}=await $.storage.from("comment-images").upload(E,k.file);if(M)throw M;const{data:R}=$.storage.from("comment-images").getPublicUrl(E);return R.publicUrl});return Promise.all(_)},w=async()=>{if(g){h(!0);try{let _=[...a];if(o.length>0){const M=await j();_=[..._,...M]}const k=g.getHTML(),C=[],E=g.getJSON();E!=null&&E.content&&E.content.forEach(M=>{M.content&&M.content.forEach(R=>{if(R.type==="mention"&&R.attrs){const{id:D,label:L,type:B}=R.attrs;D&&L&&B&&C.push({displayName:L,id:D,type:B})}})});const A={content:k.trim(),updated_at:new Date().toISOString(),image_urls:_.length>0?_:null,mentions:C.length>0?C:null};s(A)}catch(_){console.error("Error saving comment:",_),alert("Failed to save comment. Please try again.")}finally{h(!1)}}};return n.jsxs("div",{className:"space-y-3 bg-white p-3 rounded-lg border border-slate-200",children:[n.jsx("div",{className:"border border-slate-200 rounded-lg",children:n.jsx(K0,{editor:g})}),(a.length>0||o.length>0)&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.map((_,k)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:_,alt:`Existing ${k+1}`,className:"w-48 h-auto rounded-lg border border-slate-200"}),n.jsx("button",{onClick:()=>b(_),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",children:n.jsx(Ke,{size:14})})]},`existing-${k}`)),o.map(_=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:_.preview,alt:"New preview",className:"w-48 h-auto rounded-lg border border-slate-200"}),n.jsx("button",{onClick:()=>v(_.id),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",children:n.jsx(Ke,{size:14})})]},`new-${_.id}`))]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-100",children:[n.jsxs("button",{onClick:()=>{var _;return(_=m.current)==null?void 0:_.click()},className:"flex items-center space-x-2 px-3 py-1.5 text-slate-600 hover:text-slate-800 hover:bg-slate-50 rounded-lg transition-colors text-sm",disabled:d,children:[n.jsx(hn,{size:16}),n.jsx("span",{children:"Add Photos"})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-auto",children:[n.jsx("button",{onClick:r,disabled:d,className:"px-3 py-1.5 text-slate-600 hover:text-slate-800 transition-colors text-sm disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:w,disabled:d,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Iw,{size:16,className:"mr-1"}),"Save"]})})]})]}),n.jsx("input",{ref:m,type:"file",accept:"image/*",multiple:!0,onChange:N,className:"hidden"})]})}function gre({comment:t,currentUserProfile:e,isOrganizationPost:s,onEdit:r,onDelete:a,onReply:i,onOpenReactionsModal:o,showActions:c=!0,showReply:d=!1}){var C,E,A,M,R,D;const h=bt(),[m,p]=y.useState(!1),g=async(L,B)=>{try{const O=L==="nonprofit"?"nonprofits":"funders",{data:P,error:z}=await $.from(O).select("slug").eq("id",parseInt(B)).single();return z?(console.error(`❌ Error fetching ${L} slug:`,z),null):(console.log(`✅ Found ${L} slug:`,P==null?void 0:P.slug),P==null?void 0:P.slug)}catch(O){return console.error(`💥 Exception fetching ${L} slug:`,O),null}},b=(L,B)=>{L.preventDefault(),L.stopPropagation(),B&&h(`/profile/members/${B}`)},v=L=>{p(!0)},N=()=>{p(!1)},j=async L=>{try{const B=s?"organization_post_comments":"post_comments",{data:{user:O}}=await $.auth.getUser();if(!O){alert("You must be logged in to edit comments.");return}if(t.user_id!==O.id){alert("You can only edit your own comments.");return}console.log("Updating comment with data:",L),console.log("Comment ID:",t.id),console.log("Table:",B);const{data:P,error:z}=await $.from(B).update(L).eq("id",t.id).eq("user_id",O.id).select(`
                    *,
                    profiles(
                        id, 
                        full_name, 
                        role, 
                        avatar_url,
                        organization_name
                    )
                `).single();if(z){console.error("Error updating comment:",z),console.error("Error details:",{code:z.code,message:z.message,details:z.details,hint:z.hint}),alert(`Failed to update comment: ${z.message}`);return}console.log("Comment updated successfully:",P),Object.assign(t,P),p(!1),r&&r(P)}catch(B){console.error("Error saving comment edit:",B),alert("Failed to save comment. Please try again.")}},w=L=>{a&&a(L)},_=async L=>{if(L.target.classList.contains("mention")){L.preventDefault(),L.stopPropagation();const B=L.target.getAttribute("data-id"),O=L.target.getAttribute("data-type");if(console.log("🔗 CommentCard: Mention clicked:",{mentionId:B,mentionType:O}),O==="user"&&B)console.log(`👤 Navigating to user profile: /profile/members/${B}`),h(`/profile/members/${B}`);else if(O==="organization"&&B)if(console.log("🏢 Organization mention ID:",B),B.includes("-")&&/^\w+-\d+$/.test(B)){const[P,z]=B.split("-");console.log("📄 Old format detected, looking up slug for:",{orgType:P,orgId:z});try{const q=await g(P,z);if(q)P==="nonprofit"?(console.log(`🏛️ Navigating to nonprofit: /nonprofits/${q}`),h(`/nonprofits/${q}`)):P==="funder"&&(console.log(`💰 Navigating to funder: /funders/${q}`),h(`/funders/${q}`));else{console.error(`❌ Could not find slug for ${P} with ID ${z}`);const I=P==="nonprofit"?`/nonprofits/${z}`:`/funders/${z}`;console.log(`🔄 Trying fallback navigation: ${I}`),h(I)}}catch(q){console.error("💥 Error during organization navigation:",q)}}else console.log("✨ New format detected, navigating to slug:",B),h(`/organizations/${B}`)}},k=t.updated_at&&t.updated_at!==t.created_at;return m?n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{onClick:L=>{var B;return b(L,(B=t.profiles)==null?void 0:B.id)},className:"cursor-pointer hover:opacity-80 transition-opacity",children:n.jsx(is,{src:(C=t.profiles)==null?void 0:C.avatar_url,fullName:(E=t.profiles)==null?void 0:E.full_name,size:"sm"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx(pre,{comment:t,isOrganizationPost:s,onSave:j,onCancel:N})})]}):n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{onClick:L=>{var B;return b(L,(B=t.profiles)==null?void 0:B.id)},className:"cursor-pointer hover:opacity-80 transition-opacity",children:n.jsx(is,{src:(A=t.profiles)==null?void 0:A.avatar_url,fullName:(M=t.profiles)==null?void 0:M.full_name,size:"sm"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"bg-slate-100 rounded-lg p-3",children:[n.jsx("div",{className:"flex items-start justify-between mb-1",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:L=>{var B;return b(L,(B=t.profiles)==null?void 0:B.id)},className:"font-medium text-slate-900 text-sm hover:text-blue-600 transition-colors cursor-pointer",children:(R=t.profiles)==null?void 0:R.full_name}),((D=t.profiles)==null?void 0:D.organization_name)&&n.jsxs("span",{className:"text-xs text-slate-500",children:["• ",t.profiles.organization_name]})]})}),n.jsxs("div",{className:"text-slate-700 text-sm leading-relaxed",children:[n.jsx("style",{children:`
                            .comment-content .mention {
                                background-color: #e0e7ff;
                                color: #3730a3;
                                padding: 1px 4px;
                                border-radius: 4px;
                                font-weight: 500;
                                text-decoration: none;
                                cursor: pointer;
                                transition: all 0.2s ease;
                            }
                            .comment-content .mention:hover {
                                background-color: #c7d2fe;
                                text-decoration: underline;
                            }
                            .comment-content p {
                                margin: 0;
                                line-height: 1.4;
                            }
                            `}),n.jsx("div",{dangerouslySetInnerHTML:{__html:t.content||t.content},className:"comment-content",onClick:_})]}),t.image_urls&&t.image_urls.length>0&&n.jsx("div",{className:"mt-3",children:t.image_urls.map((L,B)=>n.jsx("img",{src:L,alt:`Comment image ${B+1}`,className:"w-full max-w-sm h-auto rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{window.open(L,"_blank")}},B))})]}),n.jsxs("div",{className:"mt-1 ml-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-xs text-slate-500",children:[hre(t.created_at),k&&n.jsx("span",{className:"ml-1 text-slate-400",children:"(edited)"})]}),n.jsx(mre,{comment:t,currentUserProfile:e,isOrganizationPost:s,onOpenReactionsModal:o})]}),c&&n.jsx(fre,{comment:t,currentUserProfile:e,onEdit:v,onDelete:w,onReply:i,showReply:d})]})]})]})}function xre({post:t,currentUserProfile:e,onCommentAdded:s,placeholder:r="Write a comment...",autoFocus:a=!1,organization:i=null}){const[o,c]=y.useState(!1),[d,h]=y.useState([]),m=bt(),[p,g]=y.useState(null);y.useEffect(()=>{(async()=>{var D,L,B,O,P;try{const{data:{session:z}}=await $.auth.getSession();if(!(z!=null&&z.user))return;const{data:q,error:I}=await $.from("profiles").select("id, full_name, avatar_url, organization_name").eq("id",z.user.id).single();g(I?{id:z.user.id,full_name:((D=z.user.user_metadata)==null?void 0:D.full_name)||((L=z.user.user_metadata)==null?void 0:L.name)||((B=z.user.email)==null?void 0:B.split("@")[0]),avatar_url:((O=z.user.user_metadata)==null?void 0:O.avatar_url)||((P=z.user.user_metadata)==null?void 0:P.picture),organization_name:null}:q)}catch(z){console.error("Error loading user profile:",z)}})()},[]);const b=t._isOrganizationPost,v=b?"organization_post_comments":"post_comments",N=b?"organization_post_id":"post_id",[j,w]=y.useState(!1),_=J0({extensions:[Z0,eg.extend({name:"mention",addAttributes(){var R;return{...(R=this.parent)==null?void 0:R.call(this),type:{default:null,parseHTML:D=>D.getAttribute("data-type"),renderHTML:D=>D.type?{"data-type":D.type}:{}}}},renderHTML({node:R,HTMLAttributes:D}){const{id:L,label:B,type:O}=R.attrs;return["span",{...D,class:"mention","data-id":L,"data-label":B,"data-type":O},`@${B}`]},parseHTML(){return[{tag:"span[data-type][data-id]",getAttrs:R=>({id:R.getAttribute("data-id"),label:R.getAttribute("data-label"),type:R.getAttribute("data-type")})}]}}).configure({suggestion:{items:async({query:R})=>{if(!R||R.length<2)return[];try{const D=`%${R.trim()}%`,{data:L}=await $.from("profiles").select("id, full_name, title, organization_name, avatar_url, role").or(`full_name.ilike.${D},title.ilike.${D}`).limit(5),{data:B}=await $.from("organizations").select("id, name, type, tagline, image_url, slug").ilike("name",D).limit(5),O=(L||[]).map(z=>({id:z.id,name:z.full_name,type:"user",avatar_url:z.avatar_url,title:z.title,organization_name:z.organization_name,role:z.role})),P=(B||[]).map(z=>({id:z.slug||`${z.type}-${z.id}`,name:z.name,type:"organization",avatar_url:z.image_url,title:z.tagline,organization_name:z.type==="nonprofit"?"Nonprofit":"Funder",role:z.type}));return[...O,...P]}catch(D){return console.error("Mention search error:",D),[]}},render:()=>{let R,D;return{onStart:L=>{R=new X0(ng,{props:L,editor:L.editor}),D=Xi("body",{getReferenceClientRect:L.clientRect,appendTo:()=>document.body,content:R.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",duration:0,zIndex:9999,maxWidth:300,theme:"light-border"})},onUpdate:L=>{R.updateProps(L),D[0].setProps({getReferenceClientRect:L.clientRect})},onKeyDown:L=>{var B;return L.event.key==="Escape"?(D[0].hide(),!0):(B=R.ref)==null?void 0:B.onKeyDown(L)},onExit:()=>{D&&D[0]&&D[0].destroy(),R&&R.destroy()}}}}})],content:"",onUpdate:({editor:R})=>{var B;const D=R.getText().trim().length>0,L=(B=R.getJSON().content)==null?void 0:B.some(O=>{var P;return(P=O.content)==null?void 0:P.some(z=>z.type==="mention")});w(D||L)}}),k=(R,D)=>{R.preventDefault(),D&&m(`/profile/members/${D}`)},C=R=>{const D=Array.from(R.target.files);if(D.length===0)return;const L=D.filter(B=>B.type.startsWith("image/")&&B.size<=10*1024*1024).slice(0,1);if(L.length>0){const B=L.map(O=>({file:O,preview:URL.createObjectURL(O),id:Math.random().toString(36).substr(2,9)}));h(B)}},E=R=>{h(D=>{const L=D.filter(O=>O.id!==R),B=D.find(O=>O.id===R);return B&&URL.revokeObjectURL(B.preview),L})},A=async()=>{if(d.length===0)return[];const R=d.map(async D=>{const L=D.file.name.split(".").pop(),B=`comment_${Date.now()}_${Math.random().toString(36).substring(2)}.${L}`,{data:O,error:P}=await $.storage.from("avatars").upload(`comments/${B}`,D.file);if(P)throw P;const{data:z}=$.storage.from("avatars").getPublicUrl(`comments/${B}`);return z.publicUrl});return Promise.all(R)},M=async R=>{if(R.preventDefault(),!_||!p)return;const D=_.getHTML();if(!(!_.getText().trim()&&d.length===0)){c(!0);try{const{data:{user:B}}=await $.auth.getUser();if(!B)return;let O=[];d.length>0&&(O=await A());const P=[],z=_.getJSON();z!=null&&z.content&&z.content.forEach(H=>{H.content&&H.content.forEach(Y=>{if(Y.type==="mention"&&Y.attrs){const{id:U,label:K,type:J}=Y.attrs;U&&K&&J&&P.push({displayName:K,id:U,type:J})}})});const q={content:D,profile_id:p.id,user_id:B.id,image_urls:O.length>0?O:null,mentions:P.length>0?P:null};q[N]=t.id;const{data:I,error:V}=await $.from(v).insert(q).select(`
                    *,
                    profiles(id, full_name, role, avatar_url, organization_name)
                `).single();if(V){console.error("Error posting comment:",V),alert(`Failed to post comment: ${V.message}`);return}b&&i&&I.profiles&&(I.profiles.organization_name=i.name),_.commands.clearContent(),h([]),w(!1),b&&$.rpc("update_organization_post_comments_count",{post_id:t.id}).catch(console.warn),s&&s(I)}catch(B){console.error("Error posting comment:",B),alert("Failed to post comment. Please try again.")}finally{c(!1)}}};return n.jsxs("form",{onSubmit:M,className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{onClick:R=>k(R,p==null?void 0:p.id),className:"cursor-pointer",children:n.jsx(is,{src:p==null?void 0:p.avatar_url,fullName:(p==null?void 0:p.full_name)||"User",size:"sm"})}),n.jsx("div",{className:"flex-1 relative",children:n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"w-full p-2 pr-20 bg-slate-100 rounded-lg border-slate-200 focus-within:ring-2 focus-within:ring-blue-500 transition-all text-sm min-h-[40px] max-h-32 overflow-y-auto",children:[n.jsx("style",{children:`
                                .comment-editor .ProseMirror {
                                    outline: none;
                                    border: none;
                                    padding: 0;
                                    margin: 0;
                                    background: transparent;
                                    min-height: 20px;
                                }
                                .comment-editor .mention {
                                    background-color: #e0e7ff;
                                    color: #3730a3;
                                    padding: 1px 4px;
                                    border-radius: 4px;
                                    font-weight: 500;
                                    text-decoration: none;
                                    cursor: pointer;
                                }
                                .comment-editor .mention:hover {
                                    background-color: #c7d2fe;
                                }
                                .comment-editor p {
                                    margin: 0;
                                    line-height: 1.4;
                                }
                                `}),n.jsx(K0,{editor:_,className:"comment-editor"}),_&&_.isEmpty&&n.jsx("div",{className:"absolute top-2 left-2 text-slate-500 pointer-events-none text-sm",children:r})]}),n.jsxs("div",{className:"absolute top-0 right-2 h-full flex items-center space-x-1",children:[n.jsx("button",{type:"button",onClick:()=>{var R;return(R=document.getElementById(`comment-images-${t.id}`))==null?void 0:R.click()},className:"p-1.5 text-slate-500 hover:text-slate-700 rounded-full hover:bg-slate-200 transition-colors",disabled:o,title:"Add photos",children:n.jsx(hn,{size:18})}),n.jsx("button",{type:"submit",disabled:!j&&d.length===0||o,className:"p-1.5 text-blue-600 disabled:text-slate-400 rounded-full hover:bg-blue-100 disabled:hover:bg-transparent transition-colors",onMouseDown:R=>R.preventDefault(),children:o?n.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):n.jsx(Cc,{size:18})})]})]})})]}),d.length>0&&n.jsx("div",{className:"ml-11",children:d.map(R=>n.jsxs("div",{className:"relative inline-block",children:[n.jsx("img",{src:R.preview,alt:"Preview",className:"w-48 h-auto rounded-lg border border-slate-200"}),n.jsx("button",{type:"button",onClick:()=>E(R.id),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",children:n.jsx(Ke,{size:14})})]},R.id))}),n.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",id:`comment-images-${t.id}`,disabled:o})]})}const bre=y.lazy(()=>Vi(()=>import("./ReactionsModal-CsO6Hop0.js"),[]));function Bj({post:t,currentUserProfile:e,onCommentAdded:s,onCommentDeleted:r,showCommentForm:a=!0,compact:i=!1,organization:o=null}){const[c,d]=y.useState([]),[h,m]=y.useState(!0),[p,g]=y.useState(null),[b,v]=y.useState([]),[N,j]=y.useState([]),[w,_]=y.useState(0),k=t._isOrganizationPost,C=k?"organization_post_comments":"post_comments",E=k?"organization_post_id":"post_id",A=y.useCallback(async()=>{if(t!=null&&t.id){m(!0);try{const O="id, full_name, avatar_url, organization_name",{data:P,error:z}=await $.from(C).select(`
                    *,
                    profiles:profile_id (${O})
                `).eq(E,t.id).order("created_at",{ascending:!0});if(z){console.error("Error fetching comments:",z);return}let q=P||[];k&&o&&(q=q.map(I=>({...I,profiles:{...I.profiles,organization_name:o.name}}))),d(q)}catch(O){console.error("Unexpected error fetching comments:",O)}finally{m(!1)}}},[t==null?void 0:t.id,C,E,k,o]);y.useEffect(()=>{A()},[A]);const M=async O=>{const P=k?"organization_post_comment_likes":"post_comment_likes";try{const{data:z}=await $.from(P).select("reaction_type, user_id").eq("comment_id",O.id);if(z&&z.length>0){const q=z.map(V=>V.user_id),{data:I}=await $.from("profiles").select("id, full_name, avatar_url, organization_name").in("id",q);if(I){const V=z.map(U=>{const K=I.find(J=>J.id===U.user_id);return{...K,reaction_type:U.reaction_type,profile_id:K==null?void 0:K.id,user_id:U.user_id}}),H={};z.forEach(U=>{const K=U.reaction_type||"like";H[K]=(H[K]||0)+1});const Y=Object.entries(H).map(([U,K])=>({type:U,count:K}));v(V),j(Y),_(z.length),g(O)}}}catch(z){console.error("Error loading comment reactions:",z)}},R=y.useCallback(O=>{k&&o&&O.profiles&&(O.profiles.organization_name=o.name),d(P=>[...P,O]),k&&$.rpc("update_organization_post_comments_count",{post_id:t.id}).catch(P=>console.warn("Failed to update comment count:",P)),s&&s()},[k,t.id,s,o]),D=async O=>{d(z=>z.filter(q=>q.id!==O));const{error:P}=await $.from(C).delete().eq("id",O);P?(console.error("Error deleting comment:",P),A()):(k&&await $.rpc("update_organization_post_comments_count",{post_id:t.id}),r&&r())},L=O=>{console.log("Edit comment:",O)},B=O=>{console.log("Reply to comment:",O)};return n.jsxs("div",{className:`pt-4 mt-2 space-y-4 ${i?"max-h-96 overflow-y-auto":""}`,children:[a&&n.jsx(xre,{post:t,currentUserProfile:e,onCommentAdded:R,organization:o}),n.jsxs("div",{className:"space-y-4",children:[h&&n.jsx("p",{className:"text-sm text-slate-500",children:"Loading comments..."}),c.map(O=>n.jsx(gre,{comment:O,currentUserProfile:e,isOrganizationPost:k,onEdit:L,onDelete:D,onReply:B,onOpenReactionsModal:M,showActions:!0,showReply:!1},O.id)),!h&&c.length===0&&n.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No comments yet. Be the first to leave a comment!"})]}),p&&n.jsx(y.Suspense,{fallback:n.jsx("div",{children:"Loading reactions..."}),children:n.jsx(bre,{isOpen:!!p,onClose:()=>g(null),reactions:b,summary:N,likeCount:w})})]})}function vre({likeCount:t,reactors:e,onViewReactions:s}){var d,h,m;const r=(e==null?void 0:e.length)||0,a=Math.max(t,r);if(!a||a<1)return null;const i=(m=(h=(d=e==null?void 0:e[0])==null?void 0:d.full_name)==null?void 0:h.split(" "))==null?void 0:m[0],o=a>1;let c;return a===1&&i?c=i:a===2&&i?c=`${i} + 1 other`:o&&i?c=`${i} + ${a-1} others`:c=`${a} ${a===1?"reaction":"reactions"}`,n.jsx("span",{className:"ml-2 font-medium text-slate-600 hover:underline cursor-pointer",onClick:s,children:c})}function yre({reactors:t,likeCount:e,onViewAll:s}){const r=Math.min(3,t.length),a=t.slice(0,r),i=e-r;return n.jsx("div",{className:"absolute bottom-full mb-2 w-64 bg-white rounded-lg shadow-lg border z-20 p-3",children:n.jsxs("div",{className:"space-y-2",children:[a.map((o,c)=>n.jsxs("div",{className:"flex items-center space-x-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[n.jsx(is,{src:o.avatar_url,fullName:o.full_name,size:"sm"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:o.full_name}),o.reaction_type&&n.jsx("div",{className:"ml-auto",children:(()=>{const d=zo.find(h=>h.type===o.reaction_type);return d?n.jsx("div",{className:`p-0.5 rounded-full ${d.color}`,children:n.jsx(d.Icon,{size:10,className:"text-white"})}):null})()})]},c)),i>0&&n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:["View all ",e," reactions"]})})]})})}const wre=y.lazy(()=>Vi(()=>import("./ReactionsModal-CsO6Hop0.js"),[])),jre=y.lazy(()=>Vi(()=>import("./ImageViewer-BZaMM7sY.js"),[]));function Nre({post:t,onDelete:e,disabled:s=!1,showOrganizationAsAuthor:r=!1,organization:a}){var se;const{profile:i}=_t(),[o,c]=y.useState(t.likes_count||0),[d,h]=y.useState(t.comments_count||0),[m,p]=y.useState(null),[g,b]=y.useState([]),[v,N]=y.useState(((se=t.reactions)==null?void 0:se.summary)||[]),[j,w]=y.useState(!1),[_,k]=y.useState(!1),[C,E]=y.useState(!1),[A,M]=y.useState(0),[R,D]=y.useState(!1),[L,B]=y.useState(!1),O=Ps.useRef(null),[P,z]=y.useState(null),[q,I]=y.useState(!1),{content:V,created_at:H,profiles:Y,image_url:U,image_urls:K,tags:J}=t,W=(i==null?void 0:i.id)===(Y==null?void 0:Y.id),ee=K&&K.length>0?K:U?[U]:[];y.useEffect(()=>{(async()=>{if(!(!(Y!=null&&Y.id)||q)){I(!0);try{const{data:ge,error:te}=await $.rpc("get_user_organization_membership",{user_id:Y.id});if(!te&&ge&&ge.length>0){const Ee=ge[0];z({id:Ee.organization_id,name:Ee.organization_name,tagline:Ee.organization_tagline,type:Ee.organization_type,image_url:Ee.organization_image_url,role:Ee.role}),I(!1);return}const{data:xe,error:De}=await $.from("organization_memberships").select("organization_id, organization_type, role, is_public").eq("profile_id",Y.id).eq("is_public",!0).order("joined_at",{ascending:!1}).limit(1);if(De){console.error("❌ PostCard: Error fetching author organization membership:",De),z(null),I(!1);return}if(xe&&xe.length>0){const Ee=xe[0],{data:ce,error:ye}=await $.from("organizations").select("id, name, tagline, type, image_url").eq("id",Ee.organization_id).single();!ye&&ce?z({id:ce.id,name:ce.name,tagline:ce.tagline,type:ce.type,image_url:ce.image_url,role:Ee.role}):(console.warn("Could not fetch organization details:",ye),z(null))}else z(null)}catch(ge){console.error("❌ PostCard: Error fetching author organization info:",ge),z(null)}finally{I(!1)}}})()},[Y==null?void 0:Y.id,q]),y.useEffect(()=>{if(!W||!(i!=null&&i.id))return;const le=W1("organizationChanged",te=>{const{profileId:xe,organization:De}=te.detail;xe===i.id&&z(De?{id:De.id,name:De.name,type:De.type,tagline:De.tagline,image_url:De.image_url,role:"member"}:null)}),ge=te=>{if(te.key==="orgChangeEvent"&&te.newValue)try{const xe=JSON.parse(te.newValue);xe.profileId===i.id&&(xe.organization?z({id:xe.organization.id,name:xe.organization.name,type:xe.organization.type,tagline:xe.organization.tagline,image_url:xe.organization.image_url,role:"member"}):z(null))}catch(xe){console.error("❌ PostCard: Failed to parse cross-tab message:",xe)}};return window.addEventListener("storage",ge),()=>{le(),window.removeEventListener("storage",ge)}},[W,i==null?void 0:i.id]);const ne=y.useMemo(()=>{var ge;if(r&&a)return{full_name:a.name,avatar_url:a.logo_url,organization_name:((ge=a.funder_type)==null?void 0:ge.name)||"Funder"};const le={...Y};return P&&(le.organization_name=P.name,le.organization_type=P.type,P.role&&!le.title&&(le.title=P.role.replace("_"," ").replace(/\b\w/g,te=>te.toUpperCase()))),le},[r,a,Y,P]);y.useEffect(()=>{var le;h(t.comments_count||0),c(t.likes_count||0),N(((le=t.reactions)==null?void 0:le.summary)||[])},[t]),y.useEffect(()=>{(async()=>{if(o<=0||!(t!=null&&t.id)){b([]);return}try{const{data:ge}=await $.from("post_likes").select("user_id, reaction_type, created_at").eq("post_id",t.id).order("created_at",{ascending:!1});if(ge&&ge.length>0){const te=ge.map(Ee=>Ee.user_id),{data:xe}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name, role").in("id",te),De=ge.map(Ee=>{const ce=xe==null?void 0:xe.find(ye=>ye.id===Ee.user_id);return{user_id:Ee.user_id,profile_id:ce==null?void 0:ce.id,full_name:ce==null?void 0:ce.full_name,avatar_url:ce==null?void 0:ce.avatar_url,title:ce==null?void 0:ce.title,organization_name:ce==null?void 0:ce.organization_name,role:ce==null?void 0:ce.role,reaction_type:Ee.reaction_type,created_at:Ee.created_at}}).filter(Ee=>Ee.full_name);b(De)}else b([])}catch(ge){console.error("Error in fetchReactors:",ge),b([])}})()},[t.id,o]),y.useEffect(()=>{(async()=>{if(!i||!(t!=null&&t.id))return;const{data:ge}=await $.from("post_likes").select("reaction_type").eq("post_id",t.id).eq("user_id",i.id).maybeSingle();p((ge==null?void 0:ge.reaction_type)||null)})()},[t.id,i]);const X=async()=>{if(t!=null&&t.id)try{const{data:le,error:ge}=await $.from("post_likes").select("user_id, reaction_type").eq("post_id",t.id);if(ge)throw ge;const te={};le.forEach(xe=>{const De=xe.reaction_type||"like";te[De]=(te[De]||0)+1}),c(le.length),N(Object.entries(te).map(([xe,De])=>({type:xe,count:De})))}catch(le){console.error("Failed to refresh post data:",le)}},Q=async le=>{if(!i||!(t!=null&&t.id)||s)return;const{data:{user:ge}}=await $.auth.getUser();if(!ge)return;const{data:te}=await $.from("post_likes").select("id").eq("post_id",t.id).eq("user_id",ge.id).maybeSingle();te&&m===le?(await $.from("post_likes").delete().eq("id",te.id),p(null)):(await $.from("post_likes").upsert({post_id:t.id,user_id:ge.id,reaction_type:le},{onConflict:"post_id,user_id"}),p(le)),await X()},de=async(le,ge)=>{try{await $.from("post_mentions").delete().eq("post_id",le);const te=Array.isArray(ge)?ge:[];if(te.length===0)return;const xe=te.map(Ee=>{const ce={post_id:le,mention_type:Ee.type};if(Ee.type==="user")ce.mentioned_profile_id=Ee.id;else if(Ee.type==="organization"){const[ye,Oe]=Ee.id.split("-");ce.mentioned_organization_id=parseInt(Oe),ce.mentioned_organization_type=ye}return ce}),{error:De}=await $.from("post_mentions").insert(xe);if(De)throw De}catch(te){console.error("Error updating mention records:",te)}},ve=async le=>{const{data:{user:ge}}=await $.auth.getUser();if(!ge||ge.id!==t.user_id)return;const te=le.content||"",xe=le.image_urls||[],De=le.tags?JSON.parse(le.tags):[],Ee=le.mentions?JSON.parse(le.mentions):[],ce={content:te.trim(),tags:De.length>0?JSON.stringify(De):null,image_urls:xe.length>0?xe:null,image_url:xe.length===1?xe[0]:null,mentions:Ee.length>0?JSON.stringify(Ee):null},{data:ye,error:Oe}=await $.from("posts").update(ce).eq("id",t.id).select().single();Oe?(alert("Failed to update post. Please try again."),console.error("Post update error:",Oe)):(t.content=ye.content,t.tags=ye.tags?JSON.parse(ye.tags):[],t.image_urls=ye.image_urls,t.image_url=ye.image_url,t.mentions=ye.mentions?JSON.parse(ye.mentions):[],await de(t.id,Ee),w(!1))},Pe=async()=>{const{error:le}=await $.from("posts").delete().eq("id",t.id);le?alert("Failed to delete post."):e&&e(t.id)},He=le=>{M(le),E(!0)},Qe=()=>{clearTimeout(O.current),B(!0)},be=()=>{O.current=setTimeout(()=>{B(!1)},300)};return!t||!ne?null:n.jsxs("div",{className:"post-card bg-white p-5 rounded-xl shadow-sm border border-slate-200 transition-all duration-300","data-post-id":t.id,children:[n.jsx(MK,{author:ne,createdAt:H,isAuthor:W,onEdit:()=>w(!0),onDelete:Pe}),j?n.jsx(nR,{post:t,onSave:ve,onCancel:()=>w(!1)}):n.jsx(Y1,{content:V,images:ee,tags:J,onImageClick:He}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 my-2 min-h-[20px]",children:[n.jsxs("div",{className:"relative",onMouseEnter:Qe,onMouseLeave:be,children:[o>0&&n.jsxs("div",{className:"flex items-center cursor-pointer",children:[n.jsx("div",{className:"flex items-center -space-x-1",children:(v||[]).sort((le,ge)=>ge.count-le.count).slice(0,3).map(({type:le})=>{const ge=zo.find(te=>te.type===le);return ge?n.jsx("div",{className:`p-0.5 rounded-full ${ge.color} border-2 border-white`,children:n.jsx(ge.Icon,{size:12,className:"text-white"})},le):null})}),n.jsx(vre,{likeCount:o,reactors:g,onViewReactions:()=>D(!0)})]}),L&&o>0&&n.jsx(yre,{reactors:g,likeCount:o,onViewAll:()=>{B(!1),D(!0)}})]}),d>0&&n.jsxs("span",{className:"cursor-pointer hover:underline",onClick:()=>k(!_),children:[d," ",d===1?"comment":"comments"]})]}),!j&&n.jsx(K1,{onReaction:Q,onComment:()=>k(!_),onShare:()=>alert("Share functionality not implemented yet."),selectedReaction:m,disabled:s}),_&&n.jsx("div",{className:"mt-4 border-t pt-4 max-h-96 overflow-y-auto",children:n.jsx(Bj,{post:t,currentUserProfile:i,onCommentAdded:()=>h(le=>le+1),onCommentDeleted:()=>h(le=>Math.max(0,le-1))})}),n.jsxs(y.Suspense,{fallback:null,children:[R&&n.jsx(wre,{isOpen:R,onClose:()=>D(!1),reactors:g,likeCount:o,reactionSummary:v}),C&&n.jsx(jre,{post:t,images:ee,initialIndex:A,isOpen:C,onClose:()=>E(!1),onReaction:Q,selectedReaction:m,currentUserProfile:i,likeCount:o,reactionSummary:v,commentCount:d,onCommentAdded:()=>h(le=>le+1),onCommentDeleted:()=>h(le=>Math.max(0,le-1)),reactors:g,onViewReactions:()=>D(!0)})]})]})}const Uj=y.memo(Nre),rR=async(t,e)=>{var s,r,a;try{if(!t||!e)return{success:!1,error:"Both requester and recipient IDs are required"};if(t===e)return{success:!1,error:"Cannot connect to yourself"};const[i,o]=await Promise.all([$.from("user_connections").select("id, status, requester_id, recipient_id").eq("requester_id",t).eq("recipient_id",e).maybeSingle(),$.from("user_connections").select("id, status, requester_id, recipient_id").eq("requester_id",e).eq("recipient_id",t).maybeSingle()]);if(i.error||o.error)return{success:!1,error:((s=i.error)==null?void 0:s.message)||((r=o.error)==null?void 0:r.message)};const c=i.data||o.data;if(c)switch(c.status){case"accepted":return{success:!1,error:"Already connected"};case"pending":return{success:!1,error:"Connection request already sent"};case"declined":break;case"blocked":return{success:!1,error:"Unable to send connection request"}}let d,h;return c&&c.status==="declined"?(d=await $.from("user_connections").update({status:"pending",updated_at:new Date().toISOString()}).eq("id",c.id).select("id").single(),h=c.id):(d=await $.from("user_connections").insert({requester_id:t,recipient_id:e,status:"pending"}).select("id").single(),h=(a=d.data)==null?void 0:a.id),d.error?{success:!1,error:d.error.message}:(await lR(t,e,"connection_request",h),{success:!0})}catch(i){return{success:!1,error:i.message}}},rg=async(t,e)=>{try{const{data:s,error:r}=await $.from("user_connections").update({status:"accepted",updated_at:new Date().toISOString()}).eq("requester_id",e).eq("recipient_id",t).eq("status","pending").select("id").single();return r?{success:!1,error:r.message}:(await lR(t,e,"connection_accepted",s.id),{success:!0})}catch(s){return{success:!1,error:s.message}}},Vj=async(t,e)=>{try{const{error:s}=await $.from("user_connections").update({status:"declined",updated_at:new Date().toISOString()}).eq("requester_id",e).eq("recipient_id",t).eq("status","pending");return s?{success:!1,error:s.message}:{success:!0}}catch(s){return{success:!1,error:s.message}}},qj=async(t,e)=>{try{const[s,r]=await Promise.all([$.from("user_connections").delete().eq("requester_id",t).eq("recipient_id",e),$.from("user_connections").delete().eq("requester_id",e).eq("recipient_id",t)]);return s.error&&r.error?{success:!1,error:s.error.message}:{success:!0}}catch(s){return{success:!1,error:s.message}}},Hj=async(t,e)=>{var s,r;try{if(!t||!e)return{status:"none",isRequester:!1};const[a,i]=await Promise.all([$.from("user_connections").select("status, requester_id, recipient_id").eq("requester_id",t).eq("recipient_id",e).maybeSingle(),$.from("user_connections").select("status, requester_id, recipient_id").eq("requester_id",e).eq("recipient_id",t).maybeSingle()]);if(a.error||i.error)return{status:"none",isRequester:!1,error:((s=a.error)==null?void 0:s.message)||((r=i.error)==null?void 0:r.message)};const o=a.data||i.data;return o?{status:o.status,isRequester:o.requester_id===t}:{status:"none",isRequester:!1}}catch(a){return{status:"none",isRequester:!1,error:a.message}}},aR=async(t,e)=>{try{if(!t||!e)return{success:!1,error:"Both requester and recipient IDs are required"};const{error:s}=await $.from("user_connections").delete().eq("requester_id",t).eq("recipient_id",e).eq("status","pending");if(s)return{success:!1,error:s.message};const{error:r}=await $.from("notifications").delete().eq("actor_id",t).eq("user_id",e).eq("type","connection_request");return{success:!0}}catch(s){return{success:!1,error:s.message}}},iR=async(t,e)=>{try{const{data:s,error:r}=await $.rpc("get_mutual_connections",{user1_id:t,user2_id:e});return r?{count:0,error:r.message}:{count:s||0}}catch(s){return{count:0,error:s.message}}},oR=async(t,e=50)=>{try{const{data:s,error:r}=await $.from("user_connections").select("id, status, created_at, requester_id, recipient_id").or(`requester_id.eq.${t},recipient_id.eq.${t}`).eq("status","accepted").order("created_at",{ascending:!1}).limit(e);if(r)return{connections:[],error:r.message};if(!s||s.length===0)return{connections:[]};const a=s.map(h=>h.requester_id===t?h.recipient_id:h.requester_id),{data:i,error:o}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name").in("id",a);if(o)return{connections:[],error:o.message};const c={};return i.forEach(h=>{c[h.id]=h}),{connections:s.map(h=>{const p=h.requester_id===t?h.recipient_id:h.requester_id,g=c[p];return{id:h.id,user:g||{id:p,full_name:"Unknown User",avatar_url:null,title:null,organization_name:null},connected_at:h.created_at}})}}catch(s){return{connections:[],error:s.message}}},Sre=async t=>{try{const{data:e,error:s}=await $.from("user_connections").select("id, created_at, requester_id").eq("recipient_id",t).eq("status","pending").order("created_at",{ascending:!1});if(s)return{requests:[],error:s.message};if(!e||e.length===0)return{requests:[]};const r=e.map(d=>d.requester_id),{data:a,error:i}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name").in("id",r);if(i)return{requests:[],error:i.message};const o={};return a.forEach(d=>{o[d.id]=d}),{requests:e.map(d=>{const h=o[d.requester_id];return{id:d.id,created_at:d.created_at,requester_profile:h||{id:d.requester_id,full_name:"Unknown User",avatar_url:null,title:null,organization_name:null}}})}}catch(e){return{requests:[],error:e.message}}},lR=async(t,e,s,r=null)=>{try{if(t===e)return{success:!0};const{data:a,error:i}=await $.rpc("create_connection_notification",{p_recipient_id:e,p_actor_id:t,p_notification_type:s,p_connection_id:r});return i?{success:!1,error:i.message}:{success:!0,notificationId:a}}catch(a){return{success:!1,error:a.message}}},_re=({member:t,isFollowing:e,onFollow:s,onUnfollow:r,isCurrentUser:a,followingInProgress:i=!1,currentUserId:o})=>{const[c,d]=y.useState({followersCount:0,followingCount:0}),[h,m]=y.useState({connectionStatus:"none",isRequester:!1,mutualConnections:0,connectionsCount:0}),[p,g]=y.useState(!0),[b,v]=y.useState(!1);if(y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{g(!0);const[C,E]=await Promise.all([$.from("followers").select("*",{count:"exact",head:!0}).eq("following_id",t.id),$.from("followers").select("*",{count:"exact",head:!0}).eq("follower_id",t.id)]);if(d({followersCount:C.count||0,followingCount:E.count||0}),o&&o!==t.id){const[A,M,R]=await Promise.all([Hj(o,t.id),iR(o,t.id),$.from("user_connections").select("*",{count:"exact",head:!0}).or(`and(requester_id.eq.${t.id},status.eq.accepted),and(recipient_id.eq.${t.id},status.eq.accepted)`)]);m({connectionStatus:A.status,isRequester:A.isRequester,mutualConnections:M.count,connectionsCount:R.count||0})}}catch{}finally{g(!1)}})()},[t==null?void 0:t.id,o]),!t)return null;const N=()=>{e?r(t.id):s(t.id)},j=async k=>{if(!(!o||b)){v(!0);try{let C;switch(k){case"connect":C=await rR(o,t.id),C.success&&m(E=>({...E,connectionStatus:"pending",isRequester:!0}));break;case"accept":C=await rg(o,t.id),C.success&&m(E=>({...E,connectionStatus:"accepted",connectionsCount:E.connectionsCount+1}));break;case"decline":C=await Vj(o,t.id),C.success&&m(E=>({...E,connectionStatus:"none"}));break;case"withdraw":C=await aR(o,t.id),C.success&&m(E=>({...E,connectionStatus:"none",isRequester:!1}));break;case"disconnect":C=await qj(o,t.id),C.success&&m(E=>({...E,connectionStatus:"none",connectionsCount:Math.max(0,E.connectionsCount-1)}));break}C.success}catch{}finally{v(!1)}}},w=()=>{const{connectionStatus:k,isRequester:C}=h;switch(k){case"none":return n.jsxs("button",{onClick:()=>j("connect"),disabled:b,className:"inline-flex items-center px-4 py-2 text-sm font-medium bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(qe,{className:"w-4 h-4 mr-2"}),b?"Connecting...":"Connect"]});case"pending":return C?n.jsxs("button",{onClick:()=>j("withdraw"),disabled:b,className:"inline-flex items-center px-4 py-2 text-sm font-medium bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ap,{className:"w-4 h-4 mr-2"}),b?"Withdrawing...":"Withdraw"]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>j("accept"),disabled:b,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-1"}),b?"Accepting...":"Accept"]}),n.jsxs("button",{onClick:()=>j("decline"),disabled:b,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ap,{className:"w-4 h-4 mr-1"}),b?"Declining...":"Decline"]})]});case"accepted":return n.jsxs("button",{onClick:()=>j("disconnect"),disabled:b,className:"inline-flex items-center px-4 py-2 text-sm font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-2"}),b?"Disconnecting...":"Connected"]});default:return null}},_=()=>{const{mutualConnections:k}=h;return k>0?`${k} mutual connection${k===1?"":"s"}`:"Connect to see mutual connections"};return n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-6",children:[n.jsxs("div",{className:"flex items-start space-x-4 flex-grow",children:[n.jsx("div",{className:"flex-shrink-0",children:t.avatar_url?n.jsx("img",{src:t.avatar_url,alt:t.full_name,className:"w-20 h-20 rounded-full object-cover border-2 border-slate-100"}):n.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center border-2 border-slate-100",children:n.jsx(An,{className:"w-10 h-10 text-slate-400"})})}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:t.full_name}),t.title&&n.jsx("p",{className:"text-lg text-slate-600 mb-3",children:t.title}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[t.organization_name&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(er,{className:"w-4 h-4 mr-1"}),t.organization_name]}),t.location&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"w-4 h-4 mr-1"}),t.location]}),t.email&&!a&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Yc,{className:"w-4 h-4 mr-1"}),n.jsx("a",{href:`mailto:${t.email}`,className:"hover:text-blue-600 transition-colors",children:"Contact"})]}),t.website&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Mn,{className:"w-4 h-4 mr-1"}),n.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Website"})]})]}),t.bio&&n.jsx("p",{className:"text-slate-700 mt-4 leading-relaxed",children:t.bio}),!a&&n.jsx("p",{className:"text-sm text-slate-500 mt-3",children:_()})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("div",{className:"flex flex-col items-end space-y-4",children:[!a&&n.jsxs("div",{className:"flex flex-col gap-2",children:[w(),e?n.jsxs("button",{onClick:N,disabled:i,className:"inline-flex items-center px-4 py-2 text-sm font-medium bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-2"}),i?"Updating...":"Following"]}):n.jsxs("button",{onClick:N,disabled:i,className:"inline-flex items-center px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ia,{className:"w-4 h-4 mr-2"}),i?"Following...":"Follow"]})]}),n.jsxs("div",{className:"flex space-x-6 text-sm",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold text-slate-900",children:p?"...":h.connectionsCount}),n.jsx("div",{className:"text-slate-500",children:h.connectionsCount===1?"Connection":"Connections"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold text-slate-900",children:p?"...":c.followersCount}),n.jsx("div",{className:"text-slate-500",children:c.followersCount===1?"Follower":"Followers"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold text-slate-900",children:p?"...":c.followingCount}),n.jsx("div",{className:"text-slate-500",children:"Following"})]})]})]})})]})})})};function w4(){const{memberId:t,profileId:e}=Gc(),{profile:s}=_t(),r=t||e,[a,i]=y.useState(null),[o,c]=y.useState([]),[d,h]=y.useState(!0),[m,p]=y.useState(null),[g,b]=y.useState(!1),[v,N]=y.useState(!1),j=y.useCallback(async()=>{if(!r){p("No member ID provided"),h(!1);return}try{h(!0),p(null);const{data:C,error:E}=await $.from("profiles").select("*").eq("id",r).single();if(E)throw new Error(E.message);if(!C)throw new Error("Member not found");i(C);const{data:A,error:M}=await $.from("posts").select(`
                    *,
                    profiles (
                        id,
                        full_name,
                        avatar_url,
                        title,
                        organization_name
                    )
                `).eq("profile_id",r).order("created_at",{ascending:!1});M||c(A||[])}catch(C){p(C.message)}finally{h(!1)}},[r]),w=y.useCallback(async()=>{if(!(s!=null&&s.id)||!r||s.id===r){b(!1);return}try{const C=await lT(s.id,r);C.error||b(C.isFollowing)}catch{}},[s==null?void 0:s.id,r]);y.useEffect(()=>{j()},[j]),y.useEffect(()=>{w()},[w]);const _=async C=>{if(!(!s||v)){N(!0),b(!0);try{(await D0(s.id,C)).success||b(!1)}catch{b(!1)}finally{N(!1)}}},k=async C=>{if(!(!s||v)){N(!0),b(!1);try{(await Ah(s.id,C)).success||b(!0)}catch{b(!0)}finally{N(!1)}}};return d?n.jsxs("div",{className:"text-center p-10",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Loading profile..."})]}):m?n.jsxs("div",{className:"text-center p-10",children:[n.jsx("div",{className:"text-red-500 text-lg font-medium mb-2",children:"Error"}),n.jsx("p",{className:"text-slate-600",children:m})]}):a?n.jsxs("div",{className:"space-y-6",children:[n.jsx(_re,{member:a,isFollowing:g,onFollow:_,onUnfollow:k,isCurrentUser:(s==null?void 0:s.id)===(a==null?void 0:a.id),followingInProgress:v,currentUserId:s==null?void 0:s.id}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-bold text-slate-800 border-b pb-2",children:[a.full_name.split(" ")[0],"'s Activity"]}),o.length>0?n.jsx("div",{className:"space-y-6 mt-6",children:o.map(C=>n.jsx(Uj,{post:C},C.id))}):n.jsx("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center mt-6",children:n.jsx("p",{className:"text-slate-500",children:"This member hasn't posted anything yet."})})]})]}):n.jsxs("div",{className:"text-center p-10",children:[n.jsx("div",{className:"text-slate-500 text-lg font-medium mb-2",children:"Member Not Found"}),n.jsx("p",{className:"text-slate-600",children:"The member you're looking for doesn't exist."})]})}const Cre="/.netlify/functions/rss";async function Bv(t){const e=Yf.get(t);if(e&&Date.now()-e.timestamp<5*60*1e3)return e.data;try{const s=await fetch(`${Cre}?category=${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);const r=await s.json();if(!r.success)throw new Error(r.error||"Unknown error");const a=r.articles||[];return Yf.set(t,{data:a,timestamp:Date.now()}),a}catch(s){return console.error(`Failed to fetch news for category "${t}":`,s),Yf.set(t,{data:[],timestamp:Date.now()}),[]}}const Yf=new Map,ag={async getFunderNews(){return Bv("funder")},async getNonprofitNews(){return Bv("nonprofit")},async getGlobalBreakingNews(){return Bv("general")},clearCache(){Yf.clear()}},Gj={nonprofit:{id:"nonprofit",name:"Nonprofit Community",description:"Connect with fellow nonprofits",icon:"🏛️",bgGradient:"from-rose-50 to-pink-50",borderColor:"border-rose-200",buttonColor:"bg-rose-600 hover:bg-rose-700",tagColor:"bg-rose-50 text-rose-700 border-rose-200",channelTag:"#nonprofit-community",includes:["nonprofit.501c3","nonprofit.501c4","nonprofit.501c6","nonprofit.501c5","nonprofit.501c7","nonprofit.501c8","nonprofit.501c10","nonprofit.501c19"]},foundation:{id:"foundation",name:"Foundation Community",description:"Connect with other foundations and funders",icon:"💰",bgGradient:"from-purple-50 to-indigo-50",borderColor:"border-purple-200",buttonColor:"bg-purple-600 hover:bg-purple-700",tagColor:"bg-purple-50 text-purple-700 border-purple-200",channelTag:"#foundation-community",includes:["foundation.family","foundation.community","foundation.corporate"]},education:{id:"education",name:"Education Community",description:"Connect with educational institutions",icon:"🎓",bgGradient:"from-blue-50 to-indigo-50",borderColor:"border-blue-200",buttonColor:"bg-blue-600 hover:bg-blue-700",tagColor:"bg-blue-50 text-blue-700 border-blue-200",channelTag:"#education-community",includes:["education.university","education.university.research","education.university.teaching","education.university.department","education.university.medical","education.k12.district.public","education.k12.school.charter"]},healthcare:{id:"healthcare",name:"Healthcare Community",description:"Connect with healthcare organizations",icon:"🏥",bgGradient:"from-emerald-50 to-green-50",borderColor:"border-emerald-200",buttonColor:"bg-emerald-600 hover:bg-emerald-700",tagColor:"bg-emerald-50 text-emerald-700 border-emerald-200",channelTag:"#healthcare-community",includes:["healthcare.hospital.public","healthcare.clinic.fqhc","healthcare.mental_health.center"]},government:{id:"government",name:"Government Community",description:"Connect with government agencies",icon:"🏛️",bgGradient:"from-slate-50 to-gray-50",borderColor:"border-slate-200",buttonColor:"bg-slate-600 hover:bg-slate-700",tagColor:"bg-slate-50 text-slate-700 border-slate-200",channelTag:"#government-community",includes:["government.federal","government.federal.agency","government.state","government.state.department","government.city","government.city.department"]},religious:{id:"religious",name:"Religious Community",description:"Connect with faith-based organizations",icon:"⛪",bgGradient:"from-amber-50 to-yellow-50",borderColor:"border-amber-200",buttonColor:"bg-amber-600 hover:bg-amber-700",tagColor:"bg-amber-50 text-amber-700 border-amber-200",channelTag:"#religious-community",includes:["religious.church","religious.church.denomination","religious.interfaith.council"]},forprofit:{id:"forprofit",name:"Social Enterprise Community",description:"Connect with for-profit social impact organizations",icon:"🏢",bgGradient:"from-green-50 to-emerald-50",borderColor:"border-green-200",buttonColor:"bg-green-600 hover:bg-green-700",tagColor:"bg-green-50 text-green-700 border-green-200",channelTag:"#social-enterprise-community",includes:["forprofit.startup","forprofit.startup.social","forprofit.socialenterprise","forprofit.socialenterprise.bcorp","forprofit.corporation.csr","forprofit.corporation","forprofit.smallbusiness"]}},kre=t=>{if(!(t!=null&&t.organization_type))return["hello-world"];const e=["hello-world"];return Object.entries(Gj).forEach(([s,r])=>{(r.includes.includes(t.organization_type)||t.organization_type.startsWith(s+"."))&&e.push(`hello-community-${s}`)}),e},Ere=(t,e)=>{if(t==="hello-world")return{id:"hello-world",name:"Hello World",description:"Global community - all welcome",icon:"🌍",bgGradient:"from-sky-50 to-blue-50",borderColor:"border-sky-200",buttonColor:"bg-sky-600 hover:bg-sky-700",tagColor:"bg-sky-50 text-sky-700 border-sky-200",channelTag:"#hello-world"};const s=t.replace("hello-community-","");return Gj[s]||null},Are=t=>{if(t==="hello-world")return{channel:"hello-world"};const e=t.replace("hello-community-",""),s=Gj[e];return s?{channel:"hello-community",organization_types:s.includes}:null};class Tre{constructor(){this.activeSubscriptions=new Map,this.cleanupTimeouts=new Map,this.debugMode=!1}createSubscription(e,s,r,a){if(kre(r),!Ere(e))return this.debugMode&&console.warn(`Channel ${e} not found or not accessible`),null;if(this.cleanupTimeouts.has(e)&&(clearTimeout(this.cleanupTimeouts.get(e)),this.cleanupTimeouts.delete(e)),this.activeSubscriptions.has(e))return this.activeSubscriptions.get(e);const o=s.channel(`realtime:${e}`),c=Are(e);return a.onPostInsert&&o.on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:c?`channel=eq.${c.channel}`:`channel=eq.${e}`},a.onPostInsert),a.onPostUpdate&&o.on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts",filter:c?`channel=eq.${c.channel}`:`channel=eq.${e}`},a.onPostUpdate),a.onPostDelete&&o.on("postgres_changes",{event:"DELETE",schema:"public",table:"posts",filter:c?`channel=eq.${c.channel}`:`channel=eq.${e}`},a.onPostDelete),a.onLikeChange&&o.on("postgres_changes",{event:"*",schema:"public",table:"post_likes"},a.onLikeChange),a.onCommentChange&&o.on("postgres_changes",{event:"*",schema:"public",table:"post_comments"},a.onCommentChange),o.subscribe(d=>{d==="SUBSCRIBED"?this.debugMode&&console.log(`✅ Subscribed to ${e}`):d==="CHANNEL_ERROR"&&(this.debugMode&&console.error(`❌ Channel error for ${e}`),this.removeSubscription(e,s))}),this.activeSubscriptions.set(e,o),o}removeSubscription(e,s){const r=setTimeout(()=>{const a=this.activeSubscriptions.get(e);if(a)try{a.unsubscribe(),this.debugMode&&console.log(`🔄 Unsubscribed from ${e}`)}catch(i){this.debugMode&&console.warn(`⚠️ Error unsubscribing ${e}:`,i)}finally{s.removeChannel(a),this.activeSubscriptions.delete(e),this.cleanupTimeouts.delete(e),this.debugMode&&console.log(`🗑️ Removed channel ${e}`)}},1e3);this.cleanupTimeouts.set(e,r)}getActiveCount(){return this.activeSubscriptions.size}setDebugMode(e){this.debugMode=e}getActiveChannels(){return Array.from(this.activeSubscriptions.keys())}cleanup(e){this.cleanupTimeouts.forEach(s=>clearTimeout(s)),this.activeSubscriptions.forEach((s,r)=>{try{s.unsubscribe()}catch(a){this.debugMode&&console.warn(`Error cleaning up ${r}:`,a)}finally{e.removeChannel(s)}}),this.activeSubscriptions.clear(),this.cleanupTimeouts.clear(),this.debugMode&&console.log("🧹 All realtime subscriptions cleaned up")}}const d0=new Tre;var Uv={exports:{}},Vv,j4;function Mre(){if(j4)return Vv;j4=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Vv=t,Vv}var qv,N4;function Ore(){if(N4)return qv;N4=1;var t=Mre();function e(){}function s(){}return s.resetWarningCache=e,qv=function(){function r(o,c,d,h,m,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:s,resetWarningCache:e};return i.PropTypes=i,i},qv}var S4;function Rre(){return S4||(S4=1,Uv.exports=Ore()()),Uv.exports}var Dre=Rre();const Ue=Uc(Dre),cR=({profile:t,organizationInfo:e})=>{var g,b;const s=bt(),[r,a]=y.useState(!1),[i,o]=y.useState(()=>localStorage.getItem("welcomeBannerTheme")||"gradient");y.useEffect(()=>{localStorage.setItem("welcomeBannerTheme",i)},[i]);const c=()=>{o(v=>v==="gradient"?"apple":"gradient")},d=()=>{if(e!=null&&e.name){const v=e.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();s(`/organizations/${v}`)}},h=()=>{const v=new Date().getHours();return v<12?"Good morning":v<17?"Good afternoon":"Good evening"},m=()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),p=[{icon:$s,label:"Create Post",isPopup:!0,color:i==="gradient"?"bg-white/20 hover:bg-white/30 text-white":"bg-blue-500 hover:bg-blue-600 text-white shadow-md hover:shadow-lg",action:()=>a(!0)},...t!=null&&t.is_omega_admin||e?[{icon:zn,label:"Grants Portal",action:()=>s("/profile/grants-portal"),color:i==="gradient"?"bg-white/20 hover:bg-white/30 text-white":"bg-green-500 hover:bg-green-600 text-white shadow-md hover:shadow-lg"}]:[],{icon:bs,label:"Events",action:()=>s("/profile/events"),color:i==="gradient"?"bg-white/20 hover:bg-white/30 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700 border border-slate-200"},{icon:Vo,label:"Notifications",action:()=>s("/profile/notifications"),color:i==="gradient"?"bg-white/20 hover:bg-white/30 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-700 border border-slate-200"}];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-4 right-4 z-30",children:n.jsxs("button",{onClick:c,className:`px-3 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2 text-sm ${i==="gradient"?"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/20":"bg-slate-100 hover:bg-slate-200 text-slate-600 border border-slate-200"}`,children:[i==="gradient"?n.jsx(t$,{size:16}):n.jsx(VF,{size:16}),i==="gradient"?"Clean":"Gradient"]})}),i==="gradient"?n.jsxs("div",{className:"rounded-2xl p-8 relative",style:{background:"linear-gradient(135deg, rgba(96, 165, 250, 0.85) 0%, rgba(196, 181, 253, 0.75) 40%, rgba(244, 114, 182, 0.7) 80%, rgba(251, 207, 232, 0.65) 100%)"},children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full blur-xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-xl animate-pulse delay-1000"}),n.jsx("div",{className:"absolute top-1/2 left-1/3 w-20 h-20 bg-white/10 rounded-full blur-lg animate-pulse delay-500"})]}),n.jsx("div",{className:"relative z-10 flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"text-white/80 text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(bs,{size:16}),m()]}),n.jsxs("h1",{className:"text-3xl font-bold text-white mb-3 leading-tight",children:[h(),", ",((g=t==null?void 0:t.full_name)==null?void 0:g.split(" ")[0])||"there","! 👋"]}),n.jsx("div",{className:"text-white/90 text-lg mb-6",children:e?n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("button",{onClick:d,className:"hover:text-white hover:underline font-semibold transition-colors cursor-pointer inline-flex items-center gap-1",children:e.name}),n.jsx("span",{className:"text-white/70",children:"•"}),n.jsx("span",{className:"text-white/90",children:(t==null?void 0:t.title)||"Team Member"})]}):n.jsx("span",{children:"Ready to discover new opportunities?"})}),n.jsx("div",{className:"flex gap-3 flex-wrap",children:p.map((v,N)=>n.jsxs("button",{onClick:v.action,className:`${v.color} px-4 py-2 rounded-lg font-medium transition-all duration-200 backdrop-blur-sm border border-white/20 hover:scale-105 flex items-center gap-2 text-sm`,children:[n.jsx(v.icon,{size:16}),v.label,v.isPopup&&n.jsx(Ss,{size:14})]},N))})]})}),n.jsx("div",{className:"relative z-10 mt-8 pt-6 border-t border-white/20",children:n.jsx("div",{className:"flex items-center text-white/80 text-sm",children:n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qe,{size:16}),n.jsx("span",{children:"Your Network"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_s,{size:16}),n.jsx("span",{children:"Active Goals"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nh,{size:16}),n.jsx("span",{children:"Recent Activity"})]})]})})})]}):n.jsxs("div",{className:"bg-white rounded-3xl p-8 relative shadow-lg border border-slate-200/50",style:{background:"linear-gradient(145deg, #ffffff 0%, #f8fafc 40%, #f1f5f9 100%)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.6)"},children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-30",children:[n.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-50 to-purple-50 rounded-full blur-3xl transform translate-x-48 -translate-y-48"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-gradient-to-tr from-indigo-50 to-blue-50 rounded-full blur-3xl transform -translate-x-36 translate-y-36"})]}),n.jsx("div",{className:"relative z-10 flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"text-slate-500 text-sm font-medium mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),m()]}),n.jsxs("h1",{className:"text-4xl font-light text-slate-900 mb-4 leading-tight tracking-tight",children:[h(),", ",n.jsx("span",{className:"font-medium",children:((b=t==null?void 0:t.full_name)==null?void 0:b.split(" ")[0])||"there"})]}),n.jsx("div",{className:"text-slate-600 text-lg mb-8 font-light",children:e?n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("button",{onClick:d,className:"hover:text-slate-900 font-medium transition-colors cursor-pointer inline-flex items-center gap-1",children:e.name}),n.jsx("span",{className:"text-slate-400",children:"•"}),n.jsx("span",{className:"text-slate-600",children:(t==null?void 0:t.title)||"Team Member"})]}):n.jsx("span",{children:"Ready to discover new opportunities"})}),n.jsx("div",{className:"flex gap-3 flex-wrap",children:p.map((v,N)=>n.jsxs("button",{onClick:v.action,className:`${v.color} px-5 py-2.5 rounded-full font-medium transition-all duration-200 flex items-center gap-2 text-sm hover:scale-105 active:scale-95`,children:[n.jsx(v.icon,{size:16}),v.label,v.isPopup&&n.jsx(Ss,{size:14})]},N))})]})}),n.jsx("div",{className:"relative z-10 mt-10 pt-6 border-t border-slate-200/50",children:n.jsx("div",{className:"flex items-center text-slate-500 text-sm font-medium",children:n.jsxs("div",{className:"flex items-center gap-8",children:[n.jsxs("div",{className:"flex items-center gap-2.5 hover:text-slate-700 transition-colors cursor-pointer",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("span",{children:"Your Network"})]}),n.jsxs("div",{className:"flex items-center gap-2.5 hover:text-slate-700 transition-colors cursor-pointer",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),n.jsx("span",{children:"Active Goals"})]}),n.jsxs("div",{className:"flex items-center gap-2.5 hover:text-slate-700 transition-colors cursor-pointer",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsx("span",{children:"Recent Activity"})]})]})})})]})]}),r&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-md w-full overflow-hidden ${i==="gradient"?"bg-white relative":"bg-white"}`,children:[i==="gradient"&&n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-blue-200/40 to-indigo-200/40 rounded-full blur-3xl -translate-x-16 -translate-y-16"}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gradient-to-br from-purple-200/30 to-pink-200/30 rounded-full blur-2xl translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute bottom-0 left-1/3 w-56 h-56 bg-gradient-to-br from-indigo-200/25 to-cyan-200/25 rounded-full blur-3xl -translate-y-12"})]}),n.jsxs("div",{className:`p-6 relative ${i==="gradient"?"text-white":"text-slate-900"}`,children:[n.jsx("button",{onClick:()=>a(!1),className:`absolute top-4 right-4 p-1 rounded-lg transition-colors ${i==="gradient"?"hover:bg-white/20 text-white":"hover:bg-slate-100 text-slate-600"}`,children:n.jsx(Ke,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${i==="gradient"?"bg-white/20":"bg-blue-100"}`,children:n.jsx($s,{size:24,className:i==="gradient"?"text-white":"text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:`text-xl font-bold ${i==="gradient"?"text-white":"text-slate-900"}`,children:"Create New Post"}),n.jsx("p",{className:`text-sm ${i==="gradient"?"text-white/80":"text-slate-600"}`,children:"Share your thoughts with the community"})]})]})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("button",{onClick:()=>{s("/profile/hello-world?create=true"),a(!1)},className:`w-full p-4 rounded-xl transition-all duration-200 hover:scale-[1.02] group ${i==="gradient"?"bg-white/20 hover:bg-white/30 border border-white/30 backdrop-blur-sm":"bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 border border-blue-200"}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`p-3 rounded-lg group-hover:scale-110 transition-transform ${i==="gradient"?"bg-white/30":"bg-blue-500"}`,children:n.jsx(Br,{size:24,className:"text-white"})}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("h4",{className:`font-bold text-lg group-hover:opacity-80 ${i==="gradient"?"text-white":"text-blue-900"}`,children:"Hello World"}),n.jsx("p",{className:`text-sm mt-1 ${i==="gradient"?"text-white/80":"text-blue-700"}`,children:"Share with the global community and connect with people worldwide"})]}),n.jsx(Ss,{size:20,className:`rotate-[-90deg] group-hover:translate-x-1 transition-transform ${i==="gradient"?"text-white/80":"text-blue-600"}`})]})}),n.jsx("button",{onClick:()=>{s("/profile/hello-community?create=true"),a(!1)},className:`w-full p-4 rounded-xl transition-all duration-200 hover:scale-[1.02] group ${i==="gradient"?"bg-white/20 hover:bg-white/30 border border-white/30 backdrop-blur-sm":"bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 border border-purple-200"}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`p-3 rounded-lg group-hover:scale-110 transition-transform ${i==="gradient"?"bg-white/30":"bg-purple-500"}`,children:n.jsx(er,{size:24,className:"text-white"})}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("h4",{className:`font-bold text-lg group-hover:opacity-80 ${i==="gradient"?"text-white":"text-purple-900"}`,children:"Hello Community"}),n.jsx("p",{className:`text-sm mt-1 ${i==="gradient"?"text-white/80":"text-purple-700"}`,children:"Share with your organization community and team members"})]}),n.jsx(Ss,{size:20,className:`rotate-[-90deg] group-hover:translate-x-1 transition-transform ${i==="gradient"?"text-white/80":"text-purple-600"}`})]})})]}),n.jsx("div",{className:`mt-6 pt-4 border-t ${i==="gradient"?"border-white/20":"border-slate-200"}`,children:n.jsx("p",{className:`text-center text-xs ${i==="gradient"?"text-white/60":"text-slate-500"}`,children:"Choose where you'd like to share your post"})})]})]})})]})};cR.propTypes={profile:Ue.object,organizationInfo:Ue.object};const dR=({person:t,hasRecentPost:e,type:s,onClick:r})=>{var c;const a=bt(),i=()=>{r?r(t):a(`/profile/members/${t.user?t.user.id:t.id}`)},o=t.user||t;return n.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center space-y-2 cursor-pointer group",onClick:i,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`p-0.5 rounded-full ${e?"bg-gradient-to-tr from-pink-500 via-purple-500 to-blue-500":s==="connection"?"bg-gradient-to-tr from-green-400 to-green-600":"bg-gradient-to-tr from-blue-400 to-blue-600"}`,children:n.jsx("div",{className:"p-0.5 bg-white rounded-full",children:n.jsx("img",{src:o.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(o.full_name||"User")}&background=6366f1&color=ffffff`,alt:o.full_name||"User",className:"w-14 h-14 rounded-full object-cover group-hover:scale-105 transition-transform duration-200"})})}),n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-white border-2 border-white rounded-full flex items-center justify-center",children:e?n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}):s==="connection"?n.jsx(qe,{size:8,className:"text-green-600"}):n.jsx(br,{size:8,className:"text-blue-600"})})]}),n.jsxs("div",{className:"text-center max-w-[80px]",children:[n.jsx("span",{className:"text-xs text-slate-700 font-medium truncate block group-hover:text-blue-600 transition-colors",children:((c=o.full_name)==null?void 0:c.split(" ")[0])||"User"}),n.jsx("span",{className:"text-xs text-slate-500 truncate block",children:s==="connection"?"Connected":"Following"})]})]})},uR=({currentUserProfile:t})=>{const e=bt(),[s,r]=y.useState([]),[a,i]=y.useState([]),[o,c]=y.useState(new Set),[d,h]=y.useState(!0),m=async E=>{try{const{data:A,error:M}=await $.from("followers").select(`
                    id,
                    following_id,
                    created_at,
                    following:following_id (
                        id,
                        full_name,
                        avatar_url,
                        title,
                        organization_name
                    )
                `).eq("follower_id",E).order("created_at",{ascending:!1}).limit(20);return M?(console.error("Error fetching following:",M),[]):(A==null?void 0:A.map(R=>({id:R.id,user:R.following,followed_at:R.created_at})))||[]}catch(A){return console.error("Error in fetchFollowing:",A),[]}};y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{h(!0);const[A,M]=await Promise.all([oR(t.id,20),m(t.id)]),R=A.connections||[],D=M||[];r(R),i(D);const L=[...R.map(B=>B.user.id),...D.map(B=>B.user.id)];if(L.length>0){const B=new Date(Date.now()-864e5).toISOString(),{data:O}=await $.from("posts").select("profile_id").in("profile_id",L).gte("created_at",B);if(O){const P=new Set(O.map(z=>z.profile_id));c(P)}}}catch(A){console.error("Error fetching network data:",A)}finally{h(!1)}})()},[t==null?void 0:t.id]);const p=E=>{const A=document.getElementById("network-avatars-scroll");A&&A.scrollBy({left:E==="left"?-200:200,behavior:"smooth"})},g=()=>{e("/profile/connections")},b=()=>{e("/profile/following")},v=()=>{e("/profile/members")};if(d)return n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Your Network"})}),n.jsx("div",{className:"flex space-x-4 overflow-hidden",children:[...Array(8)].map((E,A)=>n.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center space-y-2 animate-pulse",children:[n.jsx("div",{className:"w-14 h-14 bg-slate-200 rounded-full"}),n.jsx("div",{className:"w-12 h-3 bg-slate-200 rounded"})]},A))})]});const N=[],j=new Set;if(s.forEach(E=>{const A=E.user.id;j.has(A)||(N.push({...E,type:"connection"}),j.add(A))}),a.forEach(E=>{const A=E.user.id;j.has(A)||(N.push({...E,type:"following"}),j.add(A))}),N.length===0)return n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Your Network"}),n.jsx("button",{onClick:v,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Find People"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:n.jsx($s,{size:24,className:"text-slate-400"})}),n.jsx("h4",{className:"text-lg font-medium text-slate-600 mb-2",children:"Build Your Network"}),n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Connect with other nonprofits, funders, and change-makers in your community"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Find People to Connect"})]})]});const w=[...N].sort((E,A)=>{const M=E.user?E.user.id:E.id,R=A.user?A.user.id:A.id,D=o.has(M),L=o.has(R);return D&&!L?-1:!D&&L?1:E.type==="connection"&&A.type==="following"?-1:E.type==="following"&&A.type==="connection"?1:0}),_=o.size,k=s.length;a.length;const C=a.filter(E=>!s.some(A=>A.user.id===E.user.id)).length;return n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Your Network"}),n.jsx("p",{className:"text-sm text-slate-600",children:k>0&&C>0?n.jsxs(n.Fragment,{children:[k," ",k===1?"connection":"connections"," • ",C," following",_>0&&n.jsxs("span",{className:"text-blue-600 font-medium ml-2",children:["• ",_," active recently"]})]}):k>0?n.jsxs(n.Fragment,{children:[k," ",k===1?"connection":"connections",_>0&&n.jsxs("span",{className:"text-blue-600 font-medium ml-2",children:["• ",_," active recently"]})]}):C>0?n.jsxs(n.Fragment,{children:["Following ",C,_>0&&n.jsxs("span",{className:"text-blue-600 font-medium ml-2",children:["• ",_," active recently"]})]}):null})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[N.length>6&&n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("button",{onClick:()=>p("left"),className:"p-1.5 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(tl,{size:14})}),n.jsx("button",{onClick:()=>p("right"),className:"p-1.5 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(da,{size:14})})]}),n.jsxs("div",{className:"flex space-x-1",children:[k>0&&n.jsx("button",{onClick:g,className:"text-xs text-blue-600 hover:text-blue-700 font-medium transition-colors px-2 py-1 bg-blue-50 rounded",children:"All Connections"}),C>0&&n.jsx("button",{onClick:b,className:"text-xs text-blue-600 hover:text-blue-700 font-medium transition-colors px-2 py-1 bg-blue-50 rounded",children:"Following"}),n.jsx("button",{onClick:v,className:"text-xs text-blue-600 hover:text-blue-700 font-medium transition-colors px-2 py-1 bg-blue-50 rounded",children:"Find More"})]})]})]}),n.jsx("div",{id:"network-avatars-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-2",children:w.map(E=>{const A=E.user?E.user.id:E.id;return n.jsx(dR,{person:E,hasRecentPost:o.has(A),type:E.type},`${E.type}-${E.id}`)})})]})};uR.propTypes={currentUserProfile:Ue.object};dR.propTypes={person:Ue.object.isRequired,hasRecentPost:Ue.bool.isRequired,type:Ue.oneOf(["connection","following"]).isRequired,onClick:Ue.func};const hR=t=>{if(!t)return[t];const e=/@\[([^\]]+)\]\(([^:]+):([^)]+)\)/g,s=[];let r=0,a;for(;(a=e.exec(t))!==null;){const[i,o,c,d]=a;a.index>r&&s.push(t.slice(r,a.index)),s.push({type:"mention",displayName:o,id:c,entityType:d,key:`mention-${c}-${a.index}`}),r=a.index+i.length}return r<t.length&&s.push(t.slice(r)),s.length>0?s:[t]},Pre=({post:t,onClick:e})=>{var j,w,_,k,C,E,A,M;const s=bt(),[r,a]=Ps.useState(((w=(j=t==null?void 0:t.reactions)==null?void 0:j.summary)==null?void 0:w.reduce((R,D)=>R+D.count,0))||0),[i,o]=Ps.useState((t==null?void 0:t.comments_count)||0);Ps.useEffect(()=>{var D,L;const R=((L=(D=t==null?void 0:t.reactions)==null?void 0:D.summary)==null?void 0:L.reduce((B,O)=>B+O.count,0))||0;a(R),o((t==null?void 0:t.comments_count)||0)},[(_=t==null?void 0:t.reactions)==null?void 0:_.summary,t==null?void 0:t.comments_count]);const c=R=>{const D=new Date,L=new Date(R),B=Math.floor((D-L)/(1e3*60*60));return B<1?"Just now":B<24?`${B}h ago`:`${Math.floor(B/24)}d ago`},d=async(R,D)=>{if(D==null||D.stopPropagation(),R.entityType==="user")s(`/profile/members/${R.id}`);else if(R.entityType==="organization")try{let L,B;if(R.id.includes("-")?[L,B]=R.id.split("-"):B=R.id,B){const{data:O}=await $.from("organizations").select("slug, type").eq("id",parseInt(B)).single();O!=null&&O.slug?s(`/organizations/${O.slug}`):console.error("Could not find organization slug for ID:",B)}else console.error("Invalid organization mention ID format:",R.id)}catch(L){console.error("Error navigating to organization:",L)}},h=(R,D)=>{if(!(D||R))return"No text content";if(D&&D.includes('class="mention"')){const B=document.createElement("div");B.innerHTML=D;const O=[],P=q=>{if(q.nodeType===Node.TEXT_NODE)q.textContent.trim()&&O.push(q.textContent);else if(q.nodeType===Node.ELEMENT_NODE)if(q.classList.contains("mention")&&q.hasAttribute("data-id"))O.push({type:"mention",id:q.getAttribute("data-id"),displayName:q.getAttribute("data-label").trim(),entityType:q.getAttribute("data-type"),key:`mention-${q.getAttribute("data-id")}-${O.length}`});else{for(const I of q.childNodes)P(I);["BR","P","DIV"].includes(q.tagName)&&O.push(" ")}};for(const q of B.childNodes)P(q);return O.filter(q=>typeof q=="string"?q.trim().length>0:!0).map((q,I)=>typeof q=="string"?q:q.type==="mention"?n.jsxs("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-blue-600 bg-blue-50 hover:bg-blue-100 cursor-pointer font-medium transition-colors",onClick:V=>{V.stopPropagation(),d(q,V)},children:["@",q.displayName]},q.key||I):null)}else{const B=hR(R);return typeof B=="string"?B:B.map((O,P)=>typeof O=="string"?O:O.type==="mention"?n.jsxs("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-blue-600 bg-blue-50 hover:bg-blue-100 cursor-pointer font-medium transition-colors",onClick:z=>{z.stopPropagation(),d(O,z)},children:["@",O.displayName]},`fallback-mention-${P}`):null)}},m=R=>{if(!R)return{text:"",images:[]};const D=document.createElement("div");D.innerHTML=R;const L=D.querySelectorAll("img"),B=Array.from(L).map(z=>z.src).filter(z=>z);L.forEach(z=>z.remove());const O=D.innerHTML;let P=D.innerHTML;return P=P.replace(/<[^>]*>/g,"").trim(),{text:P,htmlText:O,images:B}},{text:p,htmlText:g,images:b}=m(t.content),v=[...t.images||[],...b,...t.image_urls||[],...(t.attachments||[]).filter(R=>R.type==="image").map(R=>R.url)],N=v.length>0;return n.jsxs("div",{className:"flex-shrink-0 w-80 bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:e,children:[N&&n.jsxs("div",{className:"h-48 bg-slate-100 overflow-hidden relative",children:[n.jsx("img",{src:v[0],alt:"User uploaded content",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:R=>{R.target.style.display="none"}}),v.length>1&&n.jsxs("div",{className:"absolute top-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:["+",v.length-1]})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("img",{src:((k=t.profiles)==null?void 0:k.avatar_url)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((C=t.profiles)==null?void 0:C.full_name)||"User")}&background=6366f1&color=ffffff`,alt:((E=t.profiles)==null?void 0:E.full_name)||"User",className:"w-10 h-10 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 text-sm truncate",children:((A=t.profiles)==null?void 0:A.full_name)||"Anonymous"}),((M=t.profiles)==null?void 0:M.organization_name)&&n.jsx("p",{className:"text-xs text-slate-500 truncate",children:t.profiles.organization_name})]}),n.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:c(t.created_at)})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:`text-slate-700 text-sm leading-relaxed ${N?"line-clamp-4":"line-clamp-[12]"}`,children:h(p,g)})}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Nt,{size:14}),n.jsx("span",{children:r})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Jn,{size:14}),n.jsx("span",{children:i})]}),n.jsx("div",{className:"ml-auto text-blue-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"View Post →"})]})]})]})},mR=({posts:t,onViewMore:e,onPostClick:s})=>{const r=a=>{const i=document.getElementById("trending-posts-scroll");i&&i.scrollBy({left:a==="left"?-320:320,behavior:"smooth"})};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Trending Platform-Wide"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Popular posts from the global community"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[t&&t.length>0&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>r("left"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>r("right"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(da,{size:16})})]}),n.jsx("button",{onClick:e,className:"ml-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"View More"})]})]}),t&&t.length>0?n.jsx("div",{id:"trending-posts-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:t.map(a=>n.jsx(Pre,{post:a,onClick:()=>s(a)},a.id))}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[n.jsx(Jn,{size:48,className:"mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No posts yet"}),n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Be the first to share something with the community!"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Start Conversation"})]})]})};mR.propTypes={posts:Ue.array.isRequired,onViewMore:Ue.func.isRequired,onPostClick:Ue.func.isRequired};const zre=({post:t,onClick:e})=>{var j,w,_,k,C,E,A,M;const s=bt(),[r,a]=Ps.useState(((w=(j=t==null?void 0:t.reactions)==null?void 0:j.summary)==null?void 0:w.reduce((R,D)=>R+D.count,0))||0),[i,o]=Ps.useState((t==null?void 0:t.comments_count)||0);Ps.useEffect(()=>{var D,L;const R=((L=(D=t==null?void 0:t.reactions)==null?void 0:D.summary)==null?void 0:L.reduce((B,O)=>B+O.count,0))||0;a(R),o((t==null?void 0:t.comments_count)||0)},[(_=t==null?void 0:t.reactions)==null?void 0:_.summary,t==null?void 0:t.comments_count]);const c=R=>{const D=new Date,L=new Date(R),B=Math.floor((D-L)/(1e3*60*60));return B<1?"Just now":B<24?`${B}h ago`:`${Math.floor(B/24)}d ago`},d=async(R,D)=>{if(D==null||D.stopPropagation(),R.entityType==="user")s(`/profile/members/${R.id}`);else if(R.entityType==="organization")try{let L,B;if(R.id.includes("-")?[L,B]=R.id.split("-"):B=R.id,B){const{data:O}=await $.from("organizations").select("slug, type").eq("id",parseInt(B)).single();O!=null&&O.slug?s(`/organizations/${O.slug}`):console.error("Could not find organization slug for ID:",B)}else console.error("Invalid organization mention ID format:",R.id)}catch(L){console.error("Error navigating to organization:",L)}},h=(R,D)=>{if(!(D||R))return"No text content";if(D&&D.includes('class="mention"')){const B=document.createElement("div");B.innerHTML=D;const O=[],P=q=>{if(q.nodeType===Node.TEXT_NODE)q.textContent.trim()&&O.push(q.textContent);else if(q.nodeType===Node.ELEMENT_NODE)if(q.classList.contains("mention")&&q.hasAttribute("data-id"))O.push({type:"mention",id:q.getAttribute("data-id"),displayName:q.getAttribute("data-label").trim(),entityType:q.getAttribute("data-type"),key:`mention-${q.getAttribute("data-id")}-${O.length}`});else{for(const I of q.childNodes)P(I);["BR","P","DIV"].includes(q.tagName)&&O.push(" ")}};for(const q of B.childNodes)P(q);return O.filter(q=>typeof q=="string"?q.trim().length>0:!0).map((q,I)=>typeof q=="string"?q:q.type==="mention"?n.jsxs("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-blue-600 bg-blue-50 hover:bg-blue-100 cursor-pointer font-medium transition-colors",onClick:V=>{V.stopPropagation(),d(q,V)},children:["@",q.displayName]},q.key||I):null)}else{const B=hR(R);return typeof B=="string"?B:B.map((O,P)=>typeof O=="string"?O:O.type==="mention"?n.jsxs("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-blue-600 bg-blue-50 hover:bg-blue-100 cursor-pointer font-medium transition-colors",onClick:z=>{z.stopPropagation(),d(O,z)},children:["@",O.displayName]},`fallback-mention-${P}`):null)}},m=R=>{if(!R)return{text:"",images:[]};const D=document.createElement("div");D.innerHTML=R;const L=D.querySelectorAll("img"),B=Array.from(L).map(z=>z.src).filter(z=>z);L.forEach(z=>z.remove());const O=D.innerHTML;let P=D.innerHTML;return P=P.replace(/<[^>]*>/g,"").trim(),{text:P,htmlText:O,images:B}},{text:p,htmlText:g,images:b}=m(t.content),v=[...t.images||[],...b,...t.image_urls||[],...(t.attachments||[]).filter(R=>R.type==="image").map(R=>R.url)],N=v.length>0;return n.jsxs("div",{className:"flex-shrink-0 w-80 bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:e,children:[N&&n.jsxs("div",{className:"h-48 bg-slate-100 overflow-hidden relative",children:[n.jsx("img",{src:v[0],alt:"User uploaded content",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:R=>{R.target.style.display="none"}}),v.length>1&&n.jsxs("div",{className:"absolute top-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:["+",v.length-1]})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("img",{src:((k=t.profiles)==null?void 0:k.avatar_url)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((C=t.profiles)==null?void 0:C.full_name)||"User")}&background=6366f1&color=ffffff`,alt:((E=t.profiles)==null?void 0:E.full_name)||"User",className:"w-10 h-10 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-semibold text-slate-900 text-sm truncate",children:((A=t.profiles)==null?void 0:A.full_name)||"Anonymous"}),((M=t.profiles)==null?void 0:M.organization_name)&&n.jsx("p",{className:"text-xs text-slate-500 truncate",children:t.profiles.organization_name})]}),n.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:c(t.created_at)})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:`text-slate-700 text-sm leading-relaxed ${N?"line-clamp-4":"line-clamp-[12]"}`,children:h(p,g)})}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Nt,{size:14}),n.jsx("span",{children:r})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Jn,{size:14}),n.jsx("span",{children:i})]}),n.jsx("div",{className:"ml-auto text-blue-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:"View Post →"})]})]})]})},_4={nonprofit:{name:"Nonprofit Community",icon:"🏛️",channelTag:"#nonprofit-community",dbChannel:"nonprofit-community"},foundation:{name:"Foundation Community",icon:"💰",channelTag:"#foundation-community",dbChannel:"foundation-community"},education:{name:"Education Community",icon:"🎓",channelTag:"#education-community",dbChannel:"education-community"},healthcare:{name:"Healthcare Community",icon:"🏥",channelTag:"#healthcare-community",dbChannel:"healthcare-community"},government:{name:"Government Community",icon:"🏛️",channelTag:"#government-community",dbChannel:"government-community"},religious:{name:"Religious Community",icon:"⛪",channelTag:"#religious-community",dbChannel:"religious-community"},forprofit:{name:"Social Enterprise Community",icon:"🏢",channelTag:"#social-enterprise-community",dbChannel:"forprofit-community"}},Lre=t=>t?t.split(".")[0].toLowerCase():null,$re=t=>t&&_4[t]?_4[t]:null,fR=({posts:t,onViewMore:e,onPostClick:s,organizationInfo:r})=>{const a=Lre(r==null?void 0:r.type),i=$re(a),o=c=>{const d=document.getElementById("hello-community-scroll");d&&d.scrollBy({left:c==="left"?-320:320,behavior:"smooth"})};return!r||!i?null:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:[n.jsx("span",{className:"mr-2",children:i.icon}),"Trending from ",i.name]}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Popular posts from your organization community"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[t&&t.length>0&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>o("left"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>o("right"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(da,{size:16})})]}),n.jsx("button",{onClick:e,className:"ml-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"View More"})]})]}),t&&t.length>0?n.jsx("div",{id:"hello-community-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:t.map(c=>n.jsx(zre,{post:c,onClick:()=>s(c)},c.id))}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:i.icon}),n.jsxs("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:["No posts yet in ",i.name]}),n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Be the first to share something with your community!"}),n.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Start Conversation"})]})]})};fR.propTypes={posts:Ue.array.isRequired,onViewMore:Ue.func.isRequired,onPostClick:Ue.func.isRequired,organizationInfo:Ue.object};const pR=({grant:t,onClick:e,onSave:s,onUnsave:r,isSaved:a})=>{var b,v,N,j,w;const i=_=>{if(!_)return"No deadline";const k=new Date(_),C=new Date,E=k.getTime()-C.getTime(),A=Math.ceil(E/(1e3*60*60*24));return A<0?"Expired":A===0?"Due today":A===1?"Due tomorrow":A<=7?`${A} days left`:k.toLocaleDateString("en-US",{month:"short",day:"numeric"})},o=_=>{if(!_)return"Amount varies";if(typeof _=="string"&&_.includes("$"))return _;const k=(_==null?void 0:_.toString().replace(/[^0-9]/g,""))||"0",C=parseInt(k);return C>=1e6?`$${(C/1e6).toFixed(1)}M`:C>=1e3?`$${(C/1e3).toFixed(0)}K`:`$${C.toLocaleString()}`},c=_=>{if(!_)return"bg-slate-100 text-slate-600";const k=new Date(_),C=new Date,E=Math.ceil((k.getTime()-C.getTime())/(1e3*60*60*24));return E<0?"bg-red-100 text-red-700":E<=3?"bg-orange-100 text-orange-700":E<=7?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"},d=_=>{const k={nonprofit:"bg-rose-100 text-rose-700 border-rose-200","501(c)(3)":"bg-rose-100 text-rose-700 border-rose-200",education:"bg-indigo-100 text-indigo-700 border-indigo-200",healthcare:"bg-emerald-100 text-emerald-700 border-emerald-200",government:"bg-blue-100 text-blue-700 border-blue-200",foundation:"bg-purple-100 text-purple-700 border-purple-200","for profit":"bg-green-100 text-green-700 border-green-200",religious:"bg-amber-100 text-amber-700 border-amber-200",international:"bg-cyan-100 text-cyan-700 border-cyan-200",individual:"bg-orange-100 text-orange-700 border-orange-200","local government":"bg-sky-100 text-sky-700 border-sky-200"};for(const[C,E]of Object.entries(k))if(_.includes(C))return E;return"bg-slate-100 text-slate-700 border-slate-200"},h=_=>{_.stopPropagation(),a?r==null||r(t.id):s==null||s(t.id)},m={name:((b=t.organization)==null?void 0:b.name)||t.foundation_name||t.foundationName||t.funder_name||"Unknown Foundation",imageUrl:((v=t.organization)==null?void 0:v.image_url)||t.funder_logo_url||null,bannerUrl:((N=t.organization)==null?void 0:N.banner_image_url)||null},p={title:t.title||"Untitled Grant",description:t.description||"No description available",fundingAmount:t.funding_amount_text||t.fundingAmount||t.max_funding_amount,dueDate:t.due_date||t.dueDate||t.deadline,location:t.location||((w=(j=t.locations)==null?void 0:j[0])==null?void 0:w.name)||"Location varies",grantType:t.grant_type||t.grantType},g=_=>{if(_==="Unknown Foundation")return"💰";const k=_.split(" ");return k.length>1?(k[0][0]+k[1][0]).toUpperCase():_.substring(0,2).toUpperCase()};return n.jsxs("div",{className:"flex-shrink-0 w-80 bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer group relative transform hover:-translate-y-1",onClick:e,children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-16 bg-gradient-to-br from-slate-100 via-white to-slate-100",children:m.bannerUrl&&n.jsx("img",{src:m.bannerUrl,alt:`${m.name} banner`,className:"w-full h-full object-cover",onError:_=>{_.target.style.display="none"}})}),n.jsxs("div",{className:"absolute bottom-0 left-4 translate-y-1/2 transform transition-transform duration-300 group-hover:scale-110",children:[m.imageUrl?n.jsx("img",{src:m.imageUrl,alt:`${m.name} logo`,className:"h-10 w-10 rounded-lg object-cover border-2 border-white shadow-lg bg-white",onError:_=>{_.target.style.display="none",_.target.nextSibling.style.display="flex"}}):null,n.jsx("div",{className:`h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-bold text-xs shadow-lg border-2 border-white ${m.imageUrl?"hidden":"flex"}`,children:g(m.name)})]}),n.jsxs("div",{className:"absolute top-2 right-2 z-10 flex flex-col gap-1",children:[n.jsx("div",{className:`text-xs font-medium px-2 py-1 rounded-full ${c(p.dueDate)}`,children:i(p.dueDate)}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-sm flex items-center gap-1",children:[n.jsx(zi,{size:8,fill:"currentColor"}),t.save_count||0]})]})]}),n.jsxs("div",{className:"px-4 pt-6 pb-4",children:[n.jsx("div",{className:"mb-3",children:n.jsx("p",{className:"font-semibold text-slate-800 text-sm truncate",children:m.name})}),n.jsx("h4",{className:"font-bold text-slate-900 text-base mb-3 line-clamp-2 leading-tight group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300",children:p.title}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed line-clamp-3 mb-4",children:p.description}),p.location!=="Location varies"&&n.jsxs("div",{className:"flex items-center text-xs mb-4",children:[n.jsx(Lt,{size:12,className:"mr-1 text-blue-500"}),n.jsx("span",{className:"text-slate-600 truncate",children:p.location})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-2 border border-green-200 shadow-sm",children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:[n.jsx(an,{size:14,className:"text-green-600"}),n.jsx("span",{className:"text-sm font-bold text-green-800",children:o(p.fundingAmount)})]})}),t.eligible_organization_types&&t.eligible_organization_types.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Eligible Organizations"}),n.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[t.eligible_organization_types.slice(0,2).map((_,k)=>{const C=_.replace(/^\d+\.\s*/,"").replace(/([A-Z])/g," $1").trim(),E=d(C.toLowerCase());return n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${E}`,children:C},k)}),t.eligible_organization_types.length>2&&n.jsxs("span",{className:"text-xs text-slate-500",children:["+",t.eligible_organization_types.length-2," more"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:h,className:`p-2 rounded-lg transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 ${a?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":"bg-white text-slate-500 border border-slate-200 hover:bg-slate-50"}`,children:n.jsx(zi,{size:14,fill:a?"currentColor":"none"})}),n.jsx("div",{className:"text-blue-600 font-medium text-sm opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:"View Details →"})]})]})]})]})},gR=({currentUserProfile:t,onOpenGrantModal:e,trendingGrants:s=[],onSaveGrant:r,onUnsaveGrant:a,savedGrantIds:i=new Set})=>{const o=bt(),[c,d]=y.useState(!1),h=g=>{const b=document.getElementById("trending-grants-scroll");b&&b.scrollBy({left:g==="left"?-320:320,behavior:"smooth"})},m=()=>{o("/grants")},p=g=>{e?e(g):o(`/grants?open_grant=${g.id}`)};return c?n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Trending Grants"})}),n.jsx("div",{className:"flex space-x-4 overflow-hidden",children:[...Array(3)].map((g,b)=>n.jsx("div",{className:"flex-shrink-0 w-80 bg-slate-100 rounded-xl h-64 animate-pulse"},b))})]}):n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[n.jsx(Cs,{className:"text-green-500",size:24}),"Trending Grants"]}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Popular funding opportunities from the community"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[s.length>0&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>h("left"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>h("right"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(da,{size:16})})]}),n.jsx("button",{onClick:m,className:"ml-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"View All Grants"})]})]}),s.length>0?n.jsx("div",{id:"trending-grants-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:s.map(g=>n.jsx(pR,{grant:g,onClick:()=>p(g),onSave:r,onUnsave:a,isSaved:i.has(g.id)},g.id))}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[n.jsx(Cs,{size:48,className:"mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No trending grants yet"}),n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Check back later for popular funding opportunities!"}),n.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse All Grants"})]})]})};gR.propTypes={currentUserProfile:Ue.object,onOpenGrantModal:Ue.func,trendingGrants:Ue.array,onSaveGrant:Ue.func,onUnsaveGrant:Ue.func,savedGrantIds:Ue.object};pR.propTypes={grant:Ue.object.isRequired,onClick:Ue.func.isRequired,onSave:Ue.func,onUnsave:Ue.func,isSaved:Ue.bool};const xR=({title:t,timeAgo:e,image:s,url:r,category:a})=>n.jsxs("div",{className:"flex-shrink-0 w-80 h-64 bg-white rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group relative",onClick:()=>r&&window.open(r,"_blank"),children:[s?n.jsx("img",{src:s,alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:n.jsx(Br,{size:32,className:"text-slate-400"})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),n.jsx("div",{className:"absolute top-3 left-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white text-xs font-medium px-2 py-1 rounded-full border border-white/30",children:a||"News"}),n.jsxs("div",{className:"flex items-center text-white/80 text-xs",children:[n.jsx("span",{className:"w-1 h-1 bg-white/60 rounded-full mr-1"}),n.jsx("span",{children:e})]})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsx("h3",{className:"font-bold text-white text-lg leading-tight line-clamp-3 group-hover:text-blue-200 transition-colors",children:t})}),n.jsx("div",{className:"absolute inset-0 bg-blue-600/0 group-hover:bg-blue-600/10 transition-colors duration-200"})]});xR.propTypes={title:Ue.string.isRequired,timeAgo:Ue.string.isRequired,image:Ue.string,url:Ue.string,category:Ue.string};const bR=({news:t})=>{const e=s=>{const r=document.getElementById("dashboard-news-scroll");r&&r.scrollBy({left:s==="left"?-320:320,behavior:"smooth"})};return!t||t.length===0?null:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Trending World News"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>e("left"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>e("right"),className:"p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsx(da,{size:16})})]})]}),n.jsx("div",{id:"dashboard-news-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:t.map(s=>n.jsx(xR,{title:s.title,timeAgo:s.timeAgo,image:s.image,url:s.url,category:s.category},s.id))})]})};bR.propTypes={news:Ue.array.isRequired};const vR=({post:t,isOpen:e,onClose:s,currentUserProfile:r})=>{var D,L,B,O,P,z;const[a,i]=y.useState((t==null?void 0:t.likes_count)||0),[o,c]=y.useState((t==null?void 0:t.comments_count)||0),[d,h]=y.useState(null),[m,p]=y.useState([]),[g,b]=y.useState(((D=t==null?void 0:t.reactions)==null?void 0:D.summary)||[]),[v,N]=y.useState(!1),[j,w]=y.useState(!1),_=y.useRef(null);y.useEffect(()=>{var q;t&&(i(t.likes_count||0),c(t.comments_count||0),b(((q=t.reactions)==null?void 0:q.summary)||[]))},[t]);const k=q=>{const I=new Date,V=new Date(q),H=Math.floor((I-V)/(1e3*60*60));return H<1?"Just now":H<24?`${H}h ago`:`${Math.floor(H/24)}d ago`};y.useEffect(()=>{e&&t&&(async()=>{if(!(!r||!(t!=null&&t.id)))try{const{data:I,error:V}=await $.from("post_likes").select("reaction_type").eq("post_id",t.id).eq("user_id",r.id).limit(1);if(V){console.error("Error checking reaction status:",V),h(null);return}h(I&&I.length>0?I[0].reaction_type:null)}catch(I){console.error("Error in checkReactionStatus:",I),h(null)}})()},[r,t==null?void 0:t.id,e]),y.useEffect(()=>{e&&t&&(async()=>{if(a<=0||!(t!=null&&t.id)){p([]);return}try{const{data:I,error:V}=await $.from("post_likes").select("user_id, reaction_type, created_at").eq("post_id",t.id).order("created_at",{ascending:!1});if(V){console.error("Error fetching likes:",V),p([]);return}if(I&&I.length>0){const H=I.map(J=>J.user_id),{data:Y,error:U}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name, role").in("id",H);if(U){console.error("Error fetching profiles:",U),p([]);return}const K=I.map(J=>{const W=Y==null?void 0:Y.find(ee=>ee.id===J.user_id);return{user_id:J.user_id,profile_id:W==null?void 0:W.id,full_name:W==null?void 0:W.full_name,avatar_url:W==null?void 0:W.avatar_url,title:W==null?void 0:W.title,organization_name:W==null?void 0:W.organization_name,role:W==null?void 0:W.role,reaction_type:J.reaction_type,created_at:J.created_at}}).filter(J=>J.full_name);p(K)}else p([])}catch(I){console.error("Error fetching reactors:",I),p([])}})()},[t==null?void 0:t.id,a,e]);const C=async q=>{if(!(!r||!(t!=null&&t.id)))try{if(d===q){const{error:I}=await $.from("post_likes").delete().eq("post_id",t.id).eq("user_id",r.id);if(I){console.error("Error removing reaction:",I);return}h(null),i(V=>Math.max(0,V-1))}else{const{error:I}=await $.from("post_likes").upsert({post_id:t.id,user_id:r.id,reaction_type:q},{onConflict:"post_id,user_id"});if(I){console.error("Error adding reaction:",I);return}h(q),d||i(V=>V+1)}}catch(I){console.error("Error handling reaction:",I)}},E=()=>{clearTimeout(_.current),w(!0)},A=()=>{_.current=setTimeout(()=>{w(!1)},300)},M=q=>{console.log("Image clicked:",q)};if(!e||!t)return null;const R=t.image_urls&&t.image_urls.length>0?t.image_urls:t.image_url?[t.image_url]:[];return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:((L=t.profiles)==null?void 0:L.avatar_url)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((B=t.profiles)==null?void 0:B.full_name)||"User")}&background=6366f1&color=ffffff`,alt:((O=t.profiles)==null?void 0:O.full_name)||"User",className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:((P=t.profiles)==null?void 0:P.full_name)||"Anonymous"}),((z=t.profiles)==null?void 0:z.organization_name)&&n.jsx("p",{className:"text-sm text-slate-500",children:t.profiles.organization_name}),n.jsx("p",{className:"text-xs text-slate-400",children:k(t.created_at)})]})]}),n.jsx("button",{onClick:s,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Ke,{size:20})})]}),n.jsxs("div",{className:"p-6 max-h-[calc(90vh-180px)] overflow-y-auto",children:[n.jsx(Y1,{content:t.content||"",images:R,tags:t.tags,onImageClick:M}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 my-4 min-h-[20px]",children:[n.jsxs("div",{className:"relative",onMouseEnter:E,onMouseLeave:A,children:[a>0&&n.jsxs("div",{className:"flex items-center cursor-pointer",children:[n.jsx("div",{className:"flex items-center -space-x-1",children:(g||[]).sort((q,I)=>I.count-q.count).slice(0,3).map(({type:q})=>{const I=zo.find(V=>V.type===q);return I?n.jsx("div",{className:`p-0.5 rounded-full ${I.color} border-2 border-white`,children:n.jsx(I.Icon,{size:12,className:"text-white"})},q):null})}),n.jsxs("span",{className:"ml-2 text-sm text-slate-600",children:[a," ",a===1?"reaction":"reactions"]})]}),j&&a>0&&n.jsx("div",{className:"absolute top-full left-0 mt-2 p-3 bg-white rounded-lg shadow-lg border border-slate-200 z-10",children:n.jsxs("div",{className:"text-xs text-slate-600",children:[m.slice(0,3).map(q=>q.full_name).join(", "),m.length>3&&` and ${m.length-3} others`]})})]}),o>0&&n.jsxs("span",{className:"cursor-pointer hover:underline",onClick:()=>N(!v),children:[o," ",o===1?"comment":"comments"]})]}),n.jsx(K1,{onReaction:C,onComment:()=>N(!v),onShare:()=>alert("Share functionality not implemented yet."),selectedReaction:d,disabled:!1}),v&&n.jsx("div",{className:"mt-4 border-t pt-4 max-h-96 overflow-y-auto",children:n.jsx(Bj,{post:t,currentUserProfile:r,onCommentAdded:()=>c(q=>q+1),onCommentDeleted:()=>c(q=>Math.max(0,q-1))})})]})]})})};vR.propTypes={post:Ue.object,isOpen:Ue.bool.isRequired,onClose:Ue.func.isRequired,currentUserProfile:Ue.object};Ue.func.isRequired;Ue.elementType.isRequired,Ue.string.isRequired,Ue.oneOfType([Ue.string,Ue.number]).isRequired,Ue.string,Ue.string.isRequired,Ue.func;const C4={nonprofit:{dbChannel:"nonprofit-community"},foundation:{dbChannel:"foundation-community"},education:{dbChannel:"education-community"},healthcare:{dbChannel:"healthcare-community"},government:{dbChannel:"government-community"},religious:{dbChannel:"religious-community"},forprofit:{dbChannel:"forprofit-community"}},k4=t=>t?t.split(".")[0].toLowerCase():null,E4=t=>t&&C4[t]?C4[t]:null,Fre=t=>{const[e,s]=y.useState([]);return y.useEffect(()=>{if((async()=>{if(!(t!=null&&t.type)){s([]);return}try{const a=k4(t.type),i=E4(a);if(!i){s([]);return}const o=i.dbChannel;try{const{data:h,error:m}=await $.rpc("get_community_posts_by_org_type",{user_org_type:a,page_offset:0,page_size:10});if(!m&&h){const p=h.map(g=>({...g,profiles:{id:g.profile_id,full_name:g.profile_full_name,avatar_url:g.profile_avatar_url,title:g.profile_title,organization_name:g.profile_organization_name,role:g.profile_role}}));if(p.length>0){const g=[...new Set(p.map(_=>_.profile_id))],{data:b}=await $.from("organization_memberships").select("profile_id, organizations!inner(name)").in("profile_id",g).order("joined_at",{ascending:!1}),v={};b==null||b.forEach(_=>{v[_.profile_id]||(v[_.profile_id]=_.organizations.name)});const N=p.map(_=>_.id),{data:j}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",N),w=p.map(_=>{const k=v[_.profile_id],E=((j==null?void 0:j.filter(A=>A.post_id===_.id))||[]).reduce((A,M)=>{const R=M.reaction_type||"like";return A[R]=(A[R]||0)+1,A},{});return{..._,profiles:{..._.profiles,organization_name:k||_.profiles.organization_name},reactions:{summary:Object.entries(E).map(([A,M])=>({type:A,count:M}))}}});s(w);return}}}catch(h){console.warn("⚠️ RPC function failed, falling back to direct query:",h)}const{data:c,error:d}=await $.from("posts").select("*").eq("channel",o).order("created_at",{ascending:!1}).limit(10);if(d)throw d;if(c&&c.length>0){const h=[...new Set(c.map(j=>j.profile_id))],{data:m}=await $.from("profiles").select("id, full_name, avatar_url").in("id",h),{data:p}=await $.from("organization_memberships").select("profile_id, organizations!inner(name)").in("profile_id",h).order("joined_at",{ascending:!1}),g={};p==null||p.forEach(j=>{g[j.profile_id]||(g[j.profile_id]=j.organizations.name)});const b=c.map(j=>j.id),{data:v}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",b),N=c.map(j=>{const w=m==null?void 0:m.find(E=>E.id===j.profile_id),_=g[j.profile_id],C=((v==null?void 0:v.filter(E=>E.post_id===j.id))||[]).reduce((E,A)=>{const M=A.reaction_type||"like";return E[M]=(E[M]||0)+1,E},{});return{...j,profiles:{...w,organization_name:_},reactions:{summary:Object.entries(C).map(([E,A])=>({type:E,count:A}))}}});s(N)}else s([])}catch(a){console.error("Error fetching Hello Community posts:",a),s([])}})(),t!=null&&t.type&&e.length>0){const a=k4(t.type),i=E4(a);if(i){const o=i.dbChannel,c=$.channel(`dashboard-community-posts-${o}`);return c.on("postgres_changes",{event:"*",schema:"public",table:"post_likes",filter:`post_id.in.(${e.map(d=>d.id).join(",")})`},async d=>{const{eventType:h,new:m,old:p}=d,g=(m==null?void 0:m.post_id)||(p==null?void 0:p.post_id);if(!(!g||!e.find(v=>v.id===g)))try{const{data:v}=await $.from("post_likes").select("reaction_type").eq("post_id",g),N=(v||[]).reduce((w,_)=>{const k=_.reaction_type||"like";return w[k]=(w[k]||0)+1,w},{}),j=Object.values(N).reduce((w,_)=>w+_,0);s(w=>w.map(_=>_.id===g?{..._,likes_count:j,reactions:{summary:Object.entries(N).map(([k,C])=>({type:k,count:C}))}}:_))}catch(v){console.error("Error updating community post reactions:",v)}}).subscribe(),()=>{$.removeChannel(c)}}}},[t==null?void 0:t.type,t==null?void 0:t.id]),e},Ire=()=>{const[t,e]=y.useState([]);return y.useEffect(()=>{(async()=>{try{const r=await ag.getGlobalBreakingNews();e(Array.isArray(r)?r.slice(0,6):[])}catch{e([])}})()},[]),t},Bre=()=>{const[t,e]=y.useState([]),{profile:s}=_t()||{};return y.useEffect(()=>((async()=>{try{const{data:a,error:i}=await $.from("posts").select("*").eq("channel","hello-world").order("created_at",{ascending:!1}).limit(10);if(i)throw i;if(a&&a.length>0){const o=[...new Set(a.map(g=>g.profile_id))],{data:c}=await $.from("profiles").select("id, full_name, avatar_url").in("id",o),d=await tK(o),h=a.map(g=>g.id),{data:m}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",h),p=a.map(g=>{const b=c==null?void 0:c.find(w=>w.id===g.profile_id),v=d[g.profile_id],j=((m==null?void 0:m.filter(w=>w.post_id===g.id))||[]).reduce((w,_)=>{const k=_.reaction_type||"like";return w[k]=(w[k]||0)+1,w},{});return{...g,profiles:{...b,organization_name:(v==null?void 0:v.organization_name)||null},reactions:{summary:Object.entries(j).map(([w,_])=>({type:w,count:_}))}}});e(p)}else e([])}catch{e([])}})(),s&&d0.createSubscription("hello-world",$,s,{onLikeChange:async a=>{const{new:i,old:o}=a,c=(i==null?void 0:i.post_id)||(o==null?void 0:o.post_id);if(c)try{const{data:d}=await $.from("post_likes").select("reaction_type").eq("post_id",c),h=(d||[]).reduce((p,g)=>{const b=g.reaction_type||"like";return p[b]=(p[b]||0)+1,p},{}),m=Object.values(h).reduce((p,g)=>p+g,0);e(p=>p.map(g=>g.id===c?{...g,likes_count:m,reactions:{summary:Object.entries(h).map(([b,v])=>({type:b,count:v}))}}:g))}catch(d){console.warn("Error updating post reactions:",d)}}}),()=>{s&&d0.removeSubscription("hello-world",$)}),[s==null?void 0:s.id]),t},Ure=()=>{const[t,e]=y.useState([]);return y.useEffect(()=>{(async()=>{try{let r,a;const{data:i,error:o}=await $.from("grants").select(`
                        *,
                        organizations!inner (
                            id,
                            name,
                            image_url,
                            banner_image_url,
                            slug
                        )
                    `).limit(15);if(o){const{data:d,error:h}=await $.from("grants").select("*").limit(15);r=d,a=h}else r=i,a=o;if(a||!r||r.length===0){e([]);return}const c=r.map(d=>{var h,m,p,g,b,v;return{id:d.id,title:d.title||"Untitled Grant",description:d.description||"No description available",foundation_name:((h=d.organizations)==null?void 0:h.name)||d.foundation_name||d.funder_name||d.organization_name||"Unknown Foundation",funder_name:((m=d.organizations)==null?void 0:m.name)||d.funder_name||d.foundation_name||d.organization_name||"Unknown Foundation",funding_amount_text:d.funding_amount_text||d.amount||"Amount varies",max_funding_amount:d.max_funding_amount||d.funding_amount||null,due_date:d.due_date||d.deadline||null,deadline:d.deadline||d.due_date||null,location:d.location||d.geographic_focus||"Location varies",grant_type:d.grant_type||d.type||null,created_at:d.created_at,save_count:0,application_url:d.application_url||d.url||d.website_url||"#",url:d.url||d.application_url||d.website_url||"#",eligible_organization_types:d.eligible_organization_types||d.taxonomy_codes||[],organization:{name:((p=d.organizations)==null?void 0:p.name)||d.foundation_name||d.funder_name||d.organization_name||"Unknown Foundation",image_url:((g=d.organizations)==null?void 0:g.image_url)||d.funder_logo_url||null,banner_image_url:((b=d.organizations)==null?void 0:b.banner_image_url)||null},funder_logo_url:d.funder_logo_url||((v=d.organizations)==null?void 0:v.image_url)||null}});try{const d=c.map(p=>p.id),{data:h,error:m}=await $.from("saved_grants").select("grant_id").in("grant_id",d);if(!m&&h){const p={};h.forEach(g=>{p[g.grant_id]=(p[g.grant_id]||0)+1}),c.forEach(g=>{g.save_count=p[g.id]||0}),c.sort((g,b)=>b.save_count!==g.save_count?b.save_count-g.save_count:new Date(b.created_at)-new Date(g.created_at))}}catch{c.sort((d,h)=>new Date(h.created_at)-new Date(d.created_at))}e(c.slice(0,10))}catch{e([])}})()},[]),{trendingGrants:t,setTrendingGrants:e}},Vre=t=>{const[e,s]=y.useState(null),[r,a]=y.useState({savedGrants:0,connections:0,followers:0,posts:0}),[i,o]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(t!=null&&t.id){o(!0);try{const d=await G1(t.id);s(d)}catch(d){console.error("Error fetching user organization data:",d),s(null)}finally{o(!1)}}})()},[t==null?void 0:t.id]),{organizationInfo:e,stats:r,loading:i}};function qre(){const{profile:t}=_t()||{},e=bt(),[s,r]=y.useState(null),[a,i]=y.useState(!1),[o,c]=y.useState(null),[d,h]=y.useState(!1),[m,p]=y.useState(new Set),{organizationInfo:g,loading:b}=Vre(t),v=Ire(),N=Bre(),{trendingGrants:j,setTrendingGrants:w}=Ure(),_=Fre(g);y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const{data:B,error:O}=await $.from("saved_grants").select("grant_id").eq("user_id",t.id);if(O)throw O;p(new Set(B.map(P=>P.grant_id)))}catch{}})()},[t==null?void 0:t.id]);const k=L=>{r(L),i(!0)},C=L=>{c(L),h(!0)},E=()=>{h(!1),c(null)},A=async L=>{if(t!=null&&t.id)try{p(O=>new Set(O).add(L)),w(O=>O.map(P=>P.id===L?{...P,save_count:(P.save_count||0)+1}:P));const{error:B}=await $.from("saved_grants").insert({user_id:t.id,grant_id:L});B&&(p(O=>{const P=new Set(O);return P.delete(L),P}),w(O=>O.map(P=>P.id===L?{...P,save_count:Math.max((P.save_count||1)-1,0)}:P)))}catch{p(B=>{const O=new Set(B);return O.delete(L),O}),w(B=>B.map(O=>O.id===L?{...O,save_count:Math.max((O.save_count||1)-1,0)}:O))}},M=async L=>{if(t!=null&&t.id)try{p(O=>{const P=new Set(O);return P.delete(L),P}),w(O=>O.map(P=>P.id===L?{...P,save_count:Math.max((P.save_count||1)-1,0)}:P));const{error:B}=await $.from("saved_grants").delete().eq("user_id",t.id).eq("grant_id",L);B&&(p(O=>new Set(O).add(L)),w(O=>O.map(P=>P.id===L?{...P,save_count:(P.save_count||0)+1}:P)))}catch{p(B=>new Set(B).add(L)),w(B=>B.map(O=>O.id===L?{...O,save_count:(O.save_count||0)+1}:O))}},R=()=>{e("/profile/hello-world")},D=()=>{e("/profile/hello-community")};return b?n.jsxs("div",{className:"space-y-6 animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/3"}),n.jsx("div",{className:"h-64 bg-slate-200 rounded"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((L,B)=>n.jsx("div",{className:"h-32 bg-slate-200 rounded"},B))})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsx(cR,{profile:t,organizationInfo:g}),n.jsx(uR,{currentUserProfile:t}),n.jsx(bR,{news:v}),n.jsx(mR,{posts:N,onViewMore:R,onPostClick:k}),n.jsx(fR,{posts:_,onViewMore:D,onPostClick:k,organizationInfo:g}),n.jsx(gR,{currentUserProfile:t,onOpenGrantModal:C,trendingGrants:j,onSaveGrant:A,onUnsaveGrant:M,savedGrantIds:m}),n.jsx(vR,{post:s,isOpen:a,onClose:()=>{i(!1),r(null)},currentUserProfile:t}),n.jsx(Kc,{grant:o,isOpen:d,onClose:E,session:{user:t},isSaved:o?m.has(o.id):!1,onSave:A,onUnsave:M})]})}const Hre={nonprofit:"nonprofit-community",foundation:"foundation-community",education:"education-community",healthcare:"healthcare-community",government:"government-community",religious:"religious-community",forprofit:"forprofit-community"},ww=[{id:"announcement",label:"Announcement",color:"bg-blue-100 text-blue-800"},{id:"funding",label:"Funding",color:"bg-green-100 text-green-800"},{id:"program",label:"Program",color:"bg-purple-100 text-purple-800"},{id:"partnership",label:"Partnership",color:"bg-indigo-100 text-indigo-800"},{id:"impact",label:"Impact",color:"bg-orange-100 text-orange-800"},{id:"research",label:"Research",color:"bg-teal-100 text-teal-800"},{id:"education",label:"Education",color:"bg-red-100 text-red-800"},{id:"healthcare",label:"Healthcare",color:"bg-pink-100 text-pink-800"},{id:"environment",label:"Environment",color:"bg-emerald-100 text-emerald-800"},{id:"community",label:"Community",color:"bg-yellow-100 text-yellow-800"}],Gre=["😊","😂","❤️","👍","🎉","🔥","💡","🚀","💯","⭐","🌟","💪","🙌","👏","🎯","💝"],A4=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-indigo-100 text-indigo-800","bg-orange-100 text-orange-800","bg-teal-100 text-teal-800","bg-red-100 text-red-800","bg-pink-100 text-pink-800"],Wre=t=>{if(!t)return"hello-community";const e=t.split(".")[0].toLowerCase();return Hre[e]||"hello-community"},Yre=()=>A4[Math.floor(Math.random()*A4.length)],Kre=t=>{const e=[];return t!=null&&t.content&&t.content.forEach(s=>{s.content&&s.content.forEach(r=>{if(r.type==="mention"&&r.attrs){const{id:a,label:i,type:o}=r.attrs;a&&i&&o&&e.push({displayName:i,id:a,type:o})}})}),e},yR=(t,e,s)=>{var r;return t?`Share an update for ${(e==null?void 0:e.name)||"your organization"}...`:`What's on your mind, ${((r=s==null?void 0:s.full_name)==null?void 0:r.split(" ")[0])||"there"}?`};function Jre({profile:t,organization:e,isOrganizationPost:s,onClick:r}){const a=yR(s,e,t);return n.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:s&&e?n.jsx(is,{src:e.image_url,fullName:e.name,size:"md"}):n.jsx(is,{src:t==null?void 0:t.avatar_url,fullName:t==null?void 0:t.full_name,size:"md"})}),n.jsx("div",{onClick:r,className:"flex-1 bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer rounded-full px-4 py-3 border border-slate-200",children:n.jsx("span",{className:"text-slate-500 text-sm",children:a})}),n.jsx("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white text-sm font-medium rounded-full hover:bg-blue-700 transition-colors",children:"Post"})]})})}var Xre=kse;const wR=(t,e,s)=>J0({extensions:[Z0,Xre.configure({placeholder:t,showOnlyWhenEditable:!0,showOnlyCurrent:!1,includeChildren:!0}),eg.extend({name:"mention",addAttributes(){var a;return{...(a=this.parent)==null?void 0:a.call(this),type:{default:null,parseHTML:i=>i.getAttribute("data-type"),renderHTML:i=>i.type?{"data-type":i.type}:{}}}},renderHTML({node:a,HTMLAttributes:i}){const{id:o,label:c,type:d}=a.attrs;return["span",{...i,class:"mention","data-id":o,"data-label":c,"data-type":d},`@${c}`]},parseHTML(){return[{tag:"span[data-type][data-id]",getAttrs:a=>({id:a.getAttribute("data-id"),label:a.getAttribute("data-label"),type:a.getAttribute("data-type")})},{tag:"span.mention",getAttrs:a=>({id:a.getAttribute("data-id"),label:a.getAttribute("data-label"),type:a.getAttribute("data-type")})}]}}).configure({suggestion:{items:async({query:a})=>{try{if(!a||a.length===0){if(!(e!=null&&e.id))return[];try{const{data:g}=await $.from("followers").select(`
                      following_id,
                      profiles!followers_following_id_fkey(id, full_name, title, organization_name, avatar_url, role)
                    `).eq("follower_id",e.id).limit(5);return(g||[]).map(b=>({id:b.profiles.id,name:b.profiles.full_name,type:"user",avatar_url:b.profiles.avatar_url,title:b.profiles.title,organization_name:b.profiles.organization_name,role:b.profiles.role}))}catch(g){return console.error("Error fetching following for mention suggestions:",g),[]}}if(a.length<2)return[];const i=`%${a.trim()}%`,{data:o,error:c}=await $.from("profiles").select("id, full_name, title, organization_name, avatar_url, role").or(`full_name.ilike.${i},title.ilike.${i},organization_name.ilike.${i}`).limit(5);c&&console.error("Error searching profiles:",c);const{data:d,error:h}=await $.from("organizations").select("id, name, type, tagline, image_url, slug").ilike("name",i).limit(5);h&&console.error("Error searching organizations:",h);const m=(o||[]).map(g=>({id:g.id,name:g.full_name,type:"user",avatar_url:g.avatar_url,title:g.title,organization_name:g.organization_name,role:g.role})),p=(d||[]).map(g=>{const b=`${g.type}-${g.id}`,v=N=>({nonprofit:"Nonprofit",funder:"Funder",foundation:"Foundation",education:"Education",healthcare:"Healthcare",government:"Government",religious:"Religious",forprofit:"For-Profit"})[N]||"Organization";return{id:b,name:g.name,type:"organization",avatar_url:g.image_url,title:g.tagline||`${v(g.type)} Organization`,organization_name:v(g.type),role:g.type,_orgType:g.type,_orgId:g.id,_slug:g.slug}});return[...m,...p]}catch(i){return console.error("Exception during mention search:",i),[]}},render:()=>{let a,i;return{onStart:o=>{a=new X0(ng,{props:o,editor:o.editor}),i=Xi("body",{getReferenceClientRect:o.clientRect,appendTo:()=>document.body,content:a.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",duration:0,zIndex:9999,maxWidth:400,theme:"light-border"})},onUpdate:o=>{a.updateProps(o),i[0].setProps({getReferenceClientRect:o.clientRect})},onKeyDown:o=>{var c;return o.event.key==="Escape"?(i[0].hide(),!0):(c=a.ref)==null?void 0:c.onKeyDown(o)},onExit:()=>{i&&i[0]&&i[0].destroy(),a&&a.destroy(),i=null,a=null}}}}})],content:"<p></p>",editorProps:{attributes:{class:"prose-sm outline-none text-slate-700 placeholder:text-slate-400 bg-white",style:"line-height: 1.5; min-height: 120px; white-space: pre-wrap;"}},onUpdate:({editor:a})=>{const i=a.isEmpty;s&&s(i)}});function Qre({placeholderText:t,profile:e,onUpdate:s,editor:r}){const a=wR(t,e,s),i=r||a;return i?n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"w-full p-4 bg-slate-50 rounded-lg border border-slate-200 focus-within:ring-2 focus-within:ring-blue-500 transition-all",children:[n.jsx("style",{children:`
          .post-modal-editor .ProseMirror {
            outline: none;
            border: none;
            padding: 0;
            margin: 0;
            background: transparent;
            min-height: 180px;
          }
          .post-modal-editor .mention {
            background-color: #e0e7ff;
            color: #3730a3;
            padding: 1px 4px;
            border-radius: 4px;
            font-weight: 500;
            text-decoration: none;
            cursor: pointer;
          }
          .post-modal-editor .mention:hover {
            background-color: #c7d2fe;
          }
          .post-modal-editor p {
            margin: 0;
            line-height: 1.5;
          }
          .post-modal-editor .ProseMirror-focused {
            outline: none;
          }
          .post-modal-editor .is-editor-empty:first-child::before {
            color: #9ca3af;
            content: attr(data-placeholder);
            float: left;
            height: 0;
            pointer-events: none;
          }
          `}),n.jsx(K0,{editor:i,className:"post-modal-editor"})]})}):null}function Zre({isOpen:t,onEmojiSelect:e,onClose:s}){return t?n.jsx("div",{className:"absolute bottom-full mb-2 bg-white border border-slate-200 rounded-lg shadow-lg p-4 z-10 w-80",children:n.jsx("div",{className:"grid grid-cols-8 gap-3",children:Gre.map((r,a)=>n.jsx("button",{onClick:()=>e(r),className:"w-10 h-10 flex items-center justify-center hover:bg-slate-100 rounded-lg transition-colors text-lg",children:r},a))})}):null}function jR({selectedTags:t,onTagToggle:e,onRemoveTag:s,isOpen:r,onClose:a}){const[i,o]=y.useState(""),c=h=>{if(t.length>=6&&!t.some(p=>p.id===h))return;if(t.find(p=>p.id===h))s(h);else{const p=ww.find(g=>g.id===h);p&&e(h,p)}},d=()=>{if(!i.trim()||t.length>=6)return;const h={id:`custom-${Date.now()}`,label:i.trim(),color:Yre(),isCustom:!0};e(h.id,h),o("")};return n.jsxs(n.Fragment,{children:[t.length>0&&n.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.map(h=>n.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h.color} border`,children:[h.label,n.jsx("button",{onClick:()=>s(h.id),className:"ml-1 text-current hover:text-red-600",children:n.jsx(Ke,{size:12})})]},h.id))}),r&&n.jsxs("div",{className:"absolute bottom-full mb-2 bg-white border border-slate-200 rounded-lg shadow-lg p-4 z-10 w-96 max-h-80 overflow-y-auto",children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-slate-800 mb-2",children:["Select Tags (",t.length,"/6)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ww.map(h=>n.jsx("button",{onClick:()=>c(h.id),className:`px-2 py-1 rounded-full text-xs font-medium border transition-colors ${t.some(m=>m.id===h.id)?h.color:"bg-slate-100 text-slate-700 border-slate-200 hover:bg-slate-200"}`,children:h.label},h.id))})]}),t.length<6&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-slate-800 mb-2",children:"Add Custom Tag"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{type:"text",value:i,onChange:h=>o(h.target.value),onKeyPress:h=>h.key==="Enter"&&d(),placeholder:"Tag name",className:"flex-1 px-2 py-1 text-sm border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:20}),n.jsx("button",{onClick:d,disabled:!i.trim(),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]})]})]})]})}function eae({editor:t,fileInputRef:e,uploading:s,selectedImages:r,selectedTags:a,onTagToggle:i,onRemoveTag:o,showEmojiPicker:c,setShowEmojiPicker:d,showTagSelector:h,setShowTagSelector:m,onEmojiSelect:p,canSubmit:g,isLoading:b,onSubmit:v}){const N=y.useRef(null);return n.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",onClick:()=>t==null?void 0:t.chain().focus().insertContent("@").run(),children:[n.jsx(Fw,{size:18}),n.jsx("span",{className:"text-sm",children:"Mention"})]}),n.jsxs("button",{onClick:()=>{var j;return(j=e.current)==null?void 0:j.click()},disabled:s||r.length>=6,className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:[n.jsx(hn,{size:18}),n.jsx("span",{className:"text-sm",children:"Photos"})]}),n.jsxs("div",{className:"relative emoji-picker-container",children:[n.jsxs("button",{onClick:()=>d(!c),className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[n.jsx(P3,{size:18}),n.jsx("span",{className:"text-sm",children:"Emoji"})]}),n.jsx(Zre,{isOpen:c,onEmojiSelect:p,onClose:()=>d(!1)})]}),n.jsxs("div",{className:"relative tag-selector-container",ref:N,children:[n.jsxs("button",{onClick:()=>m(!h),className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[n.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold",children:"#"}),n.jsx("span",{className:"text-sm",children:"Tags"}),a.length>0&&n.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full",children:a.length})]}),n.jsx(jR,{selectedTags:a,onTagToggle:i,onRemoveTag:o,isOpen:h,onClose:()=>m(!1)})]})]}),n.jsxs("button",{onClick:v,disabled:!g,className:"px-8 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[s&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:b?"Posting...":"Post"})]})]})}function tae({selectedImages:t,onImageSelect:e,onRemoveImage:s,fileInputRef:r,uploading:a}){const i=o=>{const c=Array.from(o.target.files),d=6;if(t.length+c.length>d){alert(`You can only add up to ${d} images per post.`);return}const h=c.filter(m=>m.type.startsWith("image/")&&m.size<=10*1024*1024);h.length<c.length&&alert("Some images were invalid (must be under 10MB)."),h.length>0&&e(h),o.target.value=""};return n.jsxs(n.Fragment,{children:[t.length>0&&n.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map(o=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:o.preview,alt:"Selected",className:"w-full h-32 object-cover rounded-lg border border-slate-200"}),n.jsx("button",{onClick:()=>s(o.id),disabled:a,className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg disabled:opacity-50",children:n.jsx(Ke,{size:14})})]},o.id))}),n.jsx("input",{ref:r,type:"file",accept:"image/*",multiple:!0,onChange:i,className:"hidden"})]})}const sae=()=>{const[t,e]=y.useState([]),[s,r]=y.useState(!1),a=d=>{const h=d.map(m=>({file:m,preview:URL.createObjectURL(m),id:Math.random().toString(36).substr(2,9)}));e(m=>[...m,...h])},i=d=>{e(h=>{const m=h.filter(g=>g.id!==d),p=h.find(g=>g.id===d);return p&&URL.revokeObjectURL(p.preview),m})},o=async()=>{if(t.length===0)return[];r(!0);try{const d=t.map(async h=>{const m=h.file.name.split(".").pop(),p=`${Math.random().toString(36).substring(2)}.${m}`,{data:g,error:b}=await $.storage.from("post-images").upload(p,h.file);if(b)throw b;const{data:v}=$.storage.from("post-images").getPublicUrl(p);return v.publicUrl});return Promise.all(d)}finally{r(!1)}},c=()=>{t.forEach(d=>URL.revokeObjectURL(d.preview)),e([])};return y.useEffect(()=>()=>{t.forEach(d=>URL.revokeObjectURL(d.preview))},[]),{selectedImages:t,uploading:s,addImages:a,removeImage:i,uploadImages:o,clearImages:c}},nae=t=>{if(!t)return[];const e=document.createElement("div");e.innerHTML=t;const s=e.querySelectorAll("span.mention[data-id][data-type]");return Array.from(s).map(r=>({id:r.getAttribute("data-id"),displayName:r.getAttribute("data-label")||r.textContent.replace("@",""),type:r.getAttribute("data-type")}))},rae=async(t,e,s,r=!1)=>{if(!(e!=null&&e.length))return{success:!0,count:0};try{const a=new Set([s]),i=[],o=e.filter(d=>d.type==="user");for(const d of o)if(!a.has(d.id)){a.add(d.id);const h={user_id:d.id,actor_id:s,type:"mention",is_read:!1};r?h.organization_post_id=t:h.post_id=t,i.push(h)}const c=e.filter(d=>d.type==="organization");if(c.length>0){const d=c.map(m=>{const[p,g]=m.id.split("-");return $.from("organization_memberships").select("profile_id").eq("organization_id",parseInt(g)).eq("organization_type",p)});(await Promise.all(d)).forEach(m=>{m.data&&m.data.forEach(p=>{if(!a.has(p.profile_id)){a.add(p.profile_id);const g={user_id:p.profile_id,actor_id:s,type:"organization_mention",is_read:!1};r?g.organization_post_id=t:g.post_id=t,i.push(g)}})})}if(i.length>0){const{error:d}=await $.from("notifications").insert(i);if(d)throw d}return{success:!0,count:i.length}}catch(a){return console.error("Error creating mention notifications:",a),{success:!1,error:a.message}}},aae=async(t,e,s,r=!1)=>{try{const a=nae(e);return a.length===0?{success:!0,count:0}:await rae(t,a,s,r)}catch(a){return console.error("Error processing mentions for notifications:",a),{success:!1,error:a.message}}},iae=()=>{const[t,e]=y.useState(!1),[s,r]=y.useState("");return{isLoading:t,error:s,submitPost:async({editor:i,profile:o,selectedTags:c,imageUrls:d,channel:h,organizationId:m,organizationType:p,isOrganizationPost:g,onSuccess:b})=>{if(!o){r("You must be logged in to post.");return}if(!(!i.getText().trim()&&d.length===0)){e(!0),r("");try{const{data:{user:N}}=await $.auth.getUser();if(!N){r("You must be logged in to post.");return}const j=i.getHTML(),w=Kre(i.getJSON());let _;const k=g?"organization_posts":"posts";if(g)_={content:j.trim()||"",organization_id:m,organization_type:p,created_by_user_id:N.id,image_urls:d.length>0?d:null,tags:c.length>0?JSON.stringify(c):null,mentions:w.length>0?JSON.stringify(w):null};else{let A=h;h!=="hello-world"&&p&&(A=Wre(p)),_={content:j.trim()||"",user_id:N.id,profile_id:o.id,image_urls:d.length>0?d:null,image_url:d.length===1?d[0]:null,tags:c.length>0?JSON.stringify(c):null,channel:A,mentions:w.length>0?JSON.stringify(w):null,organization_type:p||(o==null?void 0:o.organization_type)||null}}const{data:C,error:E}=await $.from(k).insert(_).select().single();if(E){r("Failed to create post. Please try again."),console.error("Post creation error:",E);return}if(w.length>0){const A=await aae(C.id,j,o.id,g);A.success?console.log("✅ Mention notifications created successfully"):console.error("❌ Failed to create mention notifications:",A.error)}b&&typeof b=="function"&&b(C)}catch(N){console.error("Error creating post:",N),r("Something went wrong. Please try again.")}finally{e(!1)}}},setError:r}};function oae({isOpen:t,onClose:e,profile:s,onNewPost:r,channel:a,placeholder:i,organizationId:o,organizationType:c,organization:d}){const[h,m]=y.useState(!0),[p,g]=y.useState([]),[b,v]=y.useState(!1),[N,j]=y.useState(!1),w=y.useRef(null),{selectedImages:_,uploading:k,addImages:C,removeImage:E,uploadImages:A,clearImages:M}=sae(),{isLoading:R,error:D,submitPost:L,setError:B}=iae(),O=a==="organization"&&o&&c,P=i||yR(O,d,s),z=wR(P,s,m),q=(K,J=null)=>{p.length>=6&&!p.some(W=>W.id===K)||g(W=>{if(W.find(ne=>ne.id===K))return W.filter(ne=>ne.id!==K);{const ne=J||ww.find(X=>X.id===K);return[...W,ne]}})},I=K=>{g(J=>J.filter(W=>W.id!==K))},V=K=>{z==null||z.chain().focus().insertContent(K).run(),v(!1)},H=!R&&!k&&(!h||_.length>0),Y=async()=>{if(!(!H||!s||!z||!z.getText().trim()&&_.length===0))try{const J=await A();await L({editor:z,profile:s,selectedTags:p,imageUrls:J,channel:a,organizationId:o,organizationType:c,isOrganizationPost:O,onSuccess:W=>{M(),z.commands.setContent("<p></p>"),g([]),m(!0),v(!1),j(!1),r&&typeof r=="function"&&r(W),e()}})}catch(J){console.error("Error in handleSubmit:",J)}},U=()=>{M(),g([]),v(!1),j(!1),B(""),z&&z.commands.setContent("<p></p>"),e()};return y.useEffect(()=>{const K=J=>{b&&!J.target.closest(".emoji-picker-container")&&v(!1),N&&!J.target.closest(".tag-selector-container")&&j(!1)};return(b||N)&&document.addEventListener("mousedown",K),()=>{document.removeEventListener("mousedown",K)}},[b,N]),!t||!z?null:n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[98vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:O?`Post as ${d==null?void 0:d.name}`:"Create Post"}),n.jsx("button",{onClick:U,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:n.jsx(Ke,{size:20})})]}),n.jsx("div",{className:"p-6 max-h-[calc(98vh-120px)] overflow-y-auto",children:n.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[n.jsx("div",{className:"flex-shrink-0",children:O&&d?n.jsx(is,{src:d.image_url,fullName:d.name,size:"md"}):n.jsx(is,{src:s==null?void 0:s.avatar_url,fullName:s==null?void 0:s.full_name,size:"md"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(Qre,{placeholderText:P,profile:s,onUpdate:m,editor:z}),D&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded text-red-600 text-sm",children:D}),n.jsx(jR,{selectedTags:p,onTagToggle:q,onRemoveTag:I,isOpen:!1}),n.jsx(tae,{selectedImages:_,onImageSelect:C,onRemoveImage:E,fileInputRef:w,uploading:k}),n.jsx(eae,{editor:z,fileInputRef:w,uploading:k,selectedImages:_,selectedTags:p,onTagToggle:q,onRemoveTag:I,showEmojiPicker:b,setShowEmojiPicker:v,showTagSelector:N,setShowTagSelector:j,onEmojiSelect:V,canSubmit:H,isLoading:R,onSubmit:Y})]})]})})]})})}function Wj({profile:t,onNewPost:e,channel:s="hello-world",placeholder:r=null,organizationId:a=null,organizationType:i=null,organization:o=null}){const[c,d]=y.useState(!1),h=()=>{d(!0)},m=()=>{d(!1)},p=s==="organization"&&a&&i;return n.jsxs(n.Fragment,{children:[n.jsx(Jre,{profile:t,organization:o,isOrganizationPost:p,onClick:h}),n.jsx(oae,{isOpen:c,onClose:m,profile:t,onNewPost:e,channel:s,placeholder:r,organizationId:a,organizationType:i,organization:o})]})}function lae({profile:t}){var d,h;const e=bt(),s=((d=t==null?void 0:t.name)==null?void 0:d.split(" ")[0])||((h=t==null?void 0:t.full_name)==null?void 0:h.split(" ")[0])||"there",r=()=>{var j;const m=[{key:"avatar",label:"Profile Photo",completed:!!(t!=null&&t.avatar_url),icon:An},{key:"interests",label:"Interests",completed:!!(t!=null&&t.interests&&((j=t==null?void 0:t.interests)==null?void 0:j.length)>0),icon:Nt},{key:"organization",label:"Join your org",completed:!!(t!=null&&t.organization_choice&&(t==null?void 0:t.organization_choice)!==""),icon:Ut}],p=2,g=m.filter(w=>w.completed).length,b=m.length+p,v=g+p,N=Math.round(v/b*100);return{checks:m,completed:g,total:b,percentage:N}},{checks:a,percentage:i}=r(),o=()=>{e("/onboarding")};return a.some(m=>!m.completed)?n.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"text-4xl",children:"✨"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Complete Your Profile"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-emerald-100 text-emerald-800 border border-emerald-200",children:n.jsxs("span",{children:[i,"% complete"]})})]}),n.jsxs("p",{className:"text-slate-600 max-w-2xl mb-4",children:["Hey ",s,"! 👋 Let's complete your profile to unlock all features!"]}),a.filter(m=>!m.completed).length>0&&n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-600",children:[n.jsx("span",{className:"font-medium",children:"Still needed:"}),a.filter(m=>!m.completed).slice(0,3).map(m=>n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(m.icon,{size:14,className:"text-emerald-600"}),n.jsx("span",{children:m.label})]},m.key))]})]})]}),n.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:[n.jsx("span",{children:"Complete Profile"}),n.jsx(Nr,{size:18})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:"w-full bg-emerald-100 rounded-full h-2",children:n.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${i}%`}})})})]}):null}const Yj=y.memo(({title:t,timeAgo:e,image:s,url:r,category:a})=>n.jsxs("div",{className:"flex-shrink-0 w-80 h-64 bg-white rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group relative",onClick:()=>r&&window.open(r,"_blank"),children:[s?n.jsx("img",{src:s,alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:n.jsx(Br,{size:32,className:"text-slate-400"})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),n.jsx("div",{className:"absolute top-3 left-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white text-xs font-medium px-2 py-1 rounded-full border border-white/30",children:a||"News"}),n.jsxs("div",{className:"flex items-center text-white/80 text-xs",children:[n.jsx("span",{className:"w-1 h-1 bg-white/60 rounded-full mr-1"}),n.jsx("span",{children:e})]})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsx("h3",{className:"font-bold text-white text-lg leading-tight line-clamp-3 group-hover:text-blue-200 transition-colors",children:t})}),n.jsx("div",{className:"absolute inset-0 bg-blue-600/0 group-hover:bg-blue-600/10 transition-colors duration-200"})]}));Yj.displayName="NewsCard";Yj.propTypes={title:Ue.string.isRequired,timeAgo:Ue.string.isRequired,image:Ue.string,url:Ue.string,category:Ue.string};const cae=()=>{const[t,e]=y.useState([]),[s,r]=y.useState(!0);y.useEffect(()=>{(async()=>{r(!0);try{const o=await ag.getGlobalBreakingNews();e(Array.isArray(o)?o.slice(0,6):[])}catch(o){console.error("Failed to fetch news:",o),e([])}finally{r(!1)}})()},[]);const a=i=>{const o=document.getElementById("news-scroll");o&&o.scrollBy({left:i==="left"?-320:320,behavior:"smooth"})};return s||t.length===0?null:n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Trending World News"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>a("left"),className:"p-2 bg-white border rounded-lg hover:bg-slate-50",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>a("right"),className:"p-2 bg-white border rounded-lg hover:bg-slate-50",children:n.jsx(da,{size:16})})]})]}),n.jsx("div",{id:"news-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:t.map(i=>n.jsx(Yj,{...i},i.id))})]})},NR=({onEnterWorld:t,hasEnteredWorld:e})=>n.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 border border-sky-200 rounded-xl p-6 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"text-4xl",children:"🌍"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Welcome to Hello World"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-sky-100 text-sky-800 border border-sky-200",children:n.jsx("span",{children:"#hello-world"})})]}),n.jsx("p",{className:"text-slate-600 max-w-2xl mb-4",children:"Connect with the entire community! Share updates, discover opportunities, and engage."}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qe,{size:16}),n.jsx("span",{children:"Open community"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Jn,{size:16}),n.jsx("span",{children:"Share & discover"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Br,{size:16}),n.jsx("span",{children:"All welcome"})]})]})]})]}),!e&&n.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-6 py-3 bg-sky-600 hover:bg-sky-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:[n.jsx("span",{children:"Join the Conversation"}),n.jsx(Nr,{size:18})]})]})});NR.propTypes={onEnterWorld:Ue.func.isRequired,hasEnteredWorld:Ue.bool.isRequired};const dae=()=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"💬"}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Start the Global Conversation"}),n.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Be the first to share something! Your post will appear here."})]}),uae=()=>n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium bg-sky-50 text-sky-700 border border-sky-200",children:[n.jsx("span",{className:"mr-2",children:"🌍"}),n.jsx("span",{children:"#hello-world"})]})}),uu=5;function hae(){const{profile:t}=_t()||{},[e,s]=y.useState([]),[r,a]=y.useState(0),[i,o]=y.useState(!1),[c,d]=y.useState(!0),[h,m]=y.useState(!1),[p,g]=y.useState(!1),[b,v]=y.useState(null),N=y.useRef(),j=y.useCallback(C=>{i||(N.current&&N.current.disconnect(),N.current=new IntersectionObserver(E=>{E[0].isIntersecting&&c&&a(A=>A+1)}),C&&N.current.observe(C))},[i,c]);y.useEffect(()=>{if(!(t!=null&&t.id))return;const C=W1("organizationChanged",A=>{const{profileId:M,organization:R}=A.detail;M===t.id&&v(R?{id:R.id,name:R.name,type:R.type,tagline:R.tagline,image_url:R.image_url,role:"member"}:null)}),E=A=>{A.key===`hello-world-entered-${t==null?void 0:t.id}`&&A.newValue==="true"&&(m(!0),g(!1))};return window.addEventListener("storage",E),()=>{C(),window.removeEventListener("storage",E)}},[t==null?void 0:t.id]),y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const E=await G1(t.id);v(E)}catch(E){console.error("❌ HelloWorldChannel: Error fetching organization info:",E),v(null)}})()},[t==null?void 0:t.id]),y.useEffect(()=>{if(t!=null&&t.id){const C=`hello-world-entered-${t.id}`,E=localStorage.getItem(C)==="true";m(E),g(!E)}},[t==null?void 0:t.id]),y.useEffect(()=>{(async()=>{if(c){o(!0);try{const{data:E,error:A}=await $.from("posts").select("*, profiles:profile_id(id, full_name, avatar_url, title, organization_name, role, organization_type)").eq("channel","hello-world").order("created_at",{ascending:!1}).range(r*uu,(r+1)*uu-1);if(A){console.warn("⚠️ HelloWorldChannel: Direct query failed, falling back to RPC:",A);const{data:M,error:R}=await $.rpc("get_ranked_feed",{page_number:r,page_size:uu});if(R)throw R;if(M&&M.length>0){const D=[...new Set(M.map(z=>z.profile_id))],{data:L,error:B}=await $.from("profiles").select("*").in("id",D);if(B)throw B;const O=L.reduce((z,q)=>(z[q.id]=q,z),{}),P=M.map(z=>({...z,profiles:O[z.profile_id]}));s(z=>r===0?P:[...z,...P]),M.length<uu&&d(!1)}else d(!1)}else if(E&&E.length>0){const M=E.map(L=>L.id),{data:R}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",M),D=E.map(L=>{const O=((R==null?void 0:R.filter(P=>P.post_id===L.id))||[]).reduce((P,z)=>{const q=z.reaction_type||"like";return P[q]=(P[q]||0)+1,P},{});return{...L,reactions:{summary:Object.entries(O).map(([P,z])=>({type:P,count:z})),sample:[]}}});s(L=>r===0?D:[...L,...D]),E.length<uu&&d(!1)}else d(!1)}catch(E){console.error("❌ HelloWorldChannel: Error fetching posts:",E),d(!1)}finally{o(!1)}}})()},[r,c]),y.useEffect(()=>{if(!t)return;const C=async E=>{if(!e.some(R=>R.id===E))return;const{data:M}=await $.from("posts").select("likes_count, comments_count").eq("id",E).single();M&&s(R=>R.map(D=>D.id===E?{...D,likes_count:M.likes_count,comments_count:M.comments_count}:D))};return d0.createSubscription("hello-world",$,t,{onPostInsert:async E=>{const{data:A}=await $.from("profiles").select("*").eq("id",E.new.profile_id).single();if(A){const M={...E.new,profiles:A,reactions:{summary:[],sample:[]}};s(R=>R.some(D=>D.id===M.id)?R:[M,...R])}},onPostDelete:E=>{s(A=>A.filter(M=>M.id!==E.old.id))},onPostUpdate:E=>{s(A=>A.map(M=>M.id===E.new.id?{...M,...E.new}:M))},onLikeChange:E=>{var M,R;const A=((M=E.new)==null?void 0:M.post_id)||((R=E.old)==null?void 0:R.post_id);A&&C(A)},onCommentChange:E=>{var M,R;const A=((M=E.new)==null?void 0:M.post_id)||((R=E.old)==null?void 0:R.post_id);A&&C(A)}}),()=>{d0.removeSubscription("hello-world",$)}},[e,t==null?void 0:t.id]);const w=()=>{t!=null&&t.id&&(localStorage.setItem(`hello-world-entered-${t.id}`,"true"),m(!0),g(!1))},_=y.useCallback(C=>{const E={...C,profiles:{...t,organization_name:(b==null?void 0:b.name)||(t==null?void 0:t.organization_name),organization_type:(b==null?void 0:b.type)||(t==null?void 0:t.organization_type)},likes_count:0,comments_count:0,reactions:{summary:[],sample:[]}};s(A=>[E,...A])},[t,b]),k=y.useCallback(C=>{s(E=>E.filter(A=>A.id!==C))},[]);return n.jsxs("div",{className:"space-y-6",children:[n.jsx(lae,{profile:t}),n.jsx(cae,{}),p&&n.jsx(NR,{onEnterWorld:w,hasEnteredWorld:h}),(h||e.length>0)&&n.jsxs(n.Fragment,{children:[n.jsx(uae,{}),n.jsx(Wj,{profile:t,onNewPost:_,channel:"hello-world",organizationType:b==null?void 0:b.type}),e.length>0&&n.jsx("div",{className:"space-y-6",children:e.filter(C=>C.profiles).map(C=>n.jsx(Uj,{post:C,onDelete:k},C.id))}),n.jsxs("div",{ref:j,className:"h-10 text-center",children:[i&&n.jsx("p",{className:"text-slate-500",children:"Loading..."}),!i&&!c&&e.length>0&&n.jsx("p",{className:"text-slate-500",children:"You've reached the end."})]}),!i&&e.length===0&&n.jsx(dae,{})]})]})}const T4={nonprofit:{name:"Nonprofit Community",icon:"🏛️",bgGradient:"from-rose-50 to-pink-50",borderColor:"border-rose-200",buttonColor:"bg-rose-600 hover:bg-rose-700",tagColor:"bg-rose-50 text-rose-700 border-rose-200",channelTag:"#nonprofit-community",dbChannel:"nonprofit-community"},foundation:{name:"Foundation Community",icon:"💰",bgGradient:"from-purple-50 to-indigo-50",borderColor:"border-purple-200",buttonColor:"bg-purple-600 hover:bg-purple-700",tagColor:"bg-purple-50 text-purple-700 border-purple-200",channelTag:"#foundation-community",dbChannel:"foundation-community"},education:{name:"Education Community",icon:"🎓",bgGradient:"from-blue-50 to-indigo-50",borderColor:"border-blue-200",buttonColor:"bg-blue-600 hover:bg-blue-700",tagColor:"bg-blue-50 text-blue-700 border-blue-200",channelTag:"#education-community",dbChannel:"education-community"},healthcare:{name:"Healthcare Community",icon:"🏥",bgGradient:"from-emerald-50 to-green-50",borderColor:"border-emerald-200",buttonColor:"bg-emerald-600 hover:bg-emerald-700",tagColor:"bg-emerald-50 text-emerald-700 border-emerald-200",channelTag:"#healthcare-community",dbChannel:"healthcare-community"},government:{name:"Government Community",icon:"🏛️",bgGradient:"from-slate-50 to-gray-50",borderColor:"border-slate-200",buttonColor:"bg-slate-600 hover:bg-slate-700",tagColor:"bg-slate-50 text-slate-700 border-slate-200",channelTag:"#government-community",dbChannel:"government-community"},religious:{name:"Religious Community",icon:"⛪",bgGradient:"from-amber-50 to-yellow-50",borderColor:"border-amber-200",buttonColor:"bg-amber-600 hover:bg-amber-700",tagColor:"bg-amber-50 text-amber-700 border-amber-200",channelTag:"#religious-community",dbChannel:"religious-community"},forprofit:{name:"Social Enterprise Community",icon:"🏢",bgGradient:"from-green-50 to-emerald-50",borderColor:"border-green-200",buttonColor:"bg-green-600 hover:bg-green-700",tagColor:"bg-green-50 text-green-700 border-green-200",channelTag:"#social-enterprise-community",dbChannel:"forprofit-community"}},mae=t=>t?t.split(".")[0].toLowerCase():null,fae=t=>t&&T4[t]?T4[t]:null,pae=t=>{const s={nonprofit:"getNonprofitNews",foundation:"getFunderNews",education:"getNonprofitNews",healthcare:"getNonprofitNews",government:"getNonprofitNews",religious:"getNonprofitNews",forprofit:"getFunderNews"}[t]||"getNonprofitNews";return ag[s]?s:(console.error(`News method ${s} not found, using getGlobalBreakingNews`),"getGlobalBreakingNews")},Kj=y.memo(({title:t,summary:e,timeAgo:s,image:r,url:a,category:i})=>n.jsxs("div",{className:"flex-shrink-0 w-80 h-64 bg-white rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group relative",onClick:()=>a&&window.open(a,"_blank"),children:[r?n.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center",children:n.jsx(Jn,{size:32,className:"text-slate-400"})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),n.jsx("div",{className:"absolute top-3 left-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white text-xs font-medium px-2 py-1 rounded-full border border-white/30",children:i||"Community"}),n.jsxs("div",{className:"flex items-center text-white/80 text-xs",children:[n.jsx("span",{className:"w-1 h-1 bg-white/60 rounded-full mr-1"}),n.jsx("span",{children:s})]})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:n.jsx("h3",{className:"font-bold text-white text-lg leading-tight line-clamp-3 group-hover:text-blue-200 transition-colors",children:t})}),n.jsx("div",{className:"absolute inset-0 bg-blue-600/0 group-hover:bg-blue-600/10 transition-colors duration-200"})]}));Kj.displayName="NewsCard";Kj.propTypes={title:Ue.string.isRequired,summary:Ue.string,timeAgo:Ue.string.isRequired,image:Ue.string,url:Ue.string,category:Ue.string};const SR=({channelType:t})=>{const[e,s]=y.useState([]),[r,a]=y.useState(!0);y.useEffect(()=>{t?(async()=>{a(!0);try{const c=pae(t),d=await ag[c]();s(Array.isArray(d)?d:[])}catch(c){console.error("Error fetching news:",c),s([])}finally{a(!1)}})():a(!1)},[t]);const i=o=>{const c=document.getElementById("community-news-scroll");c&&c.scrollBy({left:o==="left"?-320:320,behavior:"smooth"})};return r||!e.length?null:n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Trending Community News"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>i("left"),className:"p-2 bg-white border rounded-lg hover:bg-slate-50",children:n.jsx(tl,{size:16})}),n.jsx("button",{onClick:()=>i("right"),className:"p-2 bg-white border rounded-lg hover:bg-slate-50",children:n.jsx(da,{size:16})})]})]}),n.jsx("div",{id:"community-news-scroll",className:"flex space-x-4 overflow-x-auto scrollbar-hide pb-4",children:e.map(o=>n.jsx(Kj,{title:o.title,timeAgo:o.timeAgo,image:o.image,url:o.url,category:o.category},o.id))})]})};SR.propTypes={channelType:Ue.string};const _R=({channelInfo:t})=>t?n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${t.tagColor}`,children:[n.jsx("span",{className:"mr-2",children:t.icon}),n.jsx("span",{children:t.channelTag})]})}):null;_R.propTypes={channelInfo:Ue.object};const gae=()=>{const t=bt(),e=()=>t("/profile/my-organization");return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center mb-6",children:[n.jsx("div",{className:"text-6xl mb-4",children:"👋"}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Welcome to Hello Community"}),n.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:"To see posts and connect with your community, you'll need to join an organization first."}),n.jsx("button",{onClick:e,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:"Join an Organization"}),n.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"You'll be able to connect with peers in your organization type's community"})]})},CR=({channelInfo:t})=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"💬"}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Start the Conversation"}),n.jsxs("p",{className:"text-slate-600 mb-4 max-w-md mx-auto",children:["Be the first to share in the ",(t==null?void 0:t.name)||"community","!"]}),n.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg text-sm font-medium",children:[n.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full mr-2 animate-pulse"}),"Share your first post above!"]})]});CR.propTypes={channelInfo:Ue.object};const ac=10;function xae(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(!1),[c,d]=y.useState(0),[h,m]=y.useState(!0),[p,g]=y.useState(null),b=y.useRef(),v=y.useCallback(E=>{i||(b.current&&b.current.disconnect(),b.current=new IntersectionObserver(A=>{A[0].isIntersecting&&h&&d(M=>M+1)}),E&&b.current.observe(E))},[i,h]);y.useEffect(()=>{if(!(t!=null&&t.id))return;const E=W1("organizationChanged",M=>{const{profileId:R,organization:D}=M.detail;R===t.id&&(D?g({id:D.id,name:D.name,type:D.type,tagline:D.tagline,image_url:D.image_url,role:"member"}):(g(null),s([]),d(0),m(!0)))}),A=M=>{if(M.key==="orgChangeEvent"&&M.newValue)try{const R=JSON.parse(M.newValue);R.profileId===t.id&&(R.organization?g({id:R.organization.id,name:R.organization.name,type:R.organization.type,tagline:R.organization.tagline,image_url:R.organization.image_url,role:"member"}):(g(null),s([]),d(0),m(!0)))}catch(R){console.error("❌ HelloCommunity: Failed to parse cross-tab message:",R)}};return window.addEventListener("storage",A),()=>{E(),window.removeEventListener("storage",A)}},[t==null?void 0:t.id]),y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const A=await ZY(t.id);g(A)}catch(A){console.error("❌ HelloCommunity: Error fetching organization info:",A),g(null)}})()},[t==null?void 0:t.id]);const N=mae(p==null?void 0:p.type),j=fae(N),w=!!p&&!!N&&!!j,_=j==null?void 0:j.dbChannel;y.useEffect(()=>{N&&_&&(s([]),d(0),m(!0),a(!0))},[N,_]),y.useEffect(()=>{(async()=>{if(!h||!N||!_){a(!1);return}c===0?a(!0):o(!0);try{try{const{data:R,error:D}=await $.rpc("get_community_posts_by_org_type",{user_org_type:N,page_offset:c*ac,page_size:ac});if(!D&&R){const L=R.map(B=>({...B,profiles:{id:B.profile_id,full_name:B.profile_full_name,avatar_url:B.profile_avatar_url,title:B.profile_title,organization_name:B.profile_organization_name,role:B.profile_role}}));if(L.length>0){const B=L.map(z=>z.id),{data:O}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",B),P=L.map(z=>{const I=((O==null?void 0:O.filter(V=>V.post_id===z.id))||[]).reduce((V,H)=>{const Y=H.reaction_type||"like";return V[Y]=(V[Y]||0)+1,V},{});return{...z,reactions:{summary:Object.entries(I).map(([V,H])=>({type:V,count:H})),sample:[]}}});s(z=>c===0?P:[...z,...P]),P.length<ac&&m(!1)}else m(!1);return}}catch(R){console.warn("⚠️ HelloCommunity: RPC function failed, falling back to direct query:",R)}const{data:A,error:M}=await $.from("posts").select("*, profiles:profile_id(id, full_name, avatar_url, title, organization_name, role, organization_type)").eq("channel",_).order("created_at",{ascending:!1}).range(c*ac,(c+1)*ac-1);if(M)throw M;if(A&&A.length>0){const R=A.map(B=>B.id),{data:D}=await $.from("post_likes").select("post_id, reaction_type").in("post_id",R),L=A.map(B=>{const P=((D==null?void 0:D.filter(z=>z.post_id===B.id))||[]).reduce((z,q)=>{const I=q.reaction_type||"like";return z[I]=(z[I]||0)+1,z},{});return{...B,reactions:{summary:Object.entries(P).map(([z,q])=>({type:z,count:q})),sample:[]}}});s(B=>c===0?L:[...B,...L]),L.length<ac&&m(!1)}else m(!1)}catch(A){console.error("❌ HelloCommunity: Error fetching community posts:",A)}finally{a(!1),o(!1)}})()},[N,_,c,h]);const k=y.useCallback(E=>{const A={...E,profiles:{...t,organization_name:(p==null?void 0:p.name)||(t==null?void 0:t.organization_name),organization_type:(p==null?void 0:p.type)||(t==null?void 0:t.organization_type)},reactions:{summary:[],sample:[]},likes_count:0,comments_count:0};s(M=>[A,...M])},[t,p]),C=y.useCallback(E=>{s(A=>A.filter(M=>M.id!==E))},[]);return y.useEffect(()=>{if(!_)return;const E=$.channel(`public:org_community:${_}`),A=async D=>{const{data:L}=await $.from("profiles").select("*").eq("id",D.new.profile_id).single();if(L){const B={...D.new,profiles:L,reactions:{summary:[],sample:[]}};s(O=>O.some(P=>P.id===B.id)?O:[B,...O])}},M=D=>s(L=>L.map(B=>B.id===D.new.id?{...B,...D.new}:B)),R=D=>s(L=>L.filter(B=>B.id!==D.old.id));return E.on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`channel=eq.${_}`},A).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts",filter:`channel=eq.${_}`},M).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts",filter:`channel=eq.${_}`},R).subscribe(),()=>{E&&(E.unsubscribe(),$.removeChannel(E))}},[_]),!p||!N?n.jsx("div",{className:"space-y-6",children:n.jsx(gae,{})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(SR,{channelType:N}),n.jsx(_R,{channelInfo:j}),w&&n.jsx(Wj,{profile:t,onNewPost:k,channel:_,organizationType:N}),n.jsx("div",{className:"space-y-6",children:r?n.jsx("div",{className:"space-y-4",children:[...Array(3)].map((E,A)=>n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 animate-pulse",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded mb-2 w-1/3"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/4"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"})]})]},A))}):e.length===0?n.jsx(CR,{channelInfo:j}):e.map(E=>n.jsx(Uj,{post:E,onDelete:C},E.id))}),n.jsxs("div",{ref:v,className:"h-10 text-center",children:[i&&n.jsx("p",{className:"text-slate-500",children:"Loading more posts..."}),!i&&!h&&e.length>0&&n.jsx("p",{className:"text-slate-500",children:"You've reached the end of the feed."})]})]})}function bae(){return _t(),n.jsx(xae,{})}function vae(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState(!0),[i,o]=y.useState(new Set),[c,d]=y.useState(new Set);y.useEffect(()=>{t!=null&&t.id&&(h(),m())},[t==null?void 0:t.id]);const h=async()=>{try{a(!0);const{data:v,error:N}=await $.from("followers").select(`
                    follower_id,
                    created_at,
                    profiles!followers_follower_id_fkey(
                        id,
                        full_name,
                        avatar_url,
                        title,
                        organization_name,
                        role
                    )
                `).eq("following_id",t.id).order("created_at",{ascending:!1});if(N){console.error("Error fetching followers:",N);return}const j=(v==null?void 0:v.map(w=>({id:w.profiles.id,full_name:w.profiles.full_name,avatar_url:w.profiles.avatar_url,title:w.profiles.title,organization_name:w.profiles.organization_name,role:w.profiles.role,followed_at:w.created_at})))||[];s(j)}catch(v){console.error("Error in fetchFollowers:",v)}finally{a(!1)}},m=async()=>{try{const{data:v,error:N}=await $.from("followers").select("following_id").eq("follower_id",t.id);if(N){console.error("Error fetching followed users:",N);return}const j=new Set(v.map(w=>w.following_id));o(j)}catch(v){console.error("Error in fetchFollowedUsers:",v)}},p=async v=>{if(!(!t||c.has(v))){o(N=>new Set(N).add(v)),d(N=>new Set(N).add(v));try{const N=await D0(t.id,v);N.success||(console.error("Error following user:",N.error),o(j=>{const w=new Set(j);return w.delete(v),w}))}catch(N){console.error("Error in handleFollow:",N),o(j=>{const w=new Set(j);return w.delete(v),w})}finally{d(N=>{const j=new Set(N);return j.delete(v),j})}}},g=async v=>{if(!(!t||c.has(v))){o(N=>{const j=new Set(N);return j.delete(v),j}),d(N=>new Set(N).add(v));try{const N=await Ah(t.id,v);N.success||(console.error("Error unfollowing user:",N.error),o(j=>new Set(j).add(v)))}catch(N){console.error("Error in handleUnfollow:",N),o(j=>new Set(j).add(v))}finally{d(N=>{const j=new Set(N);return j.delete(v),j})}}},b=v=>{const N=new Date(v),w=Math.abs(new Date-N),_=Math.ceil(w/(1e3*60*60*24));return _===1?"Yesterday":_<7?`${_} days ago`:_<30?`${Math.ceil(_/7)} weeks ago`:_<365?`${Math.ceil(_/30)} months ago`:N.toLocaleDateString()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ye,{to:"/profile",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Back to Profile",children:n.jsx(Zn,{size:20,className:"text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Your Followers"}),n.jsx("p",{className:"text-slate-600",children:r?"Loading...":`${e.length} ${e.length===1?"person":"people"} following you`})]})]}),r?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Loading your followers..."})]}):e.length>0?n.jsx("div",{className:"space-y-3",children:e.map(v=>{const N=i.has(v.id),j=c.has(v.id);return n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(is,{src:v.avatar_url,fullName:v.full_name,size:"lg"}),n.jsxs("div",{className:"flex-grow",children:[n.jsx(Ye,{to:`/profile/members/${v.id}`,className:"text-lg font-semibold text-slate-900 hover:text-blue-600 transition-colors",children:v.full_name}),v.title&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:v.title}),v.organization_name&&n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:v.organization_name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Followed you ",b(v.followed_at)]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:N?n.jsxs("button",{onClick:()=>g(v.id),disabled:j,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-1"}),j?"Updating...":"Following"]}):n.jsxs("button",{onClick:()=>p(v.id),disabled:j,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ia,{className:"w-4 h-4 mr-1"}),j?"Following...":"Follow Back"]})})]})},v.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(ia,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No followers yet"}),n.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Start engaging with the community by posting updates and connecting with other members. People will follow you to see your updates!"})]})]})}function yae(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState(!0),[i,o]=y.useState(new Set);y.useEffect(()=>{t!=null&&t.id&&c()},[t==null?void 0:t.id]);const c=async()=>{try{a(!0);const{data:m,error:p}=await $.from("followers").select(`
                    following_id,
                    created_at,
                    profiles!followers_following_id_fkey(
                        id,
                        full_name,
                        avatar_url,
                        title,
                        organization_name,
                        role
                    )
                `).eq("follower_id",t.id).order("created_at",{ascending:!1});if(p){console.error("Error fetching following:",p);return}const g=(m==null?void 0:m.map(b=>({id:b.profiles.id,full_name:b.profiles.full_name,avatar_url:b.profiles.avatar_url,title:b.profiles.title,organization_name:b.profiles.organization_name,role:b.profiles.role,followed_at:b.created_at})))||[];s(g)}catch(m){console.error("Error in fetchFollowing:",m)}finally{a(!1)}},d=async m=>{if(!(!t||i.has(m))){o(p=>new Set(p).add(m));try{const p=await Ah(t.id,m);p.success?s(g=>g.filter(b=>b.id!==m)):console.error("Error unfollowing user:",p.error)}catch(p){console.error("Error in handleUnfollow:",p)}finally{o(p=>{const g=new Set(p);return g.delete(m),g})}}},h=m=>{const p=new Date(m),b=Math.abs(new Date-p),v=Math.ceil(b/(1e3*60*60*24));return v===1?"Yesterday":v<7?`${v} days ago`:v<30?`${Math.ceil(v/7)} weeks ago`:v<365?`${Math.ceil(v/30)} months ago`:p.toLocaleDateString()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ye,{to:"/profile",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Back to Profile",children:n.jsx(Zn,{size:20,className:"text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Following"}),n.jsx("p",{className:"text-slate-600",children:r?"Loading...":`You're following ${e.length} ${e.length===1?"person":"people"}`})]})]}),r?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Loading who you're following..."})]}):e.length>0?n.jsx("div",{className:"space-y-3",children:e.map(m=>{const p=i.has(m.id);return n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(is,{src:m.avatar_url,fullName:m.full_name,size:"lg"}),n.jsxs("div",{className:"flex-grow",children:[n.jsx(Ye,{to:`/profile/members/${m.id}`,className:"text-lg font-semibold text-slate-900 hover:text-blue-600 transition-colors",children:m.full_name}),m.title&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:m.title}),m.organization_name&&n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:m.organization_name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["You followed ",h(m.followed_at)]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("button",{onClick:()=>d(m.id),disabled:p,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-1"}),p?"Unfollowing...":"Following"]})})]})},m.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(br,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Not following anyone yet"}),n.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-4",children:"Discover and follow other community members to see their updates in your feed."}),n.jsx(Ye,{to:"/profile/members",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Explore Members"})]})]})}function wae(){const{profile:t}=_t(),[e,s]=y.useState({totalUsers:0,totalOrganizations:0,totalGrants:0,recentActivity:[]}),[r,a]=y.useState(!0),[i,o]=y.useState(""),c=Wo(t==null?void 0:t.is_omega_admin);y.useEffect(()=>{c&&d()},[c]);const d=async()=>{try{a(!0);const[h,m,p,g]=await Promise.all([$.from("profiles").select("id",{count:"exact",head:!0}),$.from("nonprofits").select("id",{count:"exact",head:!0}),$.from("funders").select("id",{count:"exact",head:!0}),$.from("grants").select("id",{count:"exact",head:!0})]);s({totalUsers:h.count||0,totalOrganizations:(m.count||0)+(p.count||0),totalGrants:g.count||0})}catch(h){console.error("Error fetching dashboard stats:",h),o("Failed to load dashboard statistics")}finally{a(!1)}};return c?n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("header",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Omega Admin Dashboard"}),n.jsx("p",{className:"text-slate-600 mt-1",children:"Platform administration and management tools."})]})]}),n.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg text-sm font-medium",children:[n.jsx(mn,{className:"w-4 h-4 mr-2"}),"Platform Administrator Access"]})]}),i&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-red-700",children:i})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:n.jsx(qe,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.totalUsers.toLocaleString()}),n.jsx("p",{className:"text-sm text-slate-500",children:"Total Users"})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4",children:n.jsx(Ut,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.totalOrganizations.toLocaleString()}),n.jsx("p",{className:"text-sm text-slate-500",children:"Organizations"})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4",children:n.jsx(iF,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.totalGrants.toLocaleString()}),n.jsx("p",{className:"text-sm text-slate-500",children:"Total Grants"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[n.jsx(Ks,{className:"w-5 h-5 mr-2 text-green-600"}),"Platform Management"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ye,{to:"/profile/omega-admin/organizations",className:"block p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-800",children:"Manage Organizations"}),n.jsx("p",{className:"text-sm text-slate-500",children:"View and edit all platform organizations"})]}),n.jsx(Ut,{className:"w-5 h-5 text-slate-400"})]})}),n.jsx(Ye,{to:"/profile/omega-admin/analytics",className:"block p-3 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-slate-800",children:"Platform Analytics"}),n.jsx("p",{className:"text-sm text-slate-500",children:"View detailed platform statistics and trends"})]}),n.jsx(Pa,{className:"w-5 h-5 text-slate-400"})]})})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[n.jsx(Cs,{className:"w-5 h-5 mr-2 text-blue-600"}),"Platform Health"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"System Status"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"Operational"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Organizations"}),n.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[e.totalOrganizations," active"]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"User Growth"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"+12% this month"})]})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 mt-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Recent Platform Activity"}),n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(Pa,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),n.jsx("p",{children:"Activity tracking coming soon..."}),n.jsx("p",{className:"text-sm",children:"This will show recent admin actions, user registrations, and platform events."})]})]})]})}):n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"This dashboard is only accessible to Omega Admins."}),n.jsx(Ye,{to:"/profile",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Profile"})]})})})}function jae(){const{profile:t}=_t(),[e,s]=y.useState({userGrowth:[],organizationStats:{nonprofits:0,funders:0},membershipStats:{super_admins:0,admins:0,members:0},grantStats:{total:0,activeDeadlines:0}}),[r,a]=y.useState(!0),[i,o]=y.useState(""),c=Wo(t==null?void 0:t.is_omega_admin);y.useEffect(()=>{c&&d()},[c]);const d=async()=>{try{a(!0);const[h,m]=await Promise.all([$.from("nonprofits").select("id",{count:"exact",head:!0}),$.from("funders").select("id",{count:"exact",head:!0})]),{data:p}=await $.from("organization_memberships").select("role"),g=p==null?void 0:p.reduce((N,j)=>(N[j.role]=(N[j.role]||0)+1,N),{}),[b,v]=await Promise.all([$.from("grants").select("id",{count:"exact",head:!0}),$.from("grants").select("id",{count:"exact",head:!0}).gt("deadline",new Date().toISOString())]);s({organizationStats:{nonprofits:h.count||0,funders:m.count||0},membershipStats:{super_admins:(g==null?void 0:g.super_admin)||0,admins:(g==null?void 0:g.admin)||0,members:(g==null?void 0:g.member)||0},grantStats:{total:b.count||0,activeDeadlines:v.count||0}})}catch(h){console.error("Error fetching analytics:",h),o("Failed to load analytics data")}finally{a(!1)}};return c?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(Pa,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Platform Analytics"}),n.jsx("p",{className:"text-purple-100 mt-1",children:"Comprehensive platform statistics and insights"})]})]})}),i&&n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg flex items-center",children:[n.jsx(On,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:i})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[n.jsx(Ut,{className:"w-5 h-5 mr-2 text-blue-600"}),"Organization Breakdown"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded mr-3"}),n.jsx("span",{className:"text-slate-600",children:"Nonprofits"})]}),n.jsx("span",{className:"font-semibold text-slate-800",children:r?"...":e.organizationStats.nonprofits.toLocaleString()})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded mr-3"}),n.jsx("span",{className:"text-slate-600",children:"Funders"})]}),n.jsx("span",{className:"font-semibold text-slate-800",children:r?"...":e.organizationStats.funders.toLocaleString()})]}),n.jsx("div",{className:"pt-2 border-t border-slate-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Total Organizations"}),n.jsx("span",{className:"font-bold text-lg text-slate-800",children:r?"...":(e.organizationStats.nonprofits+e.organizationStats.funders).toLocaleString()})]})})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[n.jsx(qe,{className:"w-5 h-5 mr-2 text-purple-600"}),"Role Distribution"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded mr-3"}),n.jsx("span",{className:"text-slate-600",children:"Super Admins"})]}),n.jsx("span",{className:"font-semibold text-slate-800",children:r?"...":e.membershipStats.super_admins.toLocaleString()})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded mr-3"}),n.jsx("span",{className:"text-slate-600",children:"Admins"})]}),n.jsx("span",{className:"font-semibold text-slate-800",children:r?"...":e.membershipStats.admins.toLocaleString()})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded mr-3"}),n.jsx("span",{className:"text-slate-600",children:"Members"})]}),n.jsx("span",{className:"font-semibold text-slate-800",children:r?"...":e.membershipStats.members.toLocaleString()})]}),n.jsx("div",{className:"pt-2 border-t border-slate-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Total Memberships"}),n.jsx("span",{className:"font-bold text-lg text-slate-800",children:r?"...":(e.membershipStats.super_admins+e.membershipStats.admins+e.membershipStats.members).toLocaleString()})]})})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[n.jsx(bs,{className:"w-5 h-5 mr-2 text-orange-600"}),"Grant Platform Statistics"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(Pa,{className:"w-8 h-8 text-blue-600"})}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.grantStats.total.toLocaleString()}),n.jsx("p",{className:"text-sm text-slate-500",children:"Total Grants"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(Cs,{className:"w-8 h-8 text-green-600"})}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.grantStats.activeDeadlines.toLocaleString()}),n.jsx("p",{className:"text-sm text-slate-500",children:"Active Grants"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(j$,{className:"w-8 h-8 text-purple-600"})}),n.jsx("p",{className:"text-2xl font-bold text-slate-800",children:r?"...":e.grantStats.activeDeadlines>0?Math.round(e.grantStats.activeDeadlines/e.grantStats.total*100)+"%":"0%"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Active Rate"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"User Growth Trends"}),n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(Cs,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),n.jsx("p",{children:"Growth charts coming soon..."}),n.jsx("p",{className:"text-sm",children:"This will show user registration trends over time."})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Platform Activity"}),n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(Pa,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),n.jsx("p",{children:"Activity metrics coming soon..."}),n.jsx("p",{className:"text-sm",children:"This will show platform usage and engagement data."})]})]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"System Health Monitor"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full mx-auto mb-2"}),n.jsx("p",{className:"font-medium text-green-800",children:"Database"}),n.jsx("p",{className:"text-sm text-green-600",children:"Healthy"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full mx-auto mb-2"}),n.jsx("p",{className:"font-medium text-green-800",children:"API"}),n.jsx("p",{className:"text-sm text-green-600",children:"Operational"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full mx-auto mb-2"}),n.jsx("p",{className:"font-medium text-green-800",children:"Storage"}),n.jsx("p",{className:"text-sm text-green-600",children:"Available"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full mx-auto mb-2"}),n.jsx("p",{className:"font-medium text-blue-800",children:"Performance"}),n.jsx("p",{className:"text-sm text-blue-600",children:"Optimized"})]})]})]})]}):n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"This page is only accessible to Omega Admins."})]})})})}function Nae(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(""),[c,d]=y.useState(!0),[h,m]=y.useState(""),[p,g]=y.useState(1),[b,v]=y.useState(0),[N,j]=y.useState({}),w=100,_=Wo(t==null?void 0:t.is_omega_admin);y.useEffect(()=>{_&&k()},[_]),y.useEffect(()=>{let E;i.trim()?E=e.filter(R=>{var D;return R.name.toLowerCase().includes(i.toLowerCase())||((D=R.location)==null?void 0:D.toLowerCase().includes(i.toLowerCase()))}):E=e,v(E.length),g(1);const A=0,M=Math.min(w,E.length);a(E.slice(A,M))},[i,e]),y.useEffect(()=>{let E;i.trim()?E=e.filter(R=>{var D;return R.name.toLowerCase().includes(i.toLowerCase())||((D=R.location)==null?void 0:D.toLowerCase().includes(i.toLowerCase()))}):E=e;const A=(p-1)*w,M=Math.min(A+w,E.length);a(E.slice(A,M))},[p,e,i]);const k=async()=>{try{d(!0),m("");const[E,A]=await Promise.all([$.from("nonprofits").select("id, name, location, slug, image_url").order("name"),$.from("funders").select("id, name, location, slug, logo_url").order("name")]);if(E.error)throw E.error;if(A.error)throw A.error;const M=[...E.data.map(D=>({...D,type:"nonprofit",imageUrl:D.image_url})),...A.data.map(D=>({...D,type:"funder",imageUrl:D.logo_url}))];M.sort((D,L)=>D.name.localeCompare(L.name)),s(M),await C(M);const R=M.slice(0,w);a(R),v(M.length)}catch(E){console.error("Error fetching organizations:",E),m("Failed to load organizations: "+E.message)}finally{d(!1)}},C=async E=>{try{const A={};await Promise.all(E.map(async M=>{const{count:R,error:D}=await $.from("organization_memberships").select("id",{count:"exact",head:!0}).eq("organization_id",M.id).eq("organization_type",M.type);D||(A[`${M.type}-${M.id}`]=R||0)})),j(A)}catch(A){console.error("Error fetching member counts:",A)}};return _?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Omega Admin: Organization Management"}),n.jsx("p",{className:"text-purple-100 mt-1",children:"Select an organization to view or edit"})]})]})}),h&&n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg flex items-center",children:[n.jsx(On,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:h})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Stats"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.length}),n.jsx("div",{className:"text-sm text-slate-600",children:"Total Organizations"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(E=>E.type==="nonprofit").length}),n.jsx("div",{className:"text-sm text-slate-600",children:"Nonprofits"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(E=>E.type==="funder").length}),n.jsx("div",{className:"text-sm text-slate-600",children:"Funders"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-600",children:Object.values(N).reduce((E,A)=>E+A,0)}),n.jsx("div",{className:"text-sm text-slate-600",children:"Total Members"})]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search organizations by name or location...",value:i,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[n.jsx("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:n.jsxs("h2",{className:"font-semibold text-slate-700",children:["Organizations (",b.toLocaleString(),")",i&&n.jsxs("span",{className:"text-sm font-normal text-slate-500 ml-2",children:["- Showing ",r.length," of ",b," results"]}),!i&&b>w&&n.jsxs("span",{className:"text-sm font-normal text-slate-500 ml-2",children:["- Page ",p," of ",Math.ceil(b/w)]})]})}),c&&n.jsx("div",{className:"p-6 text-center text-slate-500",children:"Loading organizations..."}),!c&&r.length===0&&i&&n.jsxs("div",{className:"p-6 text-center text-slate-500",children:['No organizations found matching "',i,'"',n.jsx("button",{onClick:()=>o(""),className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800 text-sm",children:"Clear search to see all organizations"})]}),!c&&r.length===0&&!i&&n.jsx("div",{className:"p-6 text-center text-slate-500",children:"No organizations found."}),!c&&r.length>0&&n.jsx("div",{className:"divide-y divide-slate-200",children:r.map(E=>{const A=N[`${E.type}-${E.id}`]||0;return n.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[n.jsxs("div",{className:"w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:[E.imageUrl?n.jsx("img",{src:E.imageUrl,alt:`${E.name} logo`,className:"w-full h-full object-cover",onError:M=>{M.target.style.display="none",M.target.nextSibling.style.display="block"}}):null,n.jsx(Ut,{className:`w-6 h-6 text-slate-500 ${E.imageUrl?"hidden":"block"}`})]}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-800 mb-1 truncate",title:E.name,children:E.name}),n.jsxs("div",{className:"flex items-center space-x-3 text-sm text-slate-500",children:[n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 ${E.type==="nonprofit"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:E.type==="nonprofit"?"Nonprofit":"Funder"}),n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600 flex-shrink-0",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),A," member",A!==1?"s":""]}),E.location&&n.jsx("span",{className:"truncate",children:E.location})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[n.jsxs(Ye,{to:`/profile/omega-admin/organizations/members/${E.type}/${E.id}`,className:"inline-flex items-center px-3 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors whitespace-nowrap",children:[n.jsx(br,{className:"w-4 h-4 mr-2"}),"Manage Members"]}),n.jsxs(Ye,{to:`/profile/omega-admin/organizations/edit/${E.type}/${E.id}`,className:"inline-flex items-center px-3 py-2 bg-slate-600 text-white rounded-lg text-sm font-medium hover:bg-slate-700 transition-colors whitespace-nowrap",children:[n.jsx(Yw,{className:"w-4 h-4 mr-2"}),"Edit Details"]}),E.slug?n.jsxs("a",{href:`/${E.type==="nonprofit"?"nonprofits":"funders"}/${E.slug}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 transition-colors whitespace-nowrap",children:[n.jsx(pn,{className:"w-4 h-4 mr-2"}),"View Profile",n.jsx(Mn,{className:"w-3 h-3 ml-1"})]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-2 border border-slate-300 rounded-lg text-sm text-slate-400 bg-slate-50 cursor-not-allowed whitespace-nowrap",children:[n.jsx(pn,{className:"w-4 h-4 mr-2"}),"No Profile"]})]})]})},`${E.type}-${E.id}`)})}),!c&&!i&&b>w&&n.jsxs("div",{className:"p-4 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",(p-1)*w+1," to ",Math.min(p*w,b)," of ",b.toLocaleString()," organizations"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>g(E=>Math.max(E-1,1)),disabled:p===1,className:"px-3 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),n.jsxs("span",{className:"px-3 py-2 text-sm text-slate-700",children:["Page ",p," of ",Math.ceil(b/w)]}),n.jsx("button",{onClick:()=>g(E=>Math.min(E+1,Math.ceil(b/w))),disabled:p===Math.ceil(b/w),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}):n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"This page is only accessible to Omega Admins."})]})})})}function Sae(){const{profile:t}=_t(),{orgType:e,orgId:s}=Gc();bt();const[r,a]=y.useState({}),[i,o]=y.useState(!0),[c,d]=y.useState(!1),[h,m]=y.useState(""),[p,g]=y.useState(""),[b,v]=y.useState([]),[N,j]=y.useState([]),[w,_]=y.useState([]),[k,C]=y.useState([]),[E,A]=y.useState([]),[M,R]=y.useState([]),D=Wo(t==null?void 0:t.is_omega_admin),L=[{id:"alameda",name:"Alameda County"},{id:"contra_costa",name:"Contra Costa County"},{id:"marin",name:"Marin County"},{id:"napa",name:"Napa County"},{id:"san_francisco",name:"San Francisco County"},{id:"san_mateo",name:"San Mateo County"},{id:"santa_clara",name:"Santa Clara County"},{id:"solano",name:"Solano County"},{id:"sonoma",name:"Sonoma County"},{id:"all_bay_area",name:"All Bay Area Counties"}];y.useEffect(()=>{D&&e&&s&&B()},[D,e,s]);const B=async()=>{try{o(!0),m("");const J=e==="nonprofit"?"nonprofits":"funders",W=e==="nonprofit"?"nonprofit_categories":"funder_categories",ee=e==="funder"?"funder_funding_locations":null;let ne=`*, ${W}(categories(id, name))`;e==="funder"&&(ne+=`, ${ee}(locations(id, name))`);const{data:X,error:Q}=await $.from(J).select(ne).eq("id",s).single();if(Q)throw Q;if(!X)throw new Error("Organization not found");const[de,ve]=await Promise.all([$.from("categories").select("id, name").order("name"),e==="funder"?$.from("funder_types").select("id, name").order("name"):Promise.resolve({data:[]})]);de.data&&v(de.data),ve.data&&_(ve.data),a(X),X[W]&&j(X[W].map(Pe=>Pe.categories.id)),e==="funder"&&X[ee]&&R(X[ee].map(Pe=>Pe.locations.id)),e==="funder"&&X.grant_types&&C(Array.isArray(X.grant_types)?X.grant_types:[]),e==="nonprofit"&&X.notable_programs&&A(Array.isArray(X.notable_programs)?X.notable_programs:[])}catch(J){console.error("Error fetching organization:",J),m("Failed to load organization: "+J.message)}finally{o(!1)}},O=J=>{const{name:W,value:ee}=J.target;a(ne=>({...ne,[W]:ee}))},P=async J=>{if(J.preventDefault(),!!D)try{d(!0),m(""),g("");const W=e==="nonprofit"?"nonprofits":"funders",ee={...r};e==="funder"&&(ee.grant_types=k),e==="nonprofit"&&(ee.notable_programs=E);const{error:ne}=await $.from(W).update(ee).eq("id",s);if(ne)throw ne;await z(),e==="funder"&&await q(),g("Organization updated successfully!"),setTimeout(()=>g(""),3e3)}catch(W){console.error("Error updating organization:",W),m("Failed to update organization: "+W.message)}finally{d(!1)}},z=async()=>{const J=e==="nonprofit"?"nonprofit_categories":"funder_categories",W=e==="nonprofit"?"nonprofit_id":"funder_id";if(await $.from(J).delete().eq(W,s),N.length>0){const ee=N.map(ne=>({[W]:s,category_id:ne}));await $.from(J).insert(ee)}},q=async()=>{if(e==="funder"&&(await $.from("funder_funding_locations").delete().eq("funder_id",s),M.length>0)){const J=M.map(W=>({funder_id:s,location_id:W}));await $.from("funder_funding_locations").insert(J)}},I=(J,W)=>{const ee=[...k];ee[J]=W,C(ee)},V=()=>{C([...k,""])},H=J=>{C(k.filter((W,ee)=>ee!==J))},Y=(J,W,ee)=>{const ne=[...E];ne[J]={...ne[J],[W]:ee},A(ne)},U=()=>{A([...E,{name:"",description:""}])},K=J=>{A(E.filter((W,ee)=>ee!==J))};return D?i?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsx("div",{children:n.jsx("h1",{className:"text-2xl font-bold",children:"Loading Organization..."})})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 text-center",children:n.jsx("p",{className:"text-slate-500",children:"Loading organization details..."})})]}):h&&!r.id?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsx("div",{children:n.jsx("h1",{className:"text-2xl font-bold",children:"Organization Not Found"})})]})}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("p",{className:"text-red-600 mb-4",children:h}),n.jsxs(Ye,{to:"/profile/omega-admin/organizations",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Back to Organizations"]})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Edit Organization"}),n.jsxs("p",{className:"text-purple-100 mt-1",children:[r.name," (",e==="nonprofit"?"Nonprofit":"Funder",")"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[r.slug&&n.jsxs(Ye,{to:`/${e==="nonprofit"?"nonprofits":"funders"}/${r.slug}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors text-sm font-medium",children:[n.jsx(pn,{className:"w-4 h-4 mr-2"}),"View Profile",n.jsx(Mn,{className:"w-3 h-3 ml-1"})]}),n.jsxs(Ye,{to:"/profile/omega-admin/organizations",className:"inline-flex items-center px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors text-sm font-medium",children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Back"]})]})]})}),p&&n.jsx("div",{className:"p-4 bg-green-50 text-green-700 border border-green-200 rounded-lg",children:p}),h&&n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg flex items-center",children:[n.jsx(On,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:h})]}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:n.jsxs("form",{onSubmit:P,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Basic Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Organization Name *"}),n.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:r.name||"",onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.hasOwnProperty("tagline")&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"tagline",className:"block text-sm font-medium text-slate-700 mb-1",children:"Tagline"}),n.jsx("input",{type:"text",id:"tagline",name:"tagline",value:r.tagline||"",onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"website",className:"block text-sm font-medium text-slate-700 mb-1",children:"Website"}),n.jsx("input",{type:"url",id:"website",name:"website",value:r.website||"",onChange:O,placeholder:"https://...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-slate-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",id:"location",name:"location",value:r.location||"",onChange:O,placeholder:"City, State",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),r.hasOwnProperty("contact_email")&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Email"}),n.jsx("input",{type:"email",id:"contact_email",name:"contact_email",value:r.contact_email||"",onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-slate-700 mb-1",children:"URL Slug"}),n.jsx("input",{type:"text",id:"slug",name:"slug",value:r.slug||"",onChange:O,placeholder:"organization-name",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Used in the public profile URL: /",e,"s/",r.slug||"organization-name"]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",name:"description",rows:4,value:r.description||"",onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Describe the organization's mission and activities..."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Focus Areas"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 max-h-48 overflow-y-auto border border-slate-300 rounded-lg p-4",children:b.map(J=>n.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:N.includes(J.id),onChange:W=>{W.target.checked?j([...N,J.id]):j(N.filter(ee=>ee!==J.id))},className:"rounded border-slate-300"}),n.jsx("span",{className:"text-sm text-slate-700",children:J.name})]},J.id))})]}),e==="nonprofit"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Nonprofit Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-slate-700 mb-1",children:"Annual Budget"}),n.jsx("input",{type:"text",id:"budget",name:"budget",value:r.budget||"",onChange:O,placeholder:"e.g., $500K - $1M",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"staff_count",className:"block text-sm font-medium text-slate-700 mb-1",children:"Staff Count"}),n.jsx("input",{type:"number",id:"staff_count",name:"staff_count",value:r.staff_count||"",onChange:O,min:"0",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"year_founded",className:"block text-sm font-medium text-slate-700 mb-1",children:"Year Founded"}),n.jsx("input",{type:"number",id:"year_founded",name:"year_founded",value:r.year_founded||"",onChange:O,min:"1800",max:new Date().getFullYear(),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"ein",className:"block text-sm font-medium text-slate-700 mb-1",children:"EIN (Tax ID)"}),n.jsx("input",{type:"text",id:"ein",name:"ein",value:r.ein||"",onChange:O,placeholder:"XX-XXXXXXX",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"impact_metric",className:"block text-sm font-medium text-slate-700 mb-1",children:"Key Impact Metric"}),n.jsx("input",{type:"text",id:"impact_metric",name:"impact_metric",value:r.impact_metric||"",onChange:O,placeholder:"e.g., Served 500+ families in 2023",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notable Programs & Initiatives"}),E.map((J,W)=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3 p-3 border border-slate-200 rounded-lg",children:[n.jsx("input",{type:"text",placeholder:"Program name",value:J.name||"",onChange:ee=>Y(W,"name",ee.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Brief description",value:J.description||"",onChange:ee=>Y(W,"description",ee.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsx("button",{type:"button",onClick:()=>K(W),className:"px-3 py-2 text-red-600 hover:bg-red-50 border border-red-300 rounded-lg",children:"Remove"})]})]},W)),n.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 text-purple-600 hover:bg-purple-50 border border-purple-300 rounded-lg",children:"+ Add Program"})]})]}),e==="funder"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Funder Details"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"total_funding_annually",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Annual Funding"}),n.jsx("input",{type:"text",id:"total_funding_annually",name:"total_funding_annually",value:r.total_funding_annually||"",onChange:O,placeholder:"e.g., $1M - $5M",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"average_grant_size",className:"block text-sm font-medium text-slate-700 mb-1",children:"Average Grant Size"}),n.jsx("input",{type:"text",id:"average_grant_size",name:"average_grant_size",value:r.average_grant_size||"",onChange:O,placeholder:"e.g., $50K - $100K",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{htmlFor:"funder_type_id",className:"block text-sm font-medium text-slate-700 mb-1",children:"Funder Type"}),n.jsxs("select",{id:"funder_type_id",name:"funder_type_id",value:r.funder_type_id||"",onChange:O,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select funder type..."}),w.map(J=>n.jsx("option",{value:J.id,children:J.name},J.id))]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Grant Types Offered"}),k.map((J,W)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",placeholder:"e.g., Operating Support, Capital Projects",value:J,onChange:ee=>I(W,ee.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsx("button",{type:"button",onClick:()=>H(W),className:"px-3 py-2 text-red-600 hover:bg-red-50 border border-red-300 rounded-lg",children:"Remove"})]},W)),n.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 text-purple-600 hover:bg-purple-50 border border-purple-300 rounded-lg",children:"+ Add Grant Type"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Geographic Funding Scope"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-slate-300 rounded-lg p-4",children:L.map(J=>n.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:M.includes(J.id),onChange:W=>{W.target.checked?R([...M,J.id]):R(M.filter(ee=>ee!==J.id))},className:"rounded border-slate-300"}),n.jsx("span",{className:"text-sm text-slate-700",children:J.name})]},J.id))})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{htmlFor:"application_process_summary",className:"block text-sm font-medium text-slate-700 mb-1",children:"Application Process Summary"}),n.jsx("textarea",{id:"application_process_summary",name:"application_process_summary",rows:3,value:r.application_process_summary||"",onChange:O,placeholder:"Describe your application process, deadlines, and requirements...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-slate-200",children:[n.jsx(Ye,{to:"/profile/omega-admin/organizations",className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(v0,{className:"w-4 h-4 mr-2"}),c?"Saving...":"Save Changes"]})]})]})})]}):n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"This page is only accessible to Omega Admins."})]})})})}function _ae(){var V,H,Y,U,K,J;const{profile:t}=_t(),{orgType:e,orgId:s}=Gc(),[r,a]=y.useState(null),[i,o]=y.useState([]),[c,d]=y.useState(!0),[h,m]=y.useState(""),[p,g]=y.useState(""),[b,v]=y.useState(""),[N,j]=y.useState("all"),[w,_]=y.useState("role"),[k,C]=y.useState("desc"),[E,A]=y.useState(null),[M,R]=y.useState({isOpen:!1,type:"",member:null,newRole:null}),D=Wo(t==null?void 0:t.is_omega_admin);y.useEffect(()=>{D&&e&&s&&L()},[D,e,s]),y.useEffect(()=>{(async()=>{if(!(!(t!=null&&t.id)||!s||!e)){if(Wo(t==null?void 0:t.is_omega_admin)){A("omega_admin");return}try{const{data:ee,error:ne}=await $.from("organization_memberships").select("role").eq("profile_id",t.id).eq("organization_id",parseInt(s,10)).eq("organization_type",e).single();!ne&&ee&&A(ee.role)}catch(ee){console.error("Error fetching user role:",ee)}}})()},[t==null?void 0:t.id,s,e,t==null?void 0:t.is_omega_admin]);const L=async()=>{try{d(!0),m("");const W=e==="nonprofit"?"nonprofits":"funders",ee=parseInt(s,10);if(isNaN(ee))throw new Error("Invalid organization ID");let ne="id, name, slug";e==="nonprofit"?ne+=", tagline, image_url":ne+=", logo_url";const{data:X,error:Q}=await $.from(W).select(ne).eq("id",ee).single();if(Q)throw Q;if(!X)throw new Error("Organization not found");a({...X,type:e});const{data:de,error:ve}=await $.from("organization_memberships").select(`
                    *,
                    profiles (
                        id,
                        full_name,
                        avatar_url,
                        title,
                        is_omega_admin
                    )
                `).eq("organization_id",ee).eq("organization_type",e).order("role",{ascending:!1}).order("joined_at",{ascending:!0});ve?(console.error("Member fetch error:",ve),m("Failed to load organization members")):o(de||[])}catch(W){console.error("Error fetching organization:",W),m("Failed to load organization: "+W.message)}finally{d(!1)}},B=async(W,ee)=>{try{if(m(""),g(""),!nv(E,ee,D)){m("You do not have permission to assign this role.");return}const ne=parseInt(s,10),{error:X}=await $.from("organization_memberships").update({role:ee}).eq("profile_id",W.profile_id).eq("organization_id",ne);if(X)throw X;g(`Successfully updated ${W.profiles.full_name} to ${gf(ee)}`),await L(),setTimeout(()=>g(""),3e3)}catch(ne){console.error("Error updating member role:",ne),m("Failed to update member role: "+ne.message)}},O=async W=>{try{if(m(""),g(""),!D&&E!==st.SUPER_ADMIN){m("You do not have permission to remove members.");return}const ee=parseInt(s,10),{error:ne}=await $.from("organization_memberships").delete().eq("profile_id",W.profile_id).eq("organization_id",ee);if(ne)throw ne;g(`Successfully removed ${W.profiles.full_name} from the organization`),await L(),setTimeout(()=>g(""),3e3)}catch(ee){console.error("Error removing member:",ee),m("Failed to remove member: "+ee.message)}},P=(W,ee,ne=null)=>{R({isOpen:!0,type:W,member:ee,newRole:ne})},z=()=>{R({isOpen:!1,type:"",member:null,newRole:null})},q=async()=>{const{type:W,member:ee,newRole:ne}=M;W==="remove"?await O(ee):(W==="promote"||W==="demote")&&await B(ee,ne),z()},I=y.useMemo(()=>{let W=i.filter(ee=>{var Q,de,ve,Pe,He,Qe;const ne=!b||((de=(Q=ee.profiles)==null?void 0:Q.full_name)==null?void 0:de.toLowerCase().includes(b.toLowerCase()))||((Pe=(ve=ee.profiles)==null?void 0:ve.title)==null?void 0:Pe.toLowerCase().includes(b.toLowerCase())),X=N==="all"||N==="omega_admin"&&((He=ee.profiles)==null?void 0:He.is_omega_admin)||N==="super_admin"&&ee.role===st.SUPER_ADMIN&&!((Qe=ee.profiles)!=null&&Qe.is_omega_admin)||N==="admin"&&ee.role===st.ADMIN||N==="member"&&ee.role===st.MEMBER;return ne&&X});return W.sort((ee,ne)=>{var de,ve,Pe,He;let X,Q;switch(w){case"name":X=((de=ee.profiles)==null?void 0:de.full_name)||"",Q=((ve=ne.profiles)==null?void 0:ve.full_name)||"";break;case"joined":X=new Date(ee.joined_at),Q=new Date(ne.joined_at);break;case"role":default:const Qe={[st.SUPER_ADMIN]:3,[st.ADMIN]:2,[st.MEMBER]:1};X=(Pe=ee.profiles)!=null&&Pe.is_omega_admin?4:Qe[ee.role]||0,Q=(He=ne.profiles)!=null&&He.is_omega_admin?4:Qe[ne.role]||0;break}return k==="desc"?X>Q?-1:X<Q?1:0:X<Q?-1:X>Q?1:0}),W},[i,b,N,w,k]);return!E||!E6(E,D)?n.jsx("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Restricted"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"This page is only accessible to Omega Admins and Super Admins."})]})})}):c?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsx("div",{children:n.jsx("h1",{className:"text-2xl font-bold",children:"Loading Organization Members..."})})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 text-center",children:n.jsx("p",{className:"text-slate-500",children:"Loading member details..."})})]}):h&&!r?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsx("div",{children:n.jsx("h1",{className:"text-2xl font-bold",children:"Organization Not Found"})})]})}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("p",{className:"text-red-600 mb-4",children:h}),n.jsxs(Ye,{to:"/profile/omega-admin/organizations",className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Back to Organizations"]})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-xl text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4",children:n.jsx(mn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Manage Organization Members"}),n.jsxs("p",{className:"text-purple-100 mt-1",children:[r==null?void 0:r.name," (",(r==null?void 0:r.type)==="nonprofit"?"Nonprofit":"Funder",") • ",i.length," members"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(Ye,{to:`/profile/omega-admin/organizations/edit/${r==null?void 0:r.type}/${r==null?void 0:r.id}`,className:"inline-flex items-center px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors text-sm font-medium",children:[n.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Edit Organization"]}),n.jsxs(Ye,{to:"/profile/omega-admin/organizations",className:"inline-flex items-center px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors text-sm font-medium",children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Back"]})]})]})}),p&&n.jsxs("div",{className:"p-4 bg-green-50 text-green-700 border border-green-200 rounded-lg flex items-center",children:[n.jsx(Ks,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:p})]}),h&&n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg flex items-center",children:[n.jsx(sl,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:h})]}),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(ot,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search members by name, email, or title...",value:b,onChange:W=>v(W.target.value),className:"pl-10 pr-4 py-2 w-full border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("select",{value:N,onChange:W=>j(W.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"omega_admin",children:"Omega Admins"}),n.jsx("option",{value:"super_admin",children:"Super Admins"}),n.jsx("option",{value:"admin",children:"Admins"}),n.jsx("option",{value:"member",children:"Members"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm text-slate-600",children:"Sort by:"}),n.jsxs("select",{value:w,onChange:W=>_(W.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"role",children:"Role"}),n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"joined",children:"Join Date"})]}),n.jsx("button",{onClick:()=>C(k==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:k==="asc"?n.jsx(E$,{className:"w-4 h-4"}):n.jsx(Ss,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:["Showing ",I.length," of ",i.length," members"]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:n.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Organization Members"})}),I.length===0?n.jsx("div",{className:"p-8 text-center text-slate-500",children:b||N!=="all"?"No members match your search criteria.":"No members found."}):n.jsx("div",{className:"divide-y divide-slate-200",children:I.map(W=>{var ee,ne,X,Q,de,ve,Pe,He,Qe,be,se,le;return n.jsx("div",{className:"p-6 hover:bg-slate-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[n.jsx(is,{src:(ee=W.profiles)==null?void 0:ee.avatar_url,fullName:(ne=W.profiles)==null?void 0:ne.full_name,size:"lg"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h3",{className:"text-lg font-medium text-slate-800 truncate",children:((X=W.profiles)==null?void 0:X.full_name)||"Unknown User"}),n.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${QY(W.role,(Q=W.profiles)==null?void 0:Q.is_omega_admin)}`,children:[((de=W.profiles)==null?void 0:de.is_omega_admin)&&n.jsx(mn,{className:"w-3 h-3 mr-1"}),!((ve=W.profiles)!=null&&ve.is_omega_admin)&&W.role===st.SUPER_ADMIN&&n.jsx(Wu,{className:"w-3 h-3 mr-1"}),!((Pe=W.profiles)!=null&&Pe.is_omega_admin)&&W.role===st.ADMIN&&n.jsx(qo,{className:"w-3 h-3 mr-1"}),!((He=W.profiles)!=null&&He.is_omega_admin)&&W.role===st.MEMBER&&n.jsx(qe,{className:"w-3 h-3 mr-1"}),gf(W.role,(Qe=W.profiles)==null?void 0:Qe.is_omega_admin)]})]}),((be=W.profiles)==null?void 0:be.title)&&n.jsx("p",{className:"text-slate-600 truncate",children:W.profiles.title}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Joined ",new Date(W.joined_at).toLocaleDateString()]})]})]}),!((se=W.profiles)!=null&&se.is_omega_admin)&&E&&E6(E,D)&&n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[W.role===st.MEMBER&&nv(E,st.ADMIN,D)&&n.jsxs("button",{onClick:()=>P("promote",W,st.ADMIN),className:"inline-flex items-center px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",title:"Promote to Admin",children:[n.jsx(ia,{className:"w-4 h-4 mr-1"}),"Promote"]}),W.role===st.ADMIN&&n.jsxs(n.Fragment,{children:[nv(E,st.SUPER_ADMIN,D)&&n.jsxs("button",{onClick:()=>P("promote",W,st.SUPER_ADMIN),className:"inline-flex items-center px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",title:"Promote to Super Admin",children:[n.jsx(Wu,{className:"w-4 h-4 mr-1"}),"Super Admin"]}),k6(E,W.role,D)&&n.jsxs("button",{onClick:()=>P("demote",W,st.MEMBER),className:"inline-flex items-center px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors",title:"Demote to Member",children:[n.jsx(rp,{className:"w-4 h-4 mr-1"}),"Demote"]})]}),W.role===st.SUPER_ADMIN&&k6(E,W.role,D)&&n.jsxs("button",{onClick:()=>P("demote",W,st.ADMIN),className:"inline-flex items-center px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors",title:"Demote to Admin",children:[n.jsx(rp,{className:"w-4 h-4 mr-1"}),"Demote"]}),(D||E===st.SUPER_ADMIN)&&n.jsxs("button",{onClick:()=>P("remove",W),className:"inline-flex items-center px-3 py-1 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",title:"Remove from Organization",children:[n.jsx(tn,{className:"w-4 h-4 mr-1"}),"Remove"]})]}),((le=W.profiles)==null?void 0:le.is_omega_admin)&&n.jsx("div",{className:"ml-4",children:n.jsxs("span",{className:"inline-flex items-center px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-lg",children:[n.jsx(mn,{className:"w-4 h-4 mr-1"}),"Platform Admin"]})})]})},W.profile_id)})})]}),M.isOpen&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl max-w-md w-full mx-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:[M.type==="remove"&&"Remove Member",M.type==="promote"&&"Promote Member",M.type==="demote"&&"Demote Member"]}),n.jsxs("div",{className:"mb-6",children:[M.type==="remove"&&n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to remove ",n.jsx("strong",{children:(H=(V=M.member)==null?void 0:V.profiles)==null?void 0:H.full_name})," from ",r==null?void 0:r.name,"? This action cannot be undone."]}),M.type==="promote"&&n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to promote ",n.jsx("strong",{children:(U=(Y=M.member)==null?void 0:Y.profiles)==null?void 0:U.full_name})," to"," ",n.jsx("strong",{children:gf(M.newRole)}),"?"]}),M.type==="demote"&&n.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to demote ",n.jsx("strong",{children:(J=(K=M.member)==null?void 0:K.profiles)==null?void 0:J.full_name})," to"," ",n.jsx("strong",{children:gf(M.newRole)}),"?"]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:q,className:`flex-1 px-4 py-2 rounded-lg text-white font-medium ${M.type==="remove"?"bg-red-600 hover:bg-red-700":M.type==="promote"?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"}`,children:[M.type==="remove"&&"Remove Member",M.type==="promote"&&"Promote",M.type==="demote"&&"Demote"]})]})]})})]})}function Cae(t,e){let s;return function(...r){s&&clearTimeout(s),s=setTimeout(()=>{t.apply(this,r)},e)}}function kae({onJoinSuccess:t}){console.log("🎯 OrganizationSetupPage loaded with instant events support");const[e,s]=y.useState(()=>localStorage.getItem("orgSetupActiveTab")||"join"),[r,a]=y.useState(""),[i,o]=y.useState([]),[c,d]=y.useState(!1),[h,m]=y.useState(""),[p,g]=y.useState(""),[b,v]=y.useState(()=>{const te=localStorage.getItem("orgSetupFormData");return te?JSON.parse(te):{name:"",type:"",taxonomy_code:"",description:"",website:"",location:"",ein:"",contact_email:""}}),[N,j]=y.useState(!1),[w,_]=y.useState([]),[k,C]=y.useState(()=>{const te=localStorage.getItem("orgSetupSelectedCategories");return te?JSON.parse(te):[]}),[E,A]=y.useState(()=>{const te=localStorage.getItem("orgSetupSelectedLocations");return te?JSON.parse(te):[]}),[M,R]=y.useState([]),[D,L]=y.useState(!1),[B,O]=y.useState(!1),[P,z]=y.useState(""),[q,I]=y.useState(""),V=y.useRef(null),H=y.useRef(null),Y=[{id:"nonprofit",label:"Nonprofit Organization",icon:"🏛️",description:"Tax-exempt organizations serving public benefit"},{id:"foundation",label:"Foundation",icon:"💰",description:"Grantmaking organizations and foundations"},{id:"government",label:"Government Agency",icon:"🏛️",description:"Public sector organizations and agencies"},{id:"for-profit",label:"For-Profit Company",icon:"🏢",description:"Private companies and businesses"},{id:"education",label:"Educational Institution",icon:"🎓",description:"Schools, universities, and educational organizations"},{id:"healthcare",label:"Healthcare Organization",icon:"🏥",description:"Hospitals, clinics, and healthcare providers"},{id:"religious",label:"Religious Organization",icon:"⛪",description:"Churches, temples, and faith-based organizations"},{id:"international",label:"International Organization",icon:"🌍",description:"Global and international organizations"}],U=["Alameda County","Contra Costa County","Marin County","Napa County","San Francisco County","San Mateo County","Santa Clara County","Solano County","Sonoma County"],K=["Housing","Education","Health","Environment","Arts & Culture","Social Services","Youth Programs","Senior Services","Community Development"];y.useEffect(()=>{localStorage.setItem("orgSetupFormData",JSON.stringify(b))},[b]),y.useEffect(()=>{localStorage.setItem("orgSetupSelectedCategories",JSON.stringify(k))},[k]),y.useEffect(()=>{localStorage.setItem("orgSetupSelectedLocations",JSON.stringify(E))},[E]),y.useEffect(()=>{localStorage.setItem("orgSetupActiveTab",e)},[e]);const J=()=>{console.log("🧹 Clearing persisted organization setup data"),localStorage.removeItem("orgSetupFormData"),localStorage.removeItem("orgSetupSelectedCategories"),localStorage.removeItem("orgSetupSelectedLocations"),localStorage.removeItem("orgSetupActiveTab")},W=y.useCallback(async()=>{try{const{data:te,error:xe}=await $.from("categories").select("*").order("name");if(xe)throw xe;_(te||[])}catch(te){console.error("Error fetching categories:",te)}},[]),ee=y.useCallback(async te=>{if(te)try{const{data:xe,error:De}=await $.from("organization_taxonomies").select("*").eq("organization_type",te).eq("is_active",!0).eq("level",2).order("sort_order, display_name");if(De)throw De;let Ee=xe||[];te==="nonprofit"&&(Ee=Ee.filter(ye=>{const Oe=ye.code.toLowerCase(),Me=ye.display_name.toLowerCase();return!Oe.includes("association")&&!Oe.includes("grassroots")&&!Me.includes("association")&&!Me.includes("grassroots")}));const ce=Ee.filter((ye,Oe,Me)=>Oe===Me.findIndex(it=>it.display_name===ye.display_name));console.log(`Loaded ${ce.length} taxonomy options for ${te}:`,ce.map(ye=>ye.display_name)),R(ce)}catch(xe){console.error("Error fetching taxonomy options:",xe),R([])}},[]),ne=y.useCallback(Cae(async te=>{if(!te||te.length<2){o([]);return}d(!0),m("");try{const{data:xe,error:De}=await $.from("organizations").select("id, name, type, description, location, website, image_url").ilike("name",`%${te}%`).limit(10);De?(console.error("Search error:",De),m("Failed to search organizations")):o(xe||[])}catch(xe){console.error("Search error:",xe),m("Failed to search organizations")}finally{d(!1)}},300),[]);y.useEffect(()=>{ne(r)},[r,ne]),y.useEffect(()=>{W()},[W]),y.useEffect(()=>{b.type&&ee(b.type)},[b.type,ee]),y.useEffect(()=>{const te=xe=>{V.current&&!V.current.contains(xe.target)&&L(!1),H.current&&!H.current.contains(xe.target)&&O(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[]);const X=async te=>{d(!0),m(""),g("");try{const{data:{session:xe}}=await $.auth.getSession();if(!xe)throw new Error("You must be logged in to join an organization");const Ee=await ge(te.id)?"member":"super_admin",ce={profile_id:xe.user.id,organization_id:te.id,organization_type:te.type,role:Ee,membership_type:"staff",is_public:!0},{error:ye}=await $.from("organization_memberships").insert(ce);if(ye)throw new Error(`Failed to join organization: ${ye.message}`);const{error:Oe}=await $.from("profiles").update({organization_choice:"join",selected_organization_id:te.id,selected_organization_type:te.type,updated_at:new Date}).eq("id",xe.user.id);Oe&&m("Profile update failed (non-critical)");const Me=Ee==="super_admin"?`Successfully joined ${te.name} as Super Admin! You're the first admin for this organization.`:`Successfully joined ${te.name} as Member!`;g(Me),J(),setTimeout(()=>{t&&t()},1e3)}catch(xe){m(xe.message||"Failed to join organization")}finally{d(!1)}},Q=async te=>{te.preventDefault(),console.log("🏗️ INSTANT CREATE: Starting to create organization:",b.name),j(!0),m(""),g("");try{const{data:{session:xe}}=await $.auth.getSession();if(!xe)throw new Error("You must be logged in to create an organization");if(!b.name.trim()||!b.type||!b.description.trim()||!b.website.trim()||!b.location.trim())throw new Error("Name, type, description, website, and headquarters location are required");if(b.type==="nonprofit"&&!b.ein.trim())throw new Error("EIN number is required for nonprofit organizations");if(!b.taxonomy_code)throw new Error("Please select a specific organization category");if(k.length===0)throw new Error("Please select at least one focus area");const De={name:b.name.trim(),type:b.type,taxonomy_code:b.taxonomy_code,description:b.description.trim(),website:b.website.trim(),location:b.location.trim(),contact_email:b.contact_email.trim()||null,ein:b.type==="nonprofit"?b.ein.trim():null,admin_profile_id:xe.user.id,image_url:null,is_verified:!1,extended_data:{focus_areas:k,supported_locations:E}},{data:Ee,error:ce}=await $.from("organizations").insert(De).select().single();if(ce)throw new Error(`Failed to create organization: ${ce.message}`);console.log("✅ INSTANT CREATE: Successfully created organization in database:",Ee);const ye={profile_id:xe.user.id,organization_id:Ee.id,organization_type:Ee.type,role:"super_admin",membership_type:"staff",is_public:!0},{error:Oe}=await $.from("organization_memberships").insert(ye);if(Oe)throw new Error(`Organization created but failed to set up membership: ${Oe.message}`);if(console.log("✅ INSTANT CREATE: Successfully created membership"),k.length>0){const it=k.map(Te=>({organization_id:Ee.id,category_id:Te})),{error:ft}=await $.from("organization_categories").insert(it);ft&&console.warn("Failed to create category relationships:",ft)}const{error:Me}=await $.from("profiles").update({organization_choice:"create",selected_organization_id:Ee.id,selected_organization_type:Ee.type,updated_at:new Date}).eq("id",xe.user.id);Me&&console.warn("⚠️ Profile update error (non-critical):",Me),console.log("📡 INSTANT CREATE: Dispatching instant organization change event"),AK(xe.user.id,Ee),g(`Successfully created ${Ee.name}! You are now the organization's administrator.`),J(),setTimeout(()=>{t&&t()},1e3)}catch(xe){console.error("❌ Create organization error:",xe),m(xe.message||"Failed to create organization")}finally{j(!1)}},de=te=>{const xe=Y.find(De=>De.id===te);return(xe==null?void 0:xe.icon)||"🏢"},ve=te=>{k.includes(te)||C([...k,te]),z(""),L(!1)},Pe=te=>{C(k.filter(xe=>xe!==te))},He=te=>{E.includes(te)||A([...E,te]),I(""),O(!1)},Qe=te=>{A(E.filter(xe=>xe!==te))},be=w.filter(te=>te.name.toLowerCase().includes(P.toLowerCase())&&!k.includes(te.id)),se=[...be.filter(te=>K.includes(te.name)),...be.filter(te=>!K.includes(te.name))],le=U.filter(te=>te.toLowerCase().includes(q.toLowerCase())&&!E.includes(te)),ge=async te=>{const{data:xe,error:De}=await $.from("organization_memberships").select("id").eq("organization_id",te).eq("role","super_admin");return De?!1:xe&&xe.length>0};return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Join Your Organization"}),n.jsx("p",{className:"text-slate-600",children:"Find your organization to connect with colleagues, or create a new organization profile if it doesn't exist yet."})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsxs("div",{className:"flex border-b border-slate-200",children:[n.jsxs("button",{onClick:()=>s("join"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${e==="join"?"bg-blue-50 text-blue-700 border-b-2 border-blue-500":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[n.jsx(qe,{className:"w-5 h-5 mx-auto mb-1"}),"Join Existing Organization"]}),n.jsxs("button",{onClick:()=>s("create"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${e==="create"?"bg-green-50 text-green-700 border-b-2 border-green-500":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"}`,children:[n.jsx($s,{className:"w-5 h-5 mx-auto mb-1"}),"Create New Organization"]})]}),p&&n.jsx("div",{className:"p-4 bg-green-50 border-b border-green-200",children:n.jsx("div",{className:"text-green-800",children:p})}),h&&n.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:n.jsx("div",{className:"text-red-800",children:h})}),n.jsx("div",{className:"p-6",children:e==="join"?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Search for your organization"}),n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),n.jsx("input",{type:"text",value:r,onChange:te=>a(te.target.value),placeholder:"Enter organization name...",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),n.jsxs("div",{className:"space-y-4",children:[c&&r&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Searching..."})]}),i.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h3",{className:"font-medium text-slate-900",children:["Found Organizations (",i.length,")"]}),i.map(te=>n.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center text-xl",children:te.image_url?n.jsx("img",{src:te.image_url,alt:te.name,className:"w-full h-full object-cover rounded-lg"}):de(te.type)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-slate-900",children:te.name}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[n.jsx("span",{className:"capitalize",children:te.type.replace("-"," ")}),te.location&&n.jsxs("span",{className:"flex items-center",children:[n.jsx(Lt,{className:"w-3 h-3 mr-1"}),te.location]})]}),te.description&&n.jsx("p",{className:"text-sm text-slate-600 mt-1 line-clamp-2",children:te.description})]})]}),n.jsxs("button",{onClick:()=>X(te),disabled:c,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[n.jsx(qe,{className:"w-4 h-4 mr-2"}),"Join"]})]},te.id))]}),r&&r.length>=2&&i.length===0&&!c&&n.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[n.jsx(Ut,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No organizations found"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:['No organizations match your search for "',r,'".']}),n.jsxs("button",{onClick:()=>{s("create"),v(te=>({...te,name:r}))},className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx($s,{className:"w-4 h-4 mr-2"}),'Create "',r,'"']})]})]})]}):n.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-4",children:"Create New Organization"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You'll become the administrator of this organization and can invite team members later."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organization Name *"}),n.jsx("input",{type:"text",required:!0,value:b.name,onChange:te=>v(xe=>({...xe,name:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"Enter organization name"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organization Type *"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Y.map(te=>n.jsx("button",{type:"button",onClick:()=>{v(xe=>({...xe,type:te.id,taxonomy_code:""})),R([])},className:`p-3 border rounded-lg text-left transition-all hover:shadow-sm ${b.type===te.id?"border-green-500 bg-green-50 text-green-700":"border-slate-200 hover:border-slate-300"}`,children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx("span",{className:"text-lg",children:te.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:te.label}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:te.description})]})]})},te.id))})]}),b.type&&M.length>0&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Specific Category *"}),n.jsxs("select",{required:!0,value:b.taxonomy_code,onChange:te=>v(xe=>({...xe,taxonomy_code:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[n.jsx("option",{value:"",children:"Select specific category..."}),M.map(te=>n.jsx("option",{value:te.code,children:te.display_name},te.code))]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Choose the most specific category that describes your organization"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Focus Areas *"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Search and select the main areas your organization focuses on (at least one required)"}),k.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:k.map(te=>{const xe=w.find(De=>De.id===te);return xe?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[xe.name,n.jsx("button",{type:"button",onClick:()=>Pe(te),className:"ml-2 text-blue-600 hover:text-blue-800",children:n.jsx(Ke,{className:"w-3 h-3"})})]},te):null})}),n.jsxs("div",{className:"relative",ref:V,children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),n.jsx("input",{type:"text",value:P,onChange:te=>{z(te.target.value),L(!0)},onFocus:()=>L(!0),placeholder:"Search focus areas...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"})]}),D&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-slate-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:se.length>0?n.jsx("div",{className:"max-h-48 overflow-y-auto",children:se.map(te=>n.jsxs("button",{type:"button",onClick:()=>ve(te.id),className:`w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors ${K.includes(te.name)?"font-medium":""}`,children:[te.name,K.includes(te.name)&&n.jsx("span",{className:"ml-2 text-xs text-slate-500",children:"Popular"})]},te.id))}):n.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:P?"No matching focus areas found":"Start typing to search focus areas"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Geographic Areas Served"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Search and select the Bay Area counties where your organization provides services (optional)"}),E.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:E.map(te=>n.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[te,n.jsx("button",{type:"button",onClick:()=>Qe(te),className:"ml-2 text-green-600 hover:text-green-800",children:n.jsx(Ke,{className:"w-3 h-3"})})]},te))}),n.jsxs("div",{className:"relative",ref:H,children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),n.jsx("input",{type:"text",value:q,onChange:te=>{I(te.target.value),O(!0)},onFocus:()=>O(!0),placeholder:"Search Bay Area counties...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"})]}),B&&n.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-slate-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:le.length>0?n.jsx("div",{className:"max-h-48 overflow-y-auto",children:le.map(te=>n.jsx("button",{type:"button",onClick:()=>He(te),className:"w-full px-3 py-2 text-left text-sm hover:bg-slate-50 transition-colors",children:te},te))}):n.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:q?"No matching counties found":"Start typing to search counties"})})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),n.jsx("textarea",{rows:3,required:!0,value:b.description,onChange:te=>v(xe=>({...xe,description:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors resize-vertical",placeholder:"Brief description of your organization's mission and activities"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Website *"}),n.jsx("input",{type:"url",required:!0,value:b.website,onChange:te=>v(xe=>({...xe,website:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"https://example.org"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Headquarters Location *"}),n.jsx("input",{type:"text",required:!0,value:b.location,onChange:te=>v(xe=>({...xe,location:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"San Francisco, CA"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Where is your organization headquartered?"})]}),b.type==="nonprofit"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"EIN (Tax ID) *"}),n.jsx("input",{type:"text",required:!0,value:b.ein,onChange:te=>v(xe=>({...xe,ein:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"12-3456789"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Required for nonprofit organizations"})]}),n.jsxs("div",{className:b.type==="nonprofit"?"":"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Contact Email"}),n.jsx("input",{type:"email",value:b.contact_email,onChange:te=>v(xe=>({...xe,contact_email:te.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",placeholder:"contact@example.org"})]})]}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:n.jsx("button",{type:"submit",disabled:N||!b.name.trim()||!b.type||!b.description.trim()||!b.website.trim()||!b.location.trim()||k.length===0||b.type==="nonprofit"&&!b.ein.trim(),className:"inline-flex items-center px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Organization..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Create Organization"]})})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(qe,{className:"w-6 h-6 text-blue-600 mr-3"}),n.jsx("h3",{className:"font-semibold text-blue-900",children:"Joining an Organization"})]}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[n.jsx("li",{children:"• Connect with your colleagues and team members"}),n.jsx("li",{children:"• Access organization-specific features and content"}),n.jsx("li",{children:"• Participate in internal discussions and updates"}),n.jsx("li",{children:"• Be listed as a team member on the organization profile"})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx(mn,{className:"w-6 h-6 text-green-600 mr-3"}),n.jsx("h3",{className:"font-semibold text-green-900",children:"Creating an Organization"})]}),n.jsxs("ul",{className:"text-sm text-green-800 space-y-2",children:[n.jsx("li",{children:"• Become the organization administrator"}),n.jsx("li",{children:"• Invite and manage team members"}),n.jsx("li",{children:"• Create a public organization profile"}),n.jsx("li",{children:"• Share updates and engage with the community"})]})]})]})]})}const hs={SUPER_ADMIN:"super_admin",ADMIN:"admin",MEMBER:"member"},ns={EDIT_ORGANIZATION:"edit_organization",DELETE_ORGANIZATION:"delete_organization",MANAGE_MEMBERS:"manage_members",INVITE_MEMBERS:"invite_members",REMOVE_MEMBERS:"remove_members",CHANGE_ROLES:"change_roles"},Cr=(t,e,s=!1)=>{var a;return s?!0:((a={[hs.SUPER_ADMIN]:[ns.EDIT_ORGANIZATION,ns.DELETE_ORGANIZATION,ns.MANAGE_MEMBERS,ns.INVITE_MEMBERS,ns.REMOVE_MEMBERS,ns.CHANGE_ROLES],[hs.ADMIN]:[ns.EDIT_ORGANIZATION,ns.MANAGE_MEMBERS,ns.INVITE_MEMBERS,ns.REMOVE_MEMBERS],[hs.MEMBER]:[]}[t])==null?void 0:a.includes(e))||!1},kR=(t,e=!1)=>e?"Omega Admin":{[hs.SUPER_ADMIN]:"Super Admin",[hs.ADMIN]:"Admin",[hs.MEMBER]:"Member"}[t]||"Member",Eae=(t,e=!1)=>e?"bg-yellow-100 text-yellow-800":{[hs.SUPER_ADMIN]:"bg-purple-100 text-purple-800",[hs.ADMIN]:"bg-blue-100 text-blue-800",[hs.MEMBER]:"bg-slate-100 text-slate-800"}[t]||"bg-slate-100 text-slate-800",Hv=t=>({nonprofit:"💙",foundation:"🏛️",funder:"💰","for-profit":"🏢",forprofit:"🏢",government:"🏛️",healthcare:"🏥",education:"🎓",religious:"⛪",international:"🌍"})[t==null?void 0:t.toLowerCase()]||"🏢",Aae=t=>({nonprofit:"501(c)(3) Nonprofit",foundation:"Foundation",funder:"Funder","for-profit":"Company",forprofit:"Company",government:"Government Agency",healthcare:"Healthcare Organization",education:"Educational Institution",religious:"Religious Organization",international:"International Organization"})[t]||t,Tae=(t,e=!1)=>{const s=[{id:"overview",label:"Overview",icon:"Building2"},{id:"team",label:"Team",icon:"Users"}];return t==="nonprofit"?[...s,{id:"programs",label:"Programs",icon:"ClipboardList"},{id:"supporters",label:"Supporters",icon:"Star"}]:t==="foundation"?[...s,{id:"grants",label:"Active Grants",icon:"ClipboardList"},{id:"grantees",label:"Our Grantees",icon:"Users"}]:s};function Mae({organization:t,userMembership:e,profile:s,onUpdate:r,onLeave:a,onDelete:i,setError:o}){const[c,d]=y.useState(!1),[h,m]=y.useState({top:0,right:0}),p=y.useRef(null),g=bt(),b=(s==null?void 0:s.is_omega_admin)===!0,v=e==null?void 0:e.role,N=Cr(v,ns.EDIT_ORGANIZATION,b),j=Cr(v,ns.DELETE_ORGANIZATION,b),w=!b&&e,_=()=>{d(!1),b&&sessionStorage.setItem("omegaAdminEditOrg",JSON.stringify({id:t.id,type:t.type})),t.slug?g(`/organizations/${t.slug}?edit=true`):g(`/organizations/${t.id}?edit=true`)},k=()=>{if(!c&&p.current){const C=p.current.getBoundingClientRect();m({top:C.bottom+window.scrollY+8,right:window.innerWidth-C.right})}d(!c)};return t?n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"aspect-[6/1] overflow-hidden bg-gradient-to-br from-slate-100 via-white to-slate-100",children:t.banner_url||t.banner_image_url?n.jsx("img",{src:t.banner_url||t.banner_image_url,alt:`${t.name} banner`,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:n.jsx("div",{className:"text-6xl opacity-20",children:Hv(t.type)})})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"relative group flex-shrink-0 -mt-12",children:n.jsx("div",{className:"w-20 h-20 bg-white rounded-xl flex items-center justify-center overflow-hidden border-4 border-white shadow-lg",children:t.image_url||t.logo_url?n.jsx("img",{src:t.image_url||t.logo_url,alt:t.name,className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-2xl",children:Hv(t.type)})})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center flex-wrap gap-2 mb-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900 truncate",children:t.name}),n.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-100 text-slate-700 text-xs font-medium rounded-full",children:[n.jsx("span",{className:"mr-1",children:Hv(t.type)}),Aae(t.type)]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600",children:[n.jsxs("span",{className:"flex items-center",children:[v===hs.SUPER_ADMIN&&n.jsx(Wu,{className:"w-3 h-3 mr-1.5"}),v===hs.ADMIN&&n.jsx(qo,{className:"w-3 h-3 mr-1.5"}),v===hs.MEMBER&&n.jsx(qe,{className:"w-3 h-3 mr-1.5"}),b&&n.jsx(mn,{className:"w-3 h-3 mr-1.5"}),kR(v,b)]}),t.location&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-400",children:"•"}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Lt,{className:"w-4 h-4 mr-1.5"}),t.location]})]}),t.website&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-400",children:"•"}),n.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:text-blue-600 transition-colors",children:[n.jsx(Br,{className:"w-4 h-4 mr-1.5"}),"Website"]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[t.slug&&n.jsxs("a",{href:`/organizations/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-slate-300 rounded-lg text-slate-700 bg-white hover:bg-slate-50 transition-colors text-sm",children:[n.jsx(Mn,{className:"w-4 h-4 mr-2"}),"View Public Profile"]}),(N||w||j)&&n.jsxs("div",{className:"relative",children:[n.jsxs("button",{ref:p,onClick:k,className:"inline-flex items-center px-3 py-2 border border-slate-300 rounded-lg text-slate-700 bg-white hover:bg-slate-50 transition-colors",children:[n.jsx(O3,{className:"w-4 h-4 mr-2"}),"Manage",n.jsx(C3,{className:"w-4 h-4 ml-2"})]}),c&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),n.jsxs("div",{className:"fixed z-50 w-64 bg-white rounded-lg shadow-xl border border-slate-200 py-2",style:{top:`${h.top}px`,right:`${h.right}px`},children:[N&&n.jsxs("button",{onClick:_,className:"flex items-start w-full px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors text-left",children:[n.jsx(Yw,{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium mb-1",children:"Edit Public Profile"}),n.jsx("div",{className:"text-xs text-slate-500 leading-relaxed",children:"Update your organization's public information"})]})]}),w&&n.jsxs(n.Fragment,{children:[N&&n.jsx("div",{className:"border-t border-slate-100 my-1"}),n.jsxs("button",{onClick:()=>{d(!1),a()},className:"flex items-start w-full px-4 py-3 text-sm text-orange-600 hover:bg-orange-50 transition-colors text-left",children:[n.jsx(_c,{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium mb-1",children:"Leave Organization"}),n.jsx("div",{className:"text-xs text-orange-500 leading-relaxed",children:"Remove yourself from this organization"})]})]})]}),j&&n.jsxs(n.Fragment,{children:[(N||w)&&n.jsx("div",{className:"border-t border-slate-100 my-1"}),n.jsxs("button",{onClick:()=>{d(!1),i()},className:"flex items-start w-full px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors text-left",children:[n.jsx(tn,{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium mb-1",children:"Delete Organization"}),n.jsx("div",{className:"text-xs text-red-500 leading-relaxed",children:"Permanently remove this organization"})]})]})]})]})]})]})]})]}),t.description&&n.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700 mb-2",children:"Mission"}),n.jsx("p",{className:"text-slate-600 leading-relaxed",children:t.description})]})]})]}):null}const Oae={Building2:Ut,Users:qe,BarChart3:Pa,ClipboardList:ep,TrendingUp:Cs,Star:mn};function Rae({activeTab:t,setActiveTab:e,userMembership:s,canViewAnalytics:r=!1,isEditing:a=!1}){const i=Tae(s==null?void 0:s.organization_type,r);return n.jsx("div",{className:"border-b border-slate-200",children:n.jsx("nav",{className:"flex space-x-8 px-6",children:i.map(o=>{const c=Oae[o.icon];return n.jsxs("button",{onClick:()=>e(o.id),disabled:a,className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===o.id?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx(c,{size:16}),o.label]},o.id)})})})}function Dae({member:t,userMembership:e,profile:s,onMemberAction:r,setError:a,organization:i}){var j,w,_,k,C,E;const[o,c]=y.useState(!1),d=bt(),h=(s==null?void 0:s.is_omega_admin)===!0,m=e==null?void 0:e.role,p=Cr(m,ns.MANAGE_MEMBERS,h),g=Cr(m,ns.MANAGE_ADMINS,h),b=async A=>{if(e){if(c(!1),!e||t.profile_id===s.id){a("You do not have permission to manage this user.");return}try{if(A==="promote"){const{error:M}=await $.from("organization_memberships").update({role:hs.ADMIN}).eq("profile_id",t.profile_id).eq("organization_id",e.organization_id);if(M)throw M;await r()}else if(A==="demote"){const{error:M}=await $.from("organization_memberships").update({role:hs.MEMBER}).eq("profile_id",t.profile_id).eq("organization_id",e.organization_id);if(M)throw M;await r()}else if(A==="remove"){const{error:M}=await $.from("organization_memberships").delete().eq("profile_id",t.profile_id).eq("organization_id",e.organization_id);if(M)throw M;await r()}}catch(M){a(`Error ${A}ing member: ${M.message}`)}}},v=p&&t.profile_id!==s.id,N=()=>{const A=t.profile_id;A&&d(`/profile/members/${A}`)};return n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer relative w-80 mx-auto",onClick:N,children:[n.jsxs("div",{className:"h-24 bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 relative",children:[i!=null&&i.banner_image_url?n.jsx("img",{src:i.banner_image_url,alt:"Organization banner",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500"}),v&&n.jsxs("div",{className:"absolute top-3 right-3",children:[n.jsx("button",{onClick:A=>{A.stopPropagation(),c(!o)},className:"p-2 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(C3,{className:"w-4 h-4"})}),o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:A=>{A.stopPropagation(),c(!1)}}),n.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-20",children:[t.role===hs.MEMBER&&g&&n.jsxs("button",{onClick:A=>{A.stopPropagation(),b("promote")},className:"flex items-center w-full px-4 py-2 text-sm text-green-600 hover:bg-green-50 transition-colors",children:[n.jsx(ia,{className:"w-4 h-4 mr-3"}),"Promote to Admin"]}),(t.role===hs.ADMIN||t.role===hs.SUPER_ADMIN)&&g&&n.jsxs("button",{onClick:A=>{A.stopPropagation(),b("demote")},className:"flex items-center w-full px-4 py-2 text-sm text-orange-600 hover:bg-orange-50 transition-colors",children:[n.jsx(rp,{className:"w-4 h-4 mr-3"}),"Demote to Member"]}),n.jsxs("button",{onClick:A=>{A.stopPropagation(),b("remove")},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[n.jsx(rp,{className:"w-4 h-4 mr-3"}),"Remove from Organization"]})]})]})]})]}),n.jsxs("div",{className:"px-6 pb-6 text-center",children:[n.jsx("div",{className:"flex justify-center -mt-12 mb-4",children:n.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden ring-4 ring-white shadow-lg bg-slate-100",children:n.jsx(is,{src:(j=t.profiles)==null?void 0:j.avatar_url,fullName:(w=t.profiles)==null?void 0:w.full_name,size:"xl",className:"w-full h-full object-cover"})})}),n.jsx("h3",{className:"font-semibold text-slate-900 text-lg mb-1 leading-tight",children:((_=t.profiles)==null?void 0:_.full_name)||"Unknown User"}),((k=t.profiles)==null?void 0:k.title)&&n.jsx("p",{className:"text-slate-600 mb-4 text-sm",children:t.profiles.title}),n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Eae(t.role,(C=t.profiles)==null?void 0:C.is_omega_admin)}`,children:[t.role==="super_admin"&&n.jsx(Wu,{className:"w-4 h-4 mr-2"}),t.role==="admin"&&n.jsx(qo,{className:"w-4 h-4 mr-2"}),t.role==="member"&&n.jsx(qe,{className:"w-4 h-4 mr-2"}),kR(t.role,(E=t.profiles)==null?void 0:E.is_omega_admin)]})]})]})}function Gv({title:t,members:e,userMembership:s,profile:r,onMemberAction:a,setError:i,organization:o}){return e.length===0?null:n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-6 flex items-center gap-2",children:[t," (",e.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>n.jsx(Dae,{member:c,userMembership:s,profile:r,onMemberAction:a,setError:i,organization:o},c.profile_id))})]})}function Pae({members:t,userMembership:e,profile:s,onMemberAction:r,setError:a,organization:i}){const[o,c]=y.useState(""),[d,h]=y.useState("all"),m=y.useMemo(()=>t.filter(g=>{var N,j,w,_;const b=!o||((j=(N=g.profiles)==null?void 0:N.full_name)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))||((_=(w=g.profiles)==null?void 0:w.title)==null?void 0:_.toLowerCase().includes(o.toLowerCase())),v=d==="all"||g.role===d;return b&&v}),[t,o,d]),p=y.useMemo(()=>{const g=m,b=g.filter(j=>{var _,k,C;if((_=j.profiles)!=null&&_.organizational_role)return j.profiles.organizational_role==="leadership";if(["super_admin","admin"].includes(j.role))return!0;const w=((C=(k=j.profiles)==null?void 0:k.title)==null?void 0:C.toLowerCase())||"";return w.includes("director")||w.includes("ceo")||w.includes("president")||w.includes("executive")||w.includes("chief")}),v=g.filter(j=>{var _,k,C;if((_=j.profiles)!=null&&_.organizational_role)return j.profiles.organizational_role==="board";const w=((C=(k=j.profiles)==null?void 0:k.title)==null?void 0:C.toLowerCase())||"";return w.includes("board")||w.includes("trustee")||w.includes("chair")||w.includes("advisor")}),N=g.filter(j=>{var w;return(w=j.profiles)!=null&&w.organizational_role?j.profiles.organizational_role==="staff":!b.includes(j)&&!v.includes(j)});return{leadership:b,staff:N,boardMembers:v}},[m]);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-800",children:["Team Members (",t.length,")"]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search members...",value:o,onChange:g=>c(g.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors w-64"})]}),n.jsxs("select",{value:d,onChange:g=>h(g.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:hs.SUPER_ADMIN,children:"Super Admins"}),n.jsx("option",{value:hs.ADMIN,children:"Admins"}),n.jsx("option",{value:hs.MEMBER,children:"Members"})]})]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsx(Gv,{title:"Leadership",members:p.leadership,userMembership:e,profile:s,onMemberAction:r,setError:a,organization:i}),n.jsx(Gv,{title:"Board Members",members:p.boardMembers,userMembership:e,profile:s,onMemberAction:r,setError:a,organization:i}),n.jsx(Gv,{title:"Staff",members:p.staff,userMembership:e,profile:s,onMemberAction:r,setError:a,organization:i})]}),m.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(qe,{size:48,className:"mx-auto text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500",children:o||d!=="all"?"No members match your search criteria.":"No team members found."})]})]})}const Tf=43200,M4=1440,O4=Symbol.for("constructDateFrom");function Jj(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&O4 in t?t[O4](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ui(t,e){return Jj(t,t)}let zae={};function Lae(){return zae}function R4(t){const e=Ui(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function Xj(t,...e){const s=Jj.bind(null,t||e.find(r=>typeof r=="object"));return e.map(s)}function Kf(t,e){const s=+Ui(t)-+Ui(e);return s<0?-1:s>0?1:s}function $ae(t){return Jj(t,Date.now())}function Fae(t,e,s){const[r,a]=Xj(s==null?void 0:s.in,t,e),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function Iae(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Bae(t,e){return+Ui(t)-+Ui(e)}function Uae(t,e){const s=Ui(t);return s.setHours(23,59,59,999),s}function Vae(t,e){const s=Ui(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function qae(t,e){const s=Ui(t);return+Uae(s)==+Vae(s)}function Hae(t,e,s){const[r,a,i]=Xj(s==null?void 0:s.in,t,t,e),o=Kf(a,i),c=Math.abs(Fae(a,i));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*c);let d=Kf(a,i)===-o;qae(r)&&c===1&&Kf(r,i)===1&&(d=!1);const h=o*(c-+d);return h===0?0:h}function Gae(t,e,s){const r=Bae(t,e)/1e3;return Iae(s==null?void 0:s.roundingMethod)(r)}const Wae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yae=(t,e,s)=>{let r;const a=Wae[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function Wv(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const Kae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qae={date:Wv({formats:Kae,defaultWidth:"full"}),time:Wv({formats:Jae,defaultWidth:"full"}),dateTime:Wv({formats:Xae,defaultWidth:"full"})},Zae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eie=(t,e,s,r)=>Zae[t];function hu(t){return(e,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=s!=null&&s.width?String(s.width):o;a=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=s!=null&&s.width?String(s.width):t.defaultWidth;a=t.values[c]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const tie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},aie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oie=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},lie={ordinalNumber:oie,era:hu({values:tie,defaultWidth:"wide"}),quarter:hu({values:sie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hu({values:nie,defaultWidth:"wide"}),day:hu({values:rie,defaultWidth:"wide"}),dayPeriod:hu({values:aie,defaultWidth:"wide",formattingValues:iie,defaultFormattingWidth:"wide"})};function mu(t){return(e,s={})=>{const r=s.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?die(c,p=>p.test(o)):cie(c,p=>p.test(o));let h;h=t.valueCallback?t.valueCallback(d):d,h=s.valueCallback?s.valueCallback(h):h;const m=e.slice(o.length);return{value:h,rest:m}}}function cie(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function die(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function uie(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const c=e.slice(a.length);return{value:o,rest:c}}}const hie=/^(\d+)(th|st|nd|rd)?/i,mie=/\d+/i,fie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pie={any:[/^b/i,/^(a|c)/i]},gie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xie={any:[/1/i,/2/i,/3/i,/4/i]},bie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sie={ordinalNumber:uie({matchPattern:hie,parsePattern:mie,valueCallback:t=>parseInt(t,10)}),era:mu({matchPatterns:fie,defaultMatchWidth:"wide",parsePatterns:pie,defaultParseWidth:"any"}),quarter:mu({matchPatterns:gie,defaultMatchWidth:"wide",parsePatterns:xie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mu({matchPatterns:bie,defaultMatchWidth:"wide",parsePatterns:vie,defaultParseWidth:"any"}),day:mu({matchPatterns:yie,defaultMatchWidth:"wide",parsePatterns:wie,defaultParseWidth:"any"}),dayPeriod:mu({matchPatterns:jie,defaultMatchWidth:"any",parsePatterns:Nie,defaultParseWidth:"any"})},_ie={code:"en-US",formatDistance:Yae,formatLong:Qae,formatRelative:eie,localize:lie,match:Sie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cie(t,e,s){const r=Lae(),a=(s==null?void 0:s.locale)??r.locale??_ie,i=2520,o=Kf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o}),[d,h]=Xj(s==null?void 0:s.in,...o>0?[e,t]:[t,e]),m=Gae(h,d),p=(R4(h)-R4(d))/1e3,g=Math.round((m-p)/60);let b;if(g<2)return s!=null&&s.includeSeconds?m<5?a.formatDistance("lessThanXSeconds",5,c):m<10?a.formatDistance("lessThanXSeconds",10,c):m<20?a.formatDistance("lessThanXSeconds",20,c):m<40?a.formatDistance("halfAMinute",0,c):m<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):g===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",g,c);if(g<45)return a.formatDistance("xMinutes",g,c);if(g<90)return a.formatDistance("aboutXHours",1,c);if(g<M4){const v=Math.round(g/60);return a.formatDistance("aboutXHours",v,c)}else{if(g<i)return a.formatDistance("xDays",1,c);if(g<Tf){const v=Math.round(g/M4);return a.formatDistance("xDays",v,c)}else if(g<Tf*2)return b=Math.round(g/Tf),a.formatDistance("aboutXMonths",b,c)}if(b=Hae(h,d),b<12){const v=Math.round(g/Tf);return a.formatDistance("xMonths",v,c)}else{const v=b%12,N=Math.trunc(b/12);return v<3?a.formatDistance("aboutXYears",N,c):v<9?a.formatDistance("overXYears",N,c):a.formatDistance("almostXYears",N+1,c)}}function jw(t,e){return Cie(t,$ae(t),e)}function kie({post:t,organization:e,onDelete:s,canEdit:r,currentUserId:a,onOpenDetail:i,currentUserProfile:o}){var ee,ne;const c=_t(),d=o||(c==null?void 0:c.profile),[h,m]=y.useState(null),[p,g]=y.useState([]),[b,v]=y.useState((t==null?void 0:t.likes_count)||0),[N,j]=y.useState((t==null?void 0:t.comments_count)||0),[w,_]=y.useState(!1),[k,C]=y.useState(!1),[E,A]=y.useState([]),[M,R]=y.useState(!1),[D,L]=y.useState(!1),B=Ps.useRef(null),O=!!a,P=(t==null?void 0:t.image_urls)||[],z=(e==null?void 0:e.logo_url)||(e==null?void 0:e.image_url),q=t!=null&&t.tags?JSON.parse(t.tags):[];y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{if(a){const{data:de}=await $.from("organization_post_likes").select("reaction_type").eq("organization_post_id",t.id).eq("user_id",a).maybeSingle();m((de==null?void 0:de.reaction_type)||null)}const{data:Q}=await $.from("organization_post_likes").select("reaction_type, user_id, created_at").eq("organization_post_id",t.id).order("created_at",{ascending:!1});if(Q&&Q.length>0){const de={};Q.forEach(be=>{const se=be.reaction_type||"like";de[se]=(de[se]||0)+1});const ve=Object.entries(de).map(([be,se])=>({type:be,count:se}));g(ve),v(Q.length);const Pe=Q.map(be=>be.user_id),{data:He}=await $.from("profiles").select("id, full_name, avatar_url, title, organization_name, role").in("id",Pe),Qe=Q.map(be=>{const se=He==null?void 0:He.find(le=>le.id===be.user_id);return{user_id:be.user_id,profile_id:se==null?void 0:se.id,full_name:se==null?void 0:se.full_name,avatar_url:se==null?void 0:se.avatar_url,title:se==null?void 0:se.title,organization_name:se==null?void 0:se.organization_name,role:se==null?void 0:se.role,reaction_type:be.reaction_type,created_at:be.created_at}}).filter(be=>be.full_name);A(Qe)}else A([])}catch(Q){console.error("Error loading reactions:",Q)}})()},[t==null?void 0:t.id,a]);const I=async()=>{if(t!=null&&t.id)try{const{data:X,error:Q}=await $.from("organization_post_likes").select("user_id, reaction_type").eq("organization_post_id",t.id);if(Q)throw Q;const de={};X.forEach(ve=>{const Pe=ve.reaction_type||"like";de[Pe]=(de[Pe]||0)+1}),v(X.length),g(Object.entries(de).map(([ve,Pe])=>({type:ve,count:Pe})))}catch(X){console.error("Failed to refresh post data:",X)}},V=async X=>{if(!(!O||!(t!=null&&t.id)))try{const{data:Q}=await $.from("organization_post_likes").select("id").eq("organization_post_id",t.id).eq("user_id",a).maybeSingle();Q&&h===X?(await $.from("organization_post_likes").delete().eq("id",Q.id),m(null)):(await $.from("organization_post_likes").upsert({organization_post_id:t.id,user_id:a,reaction_type:X},{onConflict:"organization_post_id,user_id"}),m(X)),await I()}catch(Q){console.error("Error handling reaction:",Q)}},H=()=>{C(!k)},Y=()=>{s(t.id),_(!1)},U=async X=>{try{console.log("📝 Edit data received:",X);let Q=[],de=[],ve="";typeof X=="object"?(ve=X.content||X.editedContent||"",X.images?Q=Array.isArray(X.images)?X.images:[]:X.editedImages?Q=Array.isArray(X.editedImages)?X.editedImages:[]:X.image_urls&&(Q=Array.isArray(X.image_urls)?X.image_urls:[]),X.tags?de=Array.isArray(X.tags)?X.tags:[]:X.editedTags&&(de=Array.isArray(X.editedTags)?X.editedTags:[])):ve=String(X||""),ve=String(ve).trim(),Q=Q.filter(be=>be&&typeof be=="string"&&be.trim().length>0),de=de.filter(be=>be&&typeof be=="string"&&be.trim().length>0),console.log("📝 Processed data:",{content:ve,images:Q,tags:de,imagesLength:Q.length,tagsLength:de.length});const Pe={content:ve||""};de.length>0?Pe.tags=JSON.stringify(de):Pe.tags=null,Q.length>0?Pe.image_urls=Q:Pe.image_urls=null,console.log("📝 Final update data for database:",Pe);const{data:He,error:Qe}=await $.from("organization_posts").update(Pe).eq("id",t.id).select().single();if(Qe){console.error("❌ Post update error:",Qe),alert(`Failed to update post: ${Qe.message}`);return}console.log("✅ Post updated successfully:",He),He&&(t.content=He.content,t.tags=He.tags,t.image_urls=He.image_urls),L(!1)}catch(Q){console.error("❌ Unexpected error updating organization post:",Q),alert(`Failed to update post: ${Q.message}`)}},K=X=>{console.log("Image clicked:",X)},J=()=>{clearTimeout(B.current),R(!0)},W=()=>{B.current=setTimeout(()=>{R(!1)},300)};return!t||!e?null:n.jsxs("div",{className:"organization-post-card bg-white p-6 rounded-xl shadow-sm border border-slate-200 transition-all duration-300","data-organization-post-id":t==null?void 0:t.id,"data-post-id":t==null?void 0:t.id,children:[n.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:z?n.jsx("img",{src:z,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("span",{className:"text-white font-bold text-lg",children:(ne=(ee=e.name)==null?void 0:ee.charAt(0))==null?void 0:ne.toUpperCase()})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:e.name}),n.jsxs("p",{className:"text-sm text-slate-500",children:[t!=null&&t.created_at?jw(new Date(t.created_at),{addSuffix:!0}):"",t.updated_at&&t.updated_at!==t.created_at&&n.jsx("span",{className:"ml-1",children:"(edited)"})]})]}),r&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>_(!w),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(x0,{size:20})}),w&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg py-2 min-w-[120px] z-10",children:[n.jsxs("button",{onClick:()=>{L(!0),_(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center space-x-2",children:[n.jsx(Yw,{size:16}),n.jsx("span",{children:"Edit"})]}),n.jsxs("button",{onClick:Y,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[n.jsx(tn,{size:16}),n.jsx("span",{children:"Delete"})]})]})]})]})})]}),D?n.jsx(nR,{post:t,onSave:U,onCancel:()=>L(!1),initialContent:t.content,initialImages:P,initialTags:q}):n.jsx("div",{className:"cursor-pointer",onClick:()=>i&&i(t),children:n.jsx(Y1,{content:(t==null?void 0:t.content)||"",images:P,tags:q,onImageClick:K})}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 my-2 min-h-[20px]",children:[n.jsxs("div",{className:"relative",onMouseEnter:J,onMouseLeave:W,children:[b>0&&n.jsxs("div",{className:"flex items-center cursor-pointer",children:[n.jsx("div",{className:"flex items-center -space-x-1",children:(p||[]).sort((X,Q)=>Q.count-X.count).slice(0,3).map(({type:X})=>{const Q=zo.find(de=>de.type===X);return Q?n.jsx("div",{className:`p-0.5 rounded-full ${Q.color} border-2 border-white`,children:n.jsx(Q.Icon,{size:12,className:"text-white"})},X):null})}),n.jsxs("span",{className:"ml-2 text-sm text-slate-600",children:[b," ",b===1?"like":"likes"]})]}),M&&b>0&&E.length>0&&n.jsx("div",{className:"absolute left-0 bottom-full mb-2 bg-white border border-slate-200 rounded-lg shadow-lg p-3 z-20 min-w-[200px]",children:n.jsxs("div",{className:"space-y-2",children:[E.slice(0,5).map((X,Q)=>{var de;return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-300 flex-shrink-0",children:X.avatar_url?n.jsx("img",{src:X.avatar_url,alt:"",className:"w-6 h-6 rounded-full object-cover"}):n.jsx("span",{className:"text-xs text-white",children:(de=X.full_name)==null?void 0:de.charAt(0)})}),n.jsx("span",{className:"text-sm text-slate-700 truncate",children:X.full_name})]},Q)}),E.length>5&&n.jsxs("div",{className:"text-xs text-slate-500",children:["and ",E.length-5," others"]})]})})]}),N>0&&n.jsxs("span",{className:"cursor-pointer hover:underline",onClick:H,children:[N," ",N===1?"comment":"comments"]})]}),!D&&n.jsx(K1,{onReaction:V,onComment:H,onShare:()=>alert("Share functionality not implemented yet."),selectedReaction:h,disabled:!O}),k&&!D&&n.jsx("div",{className:"mt-4 border-t pt-4 max-h-96 overflow-y-auto",children:n.jsx(Bj,{post:{...t,id:t.id,_isOrganizationPost:!0},currentUserProfile:d,onCommentAdded:()=>j(X=>X+1),onCommentDeleted:()=>j(X=>Math.max(0,X-1)),organization:e})})]})}const ic=[{type:"like",Icon:y0,color:"bg-blue-500",label:"Like"},{type:"love",Icon:Nt,color:"bg-red-500",label:"Love"},{type:"celebrate",Icon:Gw,color:"bg-green-500",label:"Celebrate"},{type:"insightful",Icon:b0,color:"bg-yellow-500",label:"Insightful"}];function Eie({post:t,organization:e,onClose:s,currentUserId:r,canEdit:a}){var P,z,q,I;if(!t)return null;const[i,o]=y.useState(null),[c,d]=y.useState([]),[h,m]=y.useState((t==null?void 0:t.likes_count)||0),[p,g]=y.useState([]),[b,v]=y.useState(""),[N,j]=y.useState(!1),[w,_]=y.useState(0),[k,C]=y.useState(!1),E=!!r,A=(t==null?void 0:t.image_urls)||[],M=(e==null?void 0:e.logo_url)||(e==null?void 0:e.image_url);y.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{if(r){const{data:K}=await $.from("organization_post_likes").select("reaction_type").eq("organization_post_id",t.id).eq("user_id",r).single();o((K==null?void 0:K.reaction_type)||null)}const{data:H}=await $.from("organization_post_likes").select("reaction_type").eq("organization_post_id",t.id);if(H){const K={};H.forEach(W=>{const ee=W.reaction_type||"like";K[ee]=(K[ee]||0)+1});const J=Object.entries(K).map(([W,ee])=>({type:W,count:ee}));d(J),m(H.length)}const{data:Y,error:U}=await $.from("organization_post_comments").select(`
            *,
            profiles:profile_id (
              id,
              full_name,
              avatar_url
            )
          `).eq("organization_post_id",t.id).order("created_at",{ascending:!0});if(U)throw U;g(Y||[])}catch(H){console.error("Error loading modal data:",H)}})()},[t==null?void 0:t.id,r]);const R=async V=>{if(!(!E||!(t!=null&&t.id)))try{if(i===V){const{error:Y}=await $.from("organization_post_likes").delete().eq("organization_post_id",t.id).eq("user_id",r);if(Y)throw Y;o(null)}else{const{error:Y}=await $.from("organization_post_likes").upsert({organization_post_id:t.id,user_id:r,reaction_type:V});if(Y)throw Y;o(V)}await $.rpc("update_organization_post_likes_count",{post_id:t.id});const{data:H}=await $.from("organization_post_likes").select("reaction_type").eq("organization_post_id",t.id);if(H){const Y={};H.forEach(K=>{const J=K.reaction_type||"like";Y[J]=(Y[J]||0)+1});const U=Object.entries(Y).map(([K,J])=>({type:K,count:J}));d(U),m(H.length)}C(!1)}catch(H){console.error("Error handling reaction:",H)}},D=async V=>{if(V.preventDefault(),!(!b.trim()||!E||!(t!=null&&t.id)))try{j(!0);const{data:H,error:Y}=await $.from("organization_post_comments").insert({organization_post_id:t.id,user_id:r,profile_id:r,content:b.trim()}).select(`
          *,
          profiles:profile_id (
            id,
            full_name,
            avatar_url
          )
        `).single();if(Y)throw Y;g(U=>[...U,H]),v(""),await $.rpc("update_organization_post_comments_count",{post_id:t.id})}catch(H){console.error("Error submitting comment:",H)}finally{j(!1)}},L=()=>{_(V=>(V+1)%A.length)},B=()=>{_(V=>(V-1+A.length)%A.length)},O=i?ic.find(V=>V.type===i):ic[0];return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex",children:[A.length>0&&n.jsxs("div",{className:"flex-1 bg-slate-900 relative flex items-center justify-center",children:[n.jsx("img",{src:A[w],alt:`Post image ${w+1}`,className:"max-w-full max-h-full object-contain"}),A.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:B,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-all",children:"←"}),n.jsx("button",{onClick:L,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-2 rounded-full transition-all",children:"→"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full",children:[w+1," of ",A.length]})]})]}),n.jsxs("div",{className:`${A.length>0?"w-96":"flex-1"} flex flex-col`,children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:M?n.jsx("img",{src:M,alt:e.name,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("span",{className:"text-white font-bold",children:(z=(P=e.name)==null?void 0:P.charAt(0))==null?void 0:z.toUpperCase()})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:(e==null?void 0:e.name)||"Organization"}),n.jsx("p",{className:"text-sm text-slate-500",children:t!=null&&t.created_at?jw(new Date(t.created_at),{addSuffix:!0}):""})]})]}),n.jsx("button",{onClick:s,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Ke,{size:20})})]}),n.jsxs("div",{className:"p-6 border-b border-slate-200",children:[n.jsx("div",{className:"text-slate-800 mb-4",dangerouslySetInnerHTML:{__html:(t==null?void 0:t.content)||""}}),(t==null?void 0:t.tags)&&JSON.parse(t.tags).length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:JSON.parse(t.tags).map((V,H)=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:["#",V.label||V]},H))})]}),h>0&&n.jsx("div",{className:"px-6 py-3 border-b border-slate-200",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"flex items-center -space-x-1",children:c.sort((V,H)=>H.count-V.count).slice(0,3).map(({type:V})=>{const H=ic.find(Y=>Y.type===V);return H?n.jsx("div",{className:`p-0.5 rounded-full ${H.color} border-2 border-white`,children:n.jsx(H.Icon,{size:12,className:"text-white"})},V):null})}),n.jsxs("span",{className:"text-sm text-slate-600",children:[h," ",h===1?"reaction":"reactions"]})]})}),n.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>E?R("like"):null,onMouseEnter:()=>E&&C(!0),onMouseLeave:()=>C(!1),disabled:!E,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${i?`${(q=ic.find(V=>V.type===i))==null?void 0:q.color.replace("bg-","text-").replace("-500","-600")} bg-${(I=ic.find(V=>V.type===i))==null?void 0:I.color.split("-")[1]}-50`:"text-slate-500 hover:bg-slate-50 hover:text-blue-600"} ${E?"":"opacity-50 cursor-not-allowed"}`,children:[n.jsx(O.Icon,{size:18,className:i===O.type?"fill-current":""}),n.jsx("span",{className:"text-sm",children:i?O.label:"Like"})]}),k&&E&&n.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-slate-200 rounded-lg shadow-lg p-2 flex space-x-1 z-10",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:ic.map(V=>n.jsx("button",{onClick:()=>R(V.type),className:`p-2 rounded-lg transition-all hover:scale-110 ${V.color} hover:shadow-md`,title:V.label,children:n.jsx(V.Icon,{size:16,className:"text-white"})},V.type))})]}),n.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-slate-500 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors",children:[n.jsx(Jn,{size:18}),n.jsx("span",{className:"text-sm",children:"Comment"})]}),n.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 text-slate-500 hover:bg-slate-50 hover:text-blue-600 rounded-lg transition-colors",children:[n.jsx(Ww,{size:18}),n.jsx("span",{className:"text-sm",children:"Share"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:p.length>0&&n.jsx("div",{className:"p-6 space-y-4",children:p.map(V=>{var H,Y,U,K,J;return n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:(H=V.profiles)!=null&&H.avatar_url?n.jsx("img",{src:V.profiles.avatar_url,alt:V.profiles.full_name,className:"w-8 h-8 rounded-full object-cover"}):n.jsx("span",{className:"text-white font-medium text-sm",children:(K=(U=(Y=V.profiles)==null?void 0:Y.full_name)==null?void 0:U.charAt(0))==null?void 0:K.toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:(J=V.profiles)==null?void 0:J.full_name}),n.jsx("span",{className:"text-xs text-slate-500",children:jw(new Date(V.created_at),{addSuffix:!0})})]}),n.jsx("p",{className:"text-sm text-slate-700 mt-1",children:V.content})]})]},V.id)})})}),E?n.jsx("div",{className:"p-6 border-t border-slate-200",children:n.jsxs("form",{onSubmit:D,className:"flex space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white font-medium text-sm",children:"U"})}),n.jsxs("div",{className:"flex-1 flex space-x-2",children:[n.jsx("input",{type:"text",value:b,onChange:V=>v(V.target.value),placeholder:"Add a comment...",className:"flex-1 p-2 border border-slate-200 rounded-lg focus:outline-none focus:border-blue-500"}),n.jsx("button",{type:"submit",disabled:!b.trim()||N,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Cc,{size:16})})]})]})}):n.jsx("div",{className:"p-6 border-t border-slate-200 text-center",children:n.jsxs("p",{className:"text-slate-500 text-sm",children:[n.jsx("a",{href:"/login",className:"text-blue-600 hover:underline",children:"Log in"})," to react and comment on this post"]})})]})]})})}const Qj=({organization:t,session:e,userMembership:s,currentUserProfile:r})=>{var L,B,O;bt();const[a,i]=y.useState(null),[o,c]=y.useState(!1),[d,h]=y.useState([]),[m,p]=y.useState(!0),[g,b]=y.useState(""),[v,N]=y.useState(null),[j,w]=y.useState(""),_=s&&Cr(s.role,ns.EDIT_ORGANIZATION,(L=e==null?void 0:e.user)==null?void 0:L.is_omega_admin),k=_;y.useEffect(()=>{(async()=>{var z,q,I,V,H,Y,U;if((z=e==null?void 0:e.user)!=null&&z.id){if(r){N(r);return}try{const{data:K,error:J}=await $.from("profiles").select("id, full_name, avatar_url").eq("id",e.user.id).maybeSingle();N(K&&!J?{...K,avatar_url:K.avatar_url||((q=e.user.user_metadata)==null?void 0:q.avatar_url)||((I=e.user.user_metadata)==null?void 0:I.picture)}:{id:e.user.id,full_name:((V=e.user.user_metadata)==null?void 0:V.full_name)||((H=e.user.user_metadata)==null?void 0:H.name),avatar_url:((Y=e.user.user_metadata)==null?void 0:Y.avatar_url)||((U=e.user.user_metadata)==null?void 0:U.picture)})}catch(K){console.error("Error fetching user profile:",K)}}})()},[(B=e==null?void 0:e.user)==null?void 0:B.id,r]);const C=y.useCallback(async()=>{if(t!=null&&t.id)try{p(!0),b("");const{data:P,error:z}=await $.from("organization_posts").select("*").eq("organization_id",t.id).eq("organization_type",t.type).order("created_at",{ascending:!1}).limit(20);if(z)throw z;h(P||[])}catch(P){console.error("Error fetching organization posts:",P),b("Failed to load posts")}finally{p(!1)}},[t==null?void 0:t.id,t==null?void 0:t.type]);y.useEffect(()=>{C()},[C]),y.useEffect(()=>{if(!(t!=null&&t.id))return;const P=$.channel(`organization_posts:${t.id}`);return P.on("postgres_changes",{event:"INSERT",schema:"public",table:"organization_posts",filter:`organization_id=eq.${t.id}`},z=>{h(q=>[z.new,...q])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organization_posts",filter:`organization_id=eq.${t.id}`},z=>{h(q=>q.map(I=>I.id===z.new.id?{...I,...z.new}:I))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"organization_posts",filter:`organization_id=eq.${t.id}`},z=>{h(q=>q.filter(I=>I.id!==z.old.id))}).subscribe(),()=>{$.removeChannel(P)}},[t==null?void 0:t.id]);const E=P=>{i(P),c(!0)},A=()=>{i(null),c(!1)},M=y.useCallback(P=>{const z={...P,likes_count:0,comments_count:0};h(q=>[z,...q])},[]),R=y.useCallback(async P=>{if(k)try{const{error:z}=await $.from("organization_posts").delete().eq("id",P).eq("organization_id",t.id);if(z)throw z;h(q=>q.filter(I=>I.id!==P))}catch(z){console.error("Error deleting post:",z),b("Failed to delete post")}},[k,t==null?void 0:t.id]),D=()=>{const P=document.querySelector("[data-create-post]");P&&P.click()};return m?n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"})]})]})}):n.jsxs("div",{className:"space-y-6",children:[g&&n.jsxs("div",{className:"p-4 bg-red-50 text-red-700 border border-red-200 rounded-lg flex items-center",children:[n.jsx(On,{className:"w-5 h-5 mr-3 flex-shrink-0"}),n.jsx("span",{children:g})]}),_&&n.jsx("div",{"data-create-post":!0,children:n.jsx(Wj,{profile:r,onNewPost:M,channel:"organization",placeholder:`Share an update for ${t.name}...`,organizationId:t.id,organizationType:t.type,organization:t})}),d.length>0?n.jsx("div",{className:"space-y-6",children:d.map(P=>{var z;return n.jsx(kie,{post:P,organization:t,onDelete:k?R:null,canEdit:k,currentUserId:(z=e==null?void 0:e.user)==null?void 0:z.id,onOpenDetail:E,currentUserProfile:r},P.id)})}):n.jsxs("div",{className:"bg-white p-12 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx($r,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Updates Yet"}),n.jsx("p",{className:"text-slate-600 mb-6",children:_?`Be the first to share an update for ${t.name}!`:`No updates have been shared by ${t.name} yet.`}),_&&n.jsxs("button",{onClick:D,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx($s,{size:16,className:"mr-2"}),"Create First Post"]})]}),o&&n.jsx(Eie,{post:a,organization:t,onClose:A,currentUserId:(O=e==null?void 0:e.user)==null?void 0:O.id,canEdit:k})]})};function Aie({activeTab:t,organization:e,members:s,userMembership:r,profile:a,onMemberAction:i,setError:o}){const{session:c}=_t(),d=()=>n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Organization Updates"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Share updates, announcements, and engage with your community."})]}),n.jsx(Qj,{organization:e,session:c,userMembership:r,currentUserProfile:a})]}),h=()=>n.jsx(Pae,{members:s,userMembership:r,profile:a,onMemberAction:i,setError:o,organization:e}),m=(p,g,b)=>n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"text-center py-12",children:[b,n.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:p}),n.jsx("p",{className:"text-slate-600",children:g})]})});switch(t){case"overview":return d();case"team":return h();case"programs":return m("Programs & Services","Manage your organization's programs and services.",n.jsx(ep,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}));case"supporters":return m("Supporters & Donors","Manage relationships with your supporters and donors.",n.jsx(mn,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}));case"grants":return m("Active Grants","Manage your active grant opportunities.",n.jsx(ep,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}));case"our-grantees":return m("Our Grantees","View and manage organizations that have received your grants.",n.jsx(qe,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}));default:return m("Coming Soon","This feature is under development.",n.jsx($r,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}))}}function Tie({isOpen:t,onClose:e,organization:s,userRole:r,onConfirm:a,loading:i}){return!t||!s?null:n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(On,{className:"w-6 h-6 text-orange-500 mr-3"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Leave Organization"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you sure you want to leave ",n.jsx("strong",{children:s.name}),"?"]}),n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-orange-800 text-sm",children:[n.jsx("strong",{children:"Note:"})," You'll lose access to organization features and will need to be re-invited to rejoin."]})}),r===hs.SUPER_ADMIN&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("p",{className:"text-red-800 text-sm",children:[n.jsx("strong",{children:"Warning:"})," You are a Super Admin. Make sure other admins can manage the organization before leaving."]})})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:e,disabled:i,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:i,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center justify-center transition-colors",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Leaving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_c,{className:"w-4 h-4 mr-2"}),"Leave Organization"]})})]})]})})}function Mie({isOpen:t,onClose:e,organization:s,members:r,onConfirm:a,loading:i,setError:o}){const[c,d]=y.useState("");y.useEffect(()=>{t&&(d(""),o&&o(""))},[t,o]);const h=async()=>{if(c!==(s==null?void 0:s.name)){o&&o("Please enter the organization name exactly to confirm deletion.");return}await a(c)&&e()},m=()=>{d(""),o&&o(""),e()};return!t||!s?null:n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-xl max-w-lg w-full mx-4",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(tn,{className:"w-6 h-6 text-red-600 mr-3"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Delete Organization"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("p",{className:"text-slate-600 mb-4",children:[n.jsx("strong",{className:"text-red-600",children:"Warning:"})," This action cannot be undone. Deleting ",n.jsx("strong",{children:s.name})," will permanently:"]}),n.jsxs("ul",{className:"text-sm text-slate-600 space-y-2 mb-4 bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"•"}),n.jsx("span",{children:"Delete all associated data, settings, and history"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"•"}),n.jsxs("span",{children:["Remove all organization members (",(r==null?void 0:r.length)||0," people)"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"•"}),n.jsx("span",{children:"Delete all organization posts and content"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-red-500 mr-2",children:"•"}),n.jsx("span",{children:"Remove the organization from the platform entirely"})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:n.jsxs("p",{className:"text-yellow-800 text-sm",children:[n.jsx("strong",{children:"Important:"})," All members will be automatically removed and notified. Make sure to communicate this change to your team beforehand."]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"To confirm deletion, type the organization name exactly:"}),n.jsx("p",{className:"text-sm font-mono bg-slate-100 p-2 rounded border mb-2",children:s.name}),n.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),placeholder:"Enter organization name exactly as shown",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:i})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:h,disabled:i||c!==s.name,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(tn,{className:"w-4 h-4 mr-2"}),"Delete Forever"]})})]})]})})}function Oie(t,e){var _;const s=bt(),[r,a]=y.useState(null),[i,o]=y.useState([]),[c,d]=y.useState(null),[h,m]=y.useState(!0),[p,g]=y.useState(""),b=y.useCallback(async()=>{var k;if(!((k=e==null?void 0:e.user)!=null&&k.id)||!t){m(!1);return}if(m(!0),g(""),(t==null?void 0:t.is_omega_admin)===!0){m(!1);return}try{const{data:C,error:E}=await $.from("organization_memberships").select("*").eq("profile_id",t.id).order("joined_at",{ascending:!1}).limit(1);if(E){g("Error checking membership"),m(!1);return}C&&C.length>0?d(C[0]):(d(null),a(null),o([]))}catch{g("Error checking membership"),d(null),a(null),o([])}finally{m(!1)}},[t,(_=e==null?void 0:e.user)==null?void 0:_.id]),v=y.useCallback(async()=>{if(c)try{m(!0);const{data:k,error:C}=await $.from("organizations").select("*").eq("id",c.organization_id).single();if(C||!k){g("Organization not found"),m(!1);return}a({...k,type:c.organization_type,logo_url:k.image_url,tagline:k.tagline||"",description:k.description||"",location:k.location||"",website:k.website||"",contact_email:k.contact_email||""});const{data:E,error:A}=await $.from("organization_memberships").select(`
                    *,
                    profiles (
                        id,
                        full_name,
                        avatar_url,
                        title,
                        is_omega_admin,
                        organizational_role
                    )
                `).eq("organization_id",c.organization_id).eq("organization_type",c.organization_type).order("role",{ascending:!1}).order("joined_at",{ascending:!0});A||o(E||[])}catch{g("Error loading organization data")}finally{m(!1)}},[c]),N=async()=>{if(c)try{m(!0),g("");const{error:k}=await $.from("organization_memberships").delete().eq("profile_id",e.user.id).eq("organization_id",c.organization_id);if(k){g("Error leaving organization: "+k.message);return}await $.from("profiles").update({organization_choice:null,selected_organization_id:null,selected_organization_type:null,updated_at:new Date}).eq("id",e.user.id),d(null),a(null),o([]),await new Promise(C=>setTimeout(C,500)),await b()}catch{g("An unexpected error occurred while leaving the organization.")}finally{m(!1)}},j=async k=>{if(!r||k!==r.name)return g("Please enter the organization name exactly to confirm deletion."),!1;try{m(!0),g("");const{error:C}=await $.from("organization_memberships").delete().eq("organization_id",r.id);if(C)throw new Error("Failed to remove organization members: "+C.message);await $.from("organization_posts").delete().eq("organization_id",r.id);const{error:E}=await $.from("organizations").delete().eq("id",r.id);if(E)throw new Error("Failed to delete organization: "+E.message);return await $.from("profiles").update({organization_choice:null,selected_organization_id:null,selected_organization_type:null,updated_at:new Date}).eq("id",e.user.id),alert("Organization deleted successfully."),s("/profile"),!0}catch(C){return console.error("Delete organization error:",C),g(C.message||"An unexpected error occurred while deleting the organization."),!1}finally{m(!1)}},w=async k=>{if(!r)return!1;try{m(!0),g("");const{error:C}=await $.from("organizations").update({...k,updated_at:new Date}).eq("id",r.id);return C?(g("Failed to save changes. Please try again."),!1):(a(E=>({...E,...k})),!0)}catch{return g("An unexpected error occurred. Please try again."),!1}finally{m(!1)}};return y.useEffect(()=>{b()},[b]),y.useEffect(()=>{c&&v()},[v]),{organization:r,members:i,userMembership:c,loading:h,error:p,setError:g,checkMembership:b,fetchOrganizationData:v,executeLeave:N,executeDeleteOrganization:j,updateOrganization:w}}function Rie(){const{profile:t,session:e}=_t();bt();const[s,r]=y.useState("overview"),[a,i]=y.useState(!1),[o,c]=y.useState(!1),{organization:d,members:h,userMembership:m,loading:p,error:g,setError:b,fetchOrganizationData:v,executeLeave:N,executeDeleteOrganization:j,updateOrganization:w}=Oie(t,e),_=(t==null?void 0:t.is_omega_admin)===!0,k=m==null?void 0:m.role,C=["super_admin","admin"].includes(k)||_;return p?n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"bg-white h-64 rounded-xl shadow-sm border border-slate-200"}),n.jsx("div",{className:"bg-white h-96 rounded-xl shadow-sm border border-slate-200"})]})}):g&&!d?n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(On,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Organization Not Found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:g})]})}):d?_&&!m?n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-slate-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Wu,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Omega Admin Access"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"You have administrative access to view and manage this organization as an Omega Admin."})]})}):n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"space-y-6",children:[g&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:n.jsx(Mae,{organization:d,userMembership:m,profile:t,onUpdate:w,onLeave:()=>i(!0),onDelete:()=>c(!0),setError:b})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsx(Rae,{activeTab:s,setActiveTab:r,userMembership:m,canViewAnalytics:C}),n.jsx(Aie,{activeTab:s,organization:d,members:h,userMembership:m,profile:t,onMemberAction:v,setError:b})]}),n.jsx(Tie,{isOpen:a,onClose:()=>i(!1),organization:d,userRole:m==null?void 0:m.role,onConfirm:async()=>{await N(),i(!1)},loading:p}),n.jsx(Mie,{isOpen:o,onClose:()=>c(!1),organization:d,members:h,onConfirm:j,loading:p,setError:b})]})}):n.jsx(kae,{profile:t,session:e,onComplete:()=>{v()}})}const Die=({organization:t,canEdit:e,onSave:s,saving:r,uploading:a})=>{const[i,o]=y.useState(!1),[c,d]=y.useState(""),h=y.useRef(null),m=async b=>{const v=b.target.files[0];v&&(await s(v,"banner","file"),o(!1))},p=async()=>{c.trim()&&(await s(c.trim(),"banner","url"),o(!1),d(""))},g=async()=>{await s(null,"banner","remove"),o(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative h-80 bg-slate-200 overflow-hidden",children:[t.banner_image_url?n.jsx("img",{src:t.banner_image_url,alt:"Organization banner",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white via-stone-50 to-stone-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-slate-400",children:[n.jsx(hn,{className:"w-12 h-12 mx-auto mb-2"}),n.jsx("p",{className:"text-lg",children:"No banner image"})]})}),e&&n.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:n.jsx("div",{className:"max-w-7xl mx-auto px-8 flex justify-end w-full",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>o(!0),className:"bg-white bg-opacity-90 hover:bg-opacity-100 text-slate-700 px-3 py-2 rounded-lg flex items-center gap-2 font-medium text-sm shadow-sm",children:[n.jsx(hn,{className:"w-4 h-4"}),t.banner_image_url?"Edit Banner":"Add Banner"]}),t.banner_image_url&&n.jsxs("button",{onClick:g,className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-2 rounded-lg flex items-center gap-2 font-medium text-sm shadow-sm",children:[n.jsx(tn,{className:"w-4 h-4"}),"Remove"]})]})})})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-2xl transform transition-all overflow-hidden",children:[n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-blue-300 to-indigo-300 rounded-full blur-2xl opacity-60 -translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full blur-xl opacity-50 translate-x-4 -translate-y-4"}),n.jsx("div",{className:"absolute bottom-0 left-1/2 w-28 h-28 bg-gradient-to-br from-pink-200 to-purple-200 rounded-full blur-2xl opacity-40 -translate-x-1/2 translate-y-8"})]}),n.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Update Banner Image"}),n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Add a beautiful banner to your organization"})]}),n.jsx("button",{onClick:()=>{o(!1),d("")},className:"text-slate-600 hover:text-slate-800 transition-colors p-1 bg-white bg-opacity-50 rounded-lg backdrop-blur-sm",children:n.jsx(Ke,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-400 to-indigo-400"}),"Add from URL"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"url",value:c,onChange:b=>d(b.target.value),placeholder:"https://example.com/banner-image.jpg",className:"flex-1 px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white text-sm"}),n.jsxs("button",{onClick:p,disabled:!c.trim()||r,className:"px-4 py-3 relative overflow-hidden text-white rounded-xl transition-all duration-200 disabled:opacity-50 flex items-center gap-2 group/btn",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-400"}),n.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full blur-md opacity-60 group-hover/btn:scale-150 transition-transform duration-500"})]}),n.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[n.jsx(A3,{className:"w-4 h-4"}),"Add"]})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-3 bg-white text-slate-500 font-medium",children:"or"})})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"}),"Upload from computer"]}),n.jsxs("div",{className:"relative overflow-hidden border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-slate-400 transition-colors bg-white",children:[n.jsxs("div",{className:"absolute inset-0 opacity-30",children:[n.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full blur-2xl"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-br from-blue-200 to-indigo-200 rounded-full blur-xl"})]}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center",children:n.jsx(hn,{className:"w-6 h-6 text-slate-500"})}),n.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:m,className:"hidden"}),n.jsx("button",{onClick:()=>{var b;return(b=h.current)==null?void 0:b.click()},className:"text-purple-600 hover:text-purple-700 font-semibold text-sm mb-2 block w-full",children:"Choose file to upload"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG up to 5MB"})]})]})]}),(r||a)&&n.jsxs("div",{className:"relative overflow-hidden bg-white border-2 border-purple-100 rounded-xl p-4",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full blur-xl opacity-30"})}),n.jsxs("div",{className:"relative flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-purple-400 border-t-transparent"}),n.jsx("span",{className:"text-sm font-medium text-purple-700",children:a?"Uploading image...":"Saving changes..."})]})]})]}),n.jsx("div",{className:"bg-slate-50 px-6 py-4 flex justify-end",children:n.jsx("button",{onClick:()=>{o(!1),d("")},disabled:r||a,className:"px-4 py-2 text-slate-600 font-medium text-sm hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"})})]})})]})},Pie=({organization:t,canEdit:e,onSave:s,saving:r,uploading:a})=>{var b,v;const[i,o]=y.useState(!1),[c,d]=y.useState(""),h=y.useRef(null),m=async N=>{const j=N.target.files[0];j&&(await s(j,"logo","file"),o(!1))},p=async()=>{c.trim()&&(await s(c.trim(),"logo","url"),o(!1),d(""))},g=async()=>{await s(null,"logo","remove"),o(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative -mt-20",children:[n.jsx("div",{className:"w-40 h-40 rounded-2xl bg-white border-4 border-white shadow-xl overflow-hidden",children:t.image_url?n.jsx("img",{src:t.image_url,alt:`${t.name} logo`,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-4xl font-bold text-slate-600",children:((v=(b=t.name)==null?void 0:b.charAt(0))==null?void 0:v.toUpperCase())||"?"})}),e&&n.jsxs("div",{className:"absolute -bottom-2 -right-2 flex gap-2",children:[n.jsx("button",{onClick:()=>o(!0),className:"bg-white hover:bg-slate-50 text-slate-700 p-2 rounded-full shadow-md border border-slate-200",title:t.image_url?"Edit Logo":"Add Logo",children:n.jsx(hn,{className:"w-4 h-4"})}),t.image_url&&n.jsx("button",{onClick:g,className:"bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded-full shadow-md border border-red-200",title:"Remove Logo",children:n.jsx(tn,{className:"w-4 h-4"})})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-2xl transform transition-all overflow-hidden",children:[n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-emerald-300 to-teal-300 rounded-full blur-2xl opacity-60 -translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full blur-xl opacity-50 translate-x-4 -translate-y-4"}),n.jsx("div",{className:"absolute bottom-0 left-1/2 w-28 h-28 bg-gradient-to-br from-orange-200 to-pink-200 rounded-full blur-2xl opacity-40 -translate-x-1/2 translate-y-8"})]}),n.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Update Logo"}),n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Add your organization's logo"})]}),n.jsx("button",{onClick:()=>{o(!1),d("")},className:"text-slate-600 hover:text-slate-800 transition-colors p-1 bg-white bg-opacity-50 rounded-lg backdrop-blur-sm",children:n.jsx(Ke,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-emerald-400 to-teal-400"}),"Add from URL"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"url",value:c,onChange:N=>d(N.target.value),placeholder:"https://example.com/logo.jpg",className:"flex-1 px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white text-sm"}),n.jsxs("button",{onClick:p,disabled:!c.trim()||r,className:"px-4 py-3 relative overflow-hidden text-white rounded-xl transition-all duration-200 disabled:opacity-50 flex items-center gap-2 group/btn",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400 to-teal-400"}),n.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full blur-md opacity-60 group-hover/btn:scale-150 transition-transform duration-500"})]}),n.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[n.jsx(A3,{className:"w-4 h-4"}),"Add"]})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-3 bg-white text-slate-500 font-medium",children:"or"})})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-orange-400 to-pink-400"}),"Upload from computer"]}),n.jsxs("div",{className:"relative overflow-hidden border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-slate-400 transition-colors bg-white",children:[n.jsxs("div",{className:"absolute inset-0 opacity-30",children:[n.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-orange-200 to-pink-200 rounded-full blur-2xl"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-br from-emerald-200 to-teal-200 rounded-full blur-xl"})]}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl flex items-center justify-center",children:n.jsx(hn,{className:"w-6 h-6 text-slate-500"})}),n.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:m,className:"hidden"}),n.jsx("button",{onClick:()=>{var N;return(N=h.current)==null?void 0:N.click()},className:"text-emerald-600 hover:text-emerald-700 font-semibold text-sm mb-2 block w-full",children:"Choose file to upload"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG up to 5MB"})]})]})]}),(r||a)&&n.jsxs("div",{className:"relative overflow-hidden bg-white border-2 border-emerald-100 rounded-xl p-4",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-emerald-200 to-teal-200 rounded-full blur-xl opacity-30"})}),n.jsxs("div",{className:"relative flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-emerald-400 border-t-transparent"}),n.jsx("span",{className:"text-sm font-medium text-emerald-700",children:a?"Uploading logo...":"Saving changes..."})]})]})]}),n.jsx("div",{className:"bg-slate-50 px-6 py-4 flex justify-end",children:n.jsx("button",{onClick:()=>{o(!1),d("")},disabled:r||a,className:"px-4 py-2 text-slate-600 font-medium text-sm hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"})})]})})]})},zie=({organization:t,isFollowing:e,followersCount:s,isBookmarked:r,bookmarksCount:a,onFollow:i,onBookmark:o,config:c={},activeTab:d,setActiveTab:h,tabs:m=[],userMembership:p,session:g,onUpdate:b})=>{var H;const[v,N]=y.useState(!1),[j,w]=y.useState(!1),[_,k]=y.useState(""),[C,E]=y.useState(!1),[A,M]=y.useState({name:(t==null?void 0:t.name)||"",location:(t==null?void 0:t.location)||"",website:(t==null?void 0:t.website)||"",year_founded:(t==null?void 0:t.year_founded)||""}),R=bt(),D=p&&Cr(p.role,ns.EDIT_ORGANIZATION,(H=g==null?void 0:g.user)==null?void 0:H.is_omega_admin);if(!t)return null;const B=(Y=>{const U=Y==null?void 0:Y.toLowerCase();return{nonprofit:{label:"501(c)(3) Nonprofit",gradient:"from-green-500 to-emerald-600"},foundation:{label:"Foundation",gradient:"from-purple-500 to-indigo-600"},funder:{label:"Funder",gradient:"from-blue-500 to-indigo-600"},"for-profit":{label:"Company",gradient:"from-purple-500 to-pink-600"},forprofit:{label:"Company",gradient:"from-purple-500 to-pink-600"},government:{label:"Government Agency",gradient:"from-indigo-500 to-blue-600"},healthcare:{label:"Healthcare Organization",gradient:"from-red-500 to-pink-600"},education:{label:"Educational Institution",gradient:"from-yellow-500 to-orange-600"}}[U]||{label:"Organization",gradient:"from-slate-500 to-slate-600"}})(t.type),O={Globe:"🌐",Building:"🏢",Users:"👥",Rocket:"🚀",TrendingUp:"📈",Star:"⭐",DollarSign:"💰",HandHeart:"🤝",BarChart3:"📊",Heart:"❤️",Award:"🏆",BookOpen:"📚",Microscope:"🔬",Building2:"🏛️",Flag:"🚩",Briefcase:"💼",Target:"🎯",Camera:"📷"},P=async(Y,U,K)=>{try{k(""),N(!0);let J=Y;if(K==="file"){if(w(!0),Y.size>5*1024*1024)throw new Error("File size must be less than 5MB");if(!Y.type.startsWith("image/"))throw new Error("File must be an image");const ne=Y.name.split(".").pop(),Q=`organizations/${`org-${t.id}-${U}-${Date.now()}.${ne}`}`,{data:de,error:ve}=await $.storage.from("avatars").upload(Q,Y,{cacheControl:"3600",upsert:!1});if(ve)throw ve;const{data:{publicUrl:Pe}}=$.storage.from("avatars").getPublicUrl(Q);J=Pe}else K==="remove"&&(J=null);const W=U==="banner"?{banner_image_url:J}:{image_url:J},{error:ee}=await $.from("organizations").update(W).eq("id",t.id);if(ee)throw ee;return b&&await b({...t,...W}),!0}catch(J){return console.error("Error saving image:",J),k("Failed to save image: "+J.message),!1}finally{N(!1),w(!1)}},z=async()=>{try{k(""),N(!0);const Y={};if(A.name!==t.name&&(Y.name=A.name),A.location!==t.location&&(Y.location=A.location),A.website!==t.website&&(Y.website=A.website),A.year_founded!==t.year_founded&&(Y.year_founded=A.year_founded?parseInt(A.year_founded):null),Object.keys(Y).length===0)return E(!1),!0;const{error:U}=await $.from("organizations").update(Y).eq("id",t.id);if(U)throw U;return b&&await b({...t,...Y}),E(!1),!0}catch(Y){return console.error("Error updating organization:",Y),k("Failed to save changes: "+Y.message),!1}finally{N(!1)}},q=()=>{if(t.slug)R(`/organizations/${t.slug}`);else{const Y=new URL(window.location);Y.searchParams.delete("edit"),R(Y.pathname+Y.search)}},I=()=>{R("/profile/my-organization")},V=()=>{M({name:(t==null?void 0:t.name)||"",location:(t==null?void 0:t.location)||"",website:(t==null?void 0:t.website)||"",year_founded:(t==null?void 0:t.year_founded)||""}),E(!0)};return n.jsxs("div",{className:"bg-white border-b border-slate-200",children:[n.jsx("div",{className:"bg-blue-600 text-white px-8 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:"Editing Mode"}),n.jsx("span",{className:"text-blue-200 text-sm",children:"Make changes to your organization profile"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:I,className:"flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Zn,{className:"w-4 h-4"}),"Back to Dashboard"]}),n.jsxs("button",{onClick:q,className:"flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(pn,{className:"w-4 h-4"}),"View Live"]})]})]})}),_&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx(On,{className:"h-5 w-5 text-red-400"}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-700",children:_})}),n.jsx("button",{onClick:()=>k(""),className:"ml-auto text-red-400 hover:text-red-600",children:n.jsx(Ke,{className:"h-4 w-4"})})]})}),n.jsx(Die,{organization:t,canEdit:D,onSave:P,saving:v,uploading:j}),n.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[n.jsxs("div",{className:"flex items-start gap-6 pb-6",children:[n.jsx(Pie,{organization:t,canEdit:D,onSave:P,saving:v,uploading:j}),n.jsxs("div",{className:"flex-1 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${B.gradient} text-white`,children:[n.jsx(Xt,{className:"w-4 h-4 mr-2"}),B.label]}),t.year_founded&&n.jsxs("span",{className:"text-slate-500 font-medium text-sm",children:["Since ",t.year_founded]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:t.name}),D&&n.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[n.jsx(Gi,{className:"w-4 h-4"}),"Edit Section"]}),t.isVerified&&n.jsx(Ks,{className:"w-7 h-7 text-blue-500"})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[t.location?n.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[n.jsx(Lt,{className:"w-4 h-4"}),t.location]}):D&&n.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200",children:[n.jsx(Lt,{className:"w-4 h-4"}),"Add location"]}),t.website?n.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-purple-100 text-purple-800 border border-purple-200 hover:bg-purple-200 transition-colors",children:[n.jsx(Mn,{className:"w-4 h-4"}),"Website"]}):D&&n.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200",children:[n.jsx(Mn,{className:"w-4 h-4"}),"Add website"]}),!t.year_founded&&D&&n.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-slate-100 text-slate-600 border border-slate-200 hover:bg-slate-200",children:[n.jsx(bs,{className:"w-4 h-4"}),"Add year founded"]})]}),n.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("span",{className:"text-base",children:"👥"}),n.jsx("span",{className:"font-semibold text-slate-900",children:new Intl.NumberFormat("en-US").format(s||0)}),n.jsx("span",{className:"text-sm",children:"Followers"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("span",{className:"text-base",children:a>0?"❤️":"🤍"}),n.jsx("span",{className:"font-semibold text-slate-900",children:new Intl.NumberFormat("en-US").format(a||0)}),n.jsx("span",{className:"text-sm",children:"Likes"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 py-4",children:[n.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),i()},className:`px-6 py-3 rounded-full font-semibold transition-all duration-300 flex items-center gap-2 ${e?"bg-slate-200 text-slate-800":`bg-gradient-to-r ${B.gradient} text-white hover:shadow-lg`}`,children:e?"Following":"Follow"}),n.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),o()},className:"p-3 bg-slate-100 text-slate-600 rounded-full hover:bg-slate-200 transition-colors w-12 h-12 flex items-center justify-center",children:n.jsx("span",{className:"text-lg",children:r?"❤️":"🤍"})})]})]}),n.jsx("div",{className:"pb-6",children:n.jsx("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:m.map(Y=>{const U=d===Y.id,K=O[Y.icon]||"📄";return n.jsxs("button",{onClick:()=>h(Y.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-full font-medium text-sm transition-all duration-200 whitespace-nowrap ${U?`bg-gradient-to-r ${B.gradient} text-white shadow-md`:"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,children:[n.jsx("span",{className:"text-base",children:K}),Y.label]},Y.id)})})})]}),C&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-2xl transform transition-all overflow-hidden",children:[n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-purple-300 to-pink-300 rounded-full blur-2xl opacity-60 -translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-blue-300 to-indigo-300 rounded-full blur-xl opacity-50 translate-x-4 -translate-y-4"}),n.jsx("div",{className:"absolute bottom-0 left-1/2 w-28 h-28 bg-gradient-to-br from-pink-200 to-purple-200 rounded-full blur-2xl opacity-40 -translate-x-1/2 translate-y-8"})]}),n.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Edit Organization Details"}),n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Update your organization's basic information"})]}),n.jsx("button",{onClick:()=>E(!1),className:"text-slate-600 hover:text-slate-800 transition-colors p-1 bg-white bg-opacity-50 rounded-lg backdrop-blur-sm",children:n.jsx(Ke,{className:"w-6 h-6"})})]})]}),n.jsxs("div",{className:"p-6 space-y-5",children:[n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"}),"Organization Name"]}),n.jsx("input",{type:"text",value:A.name,onChange:Y=>M({...A,name:Y.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white",placeholder:"Enter organization name"})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-400 to-indigo-400"}),"Location"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",value:A.location,onChange:Y=>M({...A,location:Y.target.value}),className:"w-full pl-11 pr-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white",placeholder:"e.g., San Francisco, CA"})]})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-pink-400 to-rose-400"}),"Website"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"url",value:A.website,onChange:Y=>M({...A,website:Y.target.value}),className:"w-full pl-11 pr-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white",placeholder:"https://yourwebsite.com"})]})]}),n.jsxs("div",{className:"group",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-amber-400 to-orange-400"}),"Year Founded"]}),n.jsxs("div",{className:"relative",children:[n.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"number",value:A.year_founded,onChange:Y=>M({...A,year_founded:Y.target.value}),className:"w-full pl-11 pr-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white",placeholder:"e.g., 1991",min:"1800",max:new Date().getFullYear()})]})]}),v&&n.jsxs("div",{className:"relative overflow-hidden bg-white border-2 border-purple-100 rounded-xl p-4",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full blur-xl opacity-30"})}),n.jsxs("div",{className:"relative flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-purple-400 border-t-transparent"}),n.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Saving your changes..."})]})]})]}),n.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex gap-3",children:[n.jsx("button",{onClick:()=>E(!1),disabled:v,className:"flex-1 px-4 py-3 text-slate-600 font-medium text-sm border-2 border-slate-200 rounded-xl hover:bg-slate-100 hover:border-slate-300 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),n.jsxs("button",{onClick:z,disabled:v,className:"flex-1 px-4 py-3 relative overflow-hidden text-white font-semibold text-sm rounded-xl transition-all duration-200 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl group",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400"}),n.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 bg-gradient-to-br from-blue-300 to-indigo-300 rounded-full blur-lg opacity-60 group-hover:scale-150 transition-transform duration-500"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-gradient-to-br from-pink-300 to-purple-300 rounded-full blur-md opacity-40 group-hover:scale-125 transition-transform duration-700"})]}),n.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[n.jsx(v0,{className:"w-4 h-4"}),v?"Saving...":"Save Changes"]})]})]})]})})]})},Lie=({organization:t,isFollowing:e,followersCount:s,isBookmarked:r,bookmarksCount:a,onFollow:i,onBookmark:o,config:c={},activeTab:d,setActiveTab:h,tabs:m=[],userMembership:p,session:g,showBanner:b=!1})=>{var C,E,A;const v=bt();if(!t)return null;const N=p&&Cr(p.role,ns.EDIT_ORGANIZATION,(C=g==null?void 0:g.user)==null?void 0:C.is_omega_admin),j=()=>{if(t.slug)v(`/organizations/${t.slug}?edit=true`);else{const M=new URL(window.location);M.searchParams.set("edit","true"),v(M.pathname+M.search)}},_=(M=>{const R=M==null?void 0:M.toLowerCase();return{nonprofit:{label:"501(c)(3) Nonprofit",color:"bg-green-100 text-green-700 border-green-200",icon:"💙",gradient:"from-green-500 to-emerald-600"},foundation:{label:"Foundation",color:"bg-purple-100 text-purple-700 border-purple-200",icon:"🏛️",gradient:"from-purple-500 to-indigo-600"},funder:{label:"Funder",color:"bg-blue-100 text-blue-700 border-blue-200",icon:"💰",gradient:"from-blue-500 to-indigo-600"},"for-profit":{label:"Company",color:"bg-purple-100 text-purple-700 border-purple-200",icon:"🏢",gradient:"from-purple-500 to-pink-600"},forprofit:{label:"Company",color:"bg-purple-100 text-purple-700 border-purple-200",icon:"🏢",gradient:"from-purple-500 to-pink-600"},government:{label:"Government Agency",color:"bg-indigo-100 text-indigo-700 border-indigo-200",icon:"🏛️",gradient:"from-indigo-500 to-blue-600"},healthcare:{label:"Healthcare Organization",color:"bg-red-100 text-red-700 border-red-200",icon:"🏥",gradient:"from-red-500 to-pink-600"},education:{label:"Educational Institution",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:"🎓",gradient:"from-yellow-500 to-orange-600"},religious:{label:"Religious Organization",color:"bg-pink-100 text-pink-700 border-pink-200",icon:"⛪",gradient:"from-pink-500 to-rose-600"},international:{label:"International Organization",color:"bg-teal-100 text-teal-700 border-teal-200",icon:"🌍",gradient:"from-teal-500 to-cyan-600"}}[R]||{label:"Organization",color:"bg-slate-100 text-slate-700 border-slate-200",icon:"🏢",gradient:"from-slate-500 to-slate-600"}})(t.type),k={Globe:"🌐",Building:"🏢",Users:"👥",Rocket:"🚀",TrendingUp:"📈",Star:"⭐",DollarSign:"💰",HandHeart:"🤝",BarChart3:"📊",Heart:"❤️",Award:"🏆",BookOpen:"📚",Microscope:"🔬",Building2:"🏛️",Flag:"🚩",Briefcase:"💼",Target:"🎯",Camera:"📷"};return n.jsxs(n.Fragment,{children:[N&&n.jsx("div",{className:"bg-blue-600 text-white px-8 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:"Live View"}),n.jsx("span",{className:"text-blue-200 text-sm",children:"Your organization profile is currently live"})]}),n.jsxs("button",{onClick:j,className:"flex items-center gap-2 bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-colors",children:[n.jsx(Gi,{className:"w-4 h-4"}),"Edit Page"]})]})}),b&&n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-80 bg-gradient-to-br from-slate-100 via-white to-slate-100 overflow-hidden",children:t.banner_image_url?n.jsx("img",{src:t.banner_image_url,alt:`${t.name} banner`,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:n.jsx("div",{className:"text-6xl opacity-20",children:"🏢"})})}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"})]}),n.jsx("div",{className:"bg-white border-b border-slate-200",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[n.jsxs("div",{className:"flex items-start gap-6 pb-6",children:[n.jsx("div",{className:"relative -mt-20",children:n.jsx("div",{className:"w-40 h-40 rounded-2xl bg-white border-4 border-white shadow-xl overflow-hidden",children:t.image_url?n.jsx("img",{src:t.image_url,alt:`${t.name} logo`,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-4xl font-bold text-slate-600",children:(A=(E=t.name)==null?void 0:E.charAt(0))==null?void 0:A.toUpperCase()})})}),n.jsxs("div",{className:"flex-1 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${_.gradient} text-white`,children:[n.jsx(Xt,{className:"w-4 h-4 mr-2"}),_.label]}),t.year_founded&&n.jsxs("span",{className:"text-slate-500 font-medium text-sm",children:["Since ",t.year_founded]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:t.name}),t.isVerified&&n.jsx(Ks,{className:"w-7 h-7 text-blue-500"})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.location&&n.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[n.jsx(Lt,{className:"w-4 h-4"}),t.location]}),t.website&&n.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-purple-100 text-purple-800 border border-purple-200 hover:bg-purple-200 transition-colors",children:[n.jsx(Mn,{className:"w-4 h-4"}),"Website"]})]}),n.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("span",{className:"text-base",children:"👥"}),n.jsx("span",{className:"font-semibold text-slate-900",children:new Intl.NumberFormat("en-US").format(s||0)}),n.jsx("span",{className:"text-sm",children:"Followers"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[n.jsx("span",{className:"text-base",children:a>0?"❤️":"🤍"}),n.jsx("span",{className:"font-semibold text-slate-900",children:new Intl.NumberFormat("en-US").format(a||0)}),n.jsx("span",{className:"text-sm",children:"Likes"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 py-4",children:[n.jsx("button",{onClick:M=>{M.preventDefault(),M.stopPropagation(),i()},className:`px-6 py-3 rounded-full font-semibold transition-all duration-300 flex items-center gap-2 ${e?"bg-slate-200 text-slate-800":`bg-gradient-to-r ${_.gradient} text-white hover:shadow-lg`}`,children:e?"Following":"Follow"}),n.jsx("button",{onClick:M=>{M.preventDefault(),M.stopPropagation(),o()},className:"p-3 bg-slate-100 text-slate-600 rounded-full hover:bg-slate-200 transition-colors w-12 h-12 flex items-center justify-center",children:n.jsx("span",{className:"text-lg",children:r?"❤️":"🤍"})})]})]}),n.jsx("div",{className:"pb-6",children:n.jsx("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide",children:m.map(M=>{const R=d===M.id,D=k[M.icon]||"📄";return n.jsxs("button",{onClick:()=>h(M.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-full font-medium text-sm transition-all duration-200 whitespace-nowrap ${R?`bg-gradient-to-r ${_.gradient} text-white shadow-md`:"text-slate-600 hover:text-slate-800 hover:bg-slate-100"}`,children:[n.jsx("span",{className:"text-base",children:D}),M.label]},M.id)})})})]})})]})},$ie=({organization:t,organizationPosts:e,session:s,onPostDelete:r,userMembership:a,photos:i=[],activeTab:o,setActiveTab:c})=>{var h;a&&Cr(a.role,ns.EDIT_ORGANIZATION,(h=s==null?void 0:s.user)==null?void 0:h.is_omega_admin);const d=({area:m})=>{const p=["from-amber-100 to-orange-100 text-amber-700 border-orange-200","from-emerald-100 to-teal-100 text-emerald-700 border-teal-200","from-rose-100 to-pink-100 text-rose-700 border-rose-200","from-blue-100 to-indigo-100 text-blue-700 border-indigo-200"],g=p[m.length%p.length];return n.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border bg-gradient-to-r ${g}`,children:m})};return n.jsxs("div",{className:"space-y-10",children:[n.jsxs("div",{className:"bg-white rounded-3xl p-10 border border-slate-200 shadow-sm grid md:grid-cols-2 gap-10 items-center",children:[n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-4",children:"About Us ✨"}),n.jsx("p",{className:"text-slate-700 leading-relaxed text-lg flex-grow",children:t.description||"Working to create positive impact in our community through strategic partnerships and innovative solutions."}),t.focusAreas&&t.focusAreas.length>0&&n.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Focus Areas"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:t.focusAreas.map(m=>n.jsx(d,{area:m},m))})]})]}),n.jsx("img",{src:t.mission_image_url||"https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800&h=600&fit=crop",alt:"About Us",className:"rounded-2xl object-cover w-full h-full max-h-[450px]"})]}),n.jsx("div",{className:"space-y-6",children:n.jsx(Qj,{organization:t,session:s,userMembership:null,currentUserProfile:s==null?void 0:s.user})})]})},Fie=(t,e)=>{const[s,r]=y.useState(!1),[a,i]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!(!t||!e||t===e))try{const{isFollowing:d}=await lT(e,t);r(d)}catch(d){console.error("Error checking follow status:",d)}})()},[t,e]);const o=y.useCallback(async()=>{if(!(!e||!t||t===e)){i(!0);try{let c;s?c=await Ah(e,t):c=await D0(e,t),c.success?r(!s):console.error("Follow toggle failed:",c.error)}catch(c){console.error("Error toggling follow:",c)}finally{i(!1)}}},[e,t,s]);return{isFollowing:s,loading:a,toggleFollow:o}},Iie=(t,e)=>{const[s,r]=y.useState("none"),[a,i]=y.useState(!1),[o,c]=y.useState(0),[d,h]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!(!t||!e||t===e))try{const{status:j,isRequester:w}=await Hj(e,t);r(j),i(w);const{count:_}=await iR(e,t);c(_)}catch(j){console.error("Error checking connection status:",j)}})()},[t,e]);const m=y.useCallback(async()=>{if(!(!e||!t||t===e)){h(!0);try{const N=await rR(e,t);N.success?(r("pending"),i(!0)):console.error("Connection request failed:",N.error)}catch(N){console.error("Error sending connection request:",N)}finally{h(!1)}}},[e,t]),p=y.useCallback(async()=>{if(!(!e||!t)){h(!0);try{const N=await rg(e,t);N.success?r("accepted"):console.error("Accept connection failed:",N.error)}catch(N){console.error("Error accepting connection:",N)}finally{h(!1)}}},[e,t]),g=y.useCallback(async()=>{if(!(!e||!t)){h(!0);try{const N=await aR(e,t);N.success?(r("none"),i(!1)):console.error("Withdraw request failed:",N.error)}catch(N){console.error("Error withdrawing request:",N)}finally{h(!1)}}},[e,t]),b=y.useCallback(async()=>{if(!(!e||!t)){h(!0);try{const N=await qj(e,t);N.success?(r("none"),i(!1)):console.error("Disconnect failed:",N.error)}catch(N){console.error("Error disconnecting:",N)}finally{h(!1)}}},[e,t]);return{connectionStatus:s,isRequester:a,mutualConnections:o,loading:d,sendRequest:m,acceptRequest:p,disconnect:b,getConnectionButtonProps:()=>{switch(s){case"none":return{text:"Connect",action:m,variant:"primary",disabled:d};case"pending":return a?{text:"Withdraw",action:g,variant:"secondary",disabled:d}:{text:"Accept",action:p,variant:"primary",disabled:d};case"accepted":return{text:"Connected",action:b,variant:"connected",disabled:d};case"declined":return{text:"Connect",action:m,variant:"primary",disabled:d};default:return{text:"Connect",action:m,variant:"primary",disabled:d}}}}},Bie=(t,e)=>{const s=Fie(t,e),r=Iie(t,e);return{isFollowing:s.isFollowing,followLoading:s.loading,toggleFollow:s.toggleFollow,connectionStatus:r.connectionStatus,isRequester:r.isRequester,mutualConnections:r.mutualConnections,connectionLoading:r.loading,sendConnectionRequest:r.sendRequest,acceptConnection:r.acceptRequest,disconnect:r.disconnect,withdrawRequest:r.withdrawRequest,getConnectionButtonProps:r.getConnectionButtonProps}},Uie=({teamMembers:t=[],organization:e,userMembership:s,session:r})=>{var g;const a=s&&Cr(s.role,ns.MANAGE_MEMBERS,(g=r==null?void 0:r.user)==null?void 0:g.is_omega_admin);if(!t.length)return n.jsx("div",{className:"min-h-[500px] flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md mx-auto",children:[n.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-slate-100 rounded-2xl flex items-center justify-center",children:n.jsx(qe,{className:"w-12 h-12 text-slate-400"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:"No Team Members Listed"}),n.jsx("p",{className:"text-slate-600 mb-8 leading-relaxed",children:a?"Start building your team by inviting members to join your organization and showcase the people behind your mission.":`${e==null?void 0:e.name} hasn't added their team members yet. Check back soon to meet the people behind their mission.`}),a&&n.jsxs("button",{className:"inline-flex items-center gap-3 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[n.jsx(ia,{className:"w-5 h-5"}),"Invite Team Members"]})]})});const i=t.reduce((b,v)=>{const N=v.membership_type||"staff";return b[N]||(b[N]=[]),b[N].push(v),b},{}),o=["leadership","staff","board","volunteer","contractor","partner","intern"],c={leadership:"Leadership Team",staff:"Staff Members",board:"Board Members",volunteer:"Volunteers",contractor:"Contractors",partner:"Partners",intern:"Interns"},d=[{key:"linkedin_url",icon:Vw,color:"bg-blue-600"},{key:"twitter_url",icon:Jw,color:"bg-slate-900"},{key:"website_url",icon:Br,color:"bg-green-600"}],h=b=>d.filter(v=>b==null?void 0:b[v.key]).map(v=>({...v,url:b[v.key]})),m=({member:b,organization:v,currentUserId:N})=>{var L,B,O,P,z,q,I,V;const{isFollowing:j,followLoading:w,toggleFollow:_,mutualConnections:k,connectionLoading:C,getConnectionButtonProps:E}=Bie(b.profile_id,N),A=E(),M=h(b.profiles),R=()=>k>0?`${k} mutual connection${k>1?"s":""}`:"Connect to see mutual connections",D=H=>{switch(H){case"primary":return"bg-blue-600 text-white hover:bg-blue-700";case"secondary":return"border border-slate-300 text-slate-700 hover:bg-slate-50";case"connected":return"border border-green-300 text-green-700 bg-green-50 hover:bg-green-100";default:return"border border-slate-300 text-slate-700 hover:bg-slate-50"}};return b.profile_id===N?n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden w-full max-w-xs mx-auto",children:[n.jsx("div",{className:"h-24 bg-gradient-to-r from-slate-200 to-slate-300 relative overflow-hidden",children:v!=null&&v.banner_image_url?n.jsx("img",{src:v.banner_image_url,alt:"Team banner",className:"w-full h-full object-cover opacity-80"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-300 via-slate-200 to-slate-100"})}),n.jsxs("div",{className:"px-7 pb-7 text-center relative",children:[n.jsx("div",{className:"relative -mt-12 mb-5",children:n.jsx("div",{className:"w-24 h-24 mx-auto rounded-full overflow-hidden ring-4 ring-white shadow-lg bg-slate-100",children:n.jsx(is,{src:(L=b.profiles)==null?void 0:L.avatar_url,fullName:(B=b.profiles)==null?void 0:B.full_name,size:"xl",className:"w-full h-full object-cover"})})}),n.jsx("h5",{className:"text-xl font-bold text-slate-900 mb-2",children:((O=b.profiles)==null?void 0:O.full_name)||"Unknown Member"}),n.jsx("p",{className:"text-slate-600 text-sm mb-3",children:v==null?void 0:v.name}),(b.functional_role||((P=b.profiles)==null?void 0:P.title))&&n.jsx("p",{className:"text-blue-600 font-semibold text-sm mb-4",children:b.functional_role||b.profiles.title}),M.length>0&&n.jsx("div",{className:"flex justify-center gap-2 mb-4",children:M.map((H,Y)=>{const U=H.icon;return n.jsx("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:`w-8 h-8 rounded-full flex items-center justify-center ${H.color} hover:opacity-80 transition-opacity`,title:`Visit ${H.key.replace("_url","").replace("_"," ")}`,children:n.jsx(U,{className:"w-4 h-4 text-white"})},Y)})}),n.jsx("p",{className:"text-slate-500 text-xs mb-5",children:"Your Profile"}),n.jsx("div",{className:"flex gap-3",children:n.jsx("div",{className:"flex-1 bg-slate-100 text-slate-500 px-5 py-2.5 rounded-full text-sm font-medium",children:"You"})})]})]}):n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:border-slate-300 transition-all duration-300 w-full max-w-xs mx-auto",children:[n.jsx("div",{className:"h-24 bg-gradient-to-r from-slate-200 to-slate-300 relative overflow-hidden",children:v!=null&&v.banner_image_url?n.jsx("img",{src:v.banner_image_url,alt:"Team banner",className:"w-full h-full object-cover opacity-80"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-slate-300 via-slate-200 to-slate-100"})}),n.jsxs("div",{className:"px-7 pb-7 text-center relative",children:[n.jsx("div",{className:"relative -mt-12 mb-5",children:n.jsx("div",{className:"w-24 h-24 mx-auto rounded-full overflow-hidden ring-4 ring-white shadow-lg bg-slate-100",children:n.jsx(is,{src:(z=b.profiles)==null?void 0:z.avatar_url,fullName:(q=b.profiles)==null?void 0:q.full_name,size:"xl",className:"w-full h-full object-cover"})})}),n.jsx("h5",{className:"text-xl font-bold text-slate-900 mb-2",children:((I=b.profiles)==null?void 0:I.full_name)||"Unknown Member"}),n.jsx("p",{className:"text-slate-600 text-sm mb-3",children:v==null?void 0:v.name}),(b.functional_role||((V=b.profiles)==null?void 0:V.title))&&n.jsx("p",{className:"text-blue-600 font-semibold text-sm mb-4",children:b.functional_role||b.profiles.title}),M.length>0&&n.jsx("div",{className:"flex justify-center gap-2 mb-4",children:M.map((H,Y)=>{const U=H.icon;return n.jsx("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:`w-8 h-8 rounded-full flex items-center justify-center ${H.color} hover:opacity-80 transition-opacity`,title:`Visit ${H.key.replace("_url","").replace("_"," ")}`,children:n.jsx(U,{className:"w-4 h-4 text-white"})},Y)})}),n.jsx("p",{className:"text-slate-500 text-xs mb-5",children:R()}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:A.action,disabled:A.disabled||C,className:`flex-1 px-5 py-2.5 rounded-full text-sm font-medium transition-colors ${D(A.variant)} ${A.disabled?"opacity-50 cursor-not-allowed":""}`,children:C?"Loading...":A.text}),n.jsx("button",{onClick:_,disabled:w,className:`flex-1 px-5 py-2.5 rounded-full text-sm font-medium transition-colors ${j?"border border-slate-300 text-slate-700 bg-slate-50":"border border-slate-300 text-slate-700 hover:bg-slate-50"} ${w?"opacity-50 cursor-not-allowed":""}`,children:w?"Loading...":j?"Following":"Follow"})]})]})]})},p=(b,v)=>n.jsxs("div",{className:"mb-12",children:[n.jsxs("h4",{className:"text-2xl font-bold text-slate-800 mb-8 pb-3 border-b-2 border-slate-100",children:[c[b]||`${b.charAt(0).toUpperCase()}${b.slice(1)}`,n.jsxs("span",{className:"ml-3 text-base font-normal text-slate-500",children:["(",v.length,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(N=>{var j;return n.jsx(m,{member:N,organization:e,currentUserId:(j=r==null?void 0:r.user)==null?void 0:j.id},N.id)})})]},b);return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Meet Our Team"}),n.jsxs("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed",children:["The passionate people behind ",e==null?void 0:e.name,"'s mission and the driving force of our impact"]}),a&&n.jsx("div",{className:"mt-8",children:n.jsxs("button",{className:"inline-flex items-center gap-3 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[n.jsx(ia,{className:"w-5 h-5"}),"Manage Team"]})})]}),o.map(b=>{const v=i[b];return v&&v.length>0?p(b,v):null}),Object.entries(i).map(([b,v])=>!o.includes(b)&&v.length>0?p(b,v):null)]})},Vie=({isOpen:t,onClose:e,title:s,subtitle:r,children:a,footer:i,maxWidth:o="max-w-4xl",gradientColors:c=["purple-300","pink-300","blue-300"]})=>t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:`bg-white rounded-2xl ${o} w-full shadow-2xl transform transition-all overflow-hidden max-h-[90vh] overflow-y-auto`,children:[n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:`absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-${c[0]} to-${c[1]} rounded-full blur-2xl opacity-60 -translate-x-8 -translate-y-8`}),n.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-${c[1]} to-${c[2]} rounded-full blur-xl opacity-50 translate-x-4 -translate-y-4`})]}),n.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:s}),r&&n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:r})]}),n.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-800 transition-colors p-1 bg-white bg-opacity-50 rounded-lg backdrop-blur-sm",children:n.jsx(Ke,{className:"w-6 h-6"})})]})]}),n.jsx("div",{className:"p-6",children:a}),i&&n.jsx("div",{className:"bg-slate-50 px-6 py-4",children:i})]})}):null,qie=({children:t,onClick:e,disabled:s=!1,variant:r="primary",size:a="medium",loading:i=!1,className:o=""})=>{const c={primary:{gradient:"from-purple-400 to-pink-400",accent1:"from-blue-300 to-indigo-300",accent2:"from-pink-300 to-purple-300"},secondary:{gradient:"from-blue-400 to-purple-400",accent1:"from-purple-300 to-pink-300",accent2:"from-blue-300 to-purple-300"},success:{gradient:"from-emerald-400 to-teal-400",accent1:"from-purple-300 to-pink-300",accent2:"from-emerald-200 to-teal-200"},danger:{gradient:"from-red-400 to-pink-400",accent1:"from-orange-300 to-red-300",accent2:"from-pink-300 to-red-300"}},d={small:"px-4 py-2 text-sm",medium:"px-6 py-3 text-sm",large:"px-8 py-4 text-base"},h=c[r],m=d[a];return n.jsxs("button",{onClick:e,disabled:s||i,className:`relative overflow-hidden text-white font-semibold rounded-xl transition-all duration-200 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl group ${m} ${o}`,children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${h.gradient}`}),n.jsx("div",{className:`absolute top-0 left-0 w-8 h-8 bg-gradient-to-br ${h.accent1} rounded-full blur-lg opacity-60 group-hover:scale-150 transition-transform duration-500`}),n.jsx("div",{className:`absolute bottom-0 right-0 w-6 h-6 bg-gradient-to-br ${h.accent2} rounded-full blur-md opacity-40 group-hover:scale-125 transition-transform duration-700`})]}),n.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[i&&n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t]})]})},Nw=({label:t,labelColor:e="purple-400",icon:s,children:r,className:a=""})=>n.jsxs("div",{className:`group ${a}`,children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-3 flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r from-${e} to-pink-400`}),t]}),n.jsxs("div",{className:"relative",children:[s&&n.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),r]})]}),ER=({type:t="text",value:e,onChange:s,placeholder:r,icon:a,className:i="",...o})=>{const c=!!a;return n.jsx("input",{type:t,value:e,onChange:s,placeholder:r,className:`w-full ${c?"pl-11 pr-4":"px-4"} py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white ${i}`,...o})},Hie=({value:t,onChange:e,placeholder:s,rows:r=4,className:a="",...i})=>n.jsx("textarea",{value:t,onChange:e,placeholder:s,rows:r,className:`w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-transparent focus:ring-2 focus:ring-purple-300 transition-all duration-200 group-hover:border-slate-300 bg-white resize-none ${a}`,...i}),AR=({area:t,onRemove:e=null,editable:s=!1})=>{const r=["from-amber-100 to-orange-100 text-amber-700 border-orange-200","from-emerald-100 to-teal-100 text-emerald-700 border-teal-200","from-rose-100 to-pink-100 text-rose-700 border-rose-200","from-blue-100 to-indigo-100 text-blue-700 border-indigo-200"],a=r[t.length%r.length];return n.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border bg-gradient-to-r ${a} ${s?"pr-1":""}`,children:[t,s&&e&&n.jsx("button",{onClick:()=>e(t),className:"ml-2 p-0.5 hover:bg-black hover:bg-opacity-10 rounded-full transition-colors",children:n.jsx(Ke,{className:"w-3 h-3"})})]})},Gie=({focusAreas:t=[],onChange:e,editable:s=!1,className:r=""})=>{const[a,i]=y.useState(""),o=()=>{a.trim()&&!t.includes(a.trim())&&(e([...t,a.trim()]),i(""))},c=h=>{e(t.filter(m=>m!==h))},d=h=>{h.key==="Enter"&&(h.preventDefault(),o())};return n.jsxs("div",{className:r,children:[n.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Focus Areas"}),t.length>0?n.jsx("div",{className:"flex flex-wrap gap-3 mb-4",children:t.map(h=>n.jsx(AR,{area:h,onRemove:s?c:null,editable:s},h))}):n.jsx("div",{className:"text-slate-500 text-sm mb-4",children:s?"No focus areas added yet":"No focus areas specified"}),s&&n.jsx(Nw,{label:"Add Focus Area",labelColor:"emerald-400",className:"mb-0",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ER,{value:a,onChange:h=>i(h.target.value),onKeyPress:d,placeholder:"e.g., Education, Healthcare, Environment",className:"flex-1"}),n.jsx("button",{onClick:o,disabled:!a.trim(),className:"px-4 py-3 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx($s,{className:"w-5 h-5"})})]})})]})},Wie=({isOpen:t,onClose:e,organization:s,onSave:r,saving:a=!1,uploading:i=!1,error:o="",onImageUpload:c})=>{const[d,h]=y.useState({description:(s==null?void 0:s.description)||"",mission_image_url:(s==null?void 0:s.mission_image_url)||"",focusAreas:(s==null?void 0:s.focusAreas)||[]}),m=async()=>{await r(d)},p=async N=>{await c(N)},g=N=>{h({...d,mission_image_url:N.target.value})},b=()=>{h({...d,mission_image_url:""})},v=n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:e,disabled:a,className:"flex-1 px-6 py-3 text-slate-600 font-medium text-sm border-2 border-slate-200 rounded-xl hover:bg-slate-100 hover:border-slate-300 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),n.jsxs(qie,{onClick:m,disabled:a,loading:a,className:"flex-1",children:[n.jsx(v0,{className:"w-4 h-4"}),a?"Saving...":"Save All Changes"]})]});return n.jsx(Vie,{isOpen:t,onClose:e,title:"Edit Mission Section",subtitle:"Update your mission statement, image, and focus areas",maxWidth:"max-w-4xl",footer:v,gradientColors:["purple-300","pink-300","blue-300"],children:n.jsxs("div",{className:"space-y-8",children:[o&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm text-red-700",children:o})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(Nw,{label:"Mission Statement",labelColor:"purple-400",children:n.jsx(Hie,{value:d.description,onChange:N=>h({...d,description:N.target.value}),placeholder:"Describe your organization's mission and goals...",rows:6})}),n.jsx(Gie,{focusAreas:d.focusAreas,onChange:N=>h({...d,focusAreas:N}),editable:!0})]}),n.jsx("div",{className:"space-y-6",children:n.jsxs(Nw,{label:"Mission Image",labelColor:"blue-400",children:[n.jsxs("div",{className:"mb-4 relative",children:[n.jsx("img",{src:d.mission_image_url||"https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800&h=600&fit=crop",alt:"Mission",className:"w-full h-64 object-cover rounded-xl border-2 border-slate-200"}),d.mission_image_url&&d.mission_image_url!=="https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800&h=600&fit=crop"&&n.jsx("button",{onClick:b,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors",children:n.jsx(tn,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:N=>N.target.files[0]&&p(N.target.files[0]),className:"hidden",id:"mission-image-upload"}),n.jsx("label",{htmlFor:"mission-image-upload",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(w0,{className:"w-4 h-4"}),"Upload Image"]})}),n.jsx("span",{className:"text-sm text-slate-500",children:"or paste URL below"})]}),n.jsx(ER,{type:"url",value:d.mission_image_url,onChange:g,placeholder:"https://example.com/image.jpg"})]})]})})]}),a&&n.jsxs("div",{className:"relative overflow-hidden bg-white border-2 border-purple-100 rounded-xl p-4",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full blur-xl opacity-30"})}),n.jsxs("div",{className:"relative flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-purple-400 border-t-transparent"}),n.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Saving your changes..."})]})]})]})})},Yie=({organization:t,session:e,userMembership:s,currentUserProfile:r,onUpdate:a,setActiveTab:i})=>{var w;const[o,c]=y.useState(!1),[d,h]=y.useState(!1),[m,p]=y.useState(!1),[g,b]=y.useState(""),v=s&&Cr(s.role,ns.EDIT_ORGANIZATION,(w=e==null?void 0:e.user)==null?void 0:w.is_omega_admin),N=async _=>{try{if(p(!0),b(""),_.size>5*1024*1024)throw new Error("File size must be less than 5MB");if(!_.type.startsWith("image/"))throw new Error("File must be an image");const k=_.name.split(".").pop(),E=`organizations/${`org-${t.id}-mission-${Date.now()}.${k}`}`,{error:A}=await $.storage.from("avatars").upload(E,_,{cacheControl:"3600",upsert:!1});if(A)throw A;const{data:{publicUrl:M}}=$.storage.from("avatars").getPublicUrl(E);return M}catch(k){return console.error("Error uploading image:",k),b("Failed to upload image: "+k.message),!1}finally{p(!1)}},j=async _=>{try{h(!0),b("");const k={};if(_.description!==t.description&&(k.description=_.description),_.mission_image_url!==t.mission_image_url&&(k.mission_image_url=_.mission_image_url),Object.keys(k).length>0){const{error:M}=await $.from("organizations").update(k).eq("id",t.id);if(M)throw M}const C=t.focusAreas||[],E=_.focusAreas||[];if(JSON.stringify(C.sort())!==JSON.stringify(E.sort())&&(await $.from("organization_categories").delete().eq("organization_id",t.id),E.length>0)){const M=E.map(async L=>{let{data:B}=await $.from("categories").select("id").eq("name",L).single();if(!B){const{data:O,error:P}=await $.from("categories").insert({name:L}).select("id").single();if(P)throw P;B=O}return B.id}),D=(await Promise.all(M)).map(L=>({organization_id:t.id,category_id:L}));await $.from("organization_categories").insert(D)}if(a){const M={...k,focusAreas:E};a(M)}return c(!1),!0}catch(k){return console.error("Error saving mission section:",k),b("Failed to save changes: "+k.message),!1}finally{h(!1)}};return n.jsxs("div",{className:"space-y-10",children:[g&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-700",children:g})}),n.jsx("button",{onClick:()=>b(""),className:"ml-auto text-red-400 hover:text-red-600",children:n.jsx(Ke,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"bg-white rounded-3xl p-10 border border-slate-200 shadow-sm grid md:grid-cols-2 gap-10 items-center relative",children:[v&&n.jsxs("button",{onClick:()=>c(!0),className:"absolute top-4 right-4 flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[n.jsx(Gi,{className:"w-4 h-4"}),"Edit Section"]}),n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-4",children:"About Us ✨"}),n.jsx("p",{className:"text-slate-700 leading-relaxed text-lg flex-grow",children:t.description||"Working to create positive impact in our community through strategic partnerships and innovative solutions."}),t.focusAreas&&t.focusAreas.length>0&&n.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Focus Areas"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:t.focusAreas.map(_=>n.jsx(AR,{area:_},_))})]})]}),n.jsx("div",{className:"relative",children:n.jsx("img",{src:t.mission_image_url||"https://images.unsplash.com/photo-1582213782179-e0d53f98f2ca?w=800&h=600&fit=crop",alt:"About Us",className:"rounded-2xl object-cover w-full h-full max-h-[450px]"})})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Manage Organization Updates"}),n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Create and manage posts that will appear on your organization's public profile"})]}),n.jsx(Qj,{organization:t,session:e,userMembership:s,currentUserProfile:r})]}),n.jsx(Wie,{isOpen:o,onClose:()=>c(!1),organization:t,onSave:j,saving:d,uploading:m,error:g,onImageUpload:N})]})},Kie=({organization:t,userMembership:e,session:s,onUpdate:r})=>{var de,ve,Pe,He,Qe;const[a,i]=y.useState([]),[o,c]=y.useState(!0),[d,h]=y.useState(null),[m,p]=y.useState(!1),[g,b]=y.useState({caption:"",image:null}),[v,N]=y.useState(!1),[j,w]=y.useState(""),[_,k]=y.useState("view"),[C,E]=y.useState([]),[A,M]=y.useState(!1),[R,D]=y.useState(null),L=y.useRef(null),B=e&&Cr(e.role,ns.EDIT_ORGANIZATION,(de=s==null?void 0:s.user)==null?void 0:de.is_omega_admin),O=async()=>{try{c(!0);const{data:be,error:se}=await $.from("organization_photos").select(`
          id,
          image_url,
          caption,
          alt_text,
          created_at,
          uploaded_by_user_id,
          is_featured,
          display_order,
          likes_count,
          comments_count
        `).eq("organization_id",t.id).order("display_order",{ascending:!0});if(se)throw se;i(be||[])}catch(be){console.error("Error fetching photos:",be),w("Failed to load photos")}finally{c(!1)}};y.useEffect(()=>{t!=null&&t.id&&O()},[t==null?void 0:t.id]);const P=be=>{const se=be.target.files[0];if(se){if(se.size>5*1024*1024){w("File is too large. Max size is 5MB.");return}if(!se.type.startsWith("image/")){w("Please select an image file.");return}b({...g,image:se}),w("")}},z=async()=>{var be;if(!g.image||!g.caption.trim()){w("Please add both a photo and caption.");return}try{N(!0),w("");const se=g.image.name.split(".").pop(),ge=`organizations/photos/${`org-${t.id}-photo-${Date.now()}.${se}`}`,{data:te,error:xe}=await $.storage.from("avatars").upload(ge,g.image,{cacheControl:"3600",upsert:!1});if(xe)throw xe;const{data:{publicUrl:De}}=$.storage.from("avatars").getPublicUrl(ge),{error:Ee}=await $.from("organization_photos").insert({organization_id:t.id,image_url:De,caption:g.caption.trim(),alt_text:g.caption.trim(),uploaded_by_user_id:(be=s==null?void 0:s.user)==null?void 0:be.id,display_order:a.length});if(Ee)throw Ee;b({caption:"",image:null}),p(!1),L.current&&(L.current.value=""),await O(),r&&await r()}catch(se){console.error("Error creating photo post:",se),w("Failed to create photo post: "+se.message)}finally{N(!1)}},q=async be=>{if(confirm("Are you sure you want to delete this photo?"))try{const{error:se}=await $.from("organization_photos").delete().eq("id",be);if(se)throw se;i(a.filter(le=>le.id!==be)),(d==null?void 0:d.id)===be&&h(null),r&&await r()}catch(se){console.error("Error deleting photo:",se),w("Failed to delete photo")}},I=()=>{E([...a]),k("manage")},V=async()=>{try{M(!0),w("");for(let be=0;be<C.length;be++){const{error:se}=await $.from("organization_photos").update({display_order:be}).eq("id",C[be].id);if(se)throw se}await O(),k("view"),r&&await r()}catch(be){console.error("Error saving photo order:",be),w("Failed to save photo order")}finally{M(!1)}},H=(be,se)=>{D(se),be.dataTransfer.effectAllowed="move",be.dataTransfer.setData("text/html",be.target.parentNode),be.target.style.opacity="0.5"},Y=be=>{be.target.style.opacity="",D(null)},U=be=>{be.preventDefault(),be.dataTransfer.dropEffect="move"},K=(be,se)=>{if(be.preventDefault(),R===null||R===se)return;const le=[...C],ge=le[R];le.splice(R,1),le.splice(se,0,ge),E(le)},J=be=>{const se=C.filter((le,ge)=>ge!==be);E(se)},W=async be=>{if(s!=null&&s.user)try{const{data:se}=await $.from("organization_photo_likes").select("id").eq("photo_id",be).eq("user_id",s.user.id).single();se?await $.from("organization_photo_likes").delete().eq("photo_id",be).eq("user_id",s.user.id):await $.from("organization_photo_likes").insert({photo_id:be,user_id:s.user.id,reaction_type:"like"}),await O()}catch(se){console.error("Error toggling like:",se)}},ee=be=>{const se=new Date(be),ge=Math.floor((new Date-se)/1e3);return ge<60?"Just now":ge<3600?`${Math.floor(ge/60)}m`:ge<86400?`${Math.floor(ge/3600)}h`:ge<604800?`${Math.floor(ge/86400)}d`:`${Math.floor(ge/604800)}w`},ne=(be,se)=>{h({...be,index:se})},X=()=>{h(null)},Q=be=>{if(!d)return;const se=d.index;let le;if(be==="next"&&se<a.length-1)le=se+1;else if(be==="prev"&&se>0)le=se-1;else return;ne(a[le],le)};return o?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent"})}):n.jsxs("div",{className:"space-y-6",children:[j&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-700",children:j})}),n.jsx("button",{onClick:()=>w(""),className:"ml-auto text-red-400 hover:text-red-600",children:n.jsx(Ke,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Photos"}),n.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Share photos with captions to showcase your work"})]}),B&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>k("view"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${_==="view"?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"View"}),n.jsx("button",{onClick:I,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${_==="manage"?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Manage"})]}),_==="view"&&n.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[n.jsx($s,{className:"w-4 h-4"}),"Add Photo"]}),_==="manage"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k("view"),className:"px-4 py-2 text-slate-600 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:V,disabled:A,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:A?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):"Save Order"})]})]})]}),m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full shadow-2xl",children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Share a Photo"}),n.jsx("button",{onClick:()=>{p(!1),b({caption:"",image:null}),w(""),L.current&&(L.current.value="")},className:"text-slate-400 hover:text-slate-600",children:n.jsx(Ke,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("input",{ref:L,type:"file",accept:"image/*",onChange:P,className:"hidden"}),g.image?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:URL.createObjectURL(g.image),alt:"Preview",className:"w-full max-h-64 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>{b({...g,image:null}),L.current&&(L.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:n.jsx(Ke,{className:"w-4 h-4"})})]}):n.jsxs("button",{onClick:()=>{var be;return(be=L.current)==null?void 0:be.click()},className:"w-full p-8 border-2 border-dashed border-slate-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors flex flex-col items-center gap-3 text-slate-600",children:[n.jsx(hn,{className:"w-12 h-12"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium",children:"Upload Photo"}),n.jsx("p",{className:"text-sm",children:"Required - Max 5MB"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Caption *"}),n.jsx("textarea",{value:g.caption,onChange:be=>b({...g,caption:be.target.value}),placeholder:"Tell the story behind this photo...",className:"w-full min-h-[100px] p-3 border border-slate-200 rounded-lg resize-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors",maxLength:500}),n.jsxs("div",{className:"text-right text-sm text-slate-500 mt-1",children:[g.caption.length,"/500"]})]})]}),n.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex gap-3",children:[n.jsx("button",{onClick:()=>{p(!1),b({caption:"",image:null}),w(""),L.current&&(L.current.value="")},disabled:v,className:"flex-1 px-4 py-2 text-slate-600 font-medium border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:z,disabled:!g.image||!g.caption.trim()||v,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Posting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hn,{className:"w-4 h-4"}),"Share Photo"]})})]})]})}),_==="view"?a.length>0?n.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:a.map((be,se)=>n.jsxs("div",{className:"relative aspect-square bg-slate-100 group cursor-pointer overflow-hidden rounded-xl",onClick:()=>ne(be,se),children:[n.jsx("img",{src:be.image_url,alt:be.alt_text||be.caption||`Photo ${se+1}`,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-4 text-white",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:be.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jn,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:be.comments_count||0})]})]})}),B&&n.jsx("button",{onClick:le=>{le.stopPropagation(),q(be.id)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200",title:"Delete photo",children:n.jsx(tn,{className:"w-3 h-3"})})]},be.id))}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[n.jsx(hn,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No Photos Yet"}),n.jsx("p",{className:"text-slate-600 mb-4",children:B?"Share your first photo to showcase your work and impact.":`${t==null?void 0:t.name} hasn't shared any photos yet.`}),B&&n.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(hn,{className:"w-5 h-5"}),"Add First Photo"]})]}):C.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("strong",{children:"Manage Photos:"}),' Drag and drop photos within the grid to reorder them. Changes are saved when you click "Save Order".']})}),n.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:C.map((be,se)=>n.jsxs("div",{className:`relative aspect-square bg-slate-100 group overflow-hidden rounded-xl transition-all duration-200 ${R===se?"opacity-50 scale-95 ring-2 ring-blue-400":"cursor-move hover:ring-2 hover:ring-slate-300"}`,draggable:"true",onDragStart:le=>H(le,se),onDragEnd:Y,onDragOver:U,onDrop:le=>K(le,se),children:[n.jsx("img",{src:be.image_url,alt:be.alt_text||be.caption||`Photo ${se+1}`,className:"w-full h-full object-cover pointer-events-none"}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-center",children:[n.jsxs("div",{className:"text-xs font-medium mb-1",children:["#",se+1]}),n.jsx("div",{className:"text-xs",children:"Drag to reorder"})]})}),n.jsx("button",{onClick:le=>{le.stopPropagation(),J(se)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all duration-200 z-10",title:"Delete photo",children:n.jsx(tn,{className:"w-3 h-3"})}),n.jsx("div",{className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-1 h-1 bg-white rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-1 h-1 bg-white rounded-full"}),n.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})]})]})})]},be.id))})]}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[n.jsx(hn,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No Photos to Manage"}),n.jsx("p",{className:"text-slate-600",children:"Add some photos first, then come back here to organize them."})]}),d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex",children:[n.jsxs("div",{className:"flex-1 bg-black flex items-center justify-center relative min-h-[500px]",children:[d.index>0&&n.jsx("button",{onClick:()=>Q("prev"),className:"absolute left-4 z-10 w-10 h-10 bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full flex items-center justify-center text-white transition-colors",children:"←"}),d.index<a.length-1&&n.jsx("button",{onClick:()=>Q("next"),className:"absolute right-4 z-10 w-10 h-10 bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full flex items-center justify-center text-white transition-colors",children:"→"}),n.jsx("img",{src:d.image_url,alt:d.alt_text||d.caption||`Photo ${d.index+1}`,className:"max-w-full max-h-full object-contain"})]}),n.jsxs("div",{className:"w-96 flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(Pe=(ve=t==null?void 0:t.name)==null?void 0:ve.charAt(0))==null?void 0:Pe.toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm",children:t==null?void 0:t.name}),n.jsx("p",{className:"text-xs text-slate-500",children:ee(d.created_at)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"p-1 text-slate-400 hover:text-slate-600",children:n.jsx(x0,{className:"w-5 h-5"})}),n.jsx("button",{onClick:X,className:"p-1 text-slate-400 hover:text-slate-600",children:n.jsx(Ke,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[d.caption&&n.jsx("div",{className:"p-4 border-b border-slate-200",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(Qe=(He=t==null?void 0:t.name)==null?void 0:He.charAt(0))==null?void 0:Qe.toUpperCase()}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold",children:t==null?void 0:t.name})," ",d.caption]})})]})}),n.jsx("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto",children:n.jsx("div",{className:"text-xs text-slate-500 text-center",children:"Comments feature coming soon"})}),n.jsxs("div",{className:"border-t border-slate-200 p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-4",children:[s!=null&&s.user?n.jsx("button",{onClick:()=>W(d.id),className:"p-1 hover:text-red-500 transition-colors",children:n.jsx(Nt,{className:"w-6 h-6"})}):n.jsx("button",{className:"p-1 text-slate-400 cursor-not-allowed",children:n.jsx(Nt,{className:"w-6 h-6"})}),n.jsx("button",{className:"p-1 hover:text-blue-500 transition-colors",children:n.jsx(Jn,{className:"w-6 h-6"})}),n.jsx("button",{className:"p-1 hover:text-green-500 transition-colors",children:n.jsx(R3,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:[d.likes_count||0," likes"]}),n.jsxs("div",{className:"text-xs text-slate-500",children:[d.index+1," of ",a.length]})]})]})]})]})})]})},Yv={mission:{type:"text",title:"Our Mission",content:"We are dedicated to creating lasting positive change in our community by addressing systemic inequities and empowering individuals and families to thrive. Through strategic partnerships, innovative programs, and community-led solutions, we work to build a more just and equitable society where everyone has the opportunity to reach their full potential.",icon:"Target",color:"ocean",size:"large"},vision:{type:"text",title:"Our Vision",content:"We envision a world where every community has access to opportunities that enable individuals and families to thrive. Through collaborative partnerships and innovative programs, we work toward sustainable change that addresses root causes and creates lasting impact.",icon:"Eye",color:"royal",size:"large"},values:{type:"list",title:"Our Core Values",content:["Equity & Justice - We believe everyone deserves equal opportunities to succeed","Community Partnership - We work with communities, not for them","Innovation - We embrace creative solutions to complex challenges","Transparency - We operate with openness and accountability","Collaboration - We achieve more when we work together"],icon:"Heart",color:"rose",size:"medium"},long_term_goals:{type:"list",title:"Long-Term Goals (5-10 Years)",content:["Achieve measurable reduction in regional inequality gaps","Establish sustainable funding models for community programs","Build a network of 500+ community partners","Create generational wealth-building programs","Develop replicable models for other regions"],icon:"Mountain",color:"forest",size:"medium"},short_term_goals:{type:"list",title:"Short-Term Goals (1-2 Years)",content:["Launch three new community health initiatives","Increase annual grant distribution by 25%","Expand digital literacy programs to 10 new locations","Complete strategic partnership with local government","Achieve 90% participant satisfaction in all programs"],icon:"Calendar",color:"sunset",size:"medium"},strategic_priorities:{type:"list",title:"Strategic Priorities",content:["Education Equity - Ensuring all children have access to quality education","Economic Mobility - Creating pathways to financial stability and wealth building","Community Health - Addressing health disparities and promoting wellness","Civic Engagement - Strengthening democracy through increased participation","Environmental Justice - Protecting communities from environmental harm"],icon:"Target",color:"forest",size:"large"},strategic_focus:{type:"text",title:"Strategic Focus Areas",content:"Our work is concentrated in three key areas that create the greatest impact for our community. We focus on systemic change through education reform, economic development initiatives, and community health programs. Each area is designed to address root causes while building long-term capacity for sustainable change.",icon:"Focus",color:"ocean",size:"medium"},focus_areas_location:{type:"list",title:"Geographic Focus Areas",content:["East Bay Region - Oakland, Berkeley, Richmond, and surrounding communities","Rural Northern California - Supporting underserved agricultural communities","Central Valley - Addressing urban and rural disparities","Bay Area Partnerships - Collaborative initiatives across the greater Bay Area"],icon:"MapPin",color:"earth",size:"medium"},impact:{type:"stats",title:"Our Impact (2024)",content:[{label:"Lives Impacted",value:"50,000+"},{label:"Partner Organizations",value:"200+"},{label:"Grants Awarded",value:"$15M"},{label:"Programs Supported",value:"85"}],icon:"TrendingUp",color:"forest",size:"medium"},story:{type:"text",title:"Our Story",content:"Founded in 1953, the East Bay Community Foundation emerged from a simple belief that communities thrive when neighbors invest in each other. What started as a small group of local philanthropists has grown into one of the largest community foundations in Northern California, managing over $500 million in assets and distributing more than $80 million annually to support community-led solutions.",icon:"Book",color:"earth",size:"large"},approach:{type:"text",title:"Our Approach",content:"We believe lasting change happens when communities lead the way. Our approach is rooted in trust-based philanthropy, centering the voices and leadership of those most impacted by the issues we aim to address. We provide flexible funding, capacity-building support, and advocacy to amplify community-driven solutions.",icon:"Compass",color:"royal",size:"medium"},partnerships:{type:"text",title:"Community Partnerships",content:"Strong partnerships are the foundation of our work. We collaborate with grassroots organizations, established nonprofits, government agencies, businesses, and individual donors to create a network of support that strengthens our entire community. Together, we leverage resources, share knowledge, and amplify impact.",icon:"Users",color:"emerald",size:"medium"},innovation:{type:"text",title:"Innovation & Learning",content:"We embrace experimentation and learning as pathways to greater impact. Our commitment to innovation means we continuously evaluate our strategies, adapt to changing community needs, and invest in emerging solutions that show promise for creating sustainable change.",icon:"Lightbulb",color:"sunset",size:"medium"}},Jie=({editData:t,setEditData:e,onSave:s,onCancel:r,saving:a,organization:i})=>{const[o,c]=y.useState(!1),[d,h]=y.useState(0),[m,p]=y.useState({visible:!1,message:"",timestamp:null}),g=y.useRef(null);y.useEffect(()=>{const R=(t.blocks||[]).length;h(Math.round(R/10*100))},[t.blocks]),y.useEffect(()=>{if(t&&t.blocks){const M=`editData_${(i==null?void 0:i.id)||"temp"}`;sessionStorage.setItem(M,JSON.stringify(t))}},[t,i==null?void 0:i.id]),y.useEffect(()=>{if(!t&&(i!=null&&i.id)){const M=`editData_${i.id}`,R=sessionStorage.getItem(M);if(R)try{const D=JSON.parse(R);D&&D.blocks&&e(D)}catch(D){console.warn("Failed to parse saved edit data:",D)}}},[i==null?void 0:i.id]),y.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]);const b=()=>{e({...t,blocks:[]}),c(!1);const M=`editData_${(i==null?void 0:i.id)||"temp"}`;sessionStorage.removeItem(M)},v=async()=>{try{s&&await s(),g.current&&clearTimeout(g.current),p({visible:!0,message:"Content has been saved successfully!",timestamp:Date.now()});const M=`editData_${(i==null?void 0:i.id)||"temp"}`;sessionStorage.removeItem(M),g.current=setTimeout(()=>{p(R=>({...R,visible:!1}))},4e3)}catch(M){console.error("Save failed:",M),p({visible:!0,message:"Failed to save content. Please try again.",timestamp:Date.now()}),g.current=setTimeout(()=>{p(R=>({...R,visible:!1}))},4e3)}},N={mission:"💡 Clearly state why your organization exists. Focus on the problem you solve and the change you create. Keep it concise and inspiring.",vision:"🔮 Paint a picture of the future you're working toward. Be ambitious but achievable. What does success look like?",approach:"🧭 Explain your unique methodology. What makes your approach different? How do you ensure sustainable impact?",values:"❤️ List 3-5 core principles that guide decisions. Each value should be actionable with a brief explanation of what it means in practice.",strategic_priorities:"🎯 Highlight 3-5 key focus areas. Be specific about what you're prioritizing and why these areas matter most right now.",short_term_goals:"⚡ Set 3-5 concrete goals for the next 1-2 years. Make them specific, measurable, and aligned with your mission.",long_term_goals:"🏔️ Define 3-5 ambitious goals for 5-10 years. Think big picture transformation and systemic change you want to achieve.",impact:"📈 Showcase concrete results with numbers, stories, and outcomes. Include both quantitative metrics and qualitative stories.",focus_areas_location:"🗺️ Define the geographic areas you serve. Be specific about regions, communities, or populations you prioritize.",partnerships:"🤝 Highlight key collaborations that amplify your impact. Explain how partnerships strengthen your work and extend your reach."},j=[{id:"line1",title:"Foundation Overview",description:"Core purpose and direction",layout:"grid-cols-3",templates:[{key:"mission",title:"Mission",icon:_s,color:"purple"},{key:"vision",title:"Vision",icon:pn,color:"blue"},{key:"approach",title:"Approach",icon:_3,color:"green"}]},{id:"line2",title:"Core Values",description:"Guiding principles",layout:"grid-cols-1",templates:[{key:"values",title:"Core Values",icon:Nt,color:"red"}]},{id:"line3",title:"Strategic Focus",description:"Key strategic priorities",layout:"grid-cols-1",templates:[{key:"strategic_priorities",title:"Strategic Priorities",icon:_s,color:"orange"}]},{id:"line4",title:"Goals & Timeline",description:"Short and long-term objectives",layout:"grid-cols-2",templates:[{key:"short_term_goals",title:"Short-Term Goals",icon:aa,color:"blue"},{key:"long_term_goals",title:"Long-Term Goals",icon:bs,color:"green"}]},{id:"line5",title:"Impact & Results",description:"Current achievements and metrics",layout:"grid-cols-1",templates:[{key:"impact",title:"Our Impact",icon:Cs,color:"emerald"}]},{id:"line6",title:"Community & Reach",description:"Geographic focus and partnerships",layout:"grid-cols-2",templates:[{key:"focus_areas_location",title:"Geographic Focus",icon:Lt,color:"teal"},{key:"partnerships",title:"Community Partnerships",icon:qe,color:"indigo"}]}],w=M=>(t.blocks||[]).find(R=>{const D=Yv[M];return D&&R.title===D.title}),_=M=>{const R=Yv[M];if(!R)return;const D={...R,id:`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,order:(t.blocks||[]).length+1};e({...t,blocks:[...t.blocks||[],D]})},k=M=>{e({...t,blocks:(t.blocks||[]).filter(R=>R.id!==M)})},C=(M,R,D)=>{e({...t,blocks:(t.blocks||[]).map(L=>L.id===M?{...L,[R]:D}:L)})},E=()=>{const M=["mission","vision","approach","values","strategic_priorities","short_term_goals","long_term_goals","impact","focus_areas_location","partnerships"].map((R,D)=>({...Yv[R],id:`block_${Date.now()}_${D}_${Math.random().toString(36).substr(2,9)}`,order:D+1}));e({...t,blocks:M})},A={blue:"bg-blue-100 border-blue-200 text-blue-700",purple:"bg-purple-100 border-purple-200 text-purple-700",green:"bg-green-100 border-green-200 text-green-700",red:"bg-red-100 border-red-200 text-red-700",orange:"bg-orange-100 border-orange-200 text-orange-700",emerald:"bg-emerald-100 border-emerald-200 text-emerald-700",teal:"bg-teal-100 border-teal-200 text-teal-700",indigo:"bg-indigo-100 border-indigo-200 text-indigo-700"};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Build Your Organization's Story"}),n.jsx("p",{className:"text-slate-600 mb-8",children:"Create a compelling narrative using our structured storytelling layout"}),n.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-4 mb-4",children:[n.jsx("button",{onClick:E,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 font-medium shadow-lg hover:shadow-xl",children:"Create Sample Template"}),n.jsx("div",{className:"h-6 w-px bg-gray-300"}),n.jsxs("button",{onClick:()=>c(!0),className:"bg-slate-100 border border-slate-300 text-slate-600 px-6 py-3 rounded-xl hover:bg-slate-200 hover:border-slate-400 transition-colors font-medium",children:[n.jsx(Ke,{size:18,className:"inline mr-2"}),"All Clear"]}),n.jsx("button",{onClick:v,disabled:a,className:`px-8 py-3 rounded-xl font-medium disabled:opacity-50 transition-all duration-300 ${m.visible&&m.message.includes("successfully")?"bg-green-600 hover:bg-green-700 text-white transform scale-105":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full inline mr-2"}),"Saving..."]}):m.visible&&m.message.includes("successfully")?n.jsxs(n.Fragment,{children:[n.jsx(Ks,{size:18,className:"inline mr-2"}),"Saved!"]}):n.jsxs(n.Fragment,{children:[n.jsx(v0,{size:18,className:"inline mr-2"}),"Save Changes"]})})]}),n.jsx("div",{className:"mb-8 min-h-[80px] flex items-center justify-center",children:m.visible&&n.jsxs("div",{className:`border-2 px-8 py-4 rounded-2xl flex items-center gap-4 shadow-lg animate-pulse ${m.message.includes("successfully")?"bg-green-50 border-green-400 text-green-800":"bg-red-50 border-red-400 text-red-800"}`,children:[n.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:m.message.includes("successfully")?n.jsx(Ks,{className:"w-5 h-5 text-green-600"}):n.jsx(Ke,{className:"w-5 h-5 text-red-600"})}),n.jsx("div",{className:"font-medium text-lg",children:m.message}),n.jsx("button",{onClick:()=>p(M=>({...M,visible:!1})),className:"ml-4 text-current hover:opacity-70",children:n.jsx(Ke,{className:"w-4 h-4"})})]})})]}),n.jsxs("div",{className:"space-y-12 relative",children:[n.jsxs("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-500 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute top-40 right-20 w-40 h-40 bg-purple-500 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-40 left-1/4 w-36 h-36 bg-pink-500 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-indigo-500 rounded-full blur-3xl"})]}),j.map(M=>n.jsxs("div",{className:"relative bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-md transition-all duration-300 hover:border-slate-300 group",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/0 via-purple-50/0 to-pink-50/0 group-hover:from-blue-50/30 group-hover:via-purple-50/20 group-hover:to-pink-50/30 rounded-2xl transition-all duration-500"}),n.jsx("div",{className:"relative z-10 flex items-center justify-between mb-8",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:M.title}),n.jsx("p",{className:"text-slate-600",children:M.description})]})}),n.jsx("div",{className:`relative z-10 grid ${M.layout} gap-6`,children:M.templates.map(R=>{const D=w(R.key),L=R.icon,B=A[R.color];return n.jsxs("div",{className:"space-y-4 group/template",children:[n.jsx("div",{className:`border-2 border-dashed rounded-xl p-4 transition-all duration-300 hover:scale-105 ${B}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"transform transition-transform duration-300 group-hover/template:rotate-12",children:n.jsx(L,{className:"w-5 h-5"})}),n.jsx("span",{className:"font-medium",children:R.title})]}),D?n.jsx("button",{onClick:()=>k(D.id),className:"text-red-500 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-all duration-300 hover:scale-110",children:n.jsx(Ke,{size:16})}):n.jsxs("button",{onClick:()=>_(R.key),className:"bg-white border border-slate-300 text-slate-700 px-3 py-2 rounded-lg hover:bg-slate-50 transition-all duration-300 text-sm font-medium hover:scale-105 hover:shadow-sm",children:[n.jsx($s,{size:16,className:"inline mr-1"}),"Add"]})]})}),D&&n.jsx("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 hover:shadow-sm transition-all duration-300",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Section Title"}),n.jsx("input",{type:"text",value:D.title||"",onChange:O=>C(D.id,"title",O.target.value),className:"w-full text-2xl font-black text-slate-900 bg-white border border-slate-300 rounded-xl px-4 py-3 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",placeholder:"Section Title"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Content"}),D.type==="list"&&Array.isArray(D.content)?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[n.jsxs("button",{onClick:()=>{const O=[...D.content||[],""];C(D.id,"content",O),setTimeout(()=>{const P=document.querySelectorAll(`[data-block-id="${D.id}"] textarea`),z=P[P.length-1];z&&z.focus()},100)},className:"flex items-center gap-2 px-3 py-2 text-sm bg-white border border-slate-300 rounded hover:bg-slate-50 transition-colors",title:"Add Bullet Point",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Add Bullet"]}),n.jsx("button",{onClick:()=>C(D.id,"content",[]),className:"px-3 py-2 text-xs text-slate-500 hover:text-slate-700 transition-colors",title:"Clear All Content",children:"Clear All"})]}),n.jsxs("div",{className:"space-y-2","data-block-id":D.id,children:[(D.content||[]).map((O,P)=>n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white border border-slate-200 rounded-lg hover:border-slate-300 transition-colors",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2.5 flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("textarea",{value:O||"",onChange:z=>{const q=[...D.content||[]];q[P]=z.target.value,C(D.id,"content",q)},onKeyDown:z=>{if(z.stopPropagation(),z.key==="Enter"&&z.shiftKey===!1){z.preventDefault();const q=[...D.content||[]];q.splice(P+1,0,""),C(D.id,"content",q),setTimeout(()=>{const V=document.querySelectorAll(`[data-block-id="${D.id}"] textarea`)[P+1];V&&V.focus()},100)}if(z.key==="Backspace"&&z.target.value===""&&D.content.length>1){z.preventDefault();const q=D.content.filter((I,V)=>V!==P);C(D.id,"content",q),setTimeout(()=>{const V=document.querySelectorAll(`[data-block-id="${D.id}"] textarea`)[Math.max(0,P-1)];V&&(V.focus(),V.setSelectionRange(V.value.length,V.value.length))},100)}},placeholder:"Type your bullet point here...",className:"w-full p-0 border-none outline-none resize-none text-slate-700 leading-relaxed bg-transparent placeholder-slate-400",rows:1,style:{minHeight:"20px",lineHeight:"1.5"},onInput:z=>{z.target.style.height="auto",z.target.style.height=z.target.scrollHeight+"px"}})}),n.jsx("button",{onClick:()=>{if(D.content.length>1){const z=D.content.filter((q,I)=>I!==P);C(D.id,"content",z)}else C(D.id,"content",[""])},className:"text-red-400 hover:text-red-600 p-1 hover:bg-red-50 rounded transition-colors flex-shrink-0 mt-1",title:"Remove bullet point",children:n.jsx(Ke,{size:14})})]},P)),(!D.content||D.content.length===0)&&n.jsxs("div",{className:"text-center py-12 text-slate-500",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),n.jsx("p",{className:"mb-4 font-medium",children:"No bullet points yet"}),n.jsx("button",{onClick:()=>{C(D.id,"content",[""])},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Add Your First Bullet Point"})]})]}),n.jsx("div",{className:"text-xs text-slate-500",children:"💡 Press Enter to add new bullet points. Press Shift+Enter for line breaks within a bullet. Use Backspace on empty bullets to remove them."})]}):D.type==="stats"&&Array.isArray(D.content)?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[D.content.map((O,P)=>n.jsxs("div",{className:"flex gap-3 items-center bg-slate-50 p-3 rounded-lg border border-slate-200",children:[n.jsx("input",{type:"text",value:O.label||"",onChange:z=>{const q=[...D.content];q[P]={...O,label:z.target.value},C(D.id,"content",q)},placeholder:"Metric name (e.g., Lives Impacted)",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("span",{className:"text-slate-400 font-bold",children:":"}),n.jsx("input",{type:"text",value:O.value||"",onChange:z=>{const q=[...D.content];q[P]={...O,value:z.target.value},C(D.id,"content",q)},placeholder:"Value (e.g., 50,000+)",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("button",{onClick:()=>{const z=D.content.filter((q,I)=>I!==P);C(D.id,"content",z)},className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded transition-colors",children:n.jsx(Ke,{size:16})})]},P)),n.jsxs("button",{onClick:()=>{const O=[...D.content,{label:"",value:""}];C(D.id,"content",O)},className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed border-slate-300 rounded-lg text-slate-500 hover:border-slate-400 hover:text-slate-600 transition-colors",children:[n.jsx($s,{size:16}),"Add Impact Metric"]})]}),n.jsx("div",{className:"text-xs text-slate-500",children:"💡 Add metrics that showcase your impact with numbers, percentages, or achievements."})]}):n.jsx("textarea",{value:D.content||"",onChange:O=>{C(D.id,"content",O.target.value)},onKeyDown:O=>{O.stopPropagation()},className:"w-full p-4 border border-slate-300 rounded-xl text-slate-700 leading-relaxed resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-300",rows:6,placeholder:"Tell your story with clarity and purpose. Focus on your impact, use specific examples, and share your unique narrative..."}),n.jsx("div",{className:"text-xs text-slate-500 mt-2",children:N[R.key]||"💡 Write with clarity and purpose."})]})]})})]},R.key)})})]},M.id))]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-md mx-4 shadow-2xl transform transition-all overflow-hidden",children:[n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 bg-gradient-to-br from-orange-200 to-red-200 rounded-full blur-2xl opacity-60 -translate-x-4 -translate-y-4 animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-br from-red-200 to-pink-200 rounded-full blur-2xl opacity-50 translate-x-4 translate-y-4 animate-pulse"})]}),n.jsxs("div",{className:"relative z-10 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:n.jsx(Ke,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Clear All Content?"}),n.jsx("p",{className:"text-slate-600",children:"This will remove all sections and content from your North Star page. This action cannot be undone."})]})]}),n.jsx("div",{className:"px-6 pb-6",children:n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx("button",{onClick:()=>c(!1),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl hover:bg-slate-200 transition-all duration-300 font-medium",children:"Keep Content"}),n.jsx("button",{onClick:b,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-300 font-medium shadow-lg transform hover:scale-105",children:"Clear All"})]})})]})}),!1]})},Xie=({pageData:t,organization:e,canEdit:s,onEdit:r,isEditMode:a=!1})=>{const i=k=>{var C;return(C=t==null?void 0:t.blocks)==null?void 0:C.find(E=>E.title===k||E.title.toLowerCase().includes(k.toLowerCase()))},o=i("Vision"),c=i("Mission"),d=i("Approach"),h=i("Values"),m=i("Strategic"),p=i("Long-Term"),g=i("Short-Term"),b=i("Impact"),v=i("Geographic"),N=i("Partnership"),j=({value:k,duration:C=2e3})=>{const[E,A]=y.useState(0),[M,R]=y.useState(!1),D=/\d/.test(k);y.useEffect(()=>{if(!M||!D)return;const O=parseInt(k.replace(/[^\d]/g,""))||0;if(O===0)return;let P=0;const z=O/(C/16),q=setInterval(()=>{P+=z,P>=O?(A(O),clearInterval(q)):A(Math.floor(P))},16);return()=>clearInterval(q)},[M,k,C,D]);const L=O=>{O.forEach(P=>{P.isIntersecting&&R(!0)})};y.useEffect(()=>{if(!D)return;const O=new IntersectionObserver(L),P=document.getElementById(`counter-${k.replace(/[^a-zA-Z0-9]/g,"")}`);return P&&O.observe(P),()=>O.disconnect()},[k,D]);const B=O=>{const P=k.replace(/[\d,]/g,"");return O>=1e6?`${(O/1e6).toFixed(1)}M${P}`:O>=1e3?`${(O/1e3).toFixed(0)}K${P}`:`${O.toLocaleString()}${P}`};return!D||!M?n.jsx("span",{className:"font-bold text-3xl text-slate-900",children:k}):n.jsx("span",{id:`counter-${k.replace(/[^a-zA-Z0-9]/g,"")}`,className:"font-bold text-3xl text-slate-900",children:B(E)})},w=k=>k?k.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>"):"",_=k=>{if(!k||!k.content)return null;switch(k.type){case"list":return n.jsx("ul",{className:"space-y-4",children:Array.isArray(k.content)?k.content.filter(C=>C&&C.trim()).map((C,E)=>n.jsxs("li",{className:"flex items-start gap-3 group",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0 transition-all duration-300 group-hover:scale-150 group-hover:bg-blue-600"}),n.jsx("span",{className:"text-slate-700 leading-relaxed group-hover:text-slate-900 transition-colors duration-300",dangerouslySetInnerHTML:{__html:w(C)}})]},E)):null});case"stats":return n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:Array.isArray(k.content)?k.content.map((C,E)=>n.jsxs("div",{className:"text-center group hover:scale-105 transition-all duration-300 cursor-default",children:[n.jsx("div",{className:"mb-2",children:n.jsx(j,{value:C.value})}),n.jsx("div",{className:"text-sm text-slate-600 font-medium group-hover:text-slate-800 transition-colors duration-300",children:C.label})]},E)):null});default:return n.jsx("div",{className:"prose prose-slate max-w-none",children:n.jsx("div",{className:"text-slate-700 leading-relaxed text-lg group-hover:text-slate-900 transition-colors duration-300",dangerouslySetInnerHTML:{__html:w(typeof k.content=="string"?k.content:"")}})})}};return n.jsxs("div",{className:"min-h-screen bg-slate-50 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-500 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute top-60 right-20 w-40 h-40 bg-purple-500 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),n.jsx("div",{className:"absolute bottom-40 left-1/4 w-36 h-36 bg-pink-500 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),n.jsx("div",{className:"absolute bottom-20 right-1/3 w-28 h-28 bg-indigo-500 rounded-full blur-3xl animate-pulse",style:{animationDelay:"3s"}})]}),s&&a&&n.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200 p-4",children:n.jsx("div",{className:"flex justify-end items-center max-w-7xl mx-auto",children:n.jsxs("button",{onClick:r,className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium shadow-md",children:[n.jsx(Gi,{size:18}),"Edit North Star"]})})}),t!=null&&t.blocks&&t.blocks.length>0?n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8 relative z-10",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-purple-200",children:n.jsx(_s,{className:"w-6 h-6 text-purple-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-purple-600 transition-colors duration-300",children:c.title})]}),n.jsx("div",{className:"group",children:_(c)})]}),o&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-200",children:n.jsx(pn,{className:"w-6 h-6 text-blue-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-blue-600 transition-colors duration-300",children:o.title})]}),n.jsx("div",{className:"group",children:_(o)})]}),d&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-green-200",children:n.jsx(_3,{className:"w-6 h-6 text-green-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-green-600 transition-colors duration-300",children:d.title})]}),n.jsx("div",{className:"group",children:_(d)})]})]}),h&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-red-200",children:n.jsx(Nt,{className:"w-6 h-6 text-red-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-red-600 transition-colors duration-300",children:h.title})]}),n.jsx("div",{className:"group",children:_(h)})]}),m&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-orange-200",children:n.jsx(_s,{className:"w-6 h-6 text-orange-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-orange-600 transition-colors duration-300",children:m.title})]}),n.jsx("div",{className:"group",children:_(m)})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-200",children:n.jsx(aa,{className:"w-6 h-6 text-blue-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-blue-600 transition-colors duration-300",children:g.title})]}),n.jsx("div",{className:"group",children:_(g)})]}),p&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-green-200",children:n.jsx(bs,{className:"w-6 h-6 text-green-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-green-600 transition-colors duration-300",children:p.title})]}),n.jsx("div",{className:"group",children:_(p)})]})]}),b&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[n.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-emerald-200",children:n.jsx(Cs,{className:"w-6 h-6 text-emerald-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-emerald-600 transition-colors duration-300",children:b.title})]}),n.jsx("div",{className:"group",children:_(b)})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-teal-200",children:n.jsx(Lt,{className:"w-6 h-6 text-teal-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-teal-600 transition-colors duration-300",children:v.title})]}),n.jsx("div",{className:"group",children:_(v)})]}),N&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:bg-indigo-200",children:n.jsx(qe,{className:"w-6 h-6 text-indigo-600 transition-transform duration-300 group-hover:rotate-12"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 group-hover:text-indigo-600 transition-colors duration-300",children:N.title})]}),n.jsx("div",{className:"group",children:_(N)})]})]})]}):n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-8",children:n.jsx(Nt,{className:"w-12 h-12 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Building Something Amazing"}),n.jsxs("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:[e==null?void 0:e.name," is crafting their story. Check back soon to discover their mission, impact, and vision for the future."]}),n.jsx("div",{className:"text-sm text-gray-500",children:"This page is being thoughtfully designed to showcase their unique purpose and values."}),s&&a&&n.jsx("div",{className:"mt-8",children:n.jsx("button",{onClick:r,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 font-medium text-lg shadow-xl",children:"Start Building Your North Star"})})]})]})},Qie=({organization:t,userMembership:e,session:s,isEditMode:r=!1})=>{var C;const[a,i]=y.useState(null),[o,c]=y.useState(!0),[d,h]=y.useState(!1),[m,p]=y.useState(null),[g,b]=y.useState(!1),[v,N]=y.useState(null),j=e&&Cr(e.role,ns.EDIT_ORGANIZATION,(C=s==null?void 0:s.user)==null?void 0:C.is_omega_admin);y.useEffect(()=>{if(!r&&d){h(!1),p(null),N(null);const E=`editData_${t==null?void 0:t.id}`;sessionStorage.removeItem(E)}},[r,d,t==null?void 0:t.id]),y.useEffect(()=>{(async()=>{if(t!=null&&t.id){c(!0);try{const{data:A,error:M}=await $.from("organization_north_stars").select("*").eq("organization_id",t.id).eq("is_published",!0).maybeSingle();if(M&&M.code!=="PGRST116")throw M;i(A)}catch(A){console.error("Error fetching North Star data:",A),N("Failed to load page data")}finally{c(!1)}}})()},[t==null?void 0:t.id]);const w=()=>{const E=`editData_${t==null?void 0:t.id}`,A=sessionStorage.getItem(E);let M=a||{blocks:[]};if(A)try{const R=JSON.parse(A);R&&R.blocks&&(M=R)}catch(R){console.warn("Failed to parse saved edit data:",R)}p(M),h(!0),N(null)},_=()=>{if(m&&JSON.stringify(m)!==JSON.stringify(a)&&!window.confirm("You have unsaved changes. Are you sure you want to discard them?"))return;h(!1),p(null),N(null);const E=`editData_${t==null?void 0:t.id}`;sessionStorage.removeItem(E)},k=async()=>{var A;if(!m||!((A=s==null?void 0:s.user)!=null&&A.id))return;if(m.blocks&&m.blocks.length>0&&!m.blocks.some(R=>R.title&&R.title.trim()||R.content&&(typeof R.content=="string"?R.content.trim():Array.isArray(R.content)?R.content.some(D=>typeof D=="string"?D.trim():D&&(D.label||D.value)):!1))){N("Please add some content before saving");return}b(!0),N(null);try{const M={organization_id:t.id,blocks:m.blocks||[],is_published:!0};let R;if(a!=null&&a.id?R=await $.from("organization_north_stars").update(M).eq("id",a.id).select().single():R=await $.from("organization_north_stars").insert(M).select().single(),R.error)throw R.error;i(R.data),h(!1),p(null);const D=`editData_${t==null?void 0:t.id}`;sessionStorage.removeItem(D)}catch(M){console.error("Error saving page:",M),N(`Failed to save: ${M.message}`)}finally{b(!1)}};return o?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-3 text-gray-500",children:"Loading..."})]}):v?n.jsx("div",{className:"text-center py-20",children:n.jsx("p",{className:"text-red-600",children:v})}):d&&r?n.jsx(Jie,{editData:m,setEditData:p,onSave:k,onCancel:_,saving:g,organization:t}):n.jsx(Xie,{pageData:a,organization:t,canEdit:j,onEdit:w,isEditMode:r})},Zie=({organization:t,userMembership:e,session:s,currentUserProfile:r})=>{var X,Q,de,ve,Pe,He,Qe,be,se,le,ge,te,xe,De,Ee,ce,ye,Oe,Me,it,ft;const a=bt(),[i,o]=y.useState([]),[c,d]=y.useState(!0),[h,m]=y.useState(null),[p,g]=y.useState(""),[b,v]=y.useState([]),[N,j]=y.useState(""),[w,_]=y.useState(!1),[k,C]=y.useState(null),[E,A]=y.useState(!0),[M,R]=y.useState(!1),[D,L]=y.useState(0),B=y.useRef(),O=9;y.useEffect(()=>{(async()=>{var ze,ae,_e,Fe,$e,Ce,me,Re,Be,pt,gt,ls,ks;if((ze=s==null?void 0:s.user)!=null&&ze.id){if(r&&r.avatar_url){C(r);return}try{const{data:Fs,error:sr}=await $.from("profiles").select("id, full_name, avatar_url").eq("id",s.user.id).maybeSingle();let Fn=null;Fs&&!sr?Fn={id:Fs.id,full_name:Fs.full_name||((ae=s.user.user_metadata)==null?void 0:ae.full_name)||((_e=s.user.user_metadata)==null?void 0:_e.name),avatar_url:Fs.avatar_url||((Fe=s.user.user_metadata)==null?void 0:Fe.avatar_url)||(($e=s.user.user_metadata)==null?void 0:$e.picture),email:s.user.email}:Fn={id:s.user.id,full_name:((Ce=s.user.user_metadata)==null?void 0:Ce.full_name)||((me=s.user.user_metadata)==null?void 0:me.name),avatar_url:((Re=s.user.user_metadata)==null?void 0:Re.avatar_url)||((Be=s.user.user_metadata)==null?void 0:Be.picture),email:s.user.email},C(Fn)}catch(Fs){console.error("Error in profile fetch:",Fs);const sr={id:s.user.id,full_name:((pt=s.user.user_metadata)==null?void 0:pt.full_name)||((gt=s.user.user_metadata)==null?void 0:gt.name)||"User",avatar_url:((ls=s.user.user_metadata)==null?void 0:ls.avatar_url)||((ks=s.user.user_metadata)==null?void 0:ks.picture),email:s.user.email};C(sr)}}})()},[(X=s==null?void 0:s.user)==null?void 0:X.id,r]);const P=async(Te=!1)=>{try{Te?R(!0):(d(!0),L(0));const ze=Te?D:0,{data:ae,error:_e}=await $.from("organization_photos").select(`
          id,
          image_url,
          caption,
          alt_text,
          created_at,
          uploaded_by_user_id,
          is_featured,
          display_order,
          likes_count,
          comments_count
        `).eq("organization_id",t.id).order("display_order",{ascending:!0}).range(ze,ze+O-1);if(_e)throw _e;const Fe=await Promise.all((ae||[]).map(async $e=>{let Ce=$e.likes_count,me=$e.comments_count;if(Ce==null){const{count:Re}=await $.from("organization_photo_likes").select("*",{count:"exact",head:!0}).eq("photo_id",$e.id);Ce=Re||0}if(me==null){const{count:Re}=await $.from("organization_photo_comments").select("*",{count:"exact",head:!0}).eq("photo_id",$e.id);me=Re||0}return{...$e,likes_count:Ce||0,comments_count:me||0}}));Te?(o($e=>[...$e,...Fe]),L(ze+O)):(o(Fe),L(O)),A(Fe.length===O)}catch(ze){console.error("Error fetching photos:",ze),g("Failed to load photos")}finally{d(!1),R(!1)}};y.useEffect(()=>{t!=null&&t.id&&P()},[t==null?void 0:t.id]);const z=y.useCallback(Te=>{c||M||(B.current&&B.current.disconnect(),B.current=new IntersectionObserver(ze=>{ze[0].isIntersecting&&E&&P(!0)}),Te&&B.current.observe(Te))},[c,M,E]),q=(Te,ze)=>{m({...Te,index:ze}),J(Te.id)},I=()=>{m(null),v([]),j("")},V=Te=>{if(!h)return;const ze=h.index;let ae;if(Te==="next"&&ze<i.length-1)ae=ze+1;else if(Te==="prev"&&ze>0)ae=ze-1;else return;q(i[ae],ae)},H=async Te=>{if(s!=null&&s.user)try{const{data:ze,error:ae}=await $.from("organization_photo_likes").select("id").eq("photo_id",Te).eq("user_id",s.user.id).maybeSingle();if(ae&&ae.code!=="PGRST116")throw ae;let _e,Fe;if(ze){const{error:$e}=await $.from("organization_photo_likes").delete().eq("photo_id",Te).eq("user_id",s.user.id);if($e)throw $e;_e=Math.max(0,((h==null?void 0:h.likes_count)||0)-1),Fe=!1}else{const{error:$e}=await $.from("organization_photo_likes").insert({photo_id:Te,user_id:s.user.id,reaction_type:"like"});if($e)throw $e;_e=((h==null?void 0:h.likes_count)||0)+1,Fe=!0}o($e=>$e.map(Ce=>Ce.id===Te?{...Ce,likes_count:_e}:Ce)),U($e=>{const Ce=new Set($e);return Fe?Ce.add(Te):Ce.delete(Te),Ce}),h&&h.id===Te&&m($e=>({...$e,likes_count:_e}))}catch(ze){console.error("Error toggling like:",ze),alert("Unable to like photo. Please try again.")}},[Y,U]=y.useState(new Set),K=async()=>{if(!(!(s!=null&&s.user)||i.length===0))try{const{data:Te}=await $.from("organization_photo_likes").select("photo_id").eq("user_id",s.user.id).in("photo_id",i.map(ae=>ae.id)),ze=new Set((Te==null?void 0:Te.map(ae=>ae.photo_id))||[]);U(ze)}catch(Te){console.error("Error fetching user likes:",Te)}},J=async Te=>{if(Te){_(!0);try{const{data:ze,error:ae}=await $.from("organization_photo_comments").select(`
          *,
          profiles:profile_id (
            id,
            full_name,
            avatar_url
          )
        `).eq("photo_id",Te).order("created_at",{ascending:!0});if(ae)throw ae;v(ze||[])}catch(ze){console.error("Error fetching comments:",ze)}finally{_(!1)}}},W=Te=>{a(`/profile/members/${Te}`)},ee=async Te=>{if(Te.preventDefault(),!(!N.trim()||!(s!=null&&s.user)||!h))try{const{data:ze,error:ae}=await $.from("organization_photo_comments").insert({photo_id:h.id,user_id:s.user.id,profile_id:s.user.id,content:N.trim()}).select(`
          *,
          profiles:profile_id (
            id,
            full_name,
            avatar_url
          )
        `).single();if(ae)throw ae;v(_e=>[..._e,ze]),j(""),o(_e=>_e.map(Fe=>Fe.id===h.id?{...Fe,comments_count:(Fe.comments_count||0)+1}:Fe)),m(_e=>({..._e,comments_count:(_e.comments_count||0)+1}))}catch(ze){console.error("Error adding comment:",ze)}};y.useEffect(()=>{K()},[i,(Q=s==null?void 0:s.user)==null?void 0:Q.id]),y.useEffect(()=>{const Te=ae=>{ae.key==="Escape"&&h&&I()},ze=ae=>{ae.target.classList.contains("photo-modal-backdrop")&&I()};return h&&(document.addEventListener("keydown",Te),document.addEventListener("click",ze),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",Te),document.removeEventListener("click",ze),document.body.style.overflow="unset"}},[h]);const ne=Te=>{const ze=new Date(Te),_e=Math.floor((new Date-ze)/1e3);return _e<60?"Just now":_e<3600?`${Math.floor(_e/60)}m`:_e<86400?`${Math.floor(_e/3600)}h`:_e<604800?`${Math.floor(_e/86400)}d`:`${Math.floor(_e/604800)}w`};return c?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("div",{children:n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Photos"})})}),p&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm text-red-700",children:p})}),i.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3",children:i.map((Te,ze)=>n.jsxs("div",{ref:ze===i.length-1?z:null,className:"relative aspect-square bg-slate-100 group cursor-pointer overflow-hidden rounded-xl",onClick:()=>q(Te,ze),children:[n.jsx("img",{src:Te.image_url,alt:Te.alt_text||Te.caption||`Photo ${ze+1}`,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-4 text-white",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:Te.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jn,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:Te.comments_count||0})]})]})})]},Te.id))}),M&&n.jsxs("div",{className:"flex justify-center items-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent"}),n.jsx("span",{className:"ml-3 text-slate-500",children:"Loading more photos..."})]}),!E&&i.length>0&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-slate-500 text-sm",children:"You've seen all photos"})})]}):n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[n.jsx(hn,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No Photos Yet"}),n.jsxs("p",{className:"text-slate-600",children:["No photos have been shared by ",t.name," yet."]})]}),h&&n.jsx("div",{className:"photo-modal-backdrop fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden transform transition-all duration-300 ease-in-out",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[t!=null&&t.image_url?n.jsx("img",{src:t.image_url,alt:`${t==null?void 0:t.name} logo`,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}):n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(ve=(de=t==null?void 0:t.name)==null?void 0:de.charAt(0))==null?void 0:ve.toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-slate-900",children:t==null?void 0:t.name}),n.jsx("p",{className:"text-sm text-slate-500",children:ne(h.created_at)})]})]}),n.jsx("button",{onClick:I,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:n.jsx(Ke,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"flex max-h-[calc(95vh-120px)]",children:[n.jsxs("div",{className:"flex-1 bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center relative min-h-[500px]",children:[h.index>0&&n.jsx("button",{onClick:()=>V("prev"),className:"absolute left-6 z-10 w-12 h-12 bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full flex items-center justify-center text-white transition-colors",children:"←"}),h.index<i.length-1&&n.jsx("button",{onClick:()=>V("next"),className:"absolute right-6 z-10 w-12 h-12 bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full flex items-center justify-center text-white transition-colors",children:"→"}),n.jsx("img",{src:h.image_url,alt:h.alt_text||h.caption||`Photo ${h.index+1}`,className:"max-w-full max-h-full object-contain"})]}),n.jsxs("div",{className:"w-96 flex flex-col bg-white",children:[h.caption&&n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsxs("div",{className:"flex gap-4",children:[t!=null&&t.image_url?n.jsx("img",{src:t.image_url,alt:`${t==null?void 0:t.name} logo`,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}):n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(He=(Pe=t==null?void 0:t.name)==null?void 0:Pe.charAt(0))==null?void 0:He.toUpperCase()}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm leading-relaxed",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:t==null?void 0:t.name})," ",n.jsx("span",{className:"text-slate-700",children:h.caption})]})})]})}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:w?n.jsx("div",{className:"flex justify-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent"})}):b.length>0?n.jsx("div",{className:"space-y-4",children:b.map(Te=>{var ze,ae,_e,Fe,$e;return n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{var Ce;return W((Ce=Te.profiles)==null?void 0:Ce.id)},className:"flex-shrink-0 hover:opacity-80 transition-opacity",children:(ze=Te.profiles)!=null&&ze.avatar_url?n.jsx("img",{src:Te.profiles.avatar_url,alt:Te.profiles.full_name,className:"w-8 h-8 rounded-full object-cover border border-slate-200"}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold border border-slate-200",children:((Fe=(_e=(ae=Te.profiles)==null?void 0:ae.full_name)==null?void 0:_e.charAt(0))==null?void 0:Fe.toUpperCase())||"?"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[n.jsx("button",{onClick:()=>{var Ce;return W((Ce=Te.profiles)==null?void 0:Ce.id)},className:"font-medium text-sm text-slate-900 mb-1 hover:text-blue-600 transition-colors",children:(($e=Te.profiles)==null?void 0:$e.full_name)||"Anonymous"}),n.jsx("div",{className:"text-sm text-slate-700 leading-relaxed",children:Te.content})]}),n.jsx("div",{className:"text-xs text-slate-500 mt-1 ml-3",children:ne(Te.created_at)})]})]},Te.id)})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Jn,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No comments yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Be the first to share your thoughts"})]})}),(s==null?void 0:s.user)&&n.jsx("div",{className:"border-t border-slate-200 p-4 bg-white",children:n.jsxs("form",{onSubmit:ee,className:"flex gap-3",children:[n.jsxs("button",{type:"button",onClick:()=>W(k==null?void 0:k.id),className:"flex-shrink-0 hover:opacity-80 transition-opacity",children:[k!=null&&k.avatar_url?n.jsx("img",{src:k.avatar_url,alt:"Your avatar",className:"w-8 h-8 rounded-full object-cover border border-slate-200"}):null,n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold border border-slate-200",style:{display:k!=null&&k.avatar_url?"none":"flex"},children:((be=(Qe=k==null?void 0:k.full_name)==null?void 0:Qe.charAt(0))==null?void 0:be.toUpperCase())||((le=(se=k==null?void 0:k.email)==null?void 0:se.charAt(0))==null?void 0:le.toUpperCase())||((xe=(te=(ge=s==null?void 0:s.user)==null?void 0:ge.email)==null?void 0:te.charAt(0))==null?void 0:xe.toUpperCase())||((ye=(ce=(Ee=(De=s==null?void 0:s.user)==null?void 0:De.user_metadata)==null?void 0:Ee.full_name)==null?void 0:ce.charAt(0))==null?void 0:ye.toUpperCase())||((ft=(it=(Me=(Oe=s==null?void 0:s.user)==null?void 0:Oe.user_metadata)==null?void 0:Me.name)==null?void 0:it.charAt(0))==null?void 0:ft.toUpperCase())||"?"})]}),n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsx("input",{type:"text",value:N,onChange:Te=>j(Te.target.value),placeholder:"Add a comment...",className:"flex-1 px-3 py-2 border border-slate-300 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n.jsx("button",{type:"submit",disabled:!N.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:n.jsx(Cc,{className:"w-4 h-4"})})]})]})})]}),n.jsxs("div",{className:"border-t border-slate-200 p-6 bg-white",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{className:"flex items-center gap-6",children:[s!=null&&s.user?n.jsxs("button",{onClick:()=>H(h.id),disabled:!(h!=null&&h.id),className:`flex items-center gap-2 p-2 rounded-lg transition-all duration-200 ${Y.has(h.id)?"text-red-500 bg-red-50 hover:bg-red-100 scale-105":"text-slate-600 hover:text-red-500 hover:bg-red-50 hover:scale-105"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[n.jsx(Nt,{className:`w-6 h-6 transition-all duration-200 ${Y.has(h.id)?"fill-current scale-110":""}`}),n.jsx("span",{className:"font-medium",children:h.likes_count||0})]}):n.jsxs("div",{className:"flex items-center gap-2 p-2 text-slate-400",children:[n.jsx(Nt,{className:"w-6 h-6"}),n.jsx("span",{className:"font-medium",children:h.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-2 p-2 text-slate-600",children:[n.jsx(Jn,{className:"w-6 h-6"}),n.jsx("span",{className:"font-medium",children:h.comments_count||0})]}),n.jsx("button",{className:"flex items-center gap-2 p-2 text-slate-600 hover:text-green-500 hover:bg-green-50 rounded-lg transition-colors",children:n.jsx(R3,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-2",children:h.likes_count>0&&n.jsxs("span",{children:[h.likes_count," ",h.likes_count===1?"like":"likes"]})}),n.jsxs("div",{className:"text-xs text-slate-500 flex items-center justify-between",children:[n.jsxs("span",{children:[h.index+1," of ",i.length]}),n.jsx("span",{children:"Press ESC to close"})]})]})]})]})]})})]})},eoe=({organization:t,userMembership:e,session:s})=>{const[r,a]=y.useState([]),[i,o]=y.useState(!1),[c,d]=y.useState(""),[h,m]=y.useState(null),[p,g]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){a([]);return}o(!0);try{const{data:C,error:E}=await $.from("grants").select("*").eq("organization_id",t.id).order("deadline",{ascending:!0});if(E){console.error("Error fetching grants:",E),a([]);return}const A=(C||[]).map(M=>({...M,foundationName:t.name,fundingAmount:M.funding_amount_text,dueDate:M.deadline,dateAdded:M.date_added,grantType:M.grant_type,startDate:M.start_date,organization:{image_url:t.image_url,banner_image_url:t.banner_image_url},funderSlug:t.slug}));a(A)}catch(C){console.error("Error in fetchGrants:",C),a([])}finally{o(!1)}})()},[t==null?void 0:t.id]);const b=k=>{m(k),g(!0)},v=()=>{m(null),g(!1)},N=k=>{console.log("Save grant:",k)},j=k=>{console.log("Unsave grant:",k)},w=k=>{console.log("Filter by category:",k)};if(i)return n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading grants..."})]})});if(r.length===0)return n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[n.jsx(an,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),n.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"No Active Grants"}),n.jsxs("p",{className:"text-slate-600 mb-8",children:[t==null?void 0:t.name," doesn't have any active grant opportunities at the moment. Check back soon for new funding opportunities."]})]});const _=r.filter(k=>{var C,E;return c===""||((C=k.title)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((E=k.description)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))});return n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Grant Opportunities"}),n.jsxs("p",{className:"text-slate-600 text-lg",children:["Current funding opportunities from ",t==null?void 0:t.name]})]})}),n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search grants...",value:c,onChange:k=>d(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("div",{className:"mt-4 text-sm text-slate-600",children:_.length===r.length?`Showing all ${r.length} grant${r.length!==1?"s":""}`:`Showing ${_.length} of ${r.length} grant${r.length!==1?"s":""}`})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(k=>{var C;return n.jsx(Xw,{grant:k,onOpenDetailModal:b,onFilterByCategory:w,onSave:N,onUnsave:j,isSaved:!1,session:s,userOrganizationType:(C=s==null?void 0:s.user)==null?void 0:C.organization_type},k.id)})}),h&&n.jsx(Kc,{grant:h,isOpen:p,onClose:v,session:s})]})},TR=({program:t,isOpen:e,onClose:s,onEdit:r,canEdit:a=!1})=>{if(!e||!t)return null;const i=o=>{switch(o){case"active":return"bg-emerald-500";case"planned":return"bg-blue-500";case"completed":return"bg-slate-400";case"paused":return"bg-amber-500";default:return"bg-emerald-500"}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-[100] animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden border border-white/20 animate-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-slate-50/80 via-white/50 to-indigo-50/30 border-b border-slate-200/50",children:[n.jsxs("div",{className:"absolute inset-0 opacity-30",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-200/40 to-purple-200/20 rounded-full blur-3xl"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-200/30 to-cyan-200/20 rounded-full blur-2xl"})]}),n.jsxs("div",{className:"relative flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 pr-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${i(t.status)} shadow-lg`}),n.jsxs("span",{className:"text-sm font-medium text-slate-600 capitalize",children:[t.status||"active"," program"]})]}),n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4 leading-tight",children:t.name}),t.description&&n.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-6 max-w-2xl",children:t.description}),t.funded_by_organizations&&t.funded_by_organizations.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ut,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Funded By"})]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:t.funded_by_organizations.map(o=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/60 border border-slate-200/50 rounded-xl backdrop-blur-sm",children:[o.image_url?n.jsx("img",{src:o.image_url,alt:o.name,className:"w-6 h-6 rounded-full object-cover"}):n.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-300 flex items-center justify-center",children:n.jsx(Ut,{className:"w-3 h-3 text-slate-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-800",children:o.name}),n.jsx("span",{className:"text-xs text-slate-500 capitalize",children:o.type})]},o.id))})]})]}),n.jsx("button",{onClick:s,className:"p-2 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white/90 transition-all duration-200 shadow-lg border border-white/40 hover:scale-110","aria-label":"Close modal",children:n.jsx(Ke,{size:20,className:"text-slate-600"})})]})]}),n.jsx("div",{className:"flex-1 p-8 overflow-hidden",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 h-full",children:[n.jsxs("div",{className:"space-y-4",children:[t.goals&&n.jsxs("div",{className:"bg-gradient-to-br from-slate-50/50 to-gray-50/30 rounded-2xl p-6 border border-slate-100/50 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(_s,{size:20,className:"text-slate-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Goals & Objectives"})]}),n.jsx("p",{className:"text-slate-700 leading-relaxed",children:t.goals})]}),t.target_population&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50/50 to-indigo-50/30 rounded-2xl p-6 border border-purple-100/50 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:n.jsx(qe,{size:20,className:"text-purple-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Target Population"})]}),n.jsx("p",{className:"text-slate-700 leading-relaxed",children:t.target_population})]}),t.location&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50/50 to-cyan-50/30 rounded-2xl p-6 border border-blue-100/50 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:n.jsx(Lt,{size:20,className:"text-blue-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Location"})]}),n.jsx("p",{className:"text-slate-700",children:t.location})]})]}),n.jsxs("div",{className:"space-y-4",children:[t.impact_metrics&&n.jsxs("div",{className:"bg-gradient-to-br from-amber-50/50 to-orange-50/30 rounded-2xl p-6 border border-amber-100/50 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(Cs,{size:20,className:"text-amber-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Impact Metrics"})]}),n.jsx("p",{className:"text-slate-700 leading-relaxed",children:t.impact_metrics})]}),(t.start_date||t.end_date)&&n.jsxs("div",{className:"bg-gradient-to-br from-emerald-50/50 to-teal-50/30 rounded-2xl p-6 border border-emerald-100/50 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(bs,{size:20,className:"text-emerald-600"})}),n.jsx("h3",{className:"font-semibold text-slate-900",children:"Duration"})]}),n.jsxs("p",{className:"text-slate-700",children:[t.start_date&&new Date(t.start_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),t.start_date&&t.end_date&&" — ",t.end_date&&new Date(t.end_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})]})]})}),n.jsx("div",{className:"p-6 border-t border-slate-200/50 bg-slate-50/30 backdrop-blur-sm",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:s,className:"px-6 py-2.5 text-slate-700 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl hover:bg-white hover:border-slate-300 font-medium transition-all duration-200 hover:scale-105",children:"Close"}),a&&n.jsxs("button",{onClick:()=>{s(),r(t)},className:"inline-flex items-center gap-2 px-6 py-2.5 bg-slate-900 text-white rounded-xl font-medium transition-all duration-200 hover:bg-slate-800 hover:scale-105 shadow-lg",children:[n.jsx(Gi,{size:16}),"Edit Program"]})]}),t.external_url&&n.jsxs("a",{href:t.external_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2.5 bg-indigo-600 text-white rounded-xl font-medium transition-all duration-200 hover:bg-indigo-700 hover:scale-105 shadow-lg",children:[n.jsx(Mn,{size:16}),"Learn More",n.jsx(da,{size:16})]})]})})]})})},toe=({organization:t,session:e,userMembership:s,isEditMode:r=!1})=>{const[a,i]=y.useState([]),[o,c]=y.useState(!0),[d,h]=y.useState(null),[m,p]=y.useState(null),[g,b]=y.useState(!1),v=s&&["super_admin","admin"].includes(s.role);y.useEffect(()=>{t!=null&&t.id&&N()},[t==null?void 0:t.id]);const N=async()=>{try{c(!0);const{data:_,error:k}=await $.from("organization_programs").select("*").eq("organization_id",t.id).eq("is_active",!0).order("display_order",{ascending:!0});if(k)throw k;const C=await Promise.all((_||[]).map(async E=>{if(E.funded_by_organization_ids&&E.funded_by_organization_ids.length>0){const{data:A,error:M}=await $.from("organizations").select("id, name, image_url, type").in("id",E.funded_by_organization_ids);M||(E.funded_by_organizations=A||[])}else E.funded_by_organizations=[];return E}));i(C)}catch(_){console.error("Error fetching programs:",_),h("Failed to load programs")}finally{c(!1)}},j=_=>{switch(_){case"Active":return"bg-emerald-500";case"Planned":return"bg-sky-500";case"Completed":return"bg-slate-500";case"Paused":return"bg-orange-500";default:return"bg-emerald-500"}},w=_=>{p(_),b(!0)};return o?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-3 text-slate-500",children:"Loading programs..."})]}):d?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Our Programs"}),n.jsxs("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:["Discover the impactful programs and initiatives that drive ",t==null?void 0:t.name,"'s mission forward"]}),v&&r&&n.jsx("div",{className:"mt-8",children:n.jsxs("button",{className:"inline-flex items-center gap-3 px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-lg hover:shadow-xl",children:[n.jsx(Gi,{className:"w-5 h-5"}),"Manage Programs"]})})]}),a.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(_=>n.jsx("div",{onClick:()=>w(_),className:"group relative overflow-hidden transition-all duration-300 hover:scale-[1.02] cursor-pointer",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl border border-white/20 overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-300 relative",children:[n.jsxs("div",{className:"p-6 relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${j(_.status)} shadow-lg`}),n.jsxs("span",{className:"text-sm font-medium text-slate-600 capitalize",children:[_.status||"active"," program"]})]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4 leading-tight group-hover:text-slate-800 transition-colors",children:_.name}),n.jsx("p",{className:"text-slate-600 text-sm mb-6 line-clamp-3 leading-relaxed",children:_.description}),_.funded_by_organizations&&_.funded_by_organizations.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ut,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Funded By"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.funded_by_organizations.slice(0,3).map(k=>n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg",children:[k.image_url?n.jsx("img",{src:k.image_url,alt:k.name,className:"w-4 h-4 rounded-full object-cover"}):n.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-300 flex items-center justify-center",children:n.jsx(Ut,{className:"w-2 h-2 text-slate-600"})}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate max-w-20",children:k.name})]},k.id)),_.funded_by_organizations.length>3&&n.jsx("div",{className:"px-2 py-1 bg-slate-100 border border-slate-200 rounded-lg",children:n.jsxs("span",{className:"text-xs text-slate-600",children:["+",_.funded_by_organizations.length-3," more"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[_.target_population&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50/50 to-indigo-50/30 rounded-2xl p-4 border border-purple-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-xl flex items-center justify-center",children:n.jsx(qe,{className:"w-4 h-4 text-purple-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wider mb-1",children:"Target Population"}),n.jsx("p",{className:"text-sm text-purple-800 font-medium line-clamp-1",children:_.target_population})]})]})}),_.location&&n.jsx("div",{className:"bg-gradient-to-br from-blue-50/50 to-cyan-50/30 rounded-2xl p-4 border border-blue-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-xl flex items-center justify-center",children:n.jsx(Lt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wider mb-1",children:"Location"}),n.jsx("p",{className:"text-sm text-blue-800 font-medium line-clamp-1",children:_.location})]})]})}),(_.start_date||_.end_date)&&n.jsx("div",{className:"bg-gradient-to-br from-emerald-50/50 to-teal-50/30 rounded-2xl p-4 border border-emerald-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(bs,{className:"w-4 h-4 text-emerald-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wider mb-1",children:"Duration"}),n.jsxs("p",{className:"text-sm text-emerald-800 font-medium",children:[_.start_date&&new Date(_.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_.start_date&&_.end_date&&" — ",_.end_date&&new Date(_.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})}),_.impact_metrics&&n.jsx("div",{className:"bg-gradient-to-br from-amber-50/50 to-orange-50/30 rounded-2xl p-4 border border-amber-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(_s,{className:"w-4 h-4 text-amber-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wider mb-1",children:"Impact Metrics"}),n.jsx("p",{className:"text-sm text-amber-800 font-medium line-clamp-2",children:_.impact_metrics})]})]})})]})]}),n.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300",children:n.jsx("div",{className:"p-2 bg-white/90 backdrop-blur-sm shadow-lg border border-white/40 rounded-xl",children:n.jsx(pn,{className:"w-4 h-4 text-slate-600"})})})]})},_.id))}):n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(ep,{className:"w-10 h-10 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Programs Yet"}),n.jsxs("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:[t==null?void 0:t.name," hasn't added any programs yet. Check back soon to see their impactful initiatives."]}),v&&r&&n.jsxs("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 font-medium text-lg shadow-xl",children:[n.jsx($s,{className:"w-5 h-5 inline mr-2"}),"Add Your First Program"]})]}),g&&m&&n.jsx(TR,{program:m,isOpen:g,onClose:()=>{b(!1),p(null)},canEdit:!1})]})},soe=({selectedOrganizations:t=[],onOrganizationsChange:e,placeholder:s="Search for funding organizations...",maxSelections:r=5})=>{const[a,i]=y.useState(""),[o,c]=y.useState([]),[d,h]=y.useState(!1),[m,p]=y.useState(!1),g=y.useRef(null),b=y.useRef(null);y.useEffect(()=>{const _=setTimeout(()=>{a.trim()&&a.length>=2?v(a):(c([]),p(!1))},300);return()=>clearTimeout(_)},[a]),y.useEffect(()=>{const _=k=>{b.current&&!b.current.contains(k.target)&&p(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const v=async _=>{try{h(!0);const{data:k,error:C}=await $.from("organizations").select("id, name, type, tagline, image_url").or(`name.ilike.%${_}%,tagline.ilike.%${_}%`).limit(10).order("name");if(C)throw C;const E=t.map(M=>M.id),A=(k||[]).filter(M=>!E.includes(M.id));c(A),p(A.length>0)}catch(k){console.error("Error searching organizations:",k),c([]),p(!1)}finally{h(!1)}},N=_=>{if(t.length>=r)return;const k=[...t,_];e(k),i(""),p(!1),c([])},j=_=>{const k=t.filter(C=>C.id!==_);e(k)},w=()=>{o.length>0&&p(!0)};return n.jsxs("div",{className:"space-y-3",children:[t.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(_=>n.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[_.image_url&&n.jsx("img",{src:_.image_url,alt:_.name,className:"w-5 h-5 rounded-full object-cover"}),n.jsx("span",{className:"font-medium text-blue-900",children:_.name}),n.jsx("button",{onClick:()=>j(_.id),className:"text-blue-600 hover:text-blue-800 transition-colors",type:"button",children:n.jsx(Ke,{className:"w-4 h-4"})})]},_.id))}),n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),n.jsx("input",{ref:g,type:"text",value:a,onChange:_=>i(_.target.value),onFocus:w,className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:t.length>=r?`Maximum ${r} organizations selected`:s,disabled:t.length>=r}),d&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),m&&o.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:o.map(_=>n.jsxs("button",{onClick:()=>N(_),className:"w-full px-4 py-3 text-left hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 flex items-center gap-3",type:"button",children:[_.image_url?n.jsx("img",{src:_.image_url,alt:_.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center flex-shrink-0",children:n.jsx(Ut,{className:"w-4 h-4 text-slate-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900 truncate",children:_.name}),_.tagline&&n.jsx("p",{className:"text-sm text-slate-600 truncate",children:_.tagline}),n.jsx("p",{className:"text-xs text-slate-500 capitalize",children:_.type})]})]},_.id))}),m&&o.length===0&&a.length>=2&&!d&&n.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-4 text-center text-slate-500",children:['No organizations found for "',a,'"']})]}),t.length<r&&n.jsxs("p",{className:"text-xs text-slate-500",children:["Search and select up to ",r," funding organizations.",t.length>0&&` ${r-t.length} remaining.`]})]})},noe=({organization:t,session:e,userMembership:s,isEditMode:r=!1})=>{const[a,i]=y.useState([]),[o,c]=y.useState(!0),[d,h]=y.useState(null),[m,p]=y.useState(!1),[g,b]=y.useState(null),[v,N]=y.useState(null),[j,w]=y.useState(!1),[_,k]=y.useState(null),[C,E]=y.useState(!1),[A,M]=y.useState({name:"",description:"",target_population:"",location:"",goals:"",impact_metrics:"",start_date:"",end_date:"",status:"Active",external_url:"",funded_by_organizations:[]}),R=s&&["super_admin","admin"].includes(s.role);y.useEffect(()=>{t!=null&&t.id&&D()},[t==null?void 0:t.id]);const D=async()=>{try{c(!0);const{data:H,error:Y}=await $.from("organization_programs").select("*").eq("organization_id",t.id).order("display_order",{ascending:!0});if(Y)throw Y;const U=await Promise.all((H||[]).map(async K=>{if(K.funded_by_organization_ids&&K.funded_by_organization_ids.length>0){const{data:J,error:W}=await $.from("organizations").select("id, name, image_url, type").in("id",K.funded_by_organization_ids);W||(K.funded_by_organizations=J||[])}else K.funded_by_organizations=[];return K}));i(U)}catch(H){console.error("Error fetching programs:",H),h("Failed to load programs")}finally{c(!1)}},L=H=>{switch(H){case"Active":return"bg-emerald-500";case"Planned":return"bg-sky-500";case"Completed":return"bg-slate-500";case"Paused":return"bg-orange-500";default:return"bg-emerald-500"}},B=()=>{M({name:"",description:"",target_population:"",location:"",goals:"",impact_metrics:"",start_date:"",end_date:"",status:"Active",external_url:"",funded_by_organizations:[]}),b(null)},O=()=>{B(),p(!0)},P=()=>{M({name:"Youth Leadership Development Program",description:"A comprehensive 12-month leadership program designed to empower young adults with the skills and confidence needed to become effective community leaders.",target_population:"Ages 16-24, high school graduates and college students",location:"San Francisco Bay Area",goals:"Develop leadership skills, foster civic engagement, create mentorship opportunities, and build a network of young leaders committed to positive social change.",impact_metrics:"Trained 150+ youth leaders, 85% secured leadership roles within 6 months, 40+ community projects initiated, 95% participant satisfaction rate.",start_date:"2024-01-15",end_date:"2024-12-15",status:"Active",external_url:"https://example.org/youth-leadership",funded_by_organizations:[]})},z=async()=>{if(!A.name.trim()){alert("Program name is required");return}w(!0);try{const H={...A,organization_id:t.id,start_date:A.start_date||null,end_date:A.end_date||null,target_population:A.target_population||null,location:A.location||null,goals:A.goals||null,impact_metrics:A.impact_metrics||null,external_url:A.external_url||null,status:A.status.toLowerCase(),funded_by_organization_ids:A.funded_by_organizations.map(U=>U.id),display_order:g?g.display_order:a.length+1,is_active:!0};delete H.funded_by_organizations;let Y;if(g?Y=await $.from("organization_programs").update(H).eq("id",g.id).select():Y=await $.from("organization_programs").insert([H]).select(),Y.error)throw Y.error;await D(),p(!1),B()}catch(H){console.error("Error saving program:",H),alert(`Failed to save program: ${H.message}`)}finally{w(!1)}},q=async H=>{if(!H){console.error("No program ID provided for deletion");return}w(!0);try{const{error:Y}=await $.from("organization_programs").delete().eq("id",H);if(Y)throw Y;await D(),N(null)}catch(Y){console.error("Error deleting program:",Y),alert(`Failed to delete program: ${Y.message}`)}finally{w(!1)}},I=async()=>{if(g!=null&&g.id&&confirm(`Are you sure you want to delete "${g.name}"? This action cannot be undone.`)){w(!0);try{const{error:H}=await $.from("organization_programs").delete().eq("id",g.id);if(H)throw H;await D(),p(!1),B()}catch(H){console.error("Error deleting program:",H),alert(`Failed to delete program: ${H.message}`)}finally{w(!1)}}},V=H=>{k(H),E(!0)};return o?n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-3 text-slate-500",children:"Loading programs..."})]}):d?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"text-red-600 mb-4",children:d}),n.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Programs"}),n.jsx("p",{className:"text-slate-600 mt-1",children:"Manage your organization's programs and initiatives"})]}),R&&n.jsxs("button",{onClick:O,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:[n.jsx($s,{className:"w-5 h-5"}),"Add Program"]})]}),a.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(H=>n.jsx("div",{className:"group relative overflow-hidden transition-all duration-300 hover:scale-[1.02]",children:v===H.id?n.jsx("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl border border-red-200/50 overflow-hidden shadow-lg",children:n.jsxs("div",{className:"relative p-6 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-red-100 to-orange-100 rounded-full blur-3xl opacity-30 -translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-gradient-to-br from-pink-100 to-red-100 rounded-full blur-2xl opacity-25 translate-x-4 translate-y-4"})]}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-red-100 to-red-200 rounded-2xl flex items-center justify-center",children:n.jsx(tn,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delete Program"}),n.jsxs("p",{className:"text-slate-600 text-sm",children:["Delete ",n.jsxs("span",{className:"font-medium text-slate-800",children:['"',H.name,'"']}),"?"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>N(null),className:"flex-1 px-4 py-2.5 text-slate-700 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl hover:bg-white hover:border-slate-300 transition-all duration-200 font-medium",children:"Cancel"}),n.jsx("button",{onClick:()=>q(H.id),disabled:j,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 disabled:opacity-50 flex items-center justify-center gap-2 font-medium shadow-lg",children:j?n.jsx(Ab,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(tn,{className:"w-4 h-4"}),"Delete"]})})]})]})]})}):n.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl border border-white/20 overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-300 relative",children:[n.jsxs("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 flex gap-2 z-20",children:[n.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),b(H),M({name:H.name||"",description:H.description||"",target_population:H.target_population||"",location:H.location||"",goals:H.goals||"",impact_metrics:H.impact_metrics||"",start_date:H.start_date||"",end_date:H.end_date||"",status:H.status||"Active",external_url:H.external_url||"",funded_by_organizations:H.funded_by_organizations||[]}),p(!0)},className:"p-2.5 bg-white/90 backdrop-blur-sm shadow-lg border border-white/40 rounded-xl hover:bg-white hover:scale-105 transition-all duration-200",title:"Edit Program",children:n.jsx(Gi,{className:"w-4 h-4 text-slate-600"})}),n.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),N(H.id)},className:"p-2.5 bg-white/90 backdrop-blur-sm shadow-lg border border-red-200/50 rounded-xl hover:bg-red-50 hover:scale-105 transition-all duration-200",title:"Delete Program",children:n.jsx(tn,{className:"w-4 h-4 text-red-500"})})]}),n.jsxs("div",{onClick:()=>V(H),className:"p-6 cursor-pointer relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${L(H.status)} shadow-lg`}),n.jsxs("span",{className:"text-sm font-medium text-slate-600 capitalize",children:[H.status||"active"," program"]})]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4 leading-tight group-hover:text-slate-800 transition-colors",children:H.name}),n.jsx("p",{className:"text-slate-600 text-sm mb-6 line-clamp-3 leading-relaxed",children:H.description}),H.funded_by_organizations&&H.funded_by_organizations.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ut,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Funded By"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[H.funded_by_organizations.slice(0,3).map(Y=>n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg",children:[Y.image_url?n.jsx("img",{src:Y.image_url,alt:Y.name,className:"w-4 h-4 rounded-full object-cover"}):n.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-300 flex items-center justify-center",children:n.jsx(Ut,{className:"w-2 h-2 text-slate-600"})}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate max-w-20",children:Y.name})]},Y.id)),H.funded_by_organizations.length>3&&n.jsx("div",{className:"px-2 py-1 bg-slate-100 border border-slate-200 rounded-lg",children:n.jsxs("span",{className:"text-xs text-slate-600",children:["+",H.funded_by_organizations.length-3," more"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[H.target_population&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50/50 to-indigo-50/30 rounded-2xl p-4 border border-purple-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-xl flex items-center justify-center",children:n.jsx(qe,{className:"w-4 h-4 text-purple-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-purple-700 uppercase tracking-wider mb-1",children:"Target Population"}),n.jsx("p",{className:"text-sm text-purple-800 font-medium line-clamp-1",children:H.target_population})]})]})}),H.location&&n.jsx("div",{className:"bg-gradient-to-br from-blue-50/50 to-cyan-50/30 rounded-2xl p-4 border border-blue-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-xl flex items-center justify-center",children:n.jsx(Lt,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wider mb-1",children:"Location"}),n.jsx("p",{className:"text-sm text-blue-800 font-medium line-clamp-1",children:H.location})]})]})}),(H.start_date||H.end_date)&&n.jsx("div",{className:"bg-gradient-to-br from-emerald-50/50 to-teal-50/30 rounded-2xl p-4 border border-emerald-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(bs,{className:"w-4 h-4 text-emerald-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-emerald-700 uppercase tracking-wider mb-1",children:"Duration"}),n.jsxs("p",{className:"text-sm text-emerald-800 font-medium",children:[H.start_date&&new Date(H.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),H.start_date&&H.end_date&&" — ",H.end_date&&new Date(H.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})}),H.impact_metrics&&n.jsx("div",{className:"bg-gradient-to-br from-amber-50/50 to-orange-50/30 rounded-2xl p-4 border border-amber-100/50 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(_s,{className:"w-4 h-4 text-amber-600"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wider mb-1",children:"Impact Metrics"}),n.jsx("p",{className:"text-sm text-amber-800 font-medium line-clamp-2",children:H.impact_metrics})]})]})})]})]})]})},H.id))}):n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(_s,{className:"w-10 h-10 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Programs Yet"}),n.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Get started by adding your first program to showcase your organization's impactful initiatives."}),R&&n.jsxs("button",{onClick:O,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 font-medium text-lg shadow-xl",children:[n.jsx($s,{className:"w-5 h-5 inline mr-2"}),"Add Your First Program"]})]}),m&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-blue-200/40 to-indigo-200/40 rounded-full blur-3xl -translate-x-16 -translate-y-16"}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gradient-to-br from-purple-200/30 to-pink-200/30 rounded-full blur-2xl translate-x-8 -translate-y-8"}),n.jsx("div",{className:"absolute bottom-0 left-1/3 w-56 h-56 bg-gradient-to-br from-indigo-200/25 to-cyan-200/25 rounded-full blur-3xl -translate-y-12"})]}),n.jsx("div",{className:"relative z-10 p-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:g?"Edit Program":"Add New Program"}),n.jsx("p",{className:"text-slate-600 mt-1",children:g?"Update program details":"Create a new program for your organization"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[!g&&n.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-xl hover:from-purple-600 hover:to-blue-700 transition-all duration-200 shadow-lg hover:scale-105 font-medium",children:[n.jsx(Nh,{className:"w-4 h-4"}),"Autofill Sample"]}),n.jsx("button",{onClick:()=>p(!1),className:"p-2.5 bg-white/80 backdrop-blur-sm border border-white/30 rounded-xl hover:bg-white/90 transition-all duration-200 shadow-lg text-slate-700",children:n.jsx(Ke,{className:"w-5 h-5"})})]})]})})]}),n.jsx("div",{className:"p-8 overflow-y-auto max-h-[60vh]",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Program Name *"}),n.jsx("input",{type:"text",value:A.name,onChange:H=>M({...A,name:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter program name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Description"}),n.jsx("textarea",{value:A.description,onChange:H=>M({...A,description:H.target.value}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"Describe what this program does and its purpose"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Funded By"}),n.jsx(soe,{selectedOrganizations:A.funded_by_organizations,onOrganizationsChange:H=>M({...A,funded_by_organizations:H}),placeholder:"Search for funding organizations...",maxSelections:5})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Target Population"}),n.jsx("input",{type:"text",value:A.target_population,onChange:H=>M({...A,target_population:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Who does this program serve?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Location"}),n.jsx("input",{type:"text",value:A.location,onChange:H=>M({...A,location:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Where is this program located?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Start Date"}),n.jsx("input",{type:"date",value:A.start_date,onChange:H=>M({...A,start_date:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"End Date"}),n.jsx("input",{type:"date",value:A.end_date,onChange:H=>M({...A,end_date:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Status"}),n.jsxs("select",{value:A.status,onChange:H=>M({...A,status:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Paused",children:"Paused"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"External URL"}),n.jsx("input",{type:"url",value:A.external_url,onChange:H=>M({...A,external_url:H.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"https://example.org/program"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Goals & Objectives"}),n.jsx("textarea",{value:A.goals,onChange:H=>M({...A,goals:H.target.value}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"What are the main goals and objectives of this program?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Impact Metrics"}),n.jsx("textarea",{value:A.impact_metrics,onChange:H=>M({...A,impact_metrics:H.target.value}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"What measurable impact has this program achieved?"})]})]})}),n.jsx("div",{className:"p-8 border-t border-slate-200/50 bg-slate-50/30 backdrop-blur-sm",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{children:g&&n.jsx("button",{onClick:I,disabled:j,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg",children:j?n.jsx(Ab,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(tn,{className:"w-4 h-4"}),"Delete Program"]})})}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>p(!1),disabled:j,className:"px-6 py-3 text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all duration-200 font-medium disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:z,disabled:j||!A.name.trim(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 flex items-center gap-2 font-medium shadow-lg",children:j?n.jsx(Ab,{className:"w-4 h-4 animate-spin"}):n.jsx(n.Fragment,{children:g?"Update Program":"Create Program"})})]})]})})]})}),C&&_&&n.jsx(TR,{program:_,isOpen:C,onClose:()=>{E(!1),k(null)},canEdit:R,onEdit:H=>{b(H),M({name:H.name||"",description:H.description||"",target_population:H.target_population||"",location:H.location||"",goals:H.goals||"",impact_metrics:H.impact_metrics||"",start_date:H.start_date||"",end_date:H.end_date||"",status:H.status||"Active",external_url:H.external_url||"",funded_by_organizations:H.funded_by_organizations||[]}),p(!0)}})]})},roe=(t,e)=>{const[s,r]=y.useState(!1),[a,i]=y.useState(0),[o,c]=y.useState(!1),[d,h]=y.useState(0),[m,p]=y.useState(!0);return y.useEffect(()=>{if(!t)return;(async()=>{try{const{count:N,error:j}=await $.from("organization_follows").select("*",{count:"exact",head:!0}).eq("organization_id",t);j?console.warn("Error fetching follower count:",j):i(N||0);const{count:w,error:_}=await $.from("organization_bookmarks").select("*",{count:"exact",head:!0}).eq("organization_id",t);if(_?console.warn("Error fetching bookmark count:",_):h(w||0),e){const[k,C]=await Promise.all([$.from("organization_follows").select("id").eq("organization_id",t).eq("user_id",e).maybeSingle(),$.from("organization_bookmarks").select("id").eq("organization_id",t).eq("user_id",e).maybeSingle()]);k.error&&k.error.code!=="PGRST116"?console.warn("Error checking follow status:",k.error):r(!!k.data),C.error&&C.error.code!=="PGRST116"?console.warn("Error checking bookmark status:",C.error):c(!!C.data)}}catch(N){console.error("Error loading social data:",N)}finally{p(!1)}})()},[t,e]),{isFollowing:s,followersCount:a,isBookmarked:o,bookmarksCount:d,loading:m,toggleFollow:async()=>{if(!e||!t){console.warn("Cannot toggle follow: missing user ID or organization ID");return}try{if(s){const{error:v}=await $.from("organization_follows").delete().eq("organization_id",t).eq("user_id",e);v?console.error("Error unfollowing:",v):(r(!1),i(N=>Math.max(0,N-1)))}else{const{error:v}=await $.from("organization_follows").insert({organization_id:t,user_id:e});v?console.error("Error following:",v):(r(!0),i(N=>N+1))}}catch(v){console.error("Error toggling follow:",v)}},toggleBookmark:async()=>{if(!e||!t){console.warn("Cannot toggle bookmark: missing user ID or organization ID");return}try{if(o){const{error:v}=await $.from("organization_bookmarks").delete().eq("organization_id",t).eq("user_id",e);v?console.error("Error removing bookmark:",v):(c(!1),h(N=>Math.max(0,N-1)))}else{const{error:v}=await $.from("organization_bookmarks").insert({organization_id:t,user_id:e});v?console.error("Error adding bookmark:",v):(c(!0),h(N=>N+1))}}catch(v){console.error("Error toggling bookmark:",v)}}}},D4={foundation:{headerStyle:"foundation",showNorthStar:!0,showPrograms:!0,showPhotos:!0,primaryGradient:"from-purple-500 to-indigo-600"},nonprofit:{headerStyle:"nonprofit",showNorthStar:!0,showPrograms:!0,showPhotos:!0,primaryGradient:"from-green-500 to-emerald-600"},default:{headerStyle:"default",showNorthStar:!0,showPrograms:!0,showPhotos:!0,primaryGradient:"from-slate-500 to-slate-600"}},P4=({contentType:t,organizationType:e})=>n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🚧"}),n.jsx("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:"Coming Soon"}),n.jsxs("p",{className:"text-slate-600",children:[t," content for ",e," organizations is being built."]})]}),aoe=()=>{var K,J;const{slug:t}=Gc();bt();const[e]=r3(),s=e.get("edit")==="true",[r,a]=y.useState(null),[i,o]=y.useState(!0),[c,d]=y.useState(null),[h,m]=y.useState(null),[p,g]=y.useState(null),[b,v]=y.useState("home"),[N,j]=y.useState([]),[w,_]=y.useState([]),[k,C]=y.useState(null),[E,A]=y.useState([]),[M,R]=y.useState(!1),[D,L]=y.useState(!1),B=D4[r==null?void 0:r.type]||D4.default,O=W=>{a(ee=>({...ee,...W}))};y.useEffect(()=>{(async()=>{const{data:{session:ne}}=await $.auth.getSession();if(m(ne),ne!=null&&ne.user){const{data:X}=await $.from("profiles").select("*").eq("id",ne.user.id).single();g(X)}})();const{data:{subscription:ee}}=$.auth.onAuthStateChange((ne,X)=>{m(X),g(X!=null&&X.user?p:null)});return()=>ee.unsubscribe()},[]),y.useEffect(()=>{(async()=>{if(t){o(!0),d(null);try{const{data:ee,error:ne}=await $.from("organizations").select("*").eq("slug",t).single();if(ne)throw ne;const{data:X}=await $.from("organization_categories").select("categories(name)").eq("organization_id",ee.id),Q=(X==null?void 0:X.map(de=>{var ve;return(ve=de.categories)==null?void 0:ve.name}).filter(Boolean))||[];a({...ee,focusAreas:Q})}catch{d("Could not load organization profile.")}finally{o(!1)}}})()},[t]),y.useEffect(()=>{if(!(r!=null&&r.id))return;const W=async()=>{var X;if(!((X=h==null?void 0:h.user)!=null&&X.id))return;const{data:ne}=await $.from("organization_memberships").select("*").eq("profile_id",h.user.id).eq("organization_id",r.id).maybeSingle();C(ne)},ee=async()=>{const{data:ne}=await $.from("organization_photos").select("*").eq("organization_id",r.id).order("display_order",{ascending:!0});A(ne||[]);const{data:X}=await $.from("organization_memberships").select("*, profiles(*)").eq("organization_id",r.id).eq("is_public",!0);_(X||[]);const{count:Q}=await $.from("grants").select("*",{count:"exact",head:!0}).eq("organization_id",r.id);R(Q>0);const{count:de}=await $.from("organization_programs").select("*",{count:"exact",head:!0}).eq("organization_id",r.id).eq("is_active",!0);L(de>0)};W(),ee()},[r==null?void 0:r.id,(K=h==null?void 0:h.user)==null?void 0:K.id]);const{isFollowing:P,followersCount:z,isBookmarked:q,bookmarksCount:I,toggleFollow:V,toggleBookmark:H}=roe(r==null?void 0:r.id,(J=h==null?void 0:h.user)==null?void 0:J.id),Y=()=>{const W=[{id:"home",label:"Home",icon:"Globe"}];return B.showNorthStar&&W.push({id:"northstar",label:"North Star",icon:"Target"}),B.showPrograms&&W.push({id:"programs",label:"Programs",icon:"ClipboardList"}),B.showPhotos&&W.push({id:"photos",label:"Photos",icon:"Camera"}),W.push({id:"team",label:"Team",icon:"Users"}),M&&W.push({id:"grants",label:"Grants",icon:"DollarSign"}),W},U=()=>{const W={organization:r,organizationPosts:N,teamMembers:w,session:h,userMembership:k,photos:E,onUpdate:O,activeTab:b,setActiveTab:v,currentUserProfile:p};switch(b){case"home":return s?n.jsx(Yie,{...W}):n.jsx($ie,{...W});case"team":return n.jsx(Uie,{...W});case"northstar":return n.jsx(Qie,{...W,isEditMode:s});case"programs":return s?n.jsx(noe,{...W}):n.jsx(toe,{...W,isEditMode:s});case"photos":return s?n.jsx(Kie,{...W}):n.jsx(Zie,{...W});case"grants":return M?n.jsx(eoe,{...W}):n.jsx(P4,{contentType:"Grants"});default:return n.jsx(P4,{contentType:b})}};return i?n.jsx(ev,{children:n.jsxs("div",{className:"flex items-center justify-center py-20",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-3 text-slate-500",children:"Loading organization..."})]})}):c||!r?n.jsx(ev,{children:n.jsx("div",{className:"text-center py-20",children:n.jsx("p",{className:"text-red-600",children:c||"Organization not found."})})}):n.jsxs(ev,{bgColor:"bg-slate-50",children:[s?n.jsx(zie,{organization:r,isFollowing:P,followersCount:z,isBookmarked:q,bookmarksCount:I,onFollow:V,onBookmark:H,config:B,activeTab:b,setActiveTab:v,tabs:Y(),userMembership:k,session:h,onUpdate:O}):n.jsx(Lie,{organization:r,isFollowing:P,followersCount:z,isBookmarked:q,bookmarksCount:I,onFollow:V,onBookmark:H,config:B,activeTab:b,setActiveTab:v,tabs:Y(),userMembership:k,session:h,showBanner:!0}),n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"min-h-screen py-8",children:U()})})})]})};function z4({formData:t,updateFormData:e}){const[s,r]=y.useState(""),[a,i]=y.useState(!1),[o,c]=y.useState(!1),d=j=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j),h=y.useCallback(j=>{e("fullName",j.target.value)},[e]),m=y.useCallback(j=>{const w=j.target.value;e("email",w),w&&!d(w)?r("Please enter a valid email address"):r("")},[e]),p=y.useCallback(j=>{e("password",j.target.value)},[e]),g=async j=>{const w=j.target.files[0];if(w){if(w.size>2*1024*1024){alert("File size must be less than 2MB");return}if(!w.type.startsWith("image/")){alert("Please select an image file");return}c(!0);try{e("avatar",w);const _=new FileReader;_.onload=k=>{e("avatarPreview",k.target.result)},_.readAsDataURL(w)}catch(_){console.error("Error processing file:",_),alert("Error processing file. Please try again.")}finally{c(!1)}}},b=()=>{e("avatar",null),e("avatarPreview",null);const j=document.querySelector('input[type="file"]');j&&(j.value="")},v=()=>{i(!a)},N=()=>t.avatarPreview?n.jsx("img",{src:t.avatarPreview,alt:"Avatar Preview",className:"w-full h-full rounded-full object-cover"}):t.avatar&&typeof t.avatar=="string"?n.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):n.jsx(w0,{className:"w-6 h-6 text-slate-400"});return n.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Tell us about you ✨"}),n.jsx("p",{className:"text-slate-600",children:"Let's get you set up to make an impact"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full name *"}),n.jsx("input",{type:"text",required:!0,value:t.fullName||"",onChange:h,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Your full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email address *"}),n.jsx("input",{type:"email",required:!0,value:t.email||"",onChange:m,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-blue-500 transition-colors ${s?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`,placeholder:"you@example.com"}),s&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:s})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",required:!0,value:t.password||"",onChange:p,className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Create a strong password",minLength:"6"}),n.jsx("button",{type:"button",onClick:v,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:a?n.jsx(Yu,{className:"w-5 h-5"}):n.jsx(pn,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum 6 characters"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Profile photo (optional)"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center border-2 border-dashed border-slate-300 relative overflow-hidden",children:[t.avatar||t.avatarPreview?n.jsxs(n.Fragment,{children:[N(),n.jsx("button",{onClick:b,disabled:o,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors disabled:opacity-50",type:"button",children:n.jsx(Ke,{className:"w-3 h-3"})})]}):N(),o&&n.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:g,disabled:o,className:`block w-full text-sm text-slate-600
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-medium
                  file:bg-blue-50 file:text-blue-700
                  hover:file:bg-blue-100
                  disabled:opacity-50
                  cursor-pointer file:cursor-pointer`}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["PNG, JPG up to 2MB",o&&" • Uploading..."]})]})]})]})]})]})}function MR({formData:t,updateFormData:e}){const[s,r]=y.useState(""),[a,i]=y.useState([]),[o,c]=y.useState([]),[d,h]=y.useState(!0),m=y.useCallback(async()=>{h(!0);try{const{data:j,error:w}=await $.from("organizations").select("id, name, tagline, description, location, type, image_url").order("name");if(w)throw w;i(j||[]),c(j||[])}catch(j){console.error("Error fetching organizations:",j),i([]),c([])}finally{h(!1)}},[]);y.useEffect(()=>{m()},[m]),y.useEffect(()=>{if(!s.trim()){c(a);return}const j=a.filter(w=>w.name.toLowerCase().includes(s.toLowerCase())||w.description&&w.description.toLowerCase().includes(s.toLowerCase())||w.tagline&&w.tagline.toLowerCase().includes(s.toLowerCase()));c(j)},[s,a]);const p=j=>{e("organizationChoice","join"),e("selectedOrgData",j),e("organizationType",j.type)},g=()=>{e("organizationChoice","create"),e("selectedOrgData",null)},b=()=>{e("organizationChoice","community"),e("organizationType","community-member"),e("selectedOrgData",null)},v=j=>({nonprofit:"Nonprofit",government:"Government",foundation:"Foundation","for-profit":"For-Profit",education:"Education",healthcare:"Healthcare",religious:"Religious",international:"International"})[j]||j,N=j=>({nonprofit:"🏛️",government:"🏛️",foundation:"💰","for-profit":"🏢",education:"🎓",healthcare:"🏥",religious:"⛪",international:"🌍"})[j]||"🏢";return n.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:["Welcome",t.fullName?`, ${t.fullName.split(" ")[0]}`:"","! 🎉"]}),n.jsx("p",{className:"text-slate-600",children:"Let's find your crew and get you connected"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search for your organization...",value:s,onChange:j=>r(j.target.value),className:"w-full pl-12 pr-4 py-4 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg"})]}),n.jsx("p",{className:"text-sm text-slate-500 mt-2 text-center",children:`Try searching for "Red Cross", "Stanford University", or your organization's name`})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[n.jsxs("button",{onClick:g,className:`p-6 border-2 rounded-xl text-left transition-all hover:shadow-lg group ${t.organizationChoice==="create"?"border-green-500 bg-green-50 shadow-md":"border-slate-200 hover:border-green-300 bg-white"}`,children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4 group-hover:bg-green-200 transition-colors",children:n.jsx($s,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create New"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Organization"})]})]}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"Set up a new organization profile and invite your team to join the platform"})]}),n.jsxs("button",{onClick:b,className:`p-6 border-2 rounded-xl text-left transition-all hover:shadow-lg group ${t.organizationChoice==="community"?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 hover:border-blue-300 bg-white"}`,children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4 group-hover:bg-blue-200 transition-colors",children:n.jsx(An,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Join Solo"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Community Member"})]})]}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"Join as an individual advocate, volunteer, or independent professional. You can always join or create an organization later."})]})]}),t.organizationChoice==="create"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-blue-600 text-sm",children:"ℹ️"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Ready to create your organization"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"We'll help you set up your organization profile in the next step. By creating an organization profile, you confirm that you have the proper authority to represent this organization on the platform."})]})]})}),!d&&s&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Search Results (",o.length,")"]}),o.length>0?n.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:o.map(j=>{var w,_;return n.jsx("button",{onClick:()=>p(j),className:`w-full p-4 border rounded-lg text-left transition-all hover:shadow-md ${((w=t.selectedOrgData)==null?void 0:w.id)===j.id?"border-blue-500 bg-blue-50 shadow-md":"border-slate-200 hover:border-slate-300 bg-white"}`,children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-100 flex items-center justify-center flex-shrink-0",children:j.image_url?n.jsx("img",{src:j.image_url,alt:j.name,className:"w-full h-full rounded-lg object-cover"}):n.jsx("span",{className:"text-xl",children:N(j.type)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:j.name}),j.tagline&&n.jsx("div",{className:"text-sm text-slate-600 mb-2",children:j.tagline}),j.description&&n.jsx("div",{className:"text-sm text-slate-600 mb-2 line-clamp-2",children:j.description.length>120?`${j.description.substring(0,120)}...`:j.description}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-xs px-2 py-1 bg-slate-100 text-slate-700 rounded-full font-medium",children:v(j.type)}),j.location&&n.jsxs("span",{className:"text-xs text-slate-500",children:["📍 ",j.location]})]})]}),((_=t.selectedOrgData)==null?void 0:_.id)===j.id&&n.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})})]})},j.id)})}):n.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx(Ut,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-700 mb-2",children:"No organizations found"}),n.jsxs("p",{className:"text-slate-500 mb-4",children:[`Couldn't find "`,s,'" in our directory']}),n.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[n.jsx($s,{className:"w-4 h-4 mr-2"}),'Create "',s,'"']})]})]}),!d&&!s&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Popular Organizations"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.slice(0,6).map(j=>{var w;return n.jsx("button",{onClick:()=>p(j),className:`p-3 border rounded-lg text-left transition-all hover:shadow-sm ${((w=t.selectedOrgData)==null?void 0:w.id)===j.id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 flex items-center justify-center flex-shrink-0",children:j.image_url?n.jsx("img",{src:j.image_url,alt:j.name,className:"w-full h-full rounded object-cover"}):n.jsx("span",{className:"text-sm",children:N(j.type)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-slate-900 text-sm truncate",children:j.name}),n.jsxs("div",{className:"text-xs text-slate-500",children:[v(j.type),j.location&&` • ${j.location}`]})]})]})},j.id)})})]}),t.selectedOrgData&&n.jsx("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 text-xs",children:"✓"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-green-800",children:["Ready to join ",t.selectedOrgData.name]}),n.jsx("p",{className:"text-xs text-green-600",children:"You'll be connected with this organization after account creation"})]})]})}),t.organizationChoice&&t.organizationChoice!=="join"&&n.jsx("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-xs",children:"✓"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:t.organizationChoice==="create"?"Ready to create your organization":"Joining as a community member"}),n.jsx("p",{className:"text-xs text-blue-600",children:t.organizationChoice==="create"?"We'll help you set up your organization profile in the next step":"You'll have access to all community features and discussions"})]})]})})]})}const oc=[{id:"nonprofit",name:"Nonprofit",description:"Tax-exempt organizations serving public good",icon:Nt,color:"bg-rose-50 border-rose-200 text-rose-700",examples:"501(c)(3) organizations, charities, NGOs",detailedDescription:"Nonprofits work to address social causes and serve the public interest. They are exempt from federal income tax and include charities, foundations, advocacy groups, and service organizations."},{id:"foundation",name:"Foundation",description:"Philanthropic grant-making organizations",icon:Xt,color:"bg-purple-50 border-purple-200 text-purple-700",examples:"Family foundations, community foundations, corporate foundations",detailedDescription:"Foundations provide grants and funding to support nonprofits, research, education, and social causes. They manage endowments and distribute funds strategically."},{id:"government",name:"Government",description:"Public sector agencies and departments",icon:Ut,color:"bg-blue-50 border-blue-200 text-blue-700",examples:"Federal agencies, state departments, city offices",detailedDescription:"Government agencies at federal, state, and local levels that serve the public through policy, services, and administration."},{id:"education",name:"Education",description:"Educational institutions and schools",icon:Uw,color:"bg-indigo-50 border-indigo-200 text-indigo-700",examples:"Universities, K-12 schools, research institutions",detailedDescription:"Educational institutions including universities, colleges, K-12 schools, research institutes, and other learning organizations."},{id:"healthcare",name:"Healthcare",description:"Medical and health organizations",icon:Kw,color:"bg-emerald-50 border-emerald-200 text-emerald-700",examples:"Hospitals, clinics, health centers, medical research",detailedDescription:"Healthcare organizations including hospitals, clinics, medical research institutions, and health service providers."},{id:"for-profit",name:"For-Profit",description:"Companies with social impact missions",icon:Ut,color:"bg-green-50 border-green-200 text-green-700",examples:"B-Corps, social enterprises, startups, CSR programs",detailedDescription:"For-profit companies focused on social impact, including B-Corporations, social enterprises, and businesses with corporate social responsibility programs."},{id:"religious",name:"Religious",description:"Faith-based and religious organizations",icon:Bw,color:"bg-amber-50 border-amber-200 text-amber-700",examples:"Churches, religious nonprofits, interfaith councils",detailedDescription:"Faith-based organizations including churches, religious nonprofits, interfaith councils, and spiritual communities serving their communities."},{id:"international",name:"International",description:"Global and international organizations",icon:Br,color:"bg-cyan-50 border-cyan-200 text-cyan-700",examples:"UN organizations, embassies, international NGOs",detailedDescription:"International organizations including UN agencies, embassies, international NGOs, and global development organizations."}];function OR({formData:t,updateFormData:e}){var r,a,i;const s=o=>{e("organizationType",o)};return t.organizationChoice!=="create"?null:n.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"What type of organization are you creating? 🏢"}),n.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto",children:"Choose the category that best describes your organization. This helps us customize your experience and connect you with relevant opportunities."})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:oc.slice(0,6).map(o=>{const c=o.icon,d=t.organizationType===o.id;return n.jsxs("button",{onClick:()=>s(o.id),className:`p-8 rounded-xl border-2 transition-all text-left relative hover:shadow-lg group min-h-[200px] ${d?`${o.color} border-opacity-100 shadow-lg scale-105`:"bg-white border-slate-200 hover:border-slate-300 hover:scale-102"}`,children:[n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(c,{className:`w-8 h-8 flex-shrink-0 ${d?"":"text-slate-600 group-hover:text-slate-700"}`}),n.jsx("h3",{className:"font-bold text-xl",children:o.name})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm opacity-85 mb-4 leading-relaxed",children:o.description}),n.jsxs("p",{className:"text-xs opacity-75 leading-relaxed",children:[n.jsx("strong",{children:"Examples:"})," ",o.examples]})]})]}),d&&n.jsx(Ks,{className:"w-7 h-7 text-green-600 absolute top-6 right-6"})]},o.id)})}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl",children:oc.slice(6).map(o=>{const c=o.icon,d=t.organizationType===o.id;return n.jsxs("button",{onClick:()=>s(o.id),className:`p-8 rounded-xl border-2 transition-all text-left relative hover:shadow-lg group min-h-[200px] ${d?`${o.color} border-opacity-100 shadow-lg scale-105`:"bg-white border-slate-200 hover:border-slate-300 hover:scale-102"}`,children:[n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(c,{className:`w-8 h-8 flex-shrink-0 ${d?"":"text-slate-600 group-hover:text-slate-700"}`}),n.jsx("h3",{className:"font-bold text-xl",children:o.name})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm opacity-85 mb-4 leading-relaxed",children:o.description}),n.jsxs("p",{className:"text-xs opacity-75 leading-relaxed",children:[n.jsx("strong",{children:"Examples:"})," ",o.examples]})]})]}),d&&n.jsx(Ks,{className:"w-7 h-7 text-green-600 absolute top-6 right-6"})]},o.id)})})})]}),t.organizationType&&n.jsx("div",{className:"mt-8 p-6 bg-slate-50 border border-slate-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(()=>{const o=oc.find(d=>d.id===t.organizationType),c=(o==null?void 0:o.icon)||Ut;return n.jsx(c,{className:"w-6 h-6 text-blue-600"})})()}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[(r=oc.find(o=>o.id===t.organizationType))==null?void 0:r.name," Organization"]}),n.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:(a=oc.find(o=>o.id===t.organizationType))==null?void 0:a.detailedDescription})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[n.jsx(Ks,{className:"w-4 h-4 mr-1"}),"Selected"]})})]})}),t.organizationType&&n.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 text-sm",children:"📝"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Next: Organization details"}),n.jsxs("p",{className:"text-xs text-blue-600",children:["We'll help you set up your ",(i=oc.find(o=>o.id===t.organizationType))==null?void 0:i.name.toLowerCase()," profile with the right categories and information."]})]})]})})]})}function RR({formData:t,updateFormData:e}){var Oe,Me,it,ft,Te,ze;const[s,r]=y.useState([]),[a,i]=y.useState(""),[o,c]=y.useState([]),[d,h]=y.useState([]),[m,p]=y.useState(!1),[g,b]=y.useState(""),[v,N]=y.useState(!1),[j,w]=y.useState([]),[_,k]=y.useState([]),[C,E]=y.useState([]),[A,M]=y.useState([]),[R,D]=y.useState(null),[L,B]=y.useState(null),[O,P]=y.useState(""),[z,q]=y.useState(""),[I,V]=y.useState(!1),[H,Y]=y.useState(!1),[U,K]=y.useState([]),[J,W]=y.useState([]);if(t.organizationChoice==="community")return null;const ee=ae=>({"foundation.private.family":"Ford Foundation, Gates Foundation, Hewlett Foundation, Packard Foundation, Walton Family Foundation, Getty Foundation","foundation.private.independent":"Robert Wood Johnson Foundation, MacArthur Foundation, Andrew W. Mellon Foundation, Kresge Foundation, Open Society Foundations, Carnegie Corporation","foundation.community":"Silicon Valley Community Foundation, Marin Community Foundation, New York Community Trust","foundation.corporate":"Walmart Foundation, Google.org, Microsoft Philanthropies, Bank of America Foundation","government.federal":"EPA, Department of Education, USAID, NIH, FEMA","government.federal.agency":"Federal agencies and departments, USAID, Department of Health","government.state":"California Department of Health, State Universities, State Environmental Agencies","government.state.department":"State government departments, State health agencies, DMV","government.city":"City Council, School Districts, Municipal Departments","government.city.department":"Municipal departments and services, Public works, Parks and recreation","education.university.research":"Stanford University, UC Berkeley, MIT, Caltech","education.university.teaching":"Cal State Universities, Teaching-focused colleges, Liberal arts colleges","education.university.department":"Engineering departments, Business schools, Medical schools","education.university.medical":"UCSF School of Medicine, Stanford Medical School, Harvard Medical School","education.k12.district.public":"San Francisco Unified, Oakland Unified, Palo Alto Unified","education.k12.school.charter":"KIPP Schools, Success Academy, Green Dot Public Schools","healthcare.hospital.public":"UCSF Medical Center, SF General Hospital, County hospitals","healthcare.clinic.fqhc":"Community Health Centers, Federally Qualified Health Centers, Rural clinics","healthcare.mental_health.center":"Mental health clinics, Counseling centers, Therapy organizations","religious.church.denomination":"Catholic Charities, Lutheran Services, Methodist churches","religious.interfaith.council":"Interfaith Council, United Religions Initiative, Multi-faith organizations","forprofit.startup":"Tech startups, Early-stage companies, Venture-backed startups","forprofit.startup.social":"Social impact startups, Mission-driven startups, B2B social platforms","forprofit.socialenterprise":"TOMS Shoes, Grameen Bank, Social ventures","forprofit.socialenterprise.bcorp":"Patagonia, Ben & Jerry's, Warby Parker, Allbirds","forprofit.corporation.csr":"Microsoft CSR, Google sustainability, Corporate foundations","forprofit.corporation":"Apple, Google, Microsoft, Meta","forprofit.smallbusiness":"Local businesses, Family businesses, Small enterprises","nonprofit.501c3":"Red Cross, Habitat for Humanity, United Way, Salvation Army","nonprofit.501c4":"ACLU, NAACP, Sierra Club, League of Women Voters","nonprofit.501c5":"AFL-CIO, Teamsters Union, Farm Bureau, Labor unions","nonprofit.501c6":"Chamber of Commerce, Trade associations, Business leagues","nonprofit.501c7":"Country clubs, Hobby clubs, Social clubs, Recreation clubs","nonprofit.501c8":"Knights of Columbus, Masonic lodges, Fraternal orders","nonprofit.501c10":"Fraternal societies (no insurance), Domestic fraternal societies","nonprofit.501c19":"American Legion, VFW, Veterans organizations, War veterans groups","education.university":"Stanford University, UC Berkeley, Santa Clara University","education.k12":"San Francisco Unified School District, Charter Schools","education.research":"SRI International, RAND Corporation","education.community-college":"City College of San Francisco, Foothill College","education.vocational":"Trade schools, Coding bootcamps","healthcare.hospital":"UCSF Medical Center, Stanford Health Care","healthcare.clinic":"Community Health Centers, Planned Parenthood","healthcare.research":"National Institutes of Health, Medical Research","healthcare.mental":"Mental health clinics, Therapy centers","healthcare.public":"Public health departments, Health districts","for-profit.startup":"Tech startups, Social ventures","for-profit.bcorp":"Patagonia, Ben & Jerry's, Warby Parker","for-profit.social-enterprise":"TOMS Shoes, Grameen Bank","for-profit.csr":"Corporate social responsibility programs","religious.christian":"Catholic Charities, Salvation Army, World Vision","religious.interfaith":"Interfaith Council, United Religions Initiative","religious.jewish":"Jewish Federation, Jewish Community Centers","religious.islamic":"Islamic Society, Muslim Community Centers","religious.other":"Buddhist temples, Hindu centers, Sikh gurdwaras","international.un":"UNICEF, World Health Organization, UNESCO","international.ngo":"Doctors Without Borders, Oxfam, Save the Children","international.embassy":"Consulates, Diplomatic missions","international.development":"USAID, World Bank projects"})[ae]||"",ne=["Education","Health","Environment","Housing","Arts & Culture","Social Services","Youth Programs","Community Development"],X=["San Francisco County","Alameda County","Santa Clara County","San Mateo County","All Bay Area Counties","California Statewide"],Q=y.useCallback(async()=>{try{const{data:ae,error:_e}=await $.from("categories").select("id, name").order("name");if(_e)throw _e;w(ae||[])}catch(ae){console.error("Error fetching categories:",ae),w([])}},[]),de=y.useCallback(async()=>{try{const{data:ae,error:_e}=await $.from("locations").select("id, name").order("name");if(_e)throw _e;k(ae||[])}catch(ae){console.error("Error fetching locations:",ae),k([])}},[]),ve=y.useCallback(async()=>{try{const{data:ae,error:_e}=await $.from("organizations").select("id, name, tagline, description, location, type, image_url").eq("type",t.organizationType).order("name");if(_e)throw _e;r(ae||[])}catch(ae){console.error("Error fetching organizations:",ae),r([])}},[t.organizationType]),Pe=y.useCallback(async()=>{if(!t.organizationType||t.organizationType==="community-member"){h([]);return}p(!0);try{const{data:ae,error:_e}=await $.from("organization_taxonomies").select("code, name, description, display_name, level, parent_code, sort_order").eq("organization_type",t.organizationType).eq("level",2).not("code","in",'("nonprofit.association","nonprofit.grassroots")').order("sort_order");if(_e)throw _e;const $e=(ae||[]).filter(Ce=>{const me=Ce.code.toLowerCase();return!me.includes("association")&&!me.includes("grassroots")}).filter((Ce,me,Re)=>me===Re.findIndex(Be=>Be.display_name===Ce.display_name));h($e)}catch(ae){console.error("Error fetching taxonomy options:",ae),h([])}finally{p(!1)}},[t.organizationType]);y.useEffect(()=>{Q(),de(),t.organizationChoice==="join"?ve():t.organizationChoice==="create"&&Pe()},[t.organizationChoice,ve,Pe,Q,de]),y.useEffect(()=>{const ae=s.filter(_e=>_e.name.toLowerCase().includes(a.toLowerCase())||_e.description&&_e.description.toLowerCase().includes(a.toLowerCase()));c(ae)},[a,s]),y.useEffect(()=>{if(O.trim()){const ae=j.filter($e=>$e.name.toLowerCase().includes(O.toLowerCase())),_e=j.filter($e=>ne.includes($e.name)&&$e.name.toLowerCase().includes(O.toLowerCase())),Fe=ae.filter($e=>!ne.includes($e.name));K([..._e,...Fe])}else{const ae=j.filter(Fe=>ne.includes(Fe.name)),_e=j.filter(Fe=>!ne.includes(Fe.name));K([...ae,..._e])}},[O,j]),y.useEffect(()=>{if(z.trim()){const ae=_.filter($e=>$e.name.toLowerCase().includes(z.toLowerCase())),_e=_.filter($e=>X.includes($e.name)&&$e.name.toLowerCase().includes(z.toLowerCase())),Fe=ae.filter($e=>!X.includes($e.name));W([..._e,...Fe])}else{const ae=_.filter(Fe=>X.includes(Fe.name)),_e=_.filter(Fe=>!X.includes(Fe.name));W([...ae,..._e])}},[z,_]);const He=y.useCallback(ae=>{e("selectedOrgData",ae)},[e]),Qe=y.useCallback(ae=>{b(ae),e("taxonomyCode",ae),N(!0)},[e]),be=y.useCallback((ae,_e)=>{e(`newOrganization.${ae}`,_e)},[e]),se=ae=>{const _e=ae.target.files[0];if(_e){if(_e.size>2*1024*1024){alert("File size must be less than 2MB");return}if(!_e.type.startsWith("image/")){alert("Please select an image file");return}D(_e);const Fe=new FileReader;Fe.onload=$e=>B($e.target.result),Fe.readAsDataURL(_e),be("logoFile",_e)}},le=()=>{D(null),B(null),be("logoFile",null)},ge=ae=>{const _e=C.includes(ae.id)?C.filter(Fe=>Fe!==ae.id):[...C,ae.id];E(_e),be("focusAreas",_e),P(""),V(!1)},te=ae=>{const _e=A.includes(ae.id)?A.filter(Fe=>Fe!==ae.id):[...A,ae.id];M(_e),be("serviceAreas",_e),q(""),Y(!1)},xe=async ae=>{try{const{data:_e,error:Fe}=await $.from("categories").insert({name:ae.trim()}).select().single();if(Fe)throw Fe;w($e=>[...$e,_e]),E($e=>[...$e,_e.id]),be("focusAreas",[...C,_e.id]),P(""),V(!1)}catch(_e){console.error("Error adding custom category:",_e),alert("Error adding custom category. Please try again.")}},De=async ae=>{try{const{data:_e,error:Fe}=await $.from("locations").insert({name:ae.trim()}).select().single();if(Fe)throw Fe;k($e=>[...$e,_e]),M($e=>[...$e,_e.id]),be("serviceAreas",[...A,_e.id]),q(""),Y(!1)}catch(_e){console.error("Error adding custom location:",_e),alert("Error adding custom location. Please try again.")}},Ee=(ae,_e="category")=>{const Ce=_e==="category"?["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-yellow-100 text-yellow-800","bg-indigo-100 text-indigo-800"]:["bg-emerald-100 text-emerald-800","bg-cyan-100 text-cyan-800","bg-lime-100 text-lime-800","bg-rose-100 text-rose-800","bg-violet-100 text-violet-800","bg-amber-100 text-amber-800"];return Ce[ae%Ce.length]},ce=ae=>({nonprofit:"Nonprofit",government:"Government",foundation:"Foundation","for-profit":"For-Profit",education:"Educational Institution",healthcare:"Healthcare Organization",religious:"Religious Organization",international:"International Organization"})[ae]||ae,ye=ae=>({nonprofit:"🏛️",government:"🏛️",foundation:"💰","for-profit":"🏢",education:"🎓",healthcare:"🏥",religious:"⛪",international:"🌍"})[ae]||"🏢";return t.organizationChoice==="join"?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Join Your Organization"}),n.jsxs("p",{className:"text-gray-600",children:["Connect with your ",ce(t.organizationType).toLowerCase()," organization"]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:`Search for ${ce(t.organizationType).toLowerCase()} organizations...`,value:a,onChange:ae=>i(ae.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map(ae=>{var _e;return n.jsx("button",{type:"button",onClick:()=>He(ae),className:`w-full p-4 border rounded-lg text-left transition-all ${((_e=t.selectedOrgData)==null?void 0:_e.id)===ae.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:n.jsx("div",{className:"flex items-start space-x-3",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-gray-900",children:ae.name}),ae.tagline&&n.jsx("div",{className:"text-sm text-gray-600 mt-1",children:ae.tagline})]})})},ae.id)})})]})]}):t.organizationChoice==="create"?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Set up your ",ce(t.organizationType).toLowerCase()]}),n.jsx("p",{className:"text-gray-600",children:"Let's get your organization profile ready for the platform"})]}),!v&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["What type of ",ce(t.organizationType).toLowerCase()," are you?"]})}),m?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-gray-500 mt-2",children:"Loading options..."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(ae=>n.jsx("button",{onClick:()=>Qe(ae.code),className:"p-6 border-2 border-gray-200 rounded-lg text-left hover:border-blue-300 hover:shadow-md transition-all group",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-200 transition-colors",children:n.jsx("span",{className:"text-lg",children:ye(t.organizationType)})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ae.display_name}),ae.description&&n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-2",children:ae.description}),ee(ae.code)&&n.jsxs("p",{className:"text-xs text-blue-600 leading-relaxed",children:[n.jsx("strong",{children:"Examples:"})," ",ee(ae.code)]})]})]})},ae.code))})]}),v&&n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Ks,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-green-900",children:(Oe=d.find(ae=>ae.code===g))==null?void 0:Oe.display_name}),n.jsx("p",{className:"text-sm text-green-700",children:"Organization type selected"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:g,onChange:ae=>Qe(ae.target.value),className:"appearance-none bg-white border border-green-300 rounded-lg px-4 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:d.map(ae=>n.jsx("option",{value:ae.code,children:ae.display_name},ae.code))}),n.jsx(Ss,{className:"absolute right-2 top-2 h-4 w-4 text-green-600 pointer-events-none"})]})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Organization Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"orgName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name *"}),n.jsx("input",{type:"text",id:"orgName",placeholder:"Enter your organization name",value:((Me=t.newOrganization)==null?void 0:Me.name)||"",onChange:ae=>be("name",ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"orgDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),n.jsx("textarea",{id:"orgDescription",rows:4,placeholder:"Describe your organization's mission and activities",value:((it=t.newOrganization)==null?void 0:it.description)||"",onChange:ae=>be("description",ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Logo"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300 relative overflow-hidden",children:L?n.jsxs(n.Fragment,{children:[n.jsx("img",{src:L,alt:"Logo preview",className:"w-full h-full object-cover rounded-lg"}),n.jsx("button",{onClick:le,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",type:"button",children:n.jsx(Ke,{className:"w-3 h-3"})})]}):n.jsx(w0,{className:"w-6 h-6 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:se,className:"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer file:cursor-pointer"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 2MB"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"orgWebsite",className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),n.jsx("input",{type:"url",id:"orgWebsite",placeholder:"https://yourorganization.org",value:((ft=t.newOrganization)==null?void 0:ft.website)||"",onChange:ae=>be("website",ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"orgLocation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",id:"orgLocation",placeholder:"San Francisco, CA",value:((Te=t.newOrganization)==null?void 0:Te.location)||"",onChange:ae=>be("location",ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"orgEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),n.jsx("input",{type:"email",id:"orgEmail",placeholder:"info@yourorganization.org",value:((ze=t.newOrganization)==null?void 0:ze.contactEmail)||"",onChange:ae=>be("contactEmail",ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Focus Areas (You can select more than one)"}),n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose the areas your organization focuses on or supports"}),C.length>0&&n.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:C.map((ae,_e)=>{const Fe=j.find($e=>$e.id===ae);return Fe?n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Ee(_e,"category")}`,children:[Fe.name,n.jsx("button",{type:"button",onClick:()=>ge(Fe),className:"ml-2 hover:text-gray-500",children:n.jsx(Ke,{className:"w-3 h-3"})})]},ae):null})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search or add focus areas...",value:O,onChange:ae=>P(ae.target.value),onFocus:()=>V(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx(ot,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"}),I&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[O.trim()&&!U.some(ae=>ae.name.toLowerCase()===O.toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>xe(O),className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-blue-600 border-b border-gray-100",children:['+ Add "',O,'"']}),U.slice(0,10).map(ae=>n.jsxs("button",{type:"button",onClick:()=>ge(ae),className:`w-full px-4 py-2 text-left hover:bg-gray-50 ${C.includes(ae.id)?"bg-blue-50 text-blue-700":""}`,children:[ae.name,ne.includes(ae.name)&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"• Popular"})]},ae.id)),U.length===0&&O.trim()&&n.jsxs("div",{className:"px-4 py-2 text-gray-500 text-sm",children:['No matching categories found. You can add "',O,'" above.']})]})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Communities Served (You can select more than one)"}),n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Choose the geographic areas your organization serves"}),A.length>0&&n.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:A.map((ae,_e)=>{const Fe=_.find($e=>$e.id===ae);return Fe?n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Ee(_e,"location")}`,children:[Fe.name,n.jsx("button",{type:"button",onClick:()=>te(Fe),className:"ml-2 hover:text-gray-500",children:n.jsx(Ke,{className:"w-3 h-3"})})]},ae):null})}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search or add service areas...",value:z,onChange:ae=>q(ae.target.value),onFocus:()=>Y(!0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),n.jsx(ot,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"}),H&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[z.trim()&&!J.some(ae=>ae.name.toLowerCase()===z.toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>De(z),className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-green-600 border-b border-gray-100",children:['+ Add "',z,'"']}),J.slice(0,10).map(ae=>n.jsxs("button",{type:"button",onClick:()=>te(ae),className:`w-full px-4 py-2 text-left hover:bg-gray-50 ${A.includes(ae.id)?"bg-green-50 text-green-700":""}`,children:[ae.name,X.includes(ae.name)&&n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"• Popular"})]},ae.id)),J.length===0&&z.trim()&&n.jsxs("div",{className:"px-4 py-2 text-gray-500 text-sm",children:['No matching locations found. You can add "',z,'" above.']})]})]})]})]})]})]}),(I||H)&&n.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>{V(!1),Y(!1)}})]}):null}const ioe=["Alameda County","Contra Costa County","Marin County","Napa County","San Francisco County","San Mateo County","Santa Clara County","Solano County","Sonoma County"];function DR({formData:t,updateFormData:e}){var r,a;const s=i=>{e("location",[i])};return n.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Which community are you part of? 🏡"}),n.jsx("p",{className:"text-slate-600",children:"Select your Bay Area community"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:ioe.map(i=>{var c;const o=(c=t.location)==null?void 0:c.includes(i);return n.jsx("button",{onClick:()=>s(i),className:`p-3 rounded-lg border text-sm font-medium transition-all hover:shadow-md ${o?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-700 border-slate-300 hover:border-slate-400"}`,children:i},i)})}),n.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:[n.jsx("strong",{children:"Selected:"})," ",((r=t.location)==null?void 0:r.length)>0?t.location[0]:"None"]}),((a=t.location)==null?void 0:a.length)>0&&n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"You can always update this later in your profile settings"})]})]})}const L4=[{id:"housing",name:"Housing",emoji:"🏠",color:"bg-blue-300",hoverColor:"hover:bg-blue-400"},{id:"education",name:"Education",emoji:"📚",color:"bg-green-300",hoverColor:"hover:bg-green-400"},{id:"health",name:"Health",emoji:"🏥",color:"bg-red-300",hoverColor:"hover:bg-red-400"},{id:"environment",name:"Environment",emoji:"🌱",color:"bg-emerald-300",hoverColor:"hover:bg-emerald-400"},{id:"arts",name:"Arts & Culture",emoji:"🎨",color:"bg-purple-300",hoverColor:"hover:bg-purple-400"},{id:"technology",name:"Technology",emoji:"💻",color:"bg-indigo-300",hoverColor:"hover:bg-indigo-400"},{id:"social-services",name:"Social Services",emoji:"🤝",color:"bg-orange-300",hoverColor:"hover:bg-orange-400"},{id:"youth",name:"Youth Programs",emoji:"👶",color:"bg-pink-300",hoverColor:"hover:bg-pink-400"},{id:"seniors",name:"Senior Services",emoji:"👴",color:"bg-teal-300",hoverColor:"hover:bg-teal-400"},{id:"community",name:"Community Development",emoji:"🏘️",color:"bg-amber-300",hoverColor:"hover:bg-amber-400"},{id:"research",name:"Research & Science",emoji:"🔬",color:"bg-cyan-300",hoverColor:"hover:bg-cyan-400"},{id:"advocacy",name:"Advocacy",emoji:"📢",color:"bg-rose-300",hoverColor:"hover:bg-rose-400"}];function ooe({formData:t,updateFormData:e}){var r,a,i;const s=o=>{const c=t.interests||[],d=c.includes(o);let h;d?h=c.filter(m=>m!==o):h=[...c,o],e("interests",h)};return n.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"What interests you? 💡"}),n.jsx("p",{className:"text-slate-600",children:"Choose areas you're passionate about"}),t.organizationChoice==="create"&&n.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-blue-700",children:"This is a brief setup form. You can add more detailed information after joining the platform."})})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:L4.map(o=>{var d;const c=(d=t.interests)==null?void 0:d.includes(o.id);return n.jsx("button",{onClick:()=>s(o.id),className:`p-4 rounded-lg border text-left transition-all transform hover:scale-105 ${c?`${o.color} text-slate-800 border-transparent shadow-lg`:`bg-white text-slate-700 border-slate-300 hover:border-slate-400 hover:shadow-md ${o.hoverColor.replace("bg-","hover:bg-").replace("-400","-50")}`}`,children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xl",children:o.emoji}),n.jsx("span",{className:"font-medium text-sm",children:o.name})]})},o.id)})}),n.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:[n.jsx("strong",{children:"Selected:"})," ",((r=t.interests)==null?void 0:r.length)||0," interest",((a=t.interests)==null?void 0:a.length)!==1?"s":""]}),((i=t.interests)==null?void 0:i.length)>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.interests.map(o=>{const c=L4.find(d=>d.id===o);return n.jsxs("span",{className:"inline-flex items-center space-x-1 text-xs bg-white px-2 py-1 rounded-full border border-slate-200",children:[n.jsx("span",{children:c==null?void 0:c.emoji}),n.jsx("span",{children:c==null?void 0:c.name})]},o)})})]})]})}function PR({formData:t,updateFormData:e}){var g;const[s,r]=y.useState(""),[a,i]=y.useState([]),[o,c]=y.useState(!0),d=async()=>{c(!0);try{let b=$.from("profiles").select("id, full_name, role, title, organization_name, avatar_url, location").not("full_name","is",null).limit(20);if(s.trim()){const w=`%${s}%`;b=b.or(`full_name.ilike.${w},role.ilike.${w},title.ilike.${w},organization_name.ilike.${w}`)}const{data:v,error:N}=await b;if(N){console.error("Supabase error:",N),i([]);return}if(!v||v.length===0){i([]);return}const j=await Promise.all(v.map(async w=>{let _=0;try{const{count:k,error:C}=await $.from("followers").select("*",{count:"exact",head:!0}).eq("following_id",w.id);C||(_=k||0)}catch{}return{id:w.id,full_name:w.full_name,role:w.role,title:w.title,organization_name:w.organization_name,avatar_url:w.avatar_url,location:w.location,followers:_,interests:[]}}));j.sort((w,_)=>_.followers-w.followers),i(j)}catch(b){console.error("Unexpected error:",b),i([])}finally{c(!1)}};y.useEffect(()=>{const b=setTimeout(()=>{d()},300);return()=>clearTimeout(b)},[s]);const h=b=>{const v=t.followUsers||[],N=v.includes(b);let j;N?j=v.filter(w=>w!==b):j=[...v,b],e("followUsers",j)},m=b=>b.title&&b.organization_name?`${b.title} at ${b.organization_name}`:b.title?b.title:b.organization_name?b.organization_name:b.role||"Community Member",p=b=>{var N;if(b.avatar_url)return n.jsx("img",{src:b.avatar_url,alt:b.full_name,className:"w-full h-full object-cover rounded-full"});const v=((N=b.full_name)==null?void 0:N.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2))||"??";return n.jsx("div",{className:"w-full h-full rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-medium",children:v})};return n.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Find people to follow 👥"}),n.jsx("p",{className:"text-slate-600",children:"Connect with your people in your circle"})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search by name, role, or organization...",value:s,onChange:b=>r(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),o&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-slate-500 mt-2",children:"Finding amazing people..."})]}),!o&&a.length>0&&n.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(b=>{var N;const v=(N=t.followUsers)==null?void 0:N.includes(b.id);return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-slate-200 rounded-lg hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:p(b)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900",children:b.full_name}),n.jsx("p",{className:"text-sm text-slate-600",children:m(b)}),b.location&&n.jsx("p",{className:"text-xs text-slate-500",children:b.location}),n.jsx("div",{className:"flex items-center space-x-2 mt-1",children:n.jsxs("span",{className:"text-xs text-slate-500",children:[b.followers.toLocaleString()," follower",b.followers!==1?"s":""]})})]})]}),n.jsx("button",{onClick:()=>h(b.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${v?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:v?"Following":"Follow"})]},b.id)})}),!o&&a.length===0&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-slate-500",children:s.trim()?`No users found matching "${s}". Try a different search term!`:"No users found. You can discover people to follow after creating your account!"})}),n.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:[n.jsx("strong",{children:"Following:"})," ",((g=t.followUsers)==null?void 0:g.length)||0," people"]}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This step is optional. You can discover and follow more people after joining!"})]})]})}function zR({currentStep:t,totalSteps:e,onPrev:s,onNext:r,isValid:a,loading:i,prevLabel:o="Back",nextLabel:c="Next"}){return n.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-slate-200",children:[n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 text-slate-600 hover:text-slate-900 transition-colors",children:[n.jsx(Zn,{className:"w-4 h-4"}),n.jsx("span",{children:o})]}),n.jsxs("button",{onClick:r,disabled:!a||i,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors font-medium",children:[n.jsx("span",{children:i?"Processing...":c}),n.jsx(Nr,{className:"w-4 h-4"})]})]})}function loe({onSwitchToLogin:t}){bt();const[e,s]=y.useState(1),[r,a]=y.useState(!1),[i,o]=y.useState(""),[c,d]=y.useState(""),[h,m]=y.useState({fullName:"",email:"",password:"",avatar:null,avatarPreview:null,organizationChoice:"",selectedOrgData:null,organizationType:"",newOrganization:{name:"",description:"",tagline:"",website:"",location:"",contactEmail:"",budget:"",staffCount:"",yearFounded:"",capabilities:[],logo:null,logoPreview:null},taxonomyCode:"",capabilities:[],focusAreas:[],serviceAreas:[],location:[],interests:[],followUsers:[]});y.useEffect(()=>{const O=sessionStorage.getItem("signupFormData"),P=sessionStorage.getItem("signupCurrentStep");if(O)try{const z=JSON.parse(O);m(q=>({...q,...z,avatar:null,newOrganization:{...q.newOrganization,...z.newOrganization,logo:null}}))}catch(z){console.warn("Failed to parse saved form data:",z)}if(P){const z=parseInt(P,10);z>=1&&z<=7&&s(z)}},[]),y.useEffect(()=>{sessionStorage.setItem("signupFormData",JSON.stringify(h)),sessionStorage.setItem("signupCurrentStep",e.toString())},[h,e]);const p=y.useCallback((O,P)=>{console.log("SignUpWizard updateFormData called:",O,P),m(z=>{if(O.includes(".")){const[q,I]=O.split("."),V={...z,[q]:{...z[q],[I]:P}};return console.log("SignUpWizard state updated (nested):",V),V}else{const q={...z,[O]:P};return console.log("SignUpWizard state updated:",q),q}})},[]),g=O=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O||""),b=async O=>{var P;try{console.log("🔍 Avatar upload input:",{fileType:typeof O,isFile:O instanceof File,fileName:O instanceof File?O.name:"N/A",fileSize:O instanceof File?O.size:"N/A"});let z=O;if(typeof O=="string"&&O.startsWith("data:")){console.log("🔄 Converting data URL to file...");const W=await(await fetch(O)).blob();z=new File([W],"avatar.jpg",{type:"image/jpeg"}),console.log("✅ Converted to file:",{size:z.size,type:z.type})}if(!(z instanceof File))throw new Error("Invalid file type: must be File object or data URL string");const q=((P=z.name)==null?void 0:P.split(".").pop())||"jpg",I=`avatar-${Date.now()}-${Math.random().toString(36).substring(2)}.${q}`;console.log("📤 Uploading avatar file to avatars bucket:",{fileName:I,fileSize:z.size,fileType:z.type});const{data:V,error:H}=await $.storage.from("avatars").upload(I,z,{cacheControl:"3600",upsert:!1});if(H)throw console.error("❌ Avatar upload error:",H),new Error(`Upload failed: ${H.message}`);console.log("✅ Upload data:",V);const{data:Y}=$.storage.from("avatars").getPublicUrl(I);if(!(Y!=null&&Y.publicUrl))throw new Error("Failed to get public URL for uploaded image");const U=Y.publicUrl;console.log("🔗 Avatar upload successful. Public URL:",U);const K=`${U}?v=${Date.now()}`;return console.log("🔄 Cache-busted URL:",K),K}catch(z){return console.error("❌ Error uploading avatar:",z),null}},v=async O=>{var P;try{let z=O;if(typeof O=="string"&&O.startsWith("data:")){const J=await(await fetch(O)).blob();z=new File([J],"logo.jpg",{type:"image/jpeg"})}if(!(z instanceof File))throw new Error("Invalid file type for logo: must be File object or data URL string");const q=((P=z.name)==null?void 0:P.split(".").pop())||"jpg",I=`logo-${Date.now()}-${Math.random().toString(36).substring(2)}.${q}`,V=I;console.log("Uploading logo file:",{fileName:I,fileSize:z.size,fileType:z.type});const{data:H,error:Y}=await $.storage.from("avatars").upload(V,z,{cacheControl:"3600",upsert:!1});if(Y)throw console.error("Logo upload error:",Y),Y;const{data:U}=$.storage.from("avatars").getPublicUrl(V);return console.log("Logo upload successful:",U.publicUrl),U.publicUrl}catch(z){throw console.error("Error uploading logo:",z),z}},N=(O,P)=>{const z={};switch(O){case"nonprofit":P.ein&&(z.ein=P.ein),P.programs&&(z.programs=P.programs);break;case"foundation":P.endowmentSize&&(z.endowment_size=P.endowmentSize),P.payoutRate&&(z.payout_rate=P.payoutRate);break}return z},j=async(O,P,z)=>{try{if(Array.isArray(P)&&P.length>0){const q=P.map(V=>({organization_id:O,category_id:V})),{error:I}=await $.from("organization_categories").insert(q);I?console.error("Error creating organization categories:",I):console.log("✅ Organization categories created")}if(Array.isArray(z)&&z.length>0){const q=z.map(V=>({organization_id:O,location_id:V})),{error:I}=await $.from("organization_funding_locations").insert(q);I?console.error("Error creating organization locations:",I):console.log("✅ Organization funding locations created")}}catch(q){console.error("Error creating organization categories/locations:",q)}},w=async(O,P)=>{console.log("Creating organization with data:",O);try{let z=null;const q=O.logo instanceof File?O.logo:O.logoPreview;if(q){console.log("📸 Uploading organization logo...");try{z=await v(q),console.log("✅ Logo uploaded:",z)}catch(K){console.warn("Logo upload failed, continuing without logo:",K)}}const I={name:O.name,type:h.organizationType,taxonomy_code:O.taxonomyCode||h.taxonomyCode,tagline:O.tagline,description:O.description||"",website:O.website,location:O.location,contact_email:O.contactEmail,annual_budget:O.budget,staff_count:O.staffCount?parseInt(O.staffCount.split("-")[0]):null,year_founded:O.yearFounded?parseInt(O.yearFounded):null,admin_profile_id:P,capabilities:O.capabilities||h.capabilities||[],extended_data:N(h.organizationType,O),image_url:z},{data:V,error:H}=await $.from("organizations").insert(I).select().single();if(H)throw H;const Y={profile_id:P,organization_id:V.id,organization_type:V.type,role:"super_admin"},{error:U}=await $.from("organization_memberships").insert(Y);if(U)throw U;return await j(V.id,h.focusAreas,h.serviceAreas),console.log("✅ Organization created successfully:",V),V}catch(z){throw console.error("❌ Error creating organization:",z),z}},_=async(O,P)=>{console.log("Creating organization membership:",{userId:O,selectedOrgData:P});try{const{data:z,error:q}=await $.from("organization_memberships").select("id").eq("organization_id",P.id).eq("role","super_admin");if(q)throw console.error("Error checking existing super admins:",q),q;const I=!z||z.length===0?"super_admin":"member",V={profile_id:O,organization_id:P.id,organization_type:P.type,role:I},{error:H}=await $.from("organization_memberships").insert(V);if(H)throw H;return console.log(`✅ Organization membership created successfully with role: ${I}`),{success:!0,role:I}}catch(z){throw console.error("❌ Error creating organization membership:",z),z}},k=async(O,P)=>{if(!(!P||!Array.isArray(P)||P.length===0)){console.log("Creating follow relationships:",{userId:O,followUsers:P});try{const z=P.map(I=>({follower_id:O,following_id:I})),{error:q}=await $.from("followers").insert(z);if(q)throw q;console.log("✅ Follow relationships created successfully")}catch(z){throw console.error("❌ Error creating follow relationships:",z),z}}},C=y.useCallback(()=>{e===2?h.organizationChoice==="community"||h.organizationChoice==="join"?s(5):h.organizationChoice==="create"&&s(3):e===3?s(4):e===5&&(h.organizationChoice==="community"||h.organizationChoice==="join")?s(6):e===6&&(h.organizationChoice==="community"||h.organizationChoice==="join")?s(7):s(O=>O+1),window.scrollTo({top:0,behavior:"smooth"})},[h.organizationChoice,e]),E=y.useCallback(()=>{e===5&&(h.organizationChoice==="community"||h.organizationChoice==="join")?s(2):e===6&&(h.organizationChoice==="community"||h.organizationChoice==="join")?s(5):e===7&&(h.organizationChoice==="community"||h.organizationChoice==="join")?s(6):e===4&&h.organizationChoice==="create"?s(3):e===3&&h.organizationChoice==="create"?s(2):s(O=>O-1),window.scrollTo({top:0,behavior:"smooth"})},[h.organizationChoice,e]),A=async()=>{var O,P,z;a(!0),o(""),d("");try{console.log("🚀 Starting signup process with data:",h);const{data:q,error:I}=await $.auth.signUp({email:h.email,password:h.password,options:{data:{full_name:h.fullName}}});if(I)throw new Error(`Account creation failed: ${I.message}`);if(!q.user)throw new Error("No user data returned from signup");const V=q.user.id;console.log("✅ User account created:",V);let H=null;const Y=h.avatar instanceof File?h.avatar:h.avatarPreview;if(Y){console.log("📸 Uploading avatar...");try{H=await b(Y),H?console.log("✅ Avatar uploaded successfully:",H):console.warn("⚠️ Avatar upload returned null, continuing without avatar")}catch(ne){console.warn("❌ Avatar upload failed:",ne)}}const U={nonprofit:"Nonprofit",government:"Government",foundation:"Funder","for-profit":"For-profit",education:"Education",healthcare:"Healthcare",religious:"Religious",international:"International","community-member":"Community member"};let K="Community member";h.organizationChoice==="create"&&h.organizationType?K=U[h.organizationType]||"Community member":h.organizationChoice==="join"&&h.selectedOrgData&&(K=U[h.selectedOrgData.type]||"Community member"),console.log("💾 Profile data being built from formData:",{fullName:h.fullName,avatar:h.avatar?"File present":"No avatar",avatarUrl:H,location:h.location,interests:h.interests,organizationType:h.organizationType,organizationChoice:h.organizationChoice}),console.log("👤 Creating profile...");const J={id:V,full_name:h.fullName,avatar_url:H,role:K,location:Array.isArray(h.location)?h.location.join(", "):h.location||"",bio:Array.isArray(h.interests)&&h.interests.length>0?"Interested in: "+h.interests.join(", "):null,interests:Array.isArray(h.interests)&&h.interests.length>0?h.interests:null,organization_type:h.organizationType,organization_choice:h.organizationChoice,selected_organization_id:((O=h.selectedOrgData)==null?void 0:O.id)||null,selected_organization_type:((P=h.selectedOrgData)==null?void 0:P.type)||null,follow_users:Array.isArray(h.followUsers)&&h.followUsers.length>0?h.followUsers:null,onboarding_completed:!0,signup_step_completed:7};console.log("💾 Final profile data to save:",J);const{data:W}=await $.from("profiles").select("id").eq("id",V).single();let ee;if(W){if(console.log("📝 Updating existing profile..."),ee=await $.from("profiles").update(J).eq("id",V).select(),ee.error)throw console.error("❌ Profile update error:",ee.error),new Error(`Profile update failed: ${ee.error.message}`);console.log("✅ Profile updated successfully:",ee.data)}else{if(console.log("📝 Creating new profile..."),ee=await $.from("profiles").insert(J).select(),ee.error)throw console.error("❌ Profile creation error:",ee.error),new Error(`Profile creation failed: ${ee.error.message}`);console.log("✅ Profile created successfully:",ee.data)}if(h.organizationChoice==="create"&&((z=h.newOrganization)!=null&&z.name)?(console.log("🏢 Creating organization..."),await w(h.newOrganization,V)):h.organizationChoice==="join"&&h.selectedOrgData&&(console.log("🤝 Joining organization..."),await _(V,h.selectedOrgData)),Array.isArray(h.followUsers)&&h.followUsers.length>0){console.log("👥 Creating follow relationships...");try{await k(V,h.followUsers)}catch(ne){console.warn("Follow relationships failed, but continuing signup:",ne)}}sessionStorage.removeItem("signupFormData"),sessionStorage.removeItem("signupCurrentStep"),o("🎉 Welcome to Fundspace! Your account has been created successfully. Please check your email to verify your account."),setTimeout(()=>{window.location.href="/profile"},2e3)}catch(q){console.error("Signup error:",q),d(q.message||"An error occurred during signup. Please try again.")}finally{a(!1)}},M=y.useCallback(()=>{var O;switch(e){case 1:return!!(h.fullName&&h.email&&g(h.email)&&h.password&&h.password.length>=6);case 2:return!!h.organizationChoice;case 3:return h.organizationChoice!=="create"||!!h.organizationType;case 4:return h.organizationChoice!=="create"?!0:!!((O=h.newOrganization)!=null&&O.name&&h.taxonomyCode);case 5:return!!(h.location&&Array.isArray(h.location)&&h.location.length>0);case 6:return!0;case 7:return!0;default:return!1}},[h,e]),R=y.useCallback(()=>h.organizationChoice==="community"||h.organizationChoice==="join"?5:7,[h.organizationChoice]),D=y.useCallback(()=>{if(h.organizationChoice==="community"||h.organizationChoice==="join"){if(e===5)return 3;if(e===6)return 4;if(e===7)return 5}return e},[h.organizationChoice,e]),L=y.useCallback(()=>{switch(e){case 1:return n.jsx(z4,{formData:h,updateFormData:p});case 2:return n.jsx(MR,{formData:h,updateFormData:p});case 3:return n.jsx(OR,{formData:h,updateFormData:p});case 4:return n.jsx(RR,{formData:h,updateFormData:p,setFormData:m});case 5:return n.jsx(DR,{formData:h,updateFormData:p});case 6:return n.jsx(ooe,{formData:h,updateFormData:p});case 7:return n.jsx(PR,{formData:h,updateFormData:p});default:return n.jsx(z4,{formData:h,updateFormData:p})}},[e,h,p,m]),B=()=>{switch(e){case 1:return"Account Information";case 2:return"Find Your Organization";case 3:return"Organization Type";case 4:return"Organization Setup";case 5:return"Location";case 6:return"Interests";case 7:return"Follow Users";default:return"Setup"}};return n.jsxs("div",{className:"w-full",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsxs("h2",{className:"text-sm font-medium text-slate-500 tracking-wide uppercase",children:["Step ",D()," of ",R()," • ",B()]})}),n.jsx("div",{className:"mb-10",children:n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${D()/R()*100}%`}})})}),L(),n.jsx(zR,{currentStep:e,totalSteps:R(),onPrev:e===1?t:E,onNext:D()===R()?A:C,isValid:M(),loading:r,prevLabel:e===1?"Back to Sign In":"Back",nextLabel:D()===R()?"🚀 Create Account":"Next"}),n.jsx(ed,{message:i,error:c})]})}function coe(){const t=bt(),{profile:e,refreshProfile:s}=_t(),[r,a]=y.useState(1),[i,o]=y.useState(!1),[c,d]=y.useState(""),[h,m]=y.useState(""),p=async(L,B)=>{console.log("Creating organization membership:",{userId:L,selectedOrgData:B});try{const{data:O,error:P}=await $.from("organization_memberships").select("id").eq("organization_id",B.id).eq("role","super_admin");if(P)throw console.error("Error checking existing super admins:",P),P;const z=!O||O.length===0?"super_admin":"member",q={profile_id:L,organization_id:B.id,organization_type:B.type,role:z},{error:I}=await $.from("organization_memberships").insert(q);if(I)throw I;return console.log(`✅ Organization membership created successfully with role: ${z}`),{success:!0,role:z}}catch(O){throw console.error("❌ Error creating organization membership:",O),O}},g=async(L,B)=>{if(!(!B||!Array.isArray(B)||B.length===0)){console.log("Creating follow relationships:",{userId:L,followUsers:B});try{const O=B.map(z=>({follower_id:L,following_id:z})),{error:P}=await $.from("followers").insert(O);if(P)throw P;console.log("✅ Follow relationships created successfully")}catch(O){throw console.error("❌ Error creating follow relationships:",O),O}}},b=async(L,B)=>{try{console.log("Creating organization with data:",L);const O={name:L.name,type:v.organizationType,taxonomy_code:v.taxonomyCode,tagline:L.tagline||null,description:L.description||null,website:L.website||null,location:L.location||null,contact_email:L.contactEmail||e.email,image_url:null,annual_budget:L.budget||null,staff_count:L.staffCount?parseInt(L.staffCount):null,year_founded:L.yearFounded?parseInt(L.yearFounded):null,admin_profile_id:B,capabilities:L.capabilities||[],extended_data:{focus_areas:L.focusAreas||[],service_areas:L.serviceAreas||[]},is_verified:!1};console.log("Inserting organization with data:",O);const{data:P,error:z}=await $.from("organizations").insert(O).select().single();if(z)throw console.error("Organization insertion error:",z),new Error(`Failed to create organization: ${z.message}`);console.log("✅ Organization created successfully:",P);const q={profile_id:B,organization_id:P.id,organization_type:v.organizationType,role:"super_admin",membership_type:"staff",is_public:!0},{error:I}=await $.from("organization_memberships").insert(q);I?(console.error("Membership creation error:",I),console.warn("Organization created but membership creation failed")):console.log("✅ Organization membership created successfully");const{error:V}=await $.from("profiles").update({organization_choice:"create",organization_type:v.organizationType,selected_organization_id:P.id,selected_organization_type:v.organizationType}).eq("id",B);return V&&console.error("Profile update error:",V),P}catch(O){throw console.error("❌ Error creating organization:",O),O}},[v,N]=y.useState({fullName:(e==null?void 0:e.full_name)||"",email:(e==null?void 0:e.email)||"",password:"",avatar:null,avatarPreview:(e==null?void 0:e.avatar_url)||null,organizationChoice:(e==null?void 0:e.organization_choice)||"",selectedOrgData:null,organizationType:(e==null?void 0:e.organization_type)||"",newOrganization:{name:"",description:"",tagline:"",website:"",location:(e==null?void 0:e.location)||"",contactEmail:(e==null?void 0:e.email)||"",budget:"",staffCount:"",yearFounded:"",capabilities:[],logo:null,logoPreview:null},taxonomyCode:"",capabilities:[],focusAreas:[],serviceAreas:[],location:Array.isArray(e==null?void 0:e.location)?e.location:e!=null&&e.location?[e.location]:[],interests:Array.isArray(e==null?void 0:e.interests)?e.interests:[],followUsers:[]});y.useEffect(()=>{e&&r===1&&(!e.avatar_url&&(!e.interests||e.interests.length===0)||!e.avatar_url||!e.interests||e.interests.length===0?a(1):e.organization_choice?e.organization_choice==="create"&&!e.organization_type?a(3):e.organization_choice==="create"&&!e.organization_id?a(4):!e.location||Array.isArray(e.location)&&e.location.length===0?a(5):a(6):a(2))},[e==null?void 0:e.id]);const j=y.useCallback((L,B)=>{if(typeof L=="string")if(L.includes(".")){const[O,P]=L.split(".");N(z=>({...z,[O]:{...z[O],[P]:B}}))}else N(O=>({...O,[L]:B}));else N(O=>({...O,...L}))},[]),w=y.useCallback(()=>v.organizationChoice==="community"||v.organizationChoice==="join"?4:6,[v.organizationChoice]),_=y.useCallback(()=>{if(v.organizationChoice==="community"||v.organizationChoice==="join"){if(r===2)return 2;if(r===5)return 3;if(r===6)return 4}return r},[v.organizationChoice,r]),k=y.useCallback(()=>{v.organizationChoice==="community"||v.organizationChoice==="join"?a(r===2?5:r===5?6:L=>L+1):a(L=>L+1),window.scrollTo({top:0,behavior:"smooth"})},[v.organizationChoice,r]),C=y.useCallback(()=>{v.organizationChoice==="community"||v.organizationChoice==="join"?a(r===6?5:r===5?2:L=>L-1):a(L=>L-1),window.scrollTo({top:0,behavior:"smooth"})},[v.organizationChoice,r]),E=y.useCallback(()=>{var L;switch(r){case 1:return!0;case 2:return!!v.organizationChoice;case 3:return v.organizationChoice!=="create"||!!v.organizationType;case 4:return v.organizationChoice!=="create"?!0:!!((L=v.newOrganization)!=null&&L.name&&v.taxonomyCode);case 5:return!0;case 6:return!0;default:return!1}},[v,r]),A=async()=>{var L,B,O;o(!0),d(""),m("");try{console.log("🚀 Completing onboarding with data:",v);const P=e.id;let z=e.avatar_url;if(v.avatar instanceof File){console.log("📷 Uploading new avatar...");const V=v.avatar.name.split(".").pop(),H=`${P}-${Date.now()}.${V}`,{data:Y,error:U}=await $.storage.from("avatars").upload(H,v.avatar,{cacheControl:"3600",upsert:!1});if(U)throw console.error("❌ Avatar upload error:",U),new Error(`Avatar upload failed: ${U.message}`);const{data:{publicUrl:K}}=$.storage.from("avatars").getPublicUrl(Y.path);z=K,console.log("✅ Avatar uploaded:",z)}const q={avatar_url:z,bio:v.bio||e.bio,location:Array.isArray(v.location)&&v.location.length>0?v.location:e.location,interests:Array.isArray(v.interests)&&v.interests.length>0?v.interests:e.interests,organization_type:v.organizationType||e.organization_type,organization_choice:v.organizationChoice||e.organization_choice,selected_organization_id:((L=v.selectedOrgData)==null?void 0:L.id)||e.selected_organization_id,selected_organization_type:((B=v.selectedOrgData)==null?void 0:B.type)||e.selected_organization_type,follow_users:Array.isArray(v.followUsers)&&v.followUsers.length>0?v.followUsers:e.follow_users,onboarding_completed:!0,signup_step_completed:7};console.log("💾 Updating profile with:",q);const{error:I}=await $.from("profiles").update(q).eq("id",P);if(I)throw console.error("❌ Profile update error:",I),new Error(`Profile update failed: ${I.message}`);if(console.log("✅ Profile updated successfully"),v.organizationChoice==="create"&&((O=v.newOrganization)!=null&&O.name)?(console.log("🏢 Creating organization..."),await b(v.newOrganization,P)):v.organizationChoice==="join"&&v.selectedOrgData&&(console.log("🤝 Joining organization..."),await p(P,v.selectedOrgData)),Array.isArray(v.followUsers)&&v.followUsers.length>0){console.log("👥 Creating follow relationships...");try{await g(P,v.followUsers)}catch(V){console.warn("Follow relationships failed, but continuing:",V)}}await s(),d("🎉 Your profile is now complete! Welcome to the community!"),setTimeout(()=>{t("/profile")},2e3)}catch(P){console.error("❌ Onboarding completion error:",P),m(P.message||"An error occurred while completing your profile. Please try again.")}finally{o(!1)}},M=y.useCallback(()=>{switch(r){case 1:return n.jsx(D,{formData:v,updateFormData:j,profile:e});case 2:return n.jsx(MR,{formData:v,updateFormData:j});case 3:return n.jsx(OR,{formData:v,updateFormData:j});case 4:return n.jsx(RR,{formData:v,updateFormData:j,setFormData:N});case 5:return n.jsx(DR,{formData:v,updateFormData:j});case 6:return n.jsx(PR,{formData:v,updateFormData:j});default:return n.jsx(D,{formData:v,updateFormData:j,profile:e})}},[r,v,j,N,e]),R=()=>{switch(r){case 1:return"Profile Photo & Interests";case 2:return"Find Your Organization";case 3:return"Organization Type";case 4:return"Organization Setup";case 5:return"Location";case 6:return"Follow Users";default:return"Profile Setup"}},D=({formData:L,updateFormData:B,profile:O})=>{var I,V,H;const P=[{id:"housing",name:"Housing",emoji:"🏠",color:"bg-blue-300",hoverColor:"hover:bg-blue-400"},{id:"education",name:"Education",emoji:"📚",color:"bg-green-300",hoverColor:"hover:bg-green-400"},{id:"health",name:"Health",emoji:"🏥",color:"bg-red-300",hoverColor:"hover:bg-red-400"},{id:"environment",name:"Environment",emoji:"🌱",color:"bg-emerald-300",hoverColor:"hover:bg-emerald-400"},{id:"arts",name:"Arts & Culture",emoji:"🎨",color:"bg-purple-300",hoverColor:"hover:bg-purple-400"},{id:"technology",name:"Technology",emoji:"💻",color:"bg-indigo-300",hoverColor:"hover:bg-indigo-400"},{id:"social-services",name:"Social Services",emoji:"🤝",color:"bg-orange-300",hoverColor:"hover:bg-orange-400"},{id:"youth",name:"Youth Programs",emoji:"👶",color:"bg-pink-300",hoverColor:"hover:bg-pink-400"},{id:"seniors",name:"Senior Services",emoji:"👴",color:"bg-teal-300",hoverColor:"hover:bg-teal-400"},{id:"community",name:"Community Development",emoji:"🏘️",color:"bg-amber-300",hoverColor:"hover:bg-amber-400"},{id:"research",name:"Research & Science",emoji:"🔬",color:"bg-cyan-300",hoverColor:"hover:bg-cyan-400"},{id:"advocacy",name:"Advocacy",emoji:"📢",color:"bg-rose-300",hoverColor:"hover:bg-rose-400"}],z=async Y=>{const U=L.interests||[],K=U.includes(Y);let J;K?J=U.filter(W=>W!==Y):J=[...U,Y],B({interests:J});try{const{error:W}=await $.from("profiles").update({interests:J,updated_at:new Date}).eq("id",O.id);W?console.error("Error saving interests:",W):(console.log("✅ Interests auto-saved"),s&&await s())}catch(W){console.error("Error auto-saving interests:",W)}},q=async Y=>{const U=Y.target.files[0];if(U)try{B({avatar:U,avatarPreview:URL.createObjectURL(U)});const K=U.name.split(".").pop(),J=`avatar-${Date.now()}-${Math.random().toString(36).substring(2)}.${K}`;console.log("🔧 Auto-uploading avatar:",J);const{data:W,error:ee}=await $.storage.from("avatars").upload(J,U,{cacheControl:"3600",upsert:!1});if(ee){console.error("❌ Avatar upload error:",ee);return}const{data:ne}=$.storage.from("avatars").getPublicUrl(J);if(!(ne!=null&&ne.publicUrl)){console.error("Failed to get public URL");return}const X=`${ne.publicUrl}?v=${Date.now()}`;console.log("✅ Avatar uploaded:",X);const{error:Q}=await $.from("profiles").update({avatar_url:X,updated_at:new Date}).eq("id",O.id);Q?console.error("❌ Error updating avatar:",Q):(console.log("✅ Avatar auto-saved to profile"),B({avatarPreview:X}),s&&await s())}catch(K){console.error("❌ Avatar upload error:",K)}};return n.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Let's Get Started! ✨"}),n.jsx("p",{className:"text-slate-600",children:"Let's upload a photo and tell us what you're interested in so we can tailor your experience."})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Profile Photo (optional)"}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 border-2 border-dashed border-slate-300 flex items-center justify-center mb-4 overflow-hidden",children:L.avatarPreview||O!=null&&O.avatar_url?n.jsx("img",{src:L.avatarPreview||(O==null?void 0:O.avatar_url),alt:"Profile preview",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-slate-500 text-sm",children:"Photo"})}),n.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden",id:"avatar-upload"}),n.jsx("label",{htmlFor:"avatar-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:"Choose Photo"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"PNG, JPG up to 2MB"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"What interests you? 💡"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Choose areas you're passionate about"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-6",children:P.map(Y=>{var K;const U=(K=L.interests)==null?void 0:K.includes(Y.id);return n.jsx("button",{onClick:()=>z(Y.id),className:`p-4 rounded-lg border text-left transition-all transform hover:scale-105 ${U?`${Y.color} text-slate-800 border-transparent shadow-lg`:`bg-white text-slate-700 border-slate-300 hover:border-slate-400 hover:shadow-md ${Y.hoverColor.replace("bg-","hover:bg-").replace("-400","-50")}`}`,children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-xl",children:Y.emoji}),n.jsx("span",{className:"font-medium text-sm",children:Y.name})]})},Y.id)})}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:[n.jsx("strong",{children:"Selected:"})," ",((I=L.interests)==null?void 0:I.length)||0," interest",((V=L.interests)==null?void 0:V.length)!==1?"s":""]}),((H=L.interests)==null?void 0:H.length)>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.interests.map(Y=>{const U=P.find(K=>K.id===Y);return n.jsxs("span",{className:"inline-flex items-center space-x-1 text-xs bg-white px-2 py-1 rounded-full border border-slate-200",children:[n.jsx("span",{children:U==null?void 0:U.emoji}),n.jsx("span",{children:U==null?void 0:U.name})]},Y)})})]})]})]})};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 py-8 pb-48",children:n.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("h2",{className:"text-sm font-medium text-slate-500 tracking-wide uppercase mb-4",children:["Step ",_()," of ",w()," • ",R()]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_()/w()*100}%`}})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[M(),n.jsxs("div",{className:"mt-4 pt-3",children:[n.jsx(zR,{currentStep:r,totalSteps:w(),onPrev:r===1?()=>t("/profile"):C,onNext:_()===w()?A:k,isValid:E(),loading:i,prevLabel:r===1?"Back to Profile":"Back",nextLabel:_()===w()?"🎉 Complete Profile":"Next"}),n.jsx(ed,{message:c,error:h})]})]})]})})}const $4=t=>{if(!t)return"?";const e=t.split(" ");return e.length>1&&e[0]&&e[1]?(e[0][0]+e[1][0]).toUpperCase():t.substring(0,2).toUpperCase()},doe=({item:t,onClick:e})=>{const s=bt(),r=c=>{c.preventDefault(),t.type==="organization"?s(`/organizations/${t.slug}`):t.type==="member"||t.type==="user"?s(`/profile/members/${t.id}`):t.type==="grant"&&s(`/profile/grants-portal?open_grant=${t.id}`),e()},a=()=>{const c=t.avatar_url||t.image_url;if(c)return n.jsx("img",{src:c,alt:`${t.name}`,className:"w-8 h-8 rounded-full object-cover border border-slate-200",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="flex"}});switch(t.type){case"organization":return n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(er,{size:16,className:"text-blue-600"})});case"member":case"user":return n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-xs font-semibold text-green-700",children:$4(t.name)});case"grant":return n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(zn,{size:16,className:"text-purple-600"})});default:return n.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:n.jsx(An,{size:16,className:"text-slate-500"})})}},i=()=>{switch(t.type){case"organization":const c=[];return t.type_display&&c.push(t.type_display),t.location&&c.push(t.location),c.length>0?c.join(" · "):null;case"member":case"user":const d=[];return t.title&&d.push(t.title),t.organization_name&&d.push(t.organization_name),d.length>0?d.join(" · "):null;case"grant":const h=[];return t.foundation_name&&h.push(t.foundation_name),t.funding_amount_text&&h.push(t.funding_amount_text),h.length>0?h.join(" · "):"Grant Opportunity";default:return null}},o=()=>{switch(t.type){case"organization":return"Organization";case"member":case"user":return"Member";case"grant":return"Grant";default:return""}};return n.jsxs("button",{onClick:r,className:"w-full flex items-center p-3 hover:bg-slate-50 rounded-lg transition-colors text-left",children:[n.jsxs("div",{className:"flex-shrink-0 mr-3 relative",children:[a(),n.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-full items-center justify-center text-xs font-semibold text-slate-600 absolute top-0 left-0",style:{display:"none"},children:$4(t.name)})]}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium text-slate-800 truncate",children:t.name}),n.jsx("span",{className:"text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",children:o()})]}),i()&&n.jsx("p",{className:"text-sm text-slate-500 truncate",children:i()})]})]})};function F4({mobile:t=!1}){const[e,s]=y.useState(""),[r,a]=y.useState([]),[i,o]=y.useState(!1),[c,d]=y.useState(!1),h=y.useRef(null);y.useEffect(()=>{const b=setTimeout(async()=>{if(e.length>2){o(!0);try{const{data:v,error:N}=await $.rpc("search_all",{search_term:e});N?(console.warn("search_all function not available, falling back to manual search"),await m(e)):a(v||[])}catch(v){console.error("Search error:",v),await m(e)}o(!1)}else a([])},300);return()=>clearTimeout(b)},[e]);const m=async b=>{try{const v=`%${b}%`,N=[],{data:j,error:w}=await $.from("organizations").select("id, name, type, tagline, image_url, location, slug").or(`name.ilike.${v},tagline.ilike.${v}`).limit(5);if(!w&&j){const A=j.map(M=>({id:M.id,name:M.name,type:"organization",image_url:M.image_url,location:M.location,type_display:M.type,slug:M.slug}));N.push(...A)}const{data:_,error:k}=await $.from("profiles").select("id, full_name, title, organization_name, avatar_url").or(`full_name.ilike.${v},title.ilike.${v},organization_name.ilike.${v}`).limit(5);if(!k&&_){const A=_.map(M=>({id:M.id,name:M.full_name,type:"member",avatar_url:M.avatar_url,title:M.title,organization_name:M.organization_name}));N.push(...A)}const{data:C,error:E}=await $.from("grant_opportunities").select("id, title, foundation_name, funding_amount_text, description").or(`title.ilike.${v},foundation_name.ilike.${v},description.ilike.${v}`).limit(5);if(!E&&C){const A=C.map(M=>({id:M.id,name:M.title,type:"grant",foundation_name:M.foundation_name,funding_amount_text:M.funding_amount_text}));N.push(...A)}a(N)}catch(v){console.error("Manual search error:",v),a([])}};y.useEffect(()=>{const b=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const p=()=>{s(""),a([]),d(!1)};return n.jsxs("div",{className:"relative w-full",ref:h,children:[n.jsx(ot,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 z-10"}),n.jsx("input",{type:"text",placeholder:"Search grants, organizations, members...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-full bg-slate-50 focus:bg-white focus:ring-1 focus:ring-blue-500 transition-colors",value:e,onChange:b=>s(b.target.value),onFocus:()=>d(!0)}),i&&n.jsx(Li,{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin text-slate-400"}),c&&e.length>0&&n.jsx("div",{className:"absolute top-full mt-2 w-full bg-white border border-slate-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:i?n.jsxs("div",{className:"text-center p-4 text-slate-500",children:[n.jsx(Li,{className:"animate-spin mx-auto mb-2",size:20}),"Searching..."]}):r.length>0?n.jsx("div",{className:"p-2",children:r.map((b,v)=>n.jsx(doe,{item:b,onClick:p},`${b.type}-${b.id}-${v}`))}):e.length>2&&n.jsxs("div",{className:"text-center p-4 text-slate-500",children:['No results found for "',e,'"']})})]})}function uoe({profile:t}){const[e,s]=y.useState(!1),[r,a]=y.useState(!1),i=bt(),o=y.useRef(null),c=y.useRef(null),d=()=>s(!e),h=()=>s(!1),m=async()=>{await $.auth.signOut(),i("/login")};return y.useEffect(()=>{function p(g){o.current&&!o.current.contains(g.target)&&a(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),y.useEffect(()=>{const p=g=>{c.current&&!c.current.contains(g.target)&&h()};return e&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[e]),n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b border-slate-200",children:[n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center",children:n.jsx(Ye,{to:"/profile","aria-label":"fundspace Home",children:n.jsx("img",{src:R0,alt:"Fundspace Logo",className:"h-10 sm:h-12 w-auto"})})}),n.jsx("div",{className:"flex-1 max-w-5xl mx-8 hidden md:block",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-full max-w-4xl",children:n.jsx(F4,{})})})}),n.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[n.jsxs(Ye,{to:"/submit-grant",className:"inline-flex items-center justify-center px-3 md:px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[n.jsx(Zf,{size:16,className:"mr-1 md:mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"Submit Grant"}),n.jsx("span",{className:"sm:hidden",children:"Submit"})]}),n.jsx(Ye,{to:"/profile/notifications",className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors relative","aria-label":"Notifications",children:n.jsx(Vo,{size:20})}),n.jsxs("div",{className:"relative",ref:o,children:[n.jsxs("button",{onClick:()=>a(!r),className:"flex items-center space-x-2 p-1 hover:bg-slate-100 rounded-lg transition-colors focus:outline-none","aria-label":"Profile Menu",children:[t!=null&&t.avatar_url?n.jsx("img",{src:t.avatar_url,alt:t.display_name||"Profile",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center",children:n.jsx(An,{size:16,className:"text-slate-600"})}),n.jsx(Ss,{size:14,className:"text-slate-400 hidden sm:block"})]}),r&&n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-slate-200 py-1 z-50",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:(t==null?void 0:t.full_name)||"User"}),n.jsx("p",{className:"text-xs text-slate-500 truncate",children:t==null?void 0:t.email})]}),n.jsxs("div",{className:"py-1",children:[n.jsxs(Ye,{to:"/profile",onClick:()=>a(!1),className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(tp,{size:14,className:"mr-2"})," Dashboard"]}),n.jsxs(Ye,{to:"/profile/settings",onClick:()=>a(!1),className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(An,{size:14,className:"mr-2"})," Profile Settings"]})]}),n.jsx("div",{className:"border-t border-slate-100 py-1",children:n.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100",children:[n.jsx(_c,{size:14,className:"mr-2"})," Logout"]})})]})]}),n.jsx("button",{onClick:d,className:"md:hidden p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors","aria-label":"Toggle mobile menu",children:e?n.jsx(Ke,{size:20}):n.jsx(T3,{size:20})})]})]}),n.jsx("div",{className:"md:hidden border-t border-slate-200 p-4",children:n.jsx(F4,{})})]}),e&&n.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:h}),n.jsxs("div",{ref:c,className:"fixed top-0 right-0 bottom-0 w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsx("span",{className:"text-lg font-semibold text-slate-900",children:"Quick Actions"}),n.jsx("button",{onClick:h,className:"p-1 text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(Ke,{size:20})})]}),n.jsx("div",{className:"p-4 border-b border-slate-200",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[t!=null&&t.avatar_url?n.jsx("img",{src:t.avatar_url,alt:t.display_name||"Profile",className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-slate-300 rounded-full flex items-center justify-center",children:n.jsx(An,{size:20,className:"text-slate-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:(t==null?void 0:t.full_name)||"User"}),n.jsx("p",{className:"text-xs text-slate-500 truncate",children:t==null?void 0:t.email})]})]})}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs(Ye,{to:"/profile",onClick:h,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[n.jsx(tp,{size:16,className:"mr-2"}),"Dashboard"]}),n.jsxs(Ye,{to:"/submit-grant",onClick:h,className:"flex items-center justify-center w-full px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:[n.jsx(Zf,{size:16,className:"mr-2"}),"Submit Grant"]}),n.jsxs(Ye,{to:"/profile/notifications",onClick:h,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[n.jsx(Vo,{size:16,className:"mr-2"}),"Notifications"]}),n.jsxs(Ye,{to:"/profile/settings",onClick:h,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[n.jsx(An,{size:16,className:"mr-2"}),"Profile Settings"]}),n.jsxs("button",{onClick:m,className:"flex items-center justify-center w-full px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[n.jsx(_c,{size:16,className:"mr-2"}),"Sign Out"]})]})]})]})]})}const hoe=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let s=e/31536e3;return s>1?Math.floor(s)+"y ago":(s=e/2592e3,s>1?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):(s=e/86400,s>1?Math.floor(s)+"d ago":(s=e/3600,s>1?Math.floor(s)+"h ago":(s=e/60,s>1?Math.floor(s)+"m ago":"Just now"))))},moe=({type:t,actor:e})=>{if(t==="new_follower"&&(e!=null&&e.avatar_url))return n.jsx("img",{src:e.avatar_url,alt:e.full_name,className:"w-10 h-10 rounded-full object-cover border-2 border-blue-200"});if((t==="connection_request"||t==="connection_accepted")&&(e!=null&&e.avatar_url))return n.jsx("img",{src:e.avatar_url,alt:e.full_name,className:"w-10 h-10 rounded-full object-cover border-2 border-green-200"});if((t==="new_follower"||t==="connection_request"||t==="connection_accepted")&&(e!=null&&e.full_name)){const r=e.full_name.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2),a=t==="new_follower"?"bg-blue-500 border-blue-200":"bg-green-500 border-green-200";return n.jsx("div",{className:`w-10 h-10 rounded-full text-white flex items-center justify-center text-sm font-medium border-2 ${a}`,children:r})}const s="w-10 h-10 rounded-full flex items-center justify-center";switch(t){case"new_follower":return n.jsx("div",{className:`${s} bg-blue-100`,children:n.jsx(ia,{className:"w-5 h-5 text-blue-500"})});case"connection_request":return n.jsx("div",{className:`${s} bg-green-100`,children:n.jsx(qe,{className:"w-5 h-5 text-green-500"})});case"connection_accepted":return n.jsx("div",{className:`${s} bg-green-100`,children:n.jsx(br,{className:"w-5 h-5 text-green-500"})});case"new_like":return n.jsx("div",{className:`${s} bg-pink-100`,children:n.jsx(y0,{className:"w-5 h-5 text-pink-500"})});case"new_comment":return n.jsx("div",{className:`${s} bg-green-100`,children:n.jsx($r,{className:"w-5 h-5 text-green-500"})});case"mention":return n.jsx("div",{className:`${s} bg-purple-100`,children:n.jsx(Fw,{className:"w-5 h-5 text-purple-500"})});case"organization_mention":return n.jsx("div",{className:`${s} bg-orange-100`,children:n.jsx(er,{className:"w-5 h-5 text-orange-500"})});default:return n.jsx("div",{className:`${s} bg-gray-100`,children:n.jsx(Vo,{className:"w-5 h-5 text-gray-500"})})}},foe=({notification:t,onViewPost:e,onMarkAsRead:s,onDelete:r,currentUserId:a,onRefresh:i})=>{const o=bt(),[c,d]=y.useState(!1),[h,m]=y.useState(null),{actor_id:p,type:g,created_at:b,post_id:v,organization_post_id:N,is_read:j,connection_id:w}=t;y.useEffect(()=>{(async()=>{if(g==="connection_request"&&(p!=null&&p.id)&&a)try{const{status:D}=await Hj(a,p.id);m(D)}catch(D){console.error("Error checking connection status:",D)}})()},[g,p==null?void 0:p.id,a]);const _=()=>{switch(g){case"new_follower":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," started following you."]});case"connection_request":return h==="accepted"?n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," is now connected with you."]}):n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," wants to connect with you."]});case"connection_accepted":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," accepted your connection request."]});case"new_like":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," liked your post."]});case"new_comment":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," commented on your post."]});case"mention":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," mentioned you in a post."]});case"organization_mention":return n.jsxs(n.Fragment,{children:[n.jsx("strong",{className:"font-semibold text-slate-900",children:p.full_name})," mentioned your organization in a post."]});default:return"New notification"}},k=async R=>{R.stopPropagation(),d(!0);try{const D=await rg(a,p.id);D.success?(m("accepted"),await s(t.id),i&&i()):console.error("Failed to accept connection:",D.error)}catch(D){console.error("Error accepting connection:",D)}finally{d(!1)}},C=async R=>{R.stopPropagation(),d(!0);try{const D=await Vj(a,p.id);D.success?(await r(t.id),i&&i()):console.error("Failed to decline connection:",D.error)}catch(D){console.error("Error declining connection:",D)}finally{d(!1)}},E=async R=>{try{const{data:D,error:L}=await $.from("organization_posts").select("organization_id, organization_type").eq("id",R).single();if(L||!D)return console.error("Error fetching organization post:",L),!1;const{organization_id:B,organization_type:O}=D,P=O==="nonprofit"?"nonprofits":"funders",{data:z,error:q}=await $.from(P).select("slug, name").eq("id",B).single();return q||!(z!=null&&z.slug)?(console.error(`Error fetching ${O} details:`,q),!1):(o(`/organizations/${z.slug}`),!0)}catch(D){return console.error("Error in getOrganizationDetailsAndNavigate:",D),!1}},A=R=>{R.stopPropagation(),N?E(N):v&&(o("/profile"),setTimeout(()=>{e&&e(v)},100))},M=()=>{j||s(t.id),g==="new_follower"||g==="connection_request"||g==="connection_accepted"?o(`/profile/members/${p.id}`):N?E(N):v?(o("/profile"),setTimeout(()=>{e&&e(v)},100)):o(`/profile/members/${p.id}`)};return n.jsxs("div",{className:`flex items-start space-x-4 p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-all duration-200 cursor-pointer ${j?"bg-white":"bg-blue-50/50 border-blue-200"}`,onClick:M,children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(moe,{type:g,actor:p})}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-grow min-w-0 pr-2",children:[n.jsx("p",{className:`text-sm ${j?"text-slate-700":"text-slate-900"}`,children:_()}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[n.jsx(aa,{className:"w-3 h-3 mr-1"}),hoe(b)]}),!j&&n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full",title:"Unread"}),n.jsx("span",{className:"text-xs text-blue-600 ml-1 font-medium",children:"New"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[!j&&n.jsx("button",{onClick:R=>{R.stopPropagation(),s(t.id)},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-100 rounded-full transition-colors",title:"Mark as read",children:n.jsx(Iw,{className:"w-4 h-4"})}),n.jsx("button",{onClick:R=>{R.stopPropagation(),r(t.id)},className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-100 rounded-full transition-colors",title:"Delete notification",children:n.jsx(Ke,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[g==="connection_request"&&h!=="accepted"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:k,disabled:c,className:"text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-full hover:bg-green-200 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:c?"Accepting...":"Accept"}),n.jsx("button",{onClick:C,disabled:c,className:"text-xs bg-slate-100 text-slate-700 px-3 py-1.5 rounded-full hover:bg-slate-200 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 disabled:opacity-50",children:c?"Declining...":"Decline"})]}),g==="connection_request"&&h==="accepted"&&n.jsx("div",{className:"text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-full font-medium border border-green-200",children:"✓ Connected"}),(v||N)&&n.jsx("button",{onClick:A,className:"text-xs bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full hover:bg-blue-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"View Post"}),(g==="new_follower"||g==="connection_request"||g==="connection_accepted")&&n.jsx("button",{onClick:R=>{R.stopPropagation(),o(`/profile/members/${p.id}`)},className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded-full hover:bg-purple-200 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:"View Profile"})]})]})]})};function poe(){var k;const{session:t,profile:e,handleViewPost:s}=_t(),[r,a]=y.useState([]),[i,o]=y.useState(!0),[c,d]=y.useState("all"),[h,m]=y.useState("newest");y.useEffect(()=>{var C;(C=t==null?void 0:t.user)!=null&&C.id&&p()},[(k=t==null?void 0:t.user)==null?void 0:k.id,c,h]);const p=async()=>{try{o(!0);let C=$.from("notifications").select(`
                    id, type, post_id, organization_post_id, is_read, created_at, connection_id,
                    actor_id:profiles!notifications_actor_id_fkey (id, full_name, avatar_url, title, organization_name)
                `).eq("user_id",t.user.id);c==="unread"?C=C.eq("is_read",!1):c==="read"?C=C.eq("is_read",!0):c==="connections"&&(C=C.in("type",["connection_request","connection_accepted","connection_declined"]));const E=h==="oldest";C=C.order("created_at",{ascending:E}).limit(100);const{data:A,error:M}=await C;if(M){console.error("Error fetching notifications:",M);return}a(A||[])}catch(C){console.error("Error in fetchNotifications:",C)}finally{o(!1)}},g=async C=>{try{const{error:E}=await $.from("notifications").update({is_read:!0}).eq("id",C);if(E){console.error("Error marking notification as read:",E);return}a(A=>A.map(M=>M.id===C?{...M,is_read:!0}:M))}catch(E){console.error("Error in handleMarkAsRead:",E)}},b=async()=>{try{const C=r.filter(A=>!A.is_read).map(A=>A.id);if(C.length===0)return;const{error:E}=await $.from("notifications").update({is_read:!0}).in("id",C);if(E){console.error("Error marking all notifications as read:",E);return}a(A=>A.map(M=>({...M,is_read:!0})))}catch(C){console.error("Error in handleMarkAllAsRead:",C)}},v=async C=>{try{const{error:E}=await $.from("notifications").delete().eq("id",C);if(E){console.error("Error deleting notification:",E);return}a(A=>A.filter(M=>M.id!==C))}catch(E){console.error("Error in handleDelete:",E)}},N=async()=>{if(window.confirm("Are you sure you want to delete all notifications? This action cannot be undone."))try{const{error:C}=await $.from("notifications").delete().eq("user_id",t.user.id);if(C){console.error("Error clearing all notifications:",C);return}a([])}catch(C){console.error("Error in handleClearAll:",C)}},j=r,w=r.filter(C=>!C.is_read).length,_=r.filter(C=>C.type==="connection_request"&&!C.is_read).length;return i?n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:n.jsxs("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/3"}),n.jsx("div",{className:"space-y-3",children:[...Array(5)].map((C,E)=>n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/4"})]})]},E))})]})})}):n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Vo,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Notifications"}),n.jsx("p",{className:"text-sm text-slate-600",children:w>0?n.jsxs(n.Fragment,{children:[w," unread notification",w===1?"":"s",_>0&&n.jsxs("span",{className:"ml-2 text-green-600 font-medium",children:["• ",_," connection request",_===1?"":"s"]})]}):"All caught up!"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[w>0&&n.jsxs("button",{onClick:b,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[n.jsx(Iw,{className:"w-4 h-4"}),n.jsx("span",{children:"Mark All Read"})]}),n.jsxs("button",{onClick:N,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[n.jsx(Ke,{className:"w-4 h-4"}),n.jsx("span",{children:"Clear All"})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(jh,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filter:"}),n.jsxs("select",{value:c,onChange:C=>d(C.target.value),className:"text-sm border border-slate-300 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"unread",children:"Unread"}),n.jsx("option",{value:"read",children:"Read"}),n.jsx("option",{value:"connections",children:"Connections"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bs,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Sort:"}),n.jsxs("select",{value:h,onChange:C=>m(C.target.value),className:"text-sm border border-slate-300 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"})]})]})]})]}),n.jsx("div",{className:"space-y-4",children:j.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(c$,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-slate-600",children:c==="unread"?"You don't have any unread notifications.":c==="read"?"You don't have any read notifications.":c==="connections"?"You don't have any connection notifications.":"You don't have any notifications yet. When people interact with your posts, follow you, or send connection requests, you'll see them here."})]}):j.map(C=>{var E;return n.jsx(foe,{notification:C,onViewPost:s,onMarkAsRead:g,onDelete:v,currentUserId:(E=t==null?void 0:t.user)==null?void 0:E.id,onRefresh:p},C.id)})})]})}function goe({onResetSuccess:t}){const[e,s]=y.useState(!1),[r,a]=y.useState(""),[i,o]=y.useState(""),[c,d]=y.useState(!1),[h,m]=y.useState(!1),[p,g]=y.useState(!1),[b,v]=y.useState({password:"",confirmPassword:""});y.useEffect(()=>{(async()=>{const{data:{session:C}}=await $.auth.getSession();console.log("Reset password session check:",C),C?console.log("Valid session found for password reset"):a("Invalid or expired reset link. Please request a new password reset.")})()},[]);const N=(k,C)=>{v(E=>({...E,[k]:C})),r&&a("")},j=()=>b.password.length<6?(a("Password must be at least 6 characters long."),!1):b.password!==b.confirmPassword?(a("Passwords do not match."),!1):!0,w=()=>b.password&&b.confirmPassword&&b.password.length>=6&&b.password===b.confirmPassword,_=async k=>{if(k.preventDefault(),!!j()){s(!0),a(""),o("");try{const{error:C}=await $.auth.updateUser({password:b.password});if(C){a(C.message);return}g(!0),o("Password updated successfully!"),setTimeout(()=>{t==null||t()},2e3)}catch(C){a("An unexpected error occurred. Please try again."),console.error("Password reset error:",C)}finally{s(!1)}}};return p?n.jsx("div",{className:"w-full",children:n.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"text-center",children:[n.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Hi,{className:"w-8 h-8 text-green-600"})}),n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Password Updated!",n.jsx(oe.span,{className:"inline-block ml-2",animate:{rotate:[0,14,-8,14,-4,10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:3},children:"🎉"})]}),n.jsx("p",{className:"text-slate-600 text-lg mb-6",children:"Your password has been successfully updated. You can now sign in with your new password."}),n.jsx("button",{onClick:t,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-4 px-8 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",children:"Continue to Sign In"})]})}):n.jsxs("div",{className:"w-full",children:[n.jsxs(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-3",children:["Create New Password",n.jsx(oe.span,{className:"inline-block ml-2",animate:{rotate:[0,14,-8,14,-4,10,0]},transition:{duration:2,delay:.5,repeat:1/0,repeatDelay:3},children:"🔐"})]}),n.jsx("p",{className:"text-slate-600 text-lg",children:"Choose a strong password for your account."})]}),n.jsxs("form",{onSubmit:_,className:"space-y-6",children:[n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(sp,{className:`w-5 h-5 transition-colors ${b.password?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:c?"text":"password",value:b.password,onChange:k=>N("password",k.target.value),className:"w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl focus:ring-4 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"••••••••••",disabled:e,minLength:"6"}),n.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:c?n.jsx(Yu,{className:"w-5 h-5"}):n.jsx(pn,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Minimum 6 characters"})]}),n.jsxs(oe.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Confirm New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:n.jsx(sp,{className:`w-5 h-5 transition-colors ${b.confirmPassword?"text-blue-500":"text-slate-400"}`})}),n.jsx("input",{type:h?"text":"password",value:b.confirmPassword,onChange:k=>N("confirmPassword",k.target.value),className:"w-full pl-12 pr-12 py-4 border-2 border-slate-200 rounded-xl focus:ring-4 focus:border-blue-500 focus:ring-blue-500/20 hover:border-slate-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"••••••••••",disabled:e}),n.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:h?n.jsx(Yu,{className:"w-5 h-5"}):n.jsx(pn,{className:"w-5 h-5"})})]})]}),n.jsx(oe.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},type:"submit",disabled:e||!w(),className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 ${w()&&!e?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]":"bg-slate-200 text-slate-500 cursor-not-allowed"}`,whileTap:{scale:.98},children:n.jsx("div",{className:"flex items-center justify-center space-x-2",children:e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Updating password..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Update Password"}),n.jsx(Xt,{className:"w-5 h-5"})]})})})]}),n.jsx(ed,{message:i,error:r})]})}function xoe(){const{profile:t}=_t(),[e,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(!0),[c,d]=y.useState(new Set),[h,m]=y.useState("connections");y.useEffect(()=>{t!=null&&t.id&&(p(),g())},[t==null?void 0:t.id]);const p=async()=>{try{const _=await oR(t.id,100);_.error||s(_.connections||[])}catch(_){console.error("❌ Error in fetchConnections:",_)}},g=async()=>{try{o(!0);const _=await Sre(t.id);_.error||a(_.requests||[])}catch(_){console.error("❌ Error in fetchPendingRequests:",_)}finally{o(!1)}},b=async(_,k)=>{if(!c.has(k)&&window.confirm("Are you sure you want to disconnect? This will remove the professional connection between you.")){d(C=>new Set(C).add(k));try{(await qj(t.id,k)).success&&s(E=>E.filter(A=>A.user.id!==k))}catch(C){console.error("Error in handleDisconnect:",C)}finally{d(C=>{const E=new Set(C);return E.delete(k),E})}}},v=async(_,k)=>{if(!c.has(k)){d(C=>new Set(C).add(k));try{(await rg(t.id,k)).success&&(a(E=>E.filter(A=>A.requester_profile.id!==k)),await p())}catch(C){console.error("Error in handleAcceptRequest:",C)}finally{d(C=>{const E=new Set(C);return E.delete(k),E})}}},N=async(_,k)=>{if(!c.has(k)){d(C=>new Set(C).add(k));try{(await Vj(t.id,k)).success&&a(E=>E.filter(A=>A.requester_profile.id!==k))}catch(C){console.error("Error in handleDeclineRequest:",C)}finally{d(C=>{const E=new Set(C);return E.delete(k),E})}}},j=_=>{const k=new Date(_),E=Math.abs(new Date-k),A=Math.ceil(E/(1e3*60*60*24));return A===1?"Yesterday":A<7?`${A} days ago`:A<30?`${Math.ceil(A/7)} weeks ago`:A<365?`${Math.ceil(A/30)} months ago`:k.toLocaleDateString()},w=({connection:_,type:k="connection"})=>{const C=k==="connection"?_.user:_.requester_profile,E=k==="connection"?_.connected_at:_.created_at,A=c.has(C.id);return n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-4 flex-grow",children:[n.jsx(is,{src:C.avatar_url,fullName:C.full_name,size:"lg"}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsx(Ye,{to:`/profile/members/${C.id}`,className:"text-lg font-semibold text-slate-900 hover:text-blue-600 transition-colors block",children:C.full_name}),C.title&&n.jsxs("p",{className:"text-sm text-slate-600 mt-1 flex items-center",children:[n.jsx(er,{className:"w-3 h-3 mr-1"}),C.title]}),C.organization_name&&n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:C.organization_name}),n.jsxs("div",{className:"flex items-center text-xs text-slate-400 mt-2",children:[n.jsx(aa,{className:"w-3 h-3 mr-1"}),k==="connection"?`Connected ${j(E)}`:`Requested ${j(E)}`]})]})]}),n.jsx("div",{className:"flex-shrink-0 ml-4",children:k==="connection"?n.jsxs("button",{onClick:()=>b(_.id,C.id),disabled:A,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-green-100 text-green-700 rounded-lg hover:bg-red-100 hover:text-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",title:"Disconnect",children:[n.jsx(br,{className:"w-4 h-4 mr-1 group-hover:hidden"}),n.jsx(ap,{className:"w-4 h-4 mr-1 hidden group-hover:block"}),A?"Disconnecting...":"Connected"]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>v(_.id,C.id),disabled:A,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(br,{className:"w-4 h-4 mr-1"}),A?"Accepting...":"Accept"]}),n.jsxs("button",{onClick:()=>N(_.id,C.id),disabled:A,className:"inline-flex items-center px-3 py-2 text-sm font-medium bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(ap,{className:"w-4 h-4 mr-1"}),A?"Declining...":"Decline"]})]})})]})})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ye,{to:"/profile",className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Back to Profile",children:n.jsx(Zn,{size:20,className:"text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Professional Connections"}),n.jsx("p",{className:"text-slate-600",children:"Manage your professional network and connection requests"})]})]}),n.jsx("div",{className:"border-b border-slate-200",children:n.jsxs("nav",{className:"flex space-x-8",children:[n.jsxs("button",{onClick:()=>m("connections"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${h==="connections"?"border-green-500 text-green-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["My Connections (",e.length,")"]}),n.jsxs("button",{onClick:()=>m("requests"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors relative ${h==="requests"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Pending Requests (",r.length,")",r.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})}),i?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),n.jsx("p",{className:"text-slate-600 mt-2",children:"Loading your connections..."})]}):n.jsxs(n.Fragment,{children:[h==="connections"&&n.jsx("div",{className:"space-y-4",children:e.length>0?e.map(_=>n.jsx(w,{connection:_,type:"connection"},_.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(qe,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No connections yet"}),n.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-4",children:"Start building your professional network by connecting with colleagues, team members, and other professionals in your field."}),n.jsxs(Ye,{to:"/profile/members",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(qe,{className:"w-4 h-4 mr-2"}),"Discover Professionals"]})]})}),h==="requests"&&n.jsx("div",{className:"space-y-4",children:r.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-blue-800 text-sm",children:[n.jsx("strong",{children:r.length})," people want to connect with you professionally. Review and respond to their requests below."]})}),r.map(_=>n.jsx(w,{connection:_,type:"request"},_.id))]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(aa,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No pending requests"}),n.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"When people send you connection requests, they'll appear here for you to accept or decline."})]})})]})]})}const boe=()=>n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nt,{className:"w-8 h-8 text-blue-500 animate-pulse mx-auto mb-4"}),n.jsx("p",{className:"text-slate-700 font-medium",children:"Loading grants portal..."})]})}),voe=()=>n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center max-w-md border border-slate-200",children:[n.jsx(Nt,{className:"w-8 h-8 text-blue-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Required"}),n.jsx("p",{className:"text-slate-600",children:"You need admin privileges to access the Grants Portal."})]})}),yoe=({checkingAccess:t,hasAccess:e,children:s})=>t?n.jsx(boe,{}):e?s:n.jsx(voe,{}),woe=({userMembership:t})=>{var e,s;return t!=null&&t.organizations?n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-lg border border-slate-200",children:[n.jsx("div",{className:"h-80 bg-gradient-to-br from-slate-100 via-white to-slate-100",children:t.organizations.banner_image_url?n.jsx("img",{src:t.organizations.banner_image_url,alt:"Organization banner",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500"})}),n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white",children:n.jsxs("div",{className:"flex items-start gap-6",children:[n.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white border-4 border-white shadow-xl overflow-hidden flex-shrink-0",children:t.organizations.image_url?n.jsx("img",{src:t.organizations.image_url,alt:"Organization logo",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xl",children:(s=(e=t.organizations.name)==null?void 0:e.charAt(0))==null?void 0:s.toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-3xl font-bold mb-2",children:t.organizations.name}),t.organizations.tagline&&n.jsx("p",{className:"text-white/90 text-lg mb-4",children:t.organizations.tagline}),n.jsx("div",{className:"flex items-center gap-6 text-sm",children:t.organizations.location&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"w-4 h-4"}),n.jsx("span",{children:t.organizations.location})]})})]})]})})]})}):null},joe=({isActive:t,onClick:e,gradient:s,icon:r,title:a,description:i,activeColor:o})=>n.jsxs("div",{className:`group relative overflow-hidden rounded-3xl cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl ${t?`ring-2 ring-${o}`:""}`,onClick:e,children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s}`}),n.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-white/40 to-transparent rounded-full transform translate-x-6 -translate-y-6"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-tr from-white/30 to-transparent rounded-full transform -translate-x-4 translate-y-4"}),n.jsxs("div",{className:"relative p-6",children:[n.jsx("div",{className:"w-12 h-12 bg-white/50 backdrop-blur-sm rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:n.jsx(r,{className:"w-6 h-6 text-slate-700"})}),n.jsx("h3",{className:"font-bold text-slate-800 text-sm mb-1",children:a}),n.jsx("p",{className:"text-slate-600/80 text-xs leading-relaxed",children:i})]})]}),Noe=({activeTab:t,setActiveTab:e,userMembership:s})=>{if(!(s!=null&&s.organizations))return null;const r=[{id:"explore",title:"Explore Funds",description:"Discover opportunities",icon:ot,gradient:"from-blue-100 via-blue-50 to-indigo-100",activeColor:"blue-500"},{id:"track",title:"Track Funds",description:"Monitor progress",icon:an,gradient:"from-green-100 via-green-50 to-emerald-100",activeColor:"green-500"},{id:"create",title:"Create Funds",description:"Launch programs",icon:$s,gradient:"from-purple-100 via-purple-50 to-pink-100",activeColor:"purple-500"},{id:"request",title:"Request Funds",description:"Apply for support",icon:Nt,gradient:"from-teal-100 via-teal-50 to-cyan-100",activeColor:"teal-500"},{id:"communities",title:"Communities",description:"Connect & engage",icon:qe,gradient:"from-orange-100 via-orange-50 to-amber-100",activeColor:"orange-500"},{id:"organizations",title:"Organizations",description:"Partner network",icon:Ut,gradient:"from-rose-100 via-rose-50 to-pink-100",activeColor:"rose-500"}];return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-8",children:r.map(a=>n.jsx(joe,{isActive:t===a.id,onClick:()=>e(a.id),gradient:a.gradient,icon:a.icon,title:a.title,description:a.description,activeColor:a.activeColor},a.id))})},Soe={"nonprofit.501c3":"501(c)(3)","nonprofit.501c4":"501(c)(4)","nonprofit.501c6":"Business Leagues","education.university":"Universities","education.k12":"K-12 Schools","education.research":"Research Institutions","healthcare.hospital":"Hospitals","healthcare.clinic":"Clinics","government.federal":"Federal Agencies","government.state":"State Agencies","government.local":"Local Government","foundation.family":"Family Foundations","foundation.community":"Community Foundations","foundation.corporate":"Corporate Foundations","forprofit.startup":"Startups","forprofit.socialenterprise":"Social Enterprises","forprofit.socialenterprise.bcorp":"B-Corps","religious.church":"Religious Orgs"},_oe=t=>t>=1e6?`${(t/1e6).toFixed(1)}M+`:t>=1e3?`${(t/1e3).toFixed(0)}K+`:`${t.toLocaleString()}`,Coe=({grant:t,onOpenDetailModal:e,isSaved:s,onSave:r,onUnsave:a,session:i})=>{var m;const o=t.dueDate?new Date(t.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Rolling",c=t.fundingAmount?_oe(Kn(t.fundingAmount.toString())):"Not Specified",d=p=>{p.stopPropagation(),i&&(s?a(t.id):r(t.id))},h=p=>{if(!p)return"?";const g=p.split(" ");return g.length>1?(g[0][0]+g[1][0]).toUpperCase():p.substring(0,2).toUpperCase()};return n.jsxs("div",{onClick:()=>e(t),className:"group bg-white p-4 md:p-5 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-2xl transition-all duration-300 flex flex-col md:flex-row items-start md:items-center gap-4 cursor-pointer transform hover:-translate-y-1",children:[n.jsx("div",{className:"flex-shrink-0",children:(m=t.organization)!=null&&m.image_url?n.jsx("img",{src:t.organization.image_url,alt:`${t.foundationName} logo`,className:"h-14 w-14 md:h-16 md:w-16 rounded-xl object-contain border-2 border-white shadow-lg group-hover:shadow-xl transition-shadow duration-300"}):n.jsx("div",{className:"h-14 w-14 md:h-16 md:w-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:h(t.foundationName)})}),n.jsxs("div",{className:"flex-grow min-w-0 w-full",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[n.jsx("p",{className:"text-sm text-slate-500 font-medium truncate",children:t.foundationName}),t.grantType&&n.jsx("span",{className:"flex-shrink-0 text-xs bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700 px-2 py-0.5 rounded-full font-medium border border-blue-200",children:t.grantType})]}),n.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300",children:t.title}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-1.5",title:"Funding Amount",children:[n.jsx(an,{size:14,className:"text-green-600"}),n.jsx("span",{className:"font-semibold text-green-700",children:c})]}),n.jsxs("div",{className:"flex items-center gap-1.5",title:"Due Date",children:[n.jsx(bs,{size:14,className:"text-red-600"}),n.jsx("span",{className:"font-semibold text-red-700",children:o})]}),t.eligible_organization_types&&t.eligible_organization_types.length>0&&n.jsxs("div",{className:"flex items-center gap-1.5",title:"Eligibility",children:[n.jsx(qe,{size:14,className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-indigo-700",children:[Soe[t.eligible_organization_types[0]]||t.eligible_organization_types[0],t.eligible_organization_types.length>1&&n.jsxs("span",{className:"text-slate-500 font-medium",children:[" +",t.eligible_organization_types.length-1," more"]})]})]})]})]}),n.jsxs("div",{className:"w-full md:w-auto flex-shrink-0 flex flex-row items-center gap-3 mt-4 md:mt-0",children:[i&&n.jsx("button",{onClick:d,className:`p-3 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 ${s?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":"bg-white text-slate-500 border border-slate-200 hover:bg-slate-50"}`,"aria-label":s?"Unsave grant":"Save grant",children:n.jsx(zi,{size:18,fill:s?"currentColor":"none"})}),n.jsxs("button",{onClick:p=>{p.stopPropagation(),e(t)},className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[n.jsx(Xt,{size:16}),"Details"]})]})]})},koe=({showFilters:t,setShowFilters:e,filterConfig:s,handleFilterChange:r,activeGrantFilters:a,loading:i,currentList:o,totalFilteredItems:c,totalFilteredFunding:d,grantsPerPage:h,handlePerPageChange:m,viewMode:p,setViewMode:g,totalPages:b,currentPage:v,paginate:N,handleClearFilters:j,session:w,savedGrantIds:_,handleSaveGrant:k,handleUnsaveGrant:C,openDetail:E,handleFilterByCategory:A,filterBarProps:M,formatCurrency:R})=>n.jsxs("div",{children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"bg-slate-50 rounded-3xl p-6 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Explore Available Grants"}),n.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-xl text-slate-700 hover:bg-slate-50 transition-colors",children:[n.jsx(jh,{className:"w-4 h-4"}),t?"Hide Filters":"Show Filters",a.length>0&&n.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-blue-600 bg-blue-100 rounded-full",children:a.length})]})]}),t&&n.jsx("div",{className:"mb-6",children:n.jsx(Ec,{...M,isMobileVisible:!0})}),n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-4 top-4 h-5 w-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search grants and opportunities...",value:s.searchTerm,onChange:D=>r("searchTerm",D.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-2xl focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-slate-800"})]})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4 text-center sm:text-left w-full",children:[n.jsxs("h2",{className:"text-2xl md:text-3xl font-bold",children:[n.jsx("span",{className:"text-slate-800",children:"Available Grants "}),n.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 font-extrabold",children:["(",c,")"]})]}),c>0&&!i&&n.jsxs("div",{className:"mt-2 sm:mt-0 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full border border-green-200 shadow-sm",children:[n.jsx(Cs,{size:20,className:"text-green-600"}),n.jsxs("span",{className:"text-green-700 font-semibold",children:[n.jsx(E0,{targetValue:d,duration:1e3,prefix:"$",formatValue:R})," Available"]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto flex-shrink-0",children:[n.jsxs("div",{className:"relative w-full sm:w-auto",children:[n.jsx("select",{id:"grants-per-page",value:h,onChange:m,className:"w-full pl-4 pr-10 py-3 border border-slate-300 rounded-xl bg-white text-sm font-medium focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none appearance-none shadow-sm hover:shadow-md transition-shadow duration-300",children:[6,12,24,48].map(D=>n.jsxs("option",{value:D,children:["Show ",D]},D))}),n.jsx(Ss,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",size:16})]}),n.jsxs("div",{className:"flex items-center bg-white rounded-xl border border-slate-300 p-1 shadow-sm",children:[n.jsx("button",{onClick:()=>g("grid"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${p==="grid"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"Grid View",children:n.jsx(mF,{size:18})}),n.jsx("button",{onClick:()=>g("list"),className:`p-2.5 rounded-lg transition-all duration-300 flex items-center gap-2 ${p==="list"?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-100"}`,title:"List View",children:n.jsx(qw,{size:18})})]})]})]}),i?n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nt,{className:"w-8 h-8 text-blue-500 animate-pulse mx-auto mb-4"}),n.jsx("p",{className:"text-slate-700 font-medium",children:"Loading grants..."})]})}):o&&o.length>0?n.jsxs(n.Fragment,{children:[p==="grid"?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8",children:o.map(D=>n.jsx(Xw,{grant:D,session:w,isSaved:_.has(D.id),onSave:k,onUnsave:C,onOpenDetailModal:E,onFilterByCategory:A},D.id))}):n.jsx("div",{className:"space-y-4 mb-8",children:o.map(D=>n.jsx(Coe,{grant:D,session:w,isSaved:_.has(D.id),onSave:k,onUnsave:C,onOpenDetailModal:E},D.id))}),b>0&&n.jsx(k0,{currentPage:v,totalPages:b,onPageChange:N})]}):n.jsxs("div",{className:"text-center py-16 relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-5",children:n.jsx(ot,{size:200,className:"text-slate-400"})}),n.jsxs("div",{className:"relative bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{size:40,className:"text-slate-400"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"No grants found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"Try adjusting your search criteria or removing a filter to see more results."}),n.jsxs("button",{onClick:j,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(sl,{size:16,className:"mr-2"}),"Clear All Filters"]})]})]})]}),Eoe=({isOpen:t,onClose:e,onConfirm:s,grantTitle:r})=>{const[a,i]=y.useState(""),[o,c]=y.useState(!1);if(!t)return null;const d=async()=>{c(!0);const m=await s(a);c(!1),m&&i("")},h=()=>{i(""),e()};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-100 to-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(zn,{size:32,className:"text-orange-500"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Ready to Apply? 🚀"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:["Awesome! You're taking the next step. We'll mark ",n.jsx("strong",{children:r})," as applied in your tracking system."]}),n.jsx("textarea",{placeholder:"Add any notes about your application (optional)",value:a,onChange:m=>i(m.target.value),rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 mb-6 resize-none"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:h,disabled:o,className:"flex-1 px-4 py-3 text-slate-600 hover:text-slate-800 font-semibold rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:"Not Yet"}),n.jsx("button",{onClick:d,disabled:o,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-amber-600 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Marking..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zn,{size:16}),"Yes, I Applied!"]})})]})]})})})},Aoe=({isOpen:t,onClose:e,onConfirm:s,grantTitle:r})=>{const[a,i]=y.useState(""),[o,c]=y.useState(""),[d,h]=y.useState(!1);if(!t)return null;const m=async()=>{h(!0);const g=a?parseFloat(a):null,b=await s(g,o);h(!1),b&&(i(""),c(""))},p=()=>{i(""),c(""),e()};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ro,{size:32,className:"text-green-500"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Congratulations! 🎉"}),n.jsxs("p",{className:"text-slate-600 mb-4",children:["Amazing news! You received funding for ",n.jsx("strong",{children:r}),". This is huge!"]}),n.jsx("input",{type:"number",placeholder:"Award amount (optional)",value:a,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 mb-4"}),n.jsx("textarea",{placeholder:"Add any notes about the award (optional)",value:o,onChange:g=>c(g.target.value),rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 mb-6 resize-none"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:p,disabled:d,className:"flex-1 px-4 py-3 text-slate-600 hover:text-slate-800 font-semibold rounded-xl hover:bg-slate-100 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:m,disabled:d,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Celebrating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ro,{size:16}),"Mark as Received!"]})})]})]})})})},Toe=({grant:t,onOpenDetailModal:e,onMarkAsApplied:s,onMarkAsReceived:r,onRemoveApplication:a,activeSection:i})=>{var k,C,E,A;const[o,c]=y.useState(!1),[d,h]=y.useState(!1),[m,p]=y.useState(!1),g=t.application_id,b=t.award_id,v=async(M="")=>{const R=await s(t.id,M);return R&&c(!1),R},N=async(M=null,R="")=>{const D=await r(t.id,M,R);return D&&h(!1),D},j=async()=>{const M=await a(t.id);return M&&p(!1),M},w=M=>{if(!M||M==="Not specified")return"Amount not specified";if(typeof M=="string"&&M.includes("$"))return M;const R=typeof M=="string"?parseInt(M):M;return R>=1e6?`$${(R/1e6).toFixed(1)}M`:R>=1e3?`$${(R/1e3).toFixed(0)}K`:`$${(R==null?void 0:R.toLocaleString())||"Not specified"}`},_=M=>{const R=M.split(" ");return R.length>1?(R[0][0]+R[R.length-1][0]).toUpperCase():M.substring(0,2).toUpperCase()};return n.jsxs("div",{className:"relative group",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 hover:shadow-xl transition-all duration-300 ease-in-out flex flex-col justify-between transform hover:-translate-y-1 relative overflow-hidden h-full",children:[n.jsxs("div",{className:"absolute top-3 right-3 z-10 flex flex-col items-end gap-2",children:[i==="applications"&&g&&n.jsxs("button",{onClick:M=>{M.stopPropagation(),p(!0)},className:"flex items-center gap-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white text-xs font-medium rounded-md shadow-sm transition-all duration-200 transform hover:scale-105",title:"Undo Application",children:[n.jsx(Tb,{size:12}),"Undo"]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[g&&n.jsxs("div",{className:"bg-orange-300 text-orange-800 text-xs font-bold px-2 py-0.5 rounded-full shadow-sm flex items-center gap-1",children:[n.jsx(zn,{size:10}),"Applied"]}),b&&n.jsxs("div",{className:"bg-gradient-to-r from-green-400 to-green-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm flex items-center gap-1",children:[n.jsx(Ro,{size:10}),"Received"]})]})]}),n.jsxs("div",{onClick:()=>e(t),className:"cursor-pointer p-6 flex-grow",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border-2 border-slate-100 shadow-sm flex-shrink-0",children:(k=t.organization)!=null&&k.image_url?n.jsx("img",{src:t.organization.image_url,alt:`${t.foundationName} logo`,className:"w-full h-full object-contain bg-white"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-400 flex items-center justify-center",children:n.jsx(Ut,{className:"w-6 h-6 text-white"})})}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsx("p",{className:"font-semibold text-slate-800 text-sm truncate",children:t.foundationName}),t.grantType&&n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:t.grantType})]})]}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 transition-all duration-300 leading-tight",children:t.title}),n.jsx("p",{className:"text-slate-600 text-sm mb-4 line-clamp-3 leading-relaxed",children:t.description}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 px-3 py-2 rounded-lg",children:[n.jsx(an,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-bold text-green-700 text-sm",children:w(t.fundingAmount)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(bs,{className:"w-4 h-4 text-red-500"}),n.jsxs("span",{className:"font-medium",children:["Due: ",t.dueDate?new Date(t.dueDate).toLocaleDateString():"Rolling"]})]})]}),i==="applications"&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-100 rounded-lg mb-4",children:[n.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden flex-shrink-0 border-2 border-white shadow-sm",children:(C=t.applicant_profile)!=null&&C.avatar_url?n.jsx("img",{src:t.applicant_profile.avatar_url,alt:t.applicant_profile.full_name||"Applicant",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-bold",children:_(((E=t.applicant_profile)==null?void 0:E.full_name)||t.applied_by_name||"Team Member")})})}),n.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:["Applied by ",((A=t.applicant_profile)==null?void 0:A.full_name)||t.applied_by_name||"Team Member"]}),t.applied_date&&n.jsx("span",{className:"text-xs text-blue-600 ml-auto",children:new Date(t.applied_date).toLocaleDateString()})]})]}),n.jsxs("div",{className:"px-6 pb-6 flex gap-2",children:[i==="saved"&&n.jsx(n.Fragment,{children:g?b?n.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-slate-400 to-slate-500 text-white font-semibold rounded-xl",children:[n.jsx(Ro,{size:14}),"Completed"]}):n.jsxs("button",{onClick:M=>{M.stopPropagation(),h(!0)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:[n.jsx(Ro,{size:14}),"Mark Received"]}):n.jsxs("button",{onClick:M=>{M.stopPropagation(),c(!0)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:[n.jsx(zn,{size:14}),"Mark Applied"]})}),n.jsxs("button",{onClick:M=>{M.stopPropagation(),e(t)},className:`${i==="saved"?"px-4":"flex-1"} flex items-center justify-center gap-2 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 transform hover:scale-105`,children:[n.jsx(Xt,{size:14}),"Details"]})]})]}),n.jsx(Eoe,{isOpen:o,onClose:()=>c(!1),onConfirm:v,grantTitle:t.title}),n.jsx(Aoe,{isOpen:d,onClose:()=>h(!1),onConfirm:N,grantTitle:t.title}),m&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-100 to-red-200 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Tb,{size:32,className:"text-red-500"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Undo Application? 🤔"}),n.jsxs("p",{className:"text-slate-600 mb-6",children:["This will remove ",n.jsx("strong",{children:t.title})," from your applications and move it back to saved grants. Are you sure?"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:text-slate-800 font-semibold rounded-xl hover:bg-slate-100 transition-all",children:"Keep Applied"}),n.jsxs("button",{onClick:j,className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(Tb,{size:16}),"Yes, Undo"]})]})]})})})]})},Moe=({applications:t=[]})=>{const e=t.reduce((a,i)=>{const o=i.amount.replace(/[$,KM]/g,""),c=i.amount.includes("K")?1e3:i.amount.includes("M")?1e6:1;return a+parseFloat(o)*c},0),s=t.filter(a=>a.nextDeadline?Math.random()>.6:!1).length,r=a=>a>=1e6?`$${(a/1e6).toFixed(1)}M`:a>=1e3?`$${(a/1e3).toFixed(0)}K`:`$${a.toLocaleString()}`;return n.jsxs("div",{className:"bg-gradient-to-r from-pink-200 via-purple-200 to-blue-200 text-slate-800 rounded-xl p-6 shadow-lg border border-pink-200",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2 text-slate-900",children:"Application Dashboard"}),n.jsx("p",{className:"text-purple-700 mb-6",children:"Comprehensive grant application tracking and team collaboration"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-white/40 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(zn,{size:20,className:"text-pink-600"}),n.jsx("span",{className:"font-medium text-slate-700",children:"Active Applications"})]}),n.jsx("span",{className:"text-2xl font-bold text-slate-900",children:t.length})]}),n.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-white/40 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(an,{size:20,className:"text-purple-600"}),n.jsx("span",{className:"font-medium text-slate-700",children:"Total Applied"})]}),n.jsx("span",{className:"text-2xl font-bold text-slate-900",children:r(e)})]}),n.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-white/40 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(aa,{size:20,className:"text-blue-600"}),n.jsx("span",{className:"font-medium text-slate-700",children:"Pending Deadlines"})]}),n.jsx("span",{className:"text-2xl font-bold text-slate-900",children:s})]})]})]})},Ooe=({phases:t,currentPhase:e,totalPhases:s,nextDeadline:r,onToggleDocuments:a})=>{const i=(o,c)=>{const d=["from-blue-400 to-blue-500","from-green-400 to-green-500","from-purple-400 to-purple-500","from-orange-400 to-orange-500","from-pink-400 to-pink-500","from-indigo-400 to-indigo-500","from-teal-400 to-teal-500"];return o==="completed"?`bg-gradient-to-r ${d[c%d.length]} text-white`:o==="current"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gradient-to-r from-slate-100 to-slate-200 text-slate-400"};return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:["Application Progress: Phase ",e," of ",s]}),r&&n.jsxs("span",{className:"text-sm font-medium text-red-600 flex items-center gap-1 bg-red-50 px-2 py-1 rounded-md",children:[n.jsx(aa,{size:14}),r]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:t.slice(0,7).map((o,c)=>n.jsxs("div",{className:"flex flex-col items-center relative z-10 max-w-24",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 shadow-sm ${i(o.status,c)}`,children:o.status==="completed"?n.jsx(Ks,{size:16}):o.status==="current"?n.jsx(aa,{size:16}):n.jsx("div",{className:"w-3 h-3 bg-current rounded-full opacity-50"})}),n.jsxs("div",{className:"mt-2 text-center",children:[n.jsx("div",{className:`text-xs font-medium mb-1 ${o.status==="completed"?"text-slate-700":o.status==="current"?"text-blue-700":"text-slate-500"}`,children:o.name}),o.date!=="TBD"&&n.jsx("div",{className:"text-xs text-slate-400 mb-1",children:o.date}),(o.status==="completed"||o.status==="current")&&n.jsxs("button",{onClick:()=>a(o.id),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1 bg-blue-50 px-1 py-0.5 rounded transition-colors",children:[n.jsx(k3,{size:10}),"Docs"]})]})]},o.id))}),n.jsx("div",{className:"absolute top-5 left-5 right-5 h-1 bg-slate-200 rounded-full -z-10",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-green-500 rounded-full transition-all duration-1000",style:{width:`${(e-1)/(s-1)*100}%`}})})]})]})},Roe=({phases:t,applicationId:e,showDocuments:s,onClose:r})=>{const a=o=>({1:[{id:1,name:"Requirements Checklist.pdf",uploadDate:"7/28/2025",size:"2.4 MB",type:"checklist"},{id:2,name:"Budget Template.xlsx",uploadDate:"7/29/2025",size:"1.8 MB",type:"budget"}],2:[{id:3,name:"Draft Application v1.docx",uploadDate:"7/30/2025",size:"5.2 MB",type:"draft"},{id:4,name:"Supporting Materials.pdf",uploadDate:"8/1/2025",size:"3.1 MB",type:"support"}],3:[{id:5,name:"Final Application.pdf",uploadDate:"8/4/2025",size:"4.7 MB",type:"final"},{id:6,name:"Submission Confirmation.pdf",uploadDate:"8/4/2025",size:"856 KB",type:"confirmation"}]})[o]||[],i=(o,c)=>{const d=["from-blue-400 to-blue-500","from-green-400 to-green-500","from-purple-400 to-purple-500","from-orange-400 to-orange-500","from-pink-400 to-pink-500","from-indigo-400 to-indigo-500","from-teal-400 to-teal-500"];return`bg-gradient-to-br ${d[c%d.length]}`};return Object.keys(s).some(o=>o.startsWith(e.toString())&&s[o])?n.jsxs("div",{className:"mt-4 bg-gradient-to-r from-slate-50 to-blue-50 rounded-lg p-4 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[n.jsx(k3,{size:16}),"Phase Documents"]}),n.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:n.jsx(Ke,{size:16})})]}),t.map(o=>{const c=`${e}-${o.id}`;if(!s[c])return null;const d=a(o.id);return n.jsxs("div",{className:"mb-4",children:[n.jsxs("h5",{className:"font-medium text-slate-600 mb-2 flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${i(o.status,o.id-1)}`}),o.name]}),n.jsxs("div",{className:"space-y-2",children:[d.map(h=>n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-md p-3 border border-slate-200 hover:border-blue-300 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zn,{size:16,className:"text-blue-500"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-slate-900",children:h.name}),n.jsxs("div",{className:"text-xs text-slate-500",children:[h.size," • ",h.uploadDate]})]})]}),n.jsx("button",{className:"text-blue-600 hover:text-blue-700 p-1 hover:bg-blue-50 rounded transition-colors",children:n.jsx(X$,{size:16})})]},h.id)),n.jsxs("button",{className:"w-full border-2 border-dashed border-slate-300 rounded-md p-4 text-sm text-slate-600 hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50/50 transition-all flex items-center justify-center gap-2",children:[n.jsx(w0,{size:16}),"Upload Document for ",o.name]})]})]},o.id)})]}):null},Doe=({teamMembers:t,unreadComments:e,onToggleComments:s,onAddMember:r})=>n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:["Team Members (",t.length,")"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1 px-3 py-1 hover:bg-blue-50 rounded-md transition-colors",children:[n.jsx(Jn,{size:14}),"Comments",e>0&&n.jsx("span",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center ml-1",children:e})]}),n.jsxs("button",{onClick:r,className:"text-sm text-green-600 hover:text-green-700 font-medium flex items-center gap-1 px-3 py-1 hover:bg-green-50 rounded-md transition-colors",children:[n.jsx($s,{size:14}),"Add Member"]})]})]}),n.jsx("div",{className:"flex items-center gap-3 flex-wrap",children:t.map(a=>n.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-slate-50 to-blue-50 rounded-lg px-4 py-3 border border-slate-200 hover:border-blue-300 transition-colors",children:[n.jsxs("div",{className:"relative",children:[a.avatar?n.jsx("img",{src:a.avatar,alt:a.name,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center border-2 border-white shadow-sm",children:n.jsx("span",{className:"text-white text-sm font-bold",children:a.initials})}),a.isOnline&&n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:a.name}),n.jsx("div",{className:"text-xs text-slate-500",children:a.role})]})]},a.id))})]}),Poe=({applicationId:t,isVisible:e,onClose:s,newComment:r,onCommentChange:a,onCommentSubmit:i,teamMembers:o=[]})=>{const[c,d]=y.useState(null),[h,m]=y.useState(!1),[p,g]=y.useState(""),b=y.useRef(null),v=y.useRef(null),N=()=>[{id:1,user:"Sarah Chen",userInitials:"SC",userAvatar:null,message:"Updated the budget section based on finance team feedback. @Mike can you review the revised numbers?",timestamp:"2 hours ago",isRead:!0,reactions:[{emoji:"👍",count:2,users:["Mike Johnson","Alex Rivera"]},{emoji:"✅",count:1,users:["You"]}],replies:[{id:11,user:"Mike Johnson",userInitials:"MJ",message:"Looks good! The numbers align with our quarterly projections.",timestamp:"1 hour ago",isRead:!0}]},{id:2,user:"Mike Johnson",userInitials:"MJ",userAvatar:null,message:"Great work on the narrative section! I added some additional metrics to strengthen our case. The new data shows a 40% improvement in community engagement.",timestamp:"1 day ago",isRead:!0,reactions:[{emoji:"🎉",count:3,users:["Sarah Chen","Alex Rivera","You"]}],replies:[]},{id:3,user:"Alex Rivera",userInitials:"AR",userAvatar:null,message:"@Sarah Can you review the timeline section? I think we need to adjust the delivery dates to be more realistic given our current capacity.",timestamp:"2 days ago",isRead:!1,reactions:[{emoji:"🤔",count:1,users:["Sarah Chen"]}],replies:[{id:31,user:"Sarah Chen",userInitials:"SC",message:"Good point! I'll extend Phase 2 by two weeks to account for the additional research time.",timestamp:"2 days ago",isRead:!0}]}],[j,w]=y.useState(N());y.useEffect(()=>{e&&setTimeout(()=>{var A;(A=v.current)==null||A.scrollIntoView({behavior:"smooth"})},100)},[e,j]);const _=A=>{a(A);const M=A.lastIndexOf("@");if(M!==-1){const R=A.slice(M+1),D=R.indexOf(" "),L=D===-1?R:R.slice(0,D);L.length>0?(g(L.toLowerCase()),m(!0)):m(!1)}else m(!1)},k=A=>{var z;const M=r||"",R=M.lastIndexOf("@"),D=M.slice(0,R),L=M.slice(R+1),B=L.indexOf(" "),O=B===-1?"":L.slice(B),P=`${D}@${A.name}${O} `;a(P),m(!1),(z=b.current)==null||z.focus()},C=o.filter(A=>A.name.toLowerCase().includes(p)),E=(A,M)=>{w(R=>R.map(D=>{if(D.id===A){const L=D.reactions.find(B=>B.emoji===M);return L?L.users.includes("You")?{...D,reactions:D.reactions.map(B=>B.emoji===M?{...B,count:B.count-1,users:B.users.filter(O=>O!=="You")}:B).filter(B=>B.count>0)}:{...D,reactions:D.reactions.map(B=>B.emoji===M?{...B,count:B.count+1,users:[...B.users,"You"]}:B)}:{...D,reactions:[...D.reactions,{emoji:M,count:1,users:["You"]}]}}return D}))};return e?n.jsx("div",{className:"mt-4 bg-gradient-to-r from-slate-50 to-blue-50 rounded-lg border border-slate-200 relative",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[n.jsx(Jn,{size:16}),"Team Discussion",n.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full",children:[j.length," comments"]})]}),n.jsx("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-white/50 rounded-md transition-colors",children:n.jsx(Ke,{size:16})})]}),n.jsxs("div",{className:"space-y-4 max-h-80 overflow-y-auto mb-4 pr-2",children:[j.map(A=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs font-bold",children:A.userInitials})}),n.jsxs("div",{className:"flex-1 bg-white rounded-lg p-3 border border-slate-200 hover:border-blue-300 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"font-medium text-sm text-slate-900",children:A.user}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:A.timestamp}),!A.isRead&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),n.jsx("p",{className:"text-sm text-slate-700 mb-2",children:A.message}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[A.reactions.map(M=>n.jsxs("button",{onClick:()=>E(A.id,M.emoji),className:`text-xs px-2 py-1 rounded-full transition-colors ${M.users.includes("You")?"bg-blue-100 text-blue-700 border border-blue-300":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[M.emoji," ",M.count]},M.emoji)),n.jsx("button",{onClick:()=>E(A.id,"👍"),className:"text-xs px-2 py-1 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 transition-colors",children:"+"})]}),n.jsxs("button",{onClick:()=>d(c===A.id?null:A.id),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(M3,{size:12}),"Reply"]})]})]})]}),A.replies.length>0&&n.jsx("div",{className:"ml-8 space-y-2",children:A.replies.map(M=>n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-teal-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs font-bold",children:M.userInitials})}),n.jsxs("div",{className:"flex-1 bg-white/70 rounded-lg p-2 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"font-medium text-xs text-slate-900",children:M.user}),n.jsx("span",{className:"text-xs text-slate-500",children:M.timestamp})]}),n.jsx("p",{className:"text-xs text-slate-700",children:M.message})]})]},M.id))}),c===A.id&&n.jsx("div",{className:"ml-8",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"Y"})}),n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Write a reply...",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",onKeyPress:M=>{M.key==="Enter"&&M.target.value.trim()&&(d(null),M.target.value="")}}),n.jsx("button",{onClick:()=>d(null),className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-colors shadow-sm",children:n.jsx(Cc,{size:12})})]})]})})]},A.id)),n.jsx("div",{ref:v})]}),n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"Y"})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("textarea",{ref:b,placeholder:"Add a comment... Use @ to mention team members",value:r||"",onChange:A=>_(A.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white resize-none",rows:"2",onKeyPress:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),i())}}),h&&C.length>0&&n.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-1 bg-white border border-slate-200 rounded-lg shadow-lg z-10 max-h-32 overflow-y-auto",children:C.map(A=>n.jsxs("button",{onClick:()=>k(A),className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-blue-50 text-left text-sm",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-bold",children:A.initials})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:A.name}),n.jsx("div",{className:"text-xs text-slate-500",children:A.role})]})]},A.id))}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"p-1 text-slate-400 hover:text-slate-600 rounded-md hover:bg-slate-100 transition-colors",children:n.jsx(Fw,{size:14})}),n.jsx("button",{className:"p-1 text-slate-400 hover:text-slate-600 rounded-md hover:bg-slate-100 transition-colors",children:n.jsx(HF,{size:14})}),n.jsx("button",{className:"p-1 text-slate-400 hover:text-slate-600 rounded-md hover:bg-slate-100 transition-colors",children:n.jsx(P3,{size:14})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Press Enter to send, Shift+Enter for new line"}),n.jsx("button",{onClick:i,disabled:!(r!=null&&r.trim()),className:"px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:n.jsx(Cc,{size:14})})]})]})]})]})})]})}):null},zoe=({application:t,onMarkAsReceived:e,onRemoveApplication:s})=>{const[r,a]=y.useState(!1);return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!r),className:"px-4 py-3 bg-gradient-to-r from-purple-100 to-pink-100 text-slate-700 rounded-lg text-sm font-medium hover:from-purple-200 hover:to-pink-200 transition-all border border-slate-300 flex items-center gap-2 shadow-sm",children:["Actions",n.jsx(x0,{size:16})]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-20 min-w-48",children:[n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-slate-50 text-slate-700 flex items-center gap-2",children:[n.jsx(dI,{size:14}),"Update Status"]}),n.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-slate-50 text-slate-700 flex items-center gap-2",children:[n.jsx(Vo,{size:14}),"Set Reminder"]}),n.jsxs("button",{onClick:()=>{e(t.id),a(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-green-50 text-green-700 flex items-center gap-2",children:[n.jsx(Ro,{size:14}),"Mark as Received"]}),n.jsx("div",{className:"border-t border-slate-200"}),n.jsxs("button",{onClick:()=>{s(t.id),a(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-red-50 text-red-600 flex items-center gap-2",children:[n.jsx(Ke,{size:14}),"Withdraw Application"]})]})]})]})},Loe=({isVisible:t,onClose:e})=>{const[s,r]=y.useState(""),[a,i]=y.useState("reviewer"),o=()=>{s.trim()&&(console.log("Inviting team member:",{email:s,role:a}),r(""),i("reviewer"),e())};return t?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full shadow-2xl",children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Add Team Member"}),n.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(Ke,{size:20})})]})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),n.jsx("input",{type:"email",placeholder:"Enter team member's email",value:s,onChange:c=>r(c.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role"}),n.jsxs("select",{value:a,onChange:c=>i(c.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"reviewer",children:"Reviewer"}),n.jsx("option",{value:"writer",children:"Writer"}),n.jsx("option",{value:"lead",children:"Lead"}),n.jsx("option",{value:"observer",children:"Observer"})]})]})]})}),n.jsx("div",{className:"p-6 border-t border-slate-200 bg-slate-50 rounded-b-xl",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 text-slate-600 hover:text-slate-800 font-medium rounded-lg hover:bg-slate-100 transition-all",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:!s.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Invitation"})]})})]})}):null},$oe=({applications:t=[],onOpenDetailModal:e,onMarkAsReceived:s,onRemoveApplication:r})=>{const[a,i]=y.useState({}),[o,c]=y.useState({}),[d,h]=y.useState({}),[m,p]=y.useState(!1),g=t.map((O,P)=>{var q;const z=Math.min(P%5+3,7);return{id:O.id,title:O.title,organization:O.foundationName,amount:b(O.fundingAmount),logoUrl:(q=O.organization)==null?void 0:q.image_url,currentPhase:z,totalPhases:7,status:N(z),dueDate:O.dueDate||"Rolling",appliedDate:O.applied_date||"8/4/2025",expectedAwardDate:j(P),fundingQuarter:w(P),applicantCount:v(O.id),teamMembers:_(O,P),phases:k(z),nextAction:C(z),nextDeadline:E(z,P),unreadComments:Math.floor(Math.random()*3),completionPercentage:Math.round(z/7*100)}});function b(O){if(!O||O==="Not specified")return"Amount not specified";if(typeof O=="string"&&O.includes("$"))return O;const P=typeof O=="string"?parseInt(O):O;return P>=1e6?`${(P/1e6).toFixed(1)}M`:P>=1e3?`${(P/1e3).toFixed(0)}K`:`${(P==null?void 0:P.toLocaleString())||"Not specified"}`}function v(){return Math.floor(Math.random()*150)+10}function N(O){return{1:"Requirements Review",2:"Drafting Application",3:"Recently Submitted",4:"Under Funder Review",5:"Awaiting Response",6:"Decision Pending",7:"Award Process"}[O]||"In Progress"}function j(O){const P=["Q4 2025","Q1 2026","Q2 2026","Q3 2026"];return P[O%P.length]}function w(O){const P=["Q4 2025","Q1 2026","Q2 2026"];return P[O%P.length]}function _(O,P){return[{id:1,name:"Sarah Chen",avatar:null,initials:"SC",role:"Lead",isOnline:!0},{id:2,name:"Mike Johnson",avatar:null,initials:"MJ",role:"Writer",isOnline:!1},{id:3,name:"Alex Rivera",avatar:null,initials:"AR",role:"Reviewer",isOnline:!0}].slice(0,P%3+1)}function k(O){return[{id:1,name:"Review Requirements",status:"completed",date:"7/28/2025",description:"Research requirements and prepare documentation"},{id:2,name:"Draft Application",status:"completed",date:"8/1/2025",description:"Write application and gather supporting materials"},{id:3,name:"Submit Application",status:"completed",date:"8/4/2025",description:"Final review and official submission"},{id:4,name:"Funder Review",status:"pending",date:"TBD",description:"Application under review by grant committee"},{id:5,name:"Response/Modifications",status:"pending",date:"TBD",description:"Address funder feedback and questions"},{id:6,name:"Award Decision",status:"pending",date:"TBD",description:"Final award determination by board"},{id:7,name:"Award Letter",status:"pending",date:"TBD",description:"Official award notification and compliance setup"}].map((z,q)=>({...z,status:q<O?"completed":q===O-1?"current":"pending"}))}function C(O){return{1:"Complete requirements checklist and gather documentation",2:"Finalize application draft and prepare supporting materials",3:"Application submitted - waiting for acknowledgment from funder",4:"Under review by grant committee - no action required",5:"Prepare for potential funder questions or modification requests",6:"Awaiting final decision from board review",7:"Prepare for award acceptance and compliance requirements"}[O]||"Monitor application status"}function E(O,P){if(O<=3)return null;const z=["Response deadline: 9/15/2025","Board decision: 9/30/2025","Award notification: 10/15/2025","Funding start: Q4 2025"];return z[P%z.length]}const A=O=>{i(P=>({...P,[O]:!P[O]}))},M=(O,P)=>{c(z=>({...z,[O]:P}))},R=O=>{var P;(P=o[O])!=null&&P.trim()&&(console.log("New comment:",o[O]),c(z=>({...z,[O]:""})))},D=(O,P)=>{const z=`${O}-${P}`;h(q=>({...q,[z]:!q[z]}))},L=()=>{h({})},B=({application:O})=>n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 hover:shadow-lg transition-all duration-300 p-6 mb-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-6 border border-blue-100",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[O.logoUrl?n.jsx("img",{src:O.logoUrl,alt:"Organization logo",className:"w-12 h-12 rounded-lg object-cover border-2 border-white shadow-sm"}):n.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center border-2 border-white shadow-sm",children:n.jsx(Ut,{size:20,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:O.title}),n.jsx("p",{className:"text-slate-600",children:O.organization}),n.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[n.jsxs("span",{className:"text-sm text-slate-500",children:["Status: ",O.status]}),n.jsx("span",{className:"text-sm text-slate-500",children:"•"}),n.jsxs("span",{className:"text-sm text-slate-500",children:[O.applicantCount," total applicants"]}),n.jsx("span",{className:"text-sm text-slate-500",children:"•"}),n.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[O.completionPercentage,"% complete"]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-1",children:O.amount}),n.jsxs("div",{className:"text-sm text-slate-600",children:["Expected: ",O.expectedAwardDate]}),n.jsxs("div",{className:"text-xs text-slate-500",children:["Funding: ",O.fundingQuarter]})]})]})}),n.jsx(Ooe,{phases:O.phases,currentPhase:O.currentPhase,totalPhases:O.totalPhases,nextDeadline:O.nextDeadline,onToggleDocuments:P=>D(O.id,P)}),n.jsx(Roe,{phases:O.phases,applicationId:O.id,showDocuments:d,onClose:L}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(cy,{size:18,className:"text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Next Action Required"}),n.jsx("p",{className:"text-sm text-blue-700",children:O.nextAction})]})]})}),n.jsx(Doe,{teamMembers:O.teamMembers,unreadComments:O.unreadComments,onToggleComments:()=>A(O.id),onAddMember:()=>p(!0)}),n.jsx(Poe,{applicationId:O.id,isVisible:a[O.id],onClose:()=>A(O.id),newComment:o[O.id],onCommentChange:P=>M(O.id,P),onCommentSubmit:()=>R(O.id)}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>e(O),className:"flex-1 bg-gradient-to-r from-slate-100 to-blue-100 text-slate-700 px-4 py-3 rounded-lg text-sm font-medium hover:from-slate-200 hover:to-blue-200 transition-all flex items-center justify-center gap-2 border border-slate-300 shadow-sm",children:[n.jsx(pn,{size:16}),"View Full Details"]}),n.jsx(zoe,{application:O,onMarkAsReceived:s,onRemoveApplication:r})]})]});return n.jsxs("div",{className:"space-y-6",children:[n.jsx(Moe,{applications:g}),g.length>0?n.jsx("div",{className:"space-y-6",children:g.map(O=>n.jsx(B,{application:O},O.id))}):n.jsx("div",{className:"text-center py-16",children:n.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 p-12 rounded-3xl border border-slate-200 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-400 to-purple-400 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(zn,{size:40,className:"text-white"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"No applications yet"}),n.jsx("p",{className:"text-slate-600",children:"Start applying to grants to see your comprehensive application dashboard with team collaboration features."})]})}),n.jsx(Loe,{isVisible:m,onClose:()=>p(!1)})]})},Foe=(t,e)=>{var p,g,b,v;const[s,r]=y.useState(!1),[a,i]=y.useState({saved:[],applications:[],received:[]}),o=async(N,j)=>{if(!j||j.length===0)return[];try{const{data:w,error:_}=await $.from("grants").select("*").in("id",j);if(_)return console.error("Error fetching grants:",_),[];const k=[...new Set((w==null?void 0:w.map(R=>R.organization_id).filter(Boolean))||[])];let C=[];if(k.length>0){const{data:R}=await $.from("organizations").select("id, name, image_url, banner_image_url, slug").in("id",k);C=R||[]}const{data:E}=await $.from("grant_categories").select("grant_id, categories(id, name)").in("grant_id",j),{data:A}=await $.from("grant_locations").select("grant_id, locations(id, name)").in("grant_id",j),M=await Su(j);return N.map(R=>{const D=w==null?void 0:w.find(P=>P.id===R.grant_id);if(!D)return null;const L=C==null?void 0:C.find(P=>P.id===D.organization_id),B=(E||[]).filter(P=>P.grant_id===R.grant_id),O=(A||[]).filter(P=>P.grant_id===R.grant_id);return{...D,...R,foundationName:(L==null?void 0:L.name)||"Unknown Organization",funderLogoUrl:(L==null?void 0:L.image_url)||null,fundingAmount:D.max_funding_amount||D.funding_amount_text||"Not specified",dueDate:D.deadline,grantType:D.grant_type,categories:B.map(P=>P.categories).filter(Boolean),locations:O.map(P=>P.locations).filter(Boolean),eligibility_criteria:D.eligibility_criteria,save_count:M[R.grant_id]||0,organization:{image_url:(L==null?void 0:L.image_url)||null,banner_image_url:(L==null?void 0:L.banner_image_url)||null,name:(L==null?void 0:L.name)||"Unknown Organization"}}}).filter(Boolean)}catch(w){return console.error("Error in buildGrantData:",w),[]}},c=y.useCallback(async()=>{var N,j;if((N=t==null?void 0:t.user)!=null&&N.id)try{const{data:w,error:_}=await $.from("saved_grants").select("id, grant_id, created_at").eq("user_id",t.user.id).order("created_at",{ascending:!1});if(_){console.error("Error fetching saved grants:",_),i(L=>({...L,saved:[]}));return}if(!w||w.length===0){i(L=>({...L,saved:[]}));return}let k=$.from("grant_applications").select("grant_id");e!=null&&e.role&&["super_admin","admin"].includes(e.role)&&((j=e==null?void 0:e.organizations)!=null&&j.id)?k=k.eq("organization_id",e.organizations.id):k=k.eq("user_id",t.user.id);const{data:C}=await k,E=new Set((C==null?void 0:C.map(L=>L.grant_id))||[]),A=w.filter(L=>!E.has(L.grant_id));if(A.length===0){i(L=>({...L,saved:[]}));return}const M=A.map(L=>L.grant_id),R=A.map(L=>({grant_id:L.grant_id,save_id:L.id,saved_date:L.created_at})),D=await o(R,M);i(L=>({...L,saved:D}))}catch(w){console.error("Error in loadSavedGrants:",w),i(_=>({..._,saved:[]}))}},[(p=t==null?void 0:t.user)==null?void 0:p.id,e]),d=y.useCallback(async()=>{var N,j;if((N=t==null?void 0:t.user)!=null&&N.id)try{let w=$.from("grant_applications").select("id, grant_id, status, applied_date, notes, user_id, organization_id");e!=null&&e.role&&["super_admin","admin"].includes(e.role)&&((j=e==null?void 0:e.organizations)!=null&&j.id)?w=w.eq("organization_id",e.organizations.id):w=w.eq("user_id",t.user.id);const{data:_,error:k}=await w.order("applied_date",{ascending:!1});if(k){if(console.error("Error fetching applications:",k),k.code==="42P01"||k.message.includes("does not exist")){i(M=>({...M,applications:[]}));return}i(M=>({...M,applications:[]}));return}if(!_||_.length===0){i(M=>({...M,applications:[]}));return}const C=_.map(M=>M.grant_id),E=_.map(M=>({grant_id:M.grant_id,application_id:M.id,application_status:M.status,applied_date:M.applied_date,application_notes:M.notes})),A=await o(E,C);i(M=>({...M,applications:A}))}catch(w){console.error("Error in loadApplications:",w),i(_=>({..._,applications:[]}))}},[(g=t==null?void 0:t.user)==null?void 0:g.id,e]),h=y.useCallback(async()=>{var N,j;if((N=t==null?void 0:t.user)!=null&&N.id)try{let w=$.from("grant_awards").select("id, grant_id, award_amount, award_date, status, notes");e!=null&&e.role&&["super_admin","admin"].includes(e.role)&&((j=e==null?void 0:e.organizations)!=null&&j.id)?w=w.eq("organization_id",e.organizations.id):w=w.eq("user_id",t.user.id);const{data:_,error:k}=await w.order("award_date",{ascending:!1});if(k){if(console.error("Error fetching received grants:",k),k.code==="42P01"||k.message.includes("does not exist")){i(M=>({...M,received:[]}));return}i(M=>({...M,received:[]}));return}if(!_||_.length===0){i(M=>({...M,received:[]}));return}const C=_.map(M=>M.grant_id),E=_.map(M=>({grant_id:M.grant_id,award_id:M.id,award_amount:M.award_amount,award_date:M.award_date,award_status:M.status,award_notes:M.notes})),A=await o(E,C);i(M=>({...M,received:A}))}catch(w){console.error("Error in loadReceivedGrants:",w),i(_=>({..._,received:[]}))}},[(b=t==null?void 0:t.user)==null?void 0:b.id,e]),m=y.useCallback(async N=>{var j;if((j=t==null?void 0:t.user)!=null&&j.id){r(!0);try{switch(N){case"saved":await c();break;case"applications":await d();break;case"received":await h();break}}catch(w){console.error(`Error loading ${N} data:`,w)}finally{r(!1)}}},[c,d,h,(v=t==null?void 0:t.user)==null?void 0:v.id]);return{data:a,loading:s,loadSectionData:m,loadSavedGrants:c,loadApplications:d,loadReceivedGrants:h}},Ioe=(t,e,s)=>{var c,d,h;const r=y.useCallback(async(m,p="")=>{var g,b;if(!((g=t==null?void 0:t.user)!=null&&g.id))return!1;try{const{data:v}=await $.from("grant_applications").select("id").eq("grant_id",m).eq("user_id",t.user.id).maybeSingle();if(v)return!1;const N=((b=e==null?void 0:e.organizations)==null?void 0:b.id)||null,{data:j,error:w}=await $.from("grant_applications").insert({grant_id:m,user_id:t.user.id,organization_id:N,status:"submitted",applied_date:new Date().toISOString(),notes:p||"Marked as applied via portal"}).select().single();return w?(console.error("Error marking as applied:",w),!1):(s!=null&&s.loadApplications&&s.loadApplications(),s!=null&&s.loadSavedGrants&&s.loadSavedGrants(),!0)}catch(v){return console.error("Error in markAsApplied:",v),!1}},[(c=t==null?void 0:t.user)==null?void 0:c.id,e,s]),a=y.useCallback(async(m,p=null,g="")=>{var b,v;if(!((b=t==null?void 0:t.user)!=null&&b.id))return!1;try{const{data:N}=await $.from("grant_awards").select("id").eq("grant_id",m).eq("user_id",t.user.id).maybeSingle();if(N)return!1;const j=((v=e==null?void 0:e.organizations)==null?void 0:v.id)||null,{data:w,error:_}=await $.from("grant_awards").insert({grant_id:m,user_id:t.user.id,organization_id:j,award_amount:p,award_date:new Date().toISOString(),status:"active",notes:g||"Marked as received via portal"}).select().single();return _?(console.error("Error marking as received:",_),!1):(s!=null&&s.loadReceivedGrants&&s.loadReceivedGrants(),!0)}catch(N){return console.error("Error in markAsReceived:",N),!1}},[(d=t==null?void 0:t.user)==null?void 0:d.id,e,s]),i=y.useCallback(async m=>{var p,g;if(!((p=t==null?void 0:t.user)!=null&&p.id))return!1;try{const{data:b,error:v}=await $.from("grant_applications").select("*").eq("grant_id",m);if(v||!b||b.length===0)return!1;let N=null;if(e!=null&&e.role&&["super_admin","admin"].includes(e.role)&&((g=e==null?void 0:e.organizations)!=null&&g.id)&&(N=b.find(C=>C.grant_id===m&&C.organization_id===e.organizations.id)),N||(N=b.find(C=>C.grant_id===m&&C.user_id===t.user.id)),!N)return!1;const{data:j,error:w}=await $.from("grant_applications").delete().eq("id",N.id).select();let _=!w&&j&&j.length>0;const{data:k}=await $.from("saved_grants").select("id").eq("grant_id",m).eq("user_id",t.user.id).maybeSingle();return k||await $.from("saved_grants").insert({grant_id:m,user_id:t.user.id}),s!=null&&s.loadApplications&&s.loadApplications(),s!=null&&s.loadSavedGrants&&s.loadSavedGrants(),!0}catch(b){return console.error("Error in removeApplication:",b),!1}},[(h=t==null?void 0:t.user)==null?void 0:h.id,e,s]),o=y.useCallback(async m=>{try{const{error:p}=await $.from("grant_awards").delete().eq("id",m);return p?(console.error("Error removing award:",p),!1):(s!=null&&s.loadReceivedGrants&&s.loadReceivedGrants(),!0)}catch(p){return console.error("Error in removeAward:",p),!1}},[s]);return{markAsApplied:r,markAsReceived:a,removeApplication:i,removeAward:o}},Boe=(t,e)=>{const{searchTerm:s,locationFilter:r,categoryFilter:a,grantTypeFilter:i,grantStatusFilter:o}=e,c=(typeof s=="string"?s.trim():"").toLowerCase(),d=!c||(t.title||"").toLowerCase().includes(c)||(t.description||"").toLowerCase().includes(c)||(t.foundationName||"").toLowerCase().includes(c)||t.categories&&t.categories.some(w=>(w.name||"").toLowerCase().includes(c)),h=Array.isArray(r)?r.map(w=>w.toLowerCase().trim()):[],m=(t.locations||[]).map(w=>(w.name||"").toLowerCase().trim()),p=h.length===0||h.some(w=>m.includes(w)),g=Array.isArray(a)?a.map(w=>w.toLowerCase().trim()):[],b=(t.categories||[]).map(w=>(w.name||"").toLowerCase().trim()),v=g.length===0||g.some(w=>b.includes(w)),N=!i||t.grantType===i;let j=!0;if(o){const w=new Date;w.setHours(0,0,0,0);const _=t.dueDate;o==="Open"?j=!_||new Date(_)>=w:o==="Rolling"?j=!_:o==="Closed"&&(j=_&&new Date(_)<w)}return d&&p&&v&&N&&j},Uoe=({session:t,userMembership:e})=>{var ne,X;const[s,r]=y.useState("saved"),[a,i]=y.useState(null),[o,c]=y.useState(!1),[d,h]=y.useState(!1),[m,p]=y.useState({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc"}),[g,b]=y.useState(1),[v,N]=y.useState(12),{data:j,loading:w,loadSectionData:_,loadSavedGrants:k,loadApplications:C,loadReceivedGrants:E}=Foe(t,e),{markAsApplied:A,markAsReceived:M,removeApplication:R}=Ioe(t,e,{loadSavedGrants:k,loadApplications:C,loadReceivedGrants:E});y.useEffect(()=>{_(s),s==="saved"&&setTimeout(()=>{C(),E()},200)},[s,_,C,E]);const D=j[s]||[],L=y.useMemo(()=>D.filter(Q=>Boe(Q,m)),[D,m]),B=Math.ceil(L.length/v),O=y.useMemo(()=>{const Q=(g-1)*v,de=Q+v;return L.slice(Q,de)},[L,g,v]),P=y.useCallback((Q,de)=>{p(ve=>({...ve,[Q]:de})),b(1)},[]),z=y.useCallback(()=>{p({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc"}),b(1)},[]),q=y.useCallback(Q=>{i(Q),c(!0)},[]),I=y.useCallback(()=>{i(null),c(!1)},[]),V=y.useCallback(Q=>{Q>0&&Q<=B&&b(Q)},[B]),H=y.useMemo(()=>Array.from(new Set(D.flatMap(Q=>{var de;return((de=Q.categories)==null?void 0:de.map(ve=>ve.name))||[]}).filter(Boolean))).sort(),[D]),Y=y.useMemo(()=>Array.from(new Set(D.map(Q=>Q.grantType).filter(Boolean))).sort(),[D]),U=y.useMemo(()=>Array.from(new Set(D.flatMap(Q=>{var de;return((de=Q.locations)==null?void 0:de.map(ve=>ve.name))||[]}).filter(Boolean))).sort(),[D]),K=y.useMemo(()=>{const Q=[];return m.searchTerm&&Q.push({key:"searchTerm",label:`Search: ${m.searchTerm}`}),Array.isArray(m.locationFilter)&&m.locationFilter.forEach(de=>Q.push({key:"locationFilter",label:`Location: ${de}`,value:de})),Array.isArray(m.categoryFilter)&&m.categoryFilter.forEach(de=>Q.push({key:"categoryFilter",label:`Category: ${de}`,value:de})),m.grantTypeFilter&&Q.push({key:"grantTypeFilter",label:`Type: ${m.grantTypeFilter}`}),m.grantStatusFilter&&Q.push({key:"grantStatusFilter",label:`Status: ${m.grantStatusFilter}`}),Q},[m]),J=y.useCallback(Q=>{const de={...m};Q.key==="searchTerm"?de.searchTerm="":Q.key==="locationFilter"&&Array.isArray(de.locationFilter)?de.locationFilter=de.locationFilter.filter(ve=>ve!==Q.value):Q.key==="categoryFilter"&&Array.isArray(de.categoryFilter)?de.categoryFilter=de.categoryFilter.filter(ve=>ve!==Q.value):Q.key==="grantTypeFilter"?de.grantTypeFilter="":Q.key==="grantStatusFilter"&&(de.grantStatusFilter=""),p(de),b(1)},[m]),W={isMobileVisible:!0,searchTerm:m.searchTerm,setSearchTerm:Q=>P("searchTerm",Q),locationFilter:m.locationFilter,setLocationFilter:Q=>P("locationFilter",Q),categoryFilter:m.categoryFilter,setCategoryFilter:Q=>P("categoryFilter",Q),grantStatusFilter:m.grantStatusFilter,setGrantStatusFilter:Q=>P("grantStatusFilter",Q),grantTypeFilter:m.grantTypeFilter,setGrantTypeFilter:Q=>P("grantTypeFilter",Q),sortCriteria:m.sortCriteria,setSortCriteria:Q=>P("sortCriteria",Q),uniqueCategories:H,uniqueLocations:U,uniqueGrantTypes:Y,uniqueGrantStatuses:c1,pageType:"grants",onClearFilters:z,activeFilters:K,onRemoveFilter:J},ee=[{id:"saved",label:"Saved Grants",icon:zi,description:"Grants you've bookmarked",scope:"individual",color:"blue"},{id:"applications",label:"Applications",icon:zn,description:e!=null&&e.role&&["super_admin","admin"].includes(e.role)?"Organization applications":"Your applications",scope:e!=null&&e.role&&["super_admin","admin"].includes(e.role)?"organization":"individual",color:"orange"},{id:"received",label:"Received",icon:Ro,description:e!=null&&e.role&&["super_admin","admin"].includes(e.role)?"Organization awards":"Your awards",scope:e!=null&&e.role&&["super_admin","admin"].includes(e.role)?"organization":"individual",color:"green"}];return n.jsxs("div",{children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"flex flex-wrap gap-4",children:ee.map(Q=>{var He;const de=Q.icon,ve=s===Q.id,Pe={blue:ve?"bg-blue-500 text-white":"bg-blue-50 text-blue-700 hover:bg-blue-100",orange:ve?"bg-orange-500 text-white":"bg-orange-50 text-orange-700 hover:bg-orange-100",green:ve?"bg-green-500 text-white":"bg-green-50 text-green-700 hover:bg-green-100"};return n.jsxs("button",{onClick:()=>{r(Q.id),b(1)},className:`flex items-center gap-3 px-6 py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 ${Pe[Q.color]}`,children:[n.jsx(de,{size:20}),n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:Q.label}),n.jsx("span",{className:"text-xs px-2 py-1 bg-white/20 rounded-full",children:((He=j[Q.id])==null?void 0:He.length)||0})]}),n.jsxs("p",{className:"text-xs opacity-80 flex items-center gap-1",children:[Q.scope==="organization"?n.jsx(Ut,{size:12}):n.jsx(An,{size:12}),Q.description]})]})]},Q.id)})})}),s==="applications"?n.jsx($oe,{applications:D,onOpenDetailModal:q,onMarkAsReceived:M,onRemoveApplication:R}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold text-slate-800",children:(ne=ee.find(Q=>Q.id===s))==null?void 0:ne.label}),n.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 transition-colors text-sm",children:[n.jsx(jh,{className:"w-4 h-4"}),d?"Hide Filters":"Show Filters",K.length>0&&n.jsx("span",{className:"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-blue-600 bg-blue-100 rounded-full",children:K.length})]})]}),d&&n.jsx(Ec,{...W})]})}),w?n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nt,{className:"w-8 h-8 text-blue-500 animate-pulse mx-auto mb-4"}),n.jsx("p",{className:"text-slate-700 font-medium",children:"Loading..."})]})}):O.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:O.map(Q=>n.jsx(Toe,{grant:Q,onOpenDetailModal:q,onMarkAsApplied:A,onMarkAsReceived:M,onRemoveApplication:R,activeSection:s},`${s}-${Q.id}`))}),B>0&&n.jsx(k0,{currentPage:g,totalPages:B,onPageChange:V})]}):n.jsx("div",{className:"text-center py-16",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx(ot,{size:40,className:"text-slate-400"})}),n.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:["No ",(X=ee.find(Q=>Q.id===s))==null?void 0:X.label.toLowerCase()," found"]}),n.jsx("p",{className:"text-slate-600 mb-6",children:K.length>0?"Try adjusting your filters to see more results.":`You haven't ${s==="saved"?"saved any grants":s==="applications"?"applied to any grants":"received any grants"} yet.`}),K.length>0?n.jsxs("button",{onClick:z,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[n.jsx(sl,{size:16,className:"mr-2"}),"Clear All Filters"]}):n.jsxs("p",{className:"text-sm text-slate-500",children:[s==="saved"&&"Start exploring grants and bookmark the ones you're interested in.",s==="applications"&&"Grant applications will appear here once you start applying.",s==="received"&&"Successful grant awards will be tracked here."]})]})})]}),o&&a&&n.jsx(Kc,{grant:a,isOpen:o,onClose:I,session:t,isSaved:s==="saved",onSave:()=>{},onUnsave:()=>{}})]})},ig=({icon:t,title:e,description:s,actionButton:r,gradient:a})=>n.jsx("div",{className:"text-center py-16",children:n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-12 rounded-3xl border border-white/60 shadow-xl max-w-md mx-auto",children:[n.jsx("div",{className:`w-20 h-20 bg-gradient-to-r ${a} rounded-2xl flex items-center justify-center mx-auto mb-6`,children:n.jsx(t,{size:40,className:"text-white"})}),n.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:e}),n.jsx("p",{className:"text-slate-600 mb-6",children:s}),r||n.jsx("div",{className:"text-sm text-slate-500",children:"Coming Soon"})]})}),Voe=()=>n.jsx(ig,{icon:$s,title:"Create Funds",description:"Launch new funding programs and manage grant opportunities for your organization.",gradient:"from-purple-500 to-pink-600"}),qoe=()=>n.jsx(ig,{icon:Nt,title:"Request Funds",description:"Apply for funding support and submit grant applications to support your mission.",gradient:"from-teal-500 to-cyan-600"}),Hoe=()=>n.jsx(ig,{icon:qe,title:"Communities",description:"Connect with other organizations and engage with your funding community.",gradient:"from-orange-500 to-amber-600"}),Goe=()=>n.jsx(ig,{icon:Ut,title:"Organizations",description:"Explore your partner network and discover potential collaboration opportunities.",gradient:"from-rose-500 to-pink-600"}),Woe=({showCreateModal:t,setShowCreateModal:e})=>t?n.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-3xl max-w-2xl w-full shadow-2xl",children:[n.jsx("div",{className:"p-8 border-b border-slate-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Create New Grant"}),n.jsx("p",{className:"text-slate-600 mt-1",children:"Set up a new funding opportunity"})]}),n.jsx("button",{onClick:()=>e(!1),className:"p-2 text-slate-400 hover:text-slate-600 rounded-xl hover:bg-slate-100 transition-all",children:n.jsx(Ke,{size:24})})]})}),n.jsx("div",{className:"p-8",children:n.jsx("p",{className:"text-slate-600 text-center",children:"Grant creation form will be implemented here."})}),n.jsx("div",{className:"p-8 border-t border-slate-100 bg-slate-50/50",children:n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>e(!1),className:"flex-1 px-6 py-3 text-slate-600 hover:text-slate-800 font-semibold rounded-2xl hover:bg-white transition-all",children:"Cancel"}),n.jsx("button",{onClick:()=>e(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all hover:scale-105",children:"Create Grant"})]})})]})}):null,Yoe=()=>{const{profile:t,session:e}=_t(),[s,r]=y.useState(!1),[a,i]=y.useState(!0),[o,c]=y.useState(null),[d,h]=y.useState([]),[m,p]=y.useState(!0),[g,b]=y.useState(new Set),[v,N]=y.useState("explore"),[j,w]=y.useState(!1),[_,k]=y.useState(!1),[C,E]=y.useState("grid"),[A,M]=y.useState({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc",taxonomyFilter:[]}),[R,D]=y.useState(1),[L,B]=y.useState(12),[O,P]=y.useState(!1),[z,q]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t){i(!1);return}if(t.is_omega_admin===!0){r(!0),i(!1);return}try{const{data:ye}=await $.from("organization_memberships").select("*, organizations(*)").eq("profile_id",t.id).in("role",["super_admin","admin"]).limit(1).single();ye&&XY(ye.role,Or.MANAGE_MEMBERS,t.is_omega_admin)?(c(ye),r(!0)):r(!1)}catch(ye){console.error("Error checking permissions:",ye),r(!1)}i(!1)})()},[t]),y.useEffect(()=>{(async()=>{if(s){p(!0);try{const{data:ye,error:Oe}=await $.from("grants_with_taxonomy").select("*").order("id",{ascending:!1});if(Oe)console.error("Error fetching grants:",Oe),h([]);else{const Me=[...new Set(ye.map(ae=>ae.organization_id).filter(Boolean))],{data:it}=await $.from("organizations").select("id, name, image_url, banner_image_url, slug").in("id",Me),ft=ye.map(ae=>{const _e=it==null?void 0:it.find(Fe=>Fe.id===ae.organization_id);return{...ae,foundationName:ae.funder_name||"Unknown Funder",funderSlug:ae.funder_slug||(_e==null?void 0:_e.slug)||null,fundingAmount:ae.max_funding_amount||ae.funding_amount_text||"Not specified",dueDate:ae.deadline,grantType:ae.grant_type,eligibility_criteria:ae.eligibility_criteria,categories:ae.category_names?ae.category_names.map((Fe,$e)=>({id:$e,name:Fe})):[],locations:ae.location_names?ae.location_names.map((Fe,$e)=>({id:$e,name:Fe})):[],eligible_organization_types:ae.taxonomy_codes||[],organization:{image_url:(_e==null?void 0:_e.image_url)||ae.funder_logo_url||null,banner_image_url:(_e==null?void 0:_e.banner_image_url)||null},save_count:0}}),Te=ft.map(ae=>ae.id),ze=await Su(Te);ft.forEach(ae=>{ae.save_count=ze[ae.id]||0}),h(ft)}}catch(ye){console.error("Error loading grants:",ye),h([])}p(!1)}})()},[s]),y.useEffect(()=>{if(!e)return;(async()=>{const{data:ye,error:Oe}=await $.from("saved_grants").select("grant_id").eq("user_id",e.user.id);Oe?console.error("Error fetching saved grants:",Oe):b(new Set(ye.map(Me=>Me.grant_id)))})()},[e]);const I=async ce=>{if(e){b(ye=>new Set(ye).add(ce)),h(ye=>ye.map(Oe=>Oe.id===ce?{...Oe,save_count:(Oe.save_count||0)+1}:Oe));try{const{error:ye}=await $.from("saved_grants").insert({user_id:e.user.id,grant_id:ce});ye&&(console.error("Error saving grant:",ye),b(Oe=>{const Me=new Set(Oe);return Me.delete(ce),Me}),h(Oe=>Oe.map(Me=>Me.id===ce?{...Me,save_count:Math.max(0,(Me.save_count||1)-1)}:Me)))}catch(ye){console.error("Error saving grant:",ye)}}},V=async ce=>{if(e){b(ye=>{const Oe=new Set(ye);return Oe.delete(ce),Oe}),h(ye=>ye.map(Oe=>Oe.id===ce?{...Oe,save_count:Math.max(0,(Oe.save_count||1)-1)}:Oe));try{const{error:ye}=await $.from("saved_grants").delete().match({user_id:e.user.id,grant_id:ce});ye&&(console.error("Error unsaving grant:",ye),b(Oe=>new Set(Oe).add(ce)),h(Oe=>Oe.map(Me=>Me.id===ce?{...Me,save_count:(Me.save_count||0)+1}:Me)))}catch(ye){console.error("Error unsaving grant:",ye)}}},H=y.useCallback(ce=>{q(ce),P(!0)},[]),Y=y.useCallback(()=>{q(null),P(!1)},[]),U=y.useMemo(()=>Array.from(new Set(d.flatMap(ce=>{var ye;return((ye=ce.categories)==null?void 0:ye.map(Oe=>Oe.name))||[]}).filter(Boolean))).sort(),[d]),K=y.useMemo(()=>Array.from(new Set(d.map(ce=>ce.grantType).filter(Boolean))).sort(),[d]),J=y.useMemo(()=>Array.from(new Set(d.flatMap(ce=>{var ye;return((ye=ce.locations)==null?void 0:ye.map(Oe=>Oe.name))||[]}).filter(Boolean))).sort(),[d]),{paginatedItems:W=[],totalPages:ee,totalFilteredItems:ne,filteredAndSortedItems:X}=d1(d,A,SE,A.sortCriteria,BV,R,L),Q=ce=>{if(!ce.dueDate)return!0;const ye=new Date;return ye.setHours(0,0,0,0),new Date(ce.dueDate)>=ye},de=y.useMemo(()=>X?X.filter(Q).reduce((ce,ye)=>{const Oe=ye.max_funding_amount||"0";return ce+Kn(Oe.toString())},0):0,[X]),ve=y.useCallback((ce,ye)=>{M(Oe=>({...Oe,[ce]:ye})),D(1)},[]),Pe=y.useCallback(ce=>{ve("taxonomyFilter",ce)},[ve]),He=y.useCallback(ce=>{const ye={...A,searchTerm:ce.text};ce.type==="category"&&!A.categoryFilter.includes(ce.text)&&(ye.categoryFilter=[...A.categoryFilter,ce.text]),M(ye),D(1)},[A]),Qe=y.useCallback(ce=>{const Oe=A.categoryFilter.includes(ce)?A.categoryFilter.filter(Me=>Me!==ce):[...A.categoryFilter,ce];ve("categoryFilter",Oe)},[A.categoryFilter,ve]),be=y.useCallback(ce=>{ce<1||ee>0&&ce>ee||D(ce)},[ee]),se=y.useCallback(ce=>{B(Number(ce.target.value)),D(1)},[]),le=y.useCallback(()=>{M({searchTerm:"",locationFilter:[],categoryFilter:[],grantTypeFilter:"",grantStatusFilter:"",sortCriteria:"dueDate_asc",taxonomyFilter:[]}),D(1)},[]),ge=y.useCallback((ce,ye)=>{ce==="categoryFilter"||ce==="locationFilter"||ce==="taxonomyFilter"?ve(ce,A[ce].filter(Oe=>Oe!==ye)):ve(ce,"")},[A,ve]),te=y.useMemo(()=>{let ce=[];return A.searchTerm&&ce.push({key:"searchTerm",label:`Search: "${A.searchTerm}"`}),A.locationFilter.length>0&&(ce=ce.concat(A.locationFilter.map(ye=>({key:"locationFilter",label:`Location: ${ye}`,value:ye})))),A.categoryFilter.length>0&&(ce=ce.concat(A.categoryFilter.map(ye=>({key:"categoryFilter",label:`Category: ${ye}`,value:ye})))),A.taxonomyFilter.length>0&&(ce=ce.concat(A.taxonomyFilter.map(ye=>({key:"taxonomyFilter",label:`Org Type: ${ye}`,value:ye})))),A.grantTypeFilter&&ce.push({key:"grantTypeFilter",label:`Type: ${A.grantTypeFilter}`}),A.grantStatusFilter&&ce.push({key:"grantStatusFilter",label:`Status: ${A.grantStatusFilter}`}),ce},[A]),xe={searchTerm:A.searchTerm,onSuggestionSelect:He,onSearchChange:ce=>ve("searchTerm",ce),locationFilter:A.locationFilter,setLocationFilter:ce=>ve("locationFilter",ce),categoryFilter:A.categoryFilter,setCategoryFilter:ce=>ve("categoryFilter",ce),grantStatusFilter:A.grantStatusFilter,setGrantStatusFilter:ce=>ve("grantStatusFilter",ce),grantTypeFilter:A.grantTypeFilter,setGrantTypeFilter:ce=>ve("grantTypeFilter",ce),sortCriteria:A.sortCriteria,setSortCriteria:ce=>ve("sortCriteria",ce),taxonomyFilter:A.taxonomyFilter,setTaxonomyFilter:Pe,uniqueCategories:U,uniqueLocations:J,uniqueGrantTypes:K,uniqueGrantStatuses:c1,pageType:"grants",onClearFilters:le,activeFilters:te,onRemoveFilter:ge},De=ce=>ce>=1e6?`${(ce/1e6).toFixed(1)}M`:ce>=1e3?`${(ce/1e3).toFixed(0)}K`:`${ce.toLocaleString()}`,Ee=()=>{switch(v){case"explore":return n.jsx(koe,{showFilters:_,setShowFilters:k,filterConfig:A,handleFilterChange:ve,activeGrantFilters:te,loading:m,currentList:W,totalFilteredItems:ne,totalFilteredFunding:de,grantsPerPage:L,handlePerPageChange:se,viewMode:C,setViewMode:E,totalPages:ee,currentPage:R,paginate:be,handleClearFilters:le,session:e,savedGrantIds:g,handleSaveGrant:I,handleUnsaveGrant:V,openDetail:H,handleFilterByCategory:Qe,filterBarProps:xe,formatCurrency:De});case"track":return n.jsx(Uoe,{session:e,userMembership:o});case"communities":return n.jsx(Hoe,{});case"organizations":return n.jsx(Goe,{});case"create":return n.jsx(Voe,{});case"request":return n.jsx(qoe,{});default:return null}};return n.jsx(yoe,{checkingAccess:a,hasAccess:s,children:n.jsxs("div",{className:"min-h-screen",children:[n.jsxs("div",{className:"px-2 lg:px-4 py-8",children:[n.jsx(woe,{userMembership:o}),n.jsx(Noe,{activeTab:v,setActiveTab:N,userMembership:o}),Ee()]}),n.jsx(Woe,{showCreateModal:j,setShowCreateModal:w}),O&&z&&n.jsx(Kc,{grant:z,isOpen:O,onClose:Y,session:e,isSaved:g.has(z.id),onSave:I,onUnsave:V})]})})},yn=y.createContext({setPageBgColor:()=>{}}),Koe=({children:t})=>{const{session:e,profile:s,loading:r}=_t(),a=vn();return r?t:e&&s&&a.pathname==="/"&&a.search===""?n.jsx(Aw,{to:"/profile",replace:!0}):t},I4=({children:t})=>{const{session:e,profile:s,loading:r}=_t();return r?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading your dashboard..."})]})}):!e||!s?n.jsx(Aw,{to:"/login",replace:!0}):t},B4=({children:t})=>{var i,o;const{session:e,profile:s,loading:r}=_t(),a=vn();return r?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-orange-50 to-yellow-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):e&&s?n.jsx(Aw,{to:((o=(i=a.state)==null?void 0:i.from)==null?void 0:o.pathname)||"/profile",replace:!0}):t},Joe=()=>{const{session:t,profile:e,notifications:s,unreadCount:r,markNotificationsAsRead:a,handleClearAllNotifications:i,handleViewPost:o,refreshProfile:c}=_t(),[d,h]=y.useState("bg-white");return n.jsx(yn.Provider,{value:{setPageBgColor:h},children:n.jsxs("div",{className:`min-h-screen ${d} font-sans text-slate-800 flex flex-col`,children:[t&&e?n.jsx(uoe,{profile:e,notifications:s,unreadCount:r,onPanelToggle:a,onClearAllNotifications:i,onViewPost:o}):n.jsx(nT,{}),n.jsx("main",{className:"flex-1",children:n.jsx(Tw,{context:{session:t,profile:e,notifications:s,unreadCount:r,markNotificationsAsRead:a,handleClearAllNotifications:i,handleViewPost:o,refreshProfile:c}})}),n.jsx(rT,{})]})})};function Xoe(){const t=bt(),e=()=>{t("/login",{state:{message:"Password updated successfully! You can now sign in."}})};return n.jsx(aT,{children:n.jsx(goe,{onResetSuccess:e})})}function Qoe(){var j;const[t,e]=y.useState(null),[s,r]=y.useState(null),[a,i]=y.useState(!0),[o,c]=y.useState([]),[d,h]=y.useState(0),m=async w=>{var _;if(!w){r(null),c([]),h(0),i(!1);return}try{const[k,C]=await Promise.all([$.from("profiles").select("*").eq("id",w.user.id).single(),$.from("notifications").select(`
          id, type, post_id, organization_post_id, is_read, created_at,
          actor_id:profiles!notifications_actor_id_fkey (id, full_name, avatar_url, title, organization_name)
        `,{count:"exact"}).eq("user_id",w.user.id).order("created_at",{ascending:!1}).limit(50)]);r(k.data||null),c(C.data||[]),h(((_=C.data)==null?void 0:_.filter(E=>!E.is_read).length)||0)}catch(k){console.error("Error fetching session data:",k)}finally{i(!1)}},p=async()=>{var w;if((w=t==null?void 0:t.user)!=null&&w.id)try{const{data:_,error:k}=await $.from("profiles").select("*").eq("id",t.user.id).single();!k&&_&&r(_)}catch(_){console.error("Error refreshing profile:",_)}},g=async()=>{var w;if((w=t==null?void 0:t.user)!=null&&w.id)try{const{success:_}=await L7(t.user.id);_&&(c([]),h(0))}catch(_){console.error("Error clearing notifications:",_)}},b=async(w,_=!1)=>{const k=_?`[data-organization-post-id="${w}"]`:`[data-post-id="${w}"]`;if(!_){const C=new URL(window.location);C.searchParams.set("highlight",w),window.history.pushState({},"",C)}setTimeout(()=>{const C=document.querySelector(k);C&&(C.scrollIntoView({behavior:"smooth",block:"center"}),C.classList.add("highlight-post"),setTimeout(()=>C.classList.remove("highlight-post"),3e3))},100)},v=async()=>{if(d===0||!t)return;const w=o.filter(_=>!_.is_read).map(_=>_.id);if(w.length!==0)try{await $.from("notifications").update({is_read:!0}).in("id",w),h(0),c(_=>_.map(k=>({...k,is_read:!0})))}catch(_){console.error("Error marking notifications as read:",_)}};y.useEffect(()=>{(async()=>{i(!0);try{const{data:{session:k}}=await $.auth.getSession();e(k),await m(k)}catch(k){console.error("Error getting initial session:",k)}})();const{data:{subscription:_}}=$.auth.onAuthStateChange((k,C)=>{e(C),m(C)});return()=>_.unsubscribe()},[]),y.useEffect(()=>{var _;if(!((_=t==null?void 0:t.user)!=null&&_.id))return;const w=$.channel(`profile-notifications:${t.user.id}`);return w.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t.user.id}`},async k=>{try{const{data:C}=await $.from("profiles").select("*").eq("id",k.new.actor_id).single();C&&(c(E=>[{...k.new,actor_id:C},...E]),h(E=>E+1))}catch(C){console.error("Error processing notification:",C)}}).subscribe(k=>{k==="CHANNEL_ERROR"&&console.error("Notifications subscription error")}),()=>{w&&(w.unsubscribe(),$.removeChannel(w))}},[(j=t==null?void 0:t.user)==null?void 0:j.id]);const N={session:t,profile:s,loading:a,notifications:o,unreadCount:d,markNotificationsAsRead:v,handleClearAllNotifications:g,handleViewPost:b,refreshProfile:p};return n.jsxs(wz,{children:[n.jsx(Mz,{}),n.jsx(JP,{children:n.jsxs(lt,{element:n.jsx(Tw,{context:N}),children:[n.jsx(lt,{path:"/login",element:n.jsx(B4,{children:n.jsx(JY,{})})}),n.jsx(lt,{path:"/signup",element:n.jsx(B4,{children:n.jsx(loe,{})})}),n.jsx(lt,{path:"/reset-password",element:n.jsx(Xoe,{})}),n.jsxs(lt,{path:"/",element:n.jsx(Joe,{}),children:[n.jsx(lt,{index:!0,element:n.jsx(Koe,{children:n.jsx(Y7,{})})}),n.jsx(lt,{path:"grants",element:n.jsx(ck,{})}),n.jsx(lt,{path:"organizations",element:n.jsx(uk,{})}),n.jsx(lt,{path:"spotlight",element:n.jsx(EY,{})}),n.jsx(lt,{path:"spotlight/:countySlug",element:n.jsx(AY,{})}),n.jsx(lt,{path:"spotlight/:countySlug/:citySlug",element:n.jsx(TY,{})}),n.jsx(lt,{path:"about",element:n.jsx(OY,{})}),n.jsx(lt,{path:"contact",element:n.jsx(RY,{})}),n.jsx(lt,{path:"how-it-works",element:n.jsx(DY,{})}),n.jsx(lt,{path:"for-seekers",element:n.jsx(LY,{})}),n.jsx(lt,{path:"for-funders",element:n.jsx(IY,{})}),n.jsx(lt,{path:"faq",element:n.jsx(qY,{})}),n.jsx(lt,{path:"submit-grant",element:n.jsx(HY,{})}),n.jsx(lt,{path:"roadmap",element:n.jsx(UY,{})}),n.jsx(lt,{path:"profile/:profileId",element:n.jsx(w4,{})}),n.jsx(lt,{path:"organizations/:slug",element:n.jsx(aoe,{})}),n.jsxs(lt,{path:"profile",element:n.jsx(I4,{children:n.jsx(iK,{})}),children:[n.jsx(lt,{index:!0,element:n.jsx(qre,{})}),n.jsx(lt,{path:"hello-world",element:n.jsx(hae,{})}),n.jsx(lt,{path:"grants",element:n.jsx(ck,{hideHero:!0,isProfileView:!0})}),n.jsx(lt,{path:"organizations",element:n.jsx(uk,{isProfileView:!0})}),n.jsx(lt,{path:"members",element:n.jsx(kK,{})}),n.jsx(lt,{path:"grants-portal",element:n.jsx(Yoe,{})}),n.jsx(lt,{path:"hello-community",element:n.jsx(bae,{})}),n.jsx(lt,{path:"settings",element:n.jsx(SK,{})}),n.jsx(lt,{path:"followers",element:n.jsx(vae,{})}),n.jsx(lt,{path:"following",element:n.jsx(yae,{})}),n.jsx(lt,{path:"connections",element:n.jsx(xoe,{})}),n.jsx(lt,{path:"my-organization",element:n.jsx(Rie,{})}),n.jsx(lt,{path:"omega-admin",element:n.jsx(wae,{})}),n.jsx(lt,{path:"omega-admin/analytics",element:n.jsx(jae,{})}),n.jsx(lt,{path:"omega-admin/organizations",element:n.jsx(Nae,{})}),n.jsx(lt,{path:"omega-admin/organizations/edit/:orgType/:orgId",element:n.jsx(Sae,{})}),n.jsx(lt,{path:"omega-admin/organizations/members/:orgType/:orgId",element:n.jsx(_ae,{})}),n.jsx(lt,{path:"notifications",element:n.jsx(poe,{})}),n.jsx(lt,{path:"members/:profileId",element:n.jsx(w4,{})})]}),n.jsx(lt,{path:"/onboarding",element:n.jsx(I4,{children:n.jsx(coe,{})})})]})]})})]})}rP.createRoot(document.getElementById("root")).render(n.jsx(Ps.StrictMode,{children:n.jsx(Qoe,{})}));export{is as A,tl as C,$r as M,MK as P,vre as R,Ww as S,RK as T,Ke as X,zo as a,da as b,y0 as c,Bj as d,n as j,y as r,$ as s,bt as u};
